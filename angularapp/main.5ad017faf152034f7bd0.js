(self.webpackChunktpclinica=self.webpackChunktpclinica||[]).push([[179],{8255:t=>{function e(t){return Promise.resolve().then(()=>{var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}e.keys=()=>[],e.resolve=e,e.id=8255,t.exports=e},5366:(t,e,n)=>{"use strict";n.d(e,{deG:()=>Je,tb:()=>$a,AFp:()=>Za,ip1:()=>za,CZH:()=>Ha,hGG:()=>zu,z2F:()=>Du,sBO:()=>ta,Sil:()=>uu,_Vd:()=>Es,EJc:()=>tu,SBq:()=>ks,qLn:()=>fr,vpe:()=>ka,gxx:()=>Wi,tBr:()=>vn,XFs:()=>A,OlP:()=>$e,zs3:()=>uo,ZZ4:()=>Ws,aQg:()=>Qs,soG:()=>Xa,YKP:()=>la,v3s:()=>Fu,h0i:()=>ca,PXZ:()=>Au,R0b:()=>hu,FiY:()=>_n,Lbi:()=>Ya,g9A:()=>Qa,Qsj:()=>Ps,FYo:()=>Rs,JOm:()=>mr,Tiy:()=>Ns,q3G:()=>sr,tp0:()=>wn,EAV:()=>qu,Rgc:()=>oa,dDg:()=>vu,DyG:()=>Xe,q4F:()=>Ls,GfV:()=>Ds,s_b:()=>da,ifc:()=>L,eFA:()=>Ru,G48:()=>Iu,Gpc:()=>f,X6Q:()=>xu,_c5:()=>Bu,VLi:()=>bu,c2e:()=>Ja,zSh:()=>Qi,wAp:()=>ls,vHH:()=>m,EiD:()=>ir,mCW:()=>jn,qzn:()=>Rn,JVY:()=>On,pB0:()=>Fn,eBb:()=>Dn,L6k:()=>Nn,LAX:()=>Ln,cg1:()=>as,Tjo:()=>ju,kL8:()=>us,yhl:()=>Pn,dqk:()=>V,sIi:()=>vo,CqO:()=>Oo,QGY:()=>Ro,F4k:()=>Po,RDi:()=>Et,AaK:()=>l,z3N:()=>An,qOj:()=>lo,TTD:()=>vt,_Bn:()=>bs,xp6:()=>Xr,uIk:()=>bo,Tol:()=>zo,ekj:()=>Go,Suo:()=>ja,Xpm:()=>$,lG2:()=>it,Yz7:()=>w,cJS:()=>b,oAB:()=>et,Yjl:()=>ot,Y36:()=>To,_UZ:()=>ko,qZA:()=>Io,TgZ:()=>xo,EpF:()=>Ao,n5z:()=>Ze,Ikx:()=>rs,LFG:()=>gn,$8M:()=>Ke,NdJ:()=>No,CRH:()=>Ba,oxw:()=>Fo,Q6J:()=>Eo,iGM:()=>Va,CHM:()=>jt,LSH:()=>ar,kYT:()=>nt,YNc:()=>Co,_uU:()=>ts,Oqu:()=>es,hij:()=>ns});var r=n(5959),i=n(7570),o=n(8318),s=n(1906),a=n(1055);function u(t){for(let e in t)if(t[e]===u)return e;throw Error("Could not find renamed property on target object.")}function c(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function l(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(l).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function h(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const d=u({__forward_ref__:u});function f(t){return t.__forward_ref__=f,t.toString=function(){return l(this())},t}function p(t){return g(t)?t():t}function g(t){return"function"==typeof t&&t.hasOwnProperty(d)&&t.__forward_ref__===f}class m extends Error{constructor(t,e){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(t,e)),this.code=t}}function y(t){return"string"==typeof t?t:null==t?"":String(t)}function v(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():y(t)}function _(t,e){const n=e?` in ${e}`:"";throw new m("201",`No provider for ${v(t)} found${n}`)}function w(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function b(t){return{providers:t.providers||[],imports:t.imports||[]}}function C(t){return T(t,S)||T(t,I)}function T(t,e){return t.hasOwnProperty(e)?t[e]:null}function E(t){return t&&(t.hasOwnProperty(x)||t.hasOwnProperty(k))?t[x]:null}const S=u({"\u0275prov":u}),x=u({"\u0275inj":u}),I=u({ngInjectableDef:u}),k=u({ngInjectorDef:u});var A=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});let R;function P(t){const e=R;return R=t,e}function O(t,e,n){const r=C(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&A.Optional?null:void 0!==e?e:void _(l(t),"Injector")}function N(t){return{toString:t}.toString()}var D=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),L=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const F="undefined"!=typeof globalThis&&globalThis,U="undefined"!=typeof window&&window,M="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,q="undefined"!=typeof global&&global,V=F||q||U||M,j={},B=[],G=u({"\u0275cmp":u}),z=u({"\u0275dir":u}),H=u({"\u0275pipe":u}),Z=u({"\u0275mod":u}),W=u({"\u0275loc":u}),K=u({"\u0275fac":u}),Q=u({__NG_ELEMENT_ID__:u});let Y=0;function $(t){return N(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===D.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||B,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||L.Emulated,id:"c",styles:t.styles||B,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,o=t.pipes;return n.id+=Y++,n.inputs=rt(t.inputs,e),n.outputs=rt(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(J):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map(X):null,n})}function J(t){return st(t)||function(t){return t[z]||null}(t)}function X(t){return function(t){return t[H]||null}(t)}const tt={};function et(t){const e={type:t.type,bootstrap:t.bootstrap||B,declarations:t.declarations||B,imports:t.imports||B,exports:t.exports||B,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&N(()=>{tt[t.id]=t.type}),e}function nt(t,e){return N(()=>{const n=at(t,!0);n.declarations=e.declarations||B,n.imports=e.imports||B,n.exports=e.exports||B})}function rt(t,e){if(null==t)return j;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const it=$;function ot(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function st(t){return t[G]||null}function at(t,e){const n=t[Z]||null;if(!n&&!0===e)throw new Error(`Type ${l(t)} does not have '\u0275mod' property.`);return n}const ut=20,ct=10;function lt(t){return Array.isArray(t)&&"object"==typeof t[1]}function ht(t){return Array.isArray(t)&&!0===t[1]}function dt(t){return 0!=(8&t.flags)}function ft(t){return 2==(2&t.flags)}function pt(t){return 1==(1&t.flags)}function gt(t){return null!==t.template}function mt(t,e){return t.hasOwnProperty(K)?t[K]:null}class yt{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function vt(){return _t}function _t(t){return t.type.prototype.ngOnChanges&&(t.setInput=bt),wt}function wt(){const t=Ct(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===j)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function bt(t,e,n,r){const i=Ct(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:j,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],u=s[a];o[a]=new yt(u&&u.currentValue,e,s===j),t[r]=e}function Ct(t){return t.__ngSimpleChanges__||null}let Tt;function Et(t){Tt=t}function St(t){return!!t.listen}vt.ngInherit=!0;const xt={createRenderer:(t,e)=>void 0!==Tt?Tt:"undefined"!=typeof document?document:void 0};function It(t){for(;Array.isArray(t);)t=t[0];return t}function kt(t,e){return It(e[t])}function At(t,e){return It(e[t.index])}function Rt(t,e){return t.data[e]}function Pt(t,e){const n=e[t];return lt(n)?n:n[0]}function Ot(t){return 4==(4&t[2])}function Nt(t){return 128==(128&t[2])}function Dt(t,e){return null==e?null:t[e]}function Lt(t){t[18]=0}function Ft(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const Ut={lFrame:ie(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Mt(){return Ut.bindingsEnabled}function qt(){return Ut.lFrame.lView}function Vt(){return Ut.lFrame.tView}function jt(t){return Ut.lFrame.contextLView=t,t[8]}function Bt(){let t=Gt();for(;null!==t&&64===t.type;)t=t.parent;return t}function Gt(){return Ut.lFrame.currentTNode}function zt(t,e){const n=Ut.lFrame;n.currentTNode=t,n.isParent=e}function Ht(){return Ut.lFrame.isParent}function Zt(){return Ut.isInCheckNoChangesMode}function Wt(t){Ut.isInCheckNoChangesMode=t}function Kt(){return Ut.lFrame.bindingIndex++}function Qt(t){const e=Ut.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function Yt(t,e){const n=Ut.lFrame;n.bindingIndex=n.bindingRootIndex=t,$t(e)}function $t(t){Ut.lFrame.currentDirectiveIndex=t}function Jt(){return Ut.lFrame.currentQueryIndex}function Xt(t){Ut.lFrame.currentQueryIndex=t}function te(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function ee(t,e,n){if(n&A.SkipSelf){let r=e,i=t;for(;r=r.parent,!(null!==r||n&A.Host||(r=te(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;e=r,t=i}const r=Ut.lFrame=re();return r.currentTNode=e,r.lView=t,!0}function ne(t){const e=re(),n=t[1];Ut.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function re(){const t=Ut.lFrame,e=null===t?null:t.child;return null===e?ie(t):e}function ie(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function oe(){const t=Ut.lFrame;return Ut.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const se=oe;function ae(){const t=oe();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function ue(){return Ut.lFrame.selectedIndex}function ce(t){Ut.lFrame.selectedIndex=t}function le(){const t=Ut.lFrame;return Rt(t.tView,t.selectedIndex)}function he(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:o,ngAfterViewChecked:s,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),o&&(t.viewHooks||(t.viewHooks=[])).push(-n,o),s&&((t.viewHooks||(t.viewHooks=[])).push(n,s),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,s)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function de(t,e,n){ge(t,e,3,n)}function fe(t,e,n,r){(3&t[2])===n&&ge(t,e,n,r)}function pe(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function ge(t,e,n,r){const i=null!=r?r:-1,o=e.length-1;let s=0;for(let a=void 0!==r?65535&t[18]:0;a<o;a++)if("number"==typeof e[a+1]){if(s=e[a],null!=r&&s>=r)break}else e[a]<0&&(t[18]+=65536),(s<i||-1==i)&&(me(t,n,e,a),t[18]=(4294901760&t[18])+a+2),a++}function me(t,e,n,r){const i=n[r]<0,o=n[r+1],s=t[i?-n[r]:n[r]];if(i){if(t[2]>>11<t[18]>>16&&(3&t[2])===e){t[2]+=2048;try{o.call(s)}finally{}}}else try{o.call(s)}finally{}}const ye=-1;class ve{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function _e(t,e,n){const r=St(t);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,s):e.setAttributeNS(s,a,u)}else{const s=o,a=n[++i];be(s)?r&&t.setProperty(e,s,a):r?t.setAttribute(e,s,a):e.setAttribute(s,a),i++}}return i}function we(t){return 3===t||4===t||6===t}function be(t){return 64===t.charCodeAt(0)}function Ce(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Te(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Te(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const n=t[o++];if("number"==typeof n){if(n===e){s=-1;break}if(n>e){s=o-1;break}}}for(;o<t.length;){const e=t[o];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function Ee(t){return t!==ye}function Se(t){return 32767&t}function xe(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}let Ie=!0;function ke(t){const e=Ie;return Ie=t,e}let Ae=0;function Re(t,e){const n=Oe(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,Pe(r.data,t),Pe(e,null),Pe(r.blueprint,null));const i=Ne(t,e),o=t.injectorIndex;if(Ee(i)){const t=Se(i),n=xe(i,e),r=n[1].data;for(let i=0;i<8;i++)e[o+i]=n[t+i]|r[t+i]}return e[o+8]=i,o}function Pe(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Oe(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Ne(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(r=2===e?t.declTNode:1===e?i[6]:null,null===r)return ye;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return ye}function De(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Q)&&(r=n[Q]),null==r&&(r=n[Q]=Ae++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function Le(t,e,n){if(n&A.Optional)return t;_(e,"NodeInjector")}function Fe(t,e,n,r){if(n&A.Optional&&void 0===r&&(r=null),0==(n&(A.Self|A.Host))){const i=t[9],o=P(void 0);try{return i?i.get(e,r,n&A.Optional):O(e,r,n&A.Optional)}finally{P(o)}}return Le(r,e,n)}function Ue(t,e,n,r=A.Default,i){if(null!==t){const o=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Q)?t[Q]:void 0;return"number"==typeof e?e>=0?255&e:qe:e}(n);if("function"==typeof o){if(!ee(e,t,r))return r&A.Host?Le(i,n,r):Fe(e,n,r,i);try{const t=o(r);if(null!=t||r&A.Optional)return t;_(n)}finally{se()}}else if("number"==typeof o){let i=null,s=Oe(t,e),a=ye,u=r&A.Host?e[16][6]:null;for((-1===s||r&A.SkipSelf)&&(a=-1===s?Ne(t,e):e[s+8],a!==ye&&ze(r,!1)?(i=e[1],s=Se(a),e=xe(a,e)):s=-1);-1!==s;){const t=e[1];if(Ge(o,s,t.data)){const t=Ve(s,e,n,i,r,u);if(t!==Me)return t}a=e[s+8],a!==ye&&ze(r,e[1].data[s+8]===u)&&Ge(o,s,e)?(i=t,s=Se(a),e=xe(a,e)):s=-1}}}return Fe(e,n,r,i)}const Me={};function qe(){return new He(Bt(),qt())}function Ve(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],u=je(a,s,n,null==r?ft(a)&&Ie:r!=s&&0!=(3&a.type),i&A.Host&&o===a);return null!==u?Be(e,s,u,a):Me}function je(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,u=t.directiveStart,c=o>>20,l=i?a+c:t.directiveEnd;for(let h=r?a:a+c;h<l;h++){const t=s[h];if(h<u&&n===t||h>=u&&t.type===n)return h}if(i){const t=s[u];if(t&&gt(t)&&t.type===n)return u}return null}function Be(t,e,n,r){let i=t[n];const o=e.data;if(i instanceof ve){const s=i;s.resolving&&function(t,e){throw new m("200",`Circular dependency in DI detected for ${t}`)}(v(o[n]));const a=ke(s.canSeeViewProviders);s.resolving=!0;const u=s.injectImpl?P(s.injectImpl):null;ee(t,r,A.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const r=_t(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{null!==u&&P(u),ke(a),s.resolving=!1,se()}}return i}function Ge(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function ze(t,e){return!(t&A.Self||t&A.Host&&e)}class He{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return Ue(this._tNode,this._lView,t,void 0,e)}}function Ze(t){return N(()=>{const e=t.prototype.constructor,n=e[K]||We(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const t=i[K]||We(i);if(t&&t!==n)return t;i=Object.getPrototypeOf(i)}return t=>new t})}function We(t){return g(t)?()=>{const e=We(p(t));return e&&e()}:mt(t)}function Ke(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(we(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(Bt(),t)}const Qe="__parameters__";function Ye(t,e,n){return N(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty(Qe)?t[Qe]:Object.defineProperty(t,Qe,{value:[]})[Qe];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class $e{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=w({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Je=new $e("AnalyzeForEntryComponents"),Xe=Function;function tn(t,e){void 0===e&&(e=t);for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)?(e===t&&(e=t.slice(0,n)),tn(r,e)):e!==t&&e.push(r)}return e}function en(t,e){t.forEach(t=>Array.isArray(t)?en(t,e):e(t))}function nn(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function rn(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function on(t,e,n){let r=an(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function sn(t,e){const n=an(t,e);if(n>=0)return t[1|n]}function an(t,e){return function(t,e,n){let r=0,i=t.length>>1;for(;i!==r;){const n=r+(i-r>>1),o=t[n<<1];if(e===o)return n<<1;o>e?i=n:r=n+1}return~(i<<1)}(t,e)}const un={},cn=/\n/gm,ln="__source",hn=u({provide:String,useValue:u});let dn;function fn(t){const e=dn;return dn=t,e}function pn(t,e=A.Default){if(void 0===dn)throw new Error("inject() must be called from an injection context");return null===dn?O(t,void 0,e):dn.get(t,e&A.Optional?null:void 0,e)}function gn(t,e=A.Default){return(R||pn)(p(t),e)}function mn(t){const e=[];for(let n=0;n<t.length;n++){const r=p(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t,n=A.Default;for(let e=0;e<r.length;e++){const i=r[e],o=i.__NG_DI_FLAG__;"number"==typeof o?-1===o?t=i.token:n|=o:t=i}e.push(gn(t,n))}else e.push(gn(r))}return e}function yn(t,e){return t.__NG_DI_FLAG__=e,t.prototype.__NG_DI_FLAG__=e,t}const vn=yn(Ye("Inject",t=>({token:t})),-1),_n=yn(Ye("Optional"),8),wn=yn(Ye("SkipSelf"),4);let bn;function Cn(t){var e;return(null===(e=function(){if(void 0===bn&&(bn=null,V.trustedTypes))try{bn=V.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(e){}return bn}())||void 0===e?void 0:e.createHTML(t))||t}class Tn{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class En extends Tn{getTypeName(){return"HTML"}}class Sn extends Tn{getTypeName(){return"Style"}}class xn extends Tn{getTypeName(){return"Script"}}class In extends Tn{getTypeName(){return"URL"}}class kn extends Tn{getTypeName(){return"ResourceURL"}}function An(t){return t instanceof Tn?t.changingThisBreaksApplicationSecurity:t}function Rn(t,e){const n=Pn(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===e}function Pn(t){return t instanceof Tn&&t.getTypeName()||null}function On(t){return new En(t)}function Nn(t){return new Sn(t)}function Dn(t){return new xn(t)}function Ln(t){return new In(t)}function Fn(t){return new kn(t)}class Un{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(Cn(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class Mn{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=Cn(t),e;const n=this.inertDocument.createElement("body");return n.innerHTML=Cn(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const qn=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Vn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function jn(t){return(t=String(t)).match(qn)||t.match(Vn)?t:"unsafe:"+t}function Bn(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function Gn(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const zn=Bn("area,br,col,hr,img,wbr"),Hn=Bn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Zn=Bn("rp,rt"),Wn=Gn(Zn,Hn),Kn=Gn(zn,Gn(Hn,Bn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Gn(Zn,Bn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Wn),Qn=Bn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Yn=Bn("srcset"),$n=Gn(Qn,Yn,Bn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Bn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Jn=Bn("script,style,template");class Xn{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!Kn.hasOwnProperty(e))return this.sanitizedSomething=!0,!Jn.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let i=0;i<n.length;i++){const t=n.item(i),e=t.name,o=e.toLowerCase();if(!$n.hasOwnProperty(o)){this.sanitizedSomething=!0;continue}let s=t.value;Qn[o]&&(s=jn(s)),Yn[o]&&(r=s,s=(r=String(r)).split(",").map(t=>jn(t.trim())).join(", ")),this.buf.push(" ",e,'="',nr(s),'"')}var r;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();Kn.hasOwnProperty(e)&&!zn.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(nr(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const tr=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,er=/([^\#-~ |!])/g;function nr(t){return t.replace(/&/g,"&amp;").replace(tr,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(er,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let rr;function ir(t,e){let n=null;try{rr=rr||function(t){const e=new Mn(t);return function(){try{return!!(new window.DOMParser).parseFromString(Cn(""),"text/html")}catch(t){return!1}}()?new Un(e):e}(t);let r=e?String(e):"";n=rr.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=rr.getInertBodyElement(r)}while(r!==o);return Cn((new Xn).sanitizeChildren(or(n)||n))}finally{if(n){const t=or(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function or(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var sr=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function ar(t){const e=function(){const t=qt();return t&&t[12]}();return e?e.sanitize(sr.URL,t)||"":Rn(t,"URL")?An(t):jn(y(t))}function ur(t,e){t.__ngContext__=e}function cr(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function lr(t){return t.ngDebugContext}function hr(t){return t.ngOriginalError}function dr(t,...e){t.error(...e)}class fr{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||dr}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?lr(t)?lr(t):this._findContext(hr(t)):null}_findOriginalError(t){let e=hr(t);for(;e&&hr(e);)e=hr(e);return e}}const pr=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(V))();function gr(t){return t instanceof Function?t():t}var mr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});function yr(t,e){return(void 0)(t,e)}function vr(t){const e=t[3];return ht(e)?e[3]:e}function _r(t){return br(t[13])}function wr(t){return br(t[4])}function br(t){for(;null!==t&&!ht(t);)t=t[4];return t}function Cr(t,e,n,r,i){if(null!=r){let o,s=!1;ht(r)?o=r:lt(r)&&(s=!0,r=r[0]);const a=It(r);0===t&&null!==n?null==i?Ar(e,n,a):kr(e,n,a,i||null,!0):1===t&&null!==n?kr(e,n,a,i||null,!0):2===t?function(t,e,n){const r=Pr(t,e);r&&function(t,e,n,r){St(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,r,i){const o=n[7];o!==It(n)&&Cr(e,t,r,o,i);for(let s=ct;s<n.length;s++){const i=n[s];Ur(i[1],i,t,e,r,o)}}(e,t,o,n,i)}}function Tr(t,e,n){return St(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function Er(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,Ft(i,-1)),n.splice(r,1)}function Sr(t,e){if(t.length<=ct)return;const n=ct+e,r=t[n];if(r){const o=r[17];null!==o&&o!==t&&Er(o,r),e>0&&(t[n-1][4]=r[4]);const s=rn(t,ct+e);Ur(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=s[19];null!==a&&a.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function xr(t,e){if(!(256&e[2])){const n=e[11];St(n)&&n.destroyNode&&Ur(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return Ir(t[1],t);for(;e;){let n=null;if(lt(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)lt(e)&&Ir(e[1],e),e=e[3];null===e&&(e=t),lt(e)&&Ir(e[1],e),n=e&&e[4]}e=n}}(e)}}function Ir(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof ve)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2){const r=t[e[n]],i=e[n+1];try{i.call(r)}finally{}}else try{e.call(t)}finally{}}}}(t,e),function(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const t=n[o+1],s="function"==typeof t?t(e):It(e[t]),a=r[i=n[o+2]],u=n[o+3];"boolean"==typeof u?s.removeEventListener(n[o],a,u):u>=0?r[i=u]():r[i=-u].unsubscribe(),o+=2}else{const t=r[i=n[o+1]];n[o].call(t)}if(null!==r){for(let t=i+1;t<r.length;t++)(0,r[t])();e[7]=null}}(t,e),1===e[1].type&&St(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&ht(e[3])){n!==e[3]&&Er(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function kr(t,e,n,r,i){St(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function Ar(t,e,n){St(t)?t.appendChild(e,n):e.appendChild(n)}function Rr(t,e,n,r,i){null!==r?kr(t,e,n,r,i):Ar(t,e,n)}function Pr(t,e){return St(t)?t.parentNode(e):e.parentNode}function Or(t,e,n,r){const i=function(t,e,n){return function(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const e=t.data[r.directiveStart].encapsulation;if(e===L.None||e===L.Emulated)return null}return At(r,n)}(t,e.parent,n)}(t,r,e),o=e[11],s=function(t,e,n){return function(t,e,n){return 40&t.type?At(t,n):null}(t,0,n)}(r.parent||e[6],0,e);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)Rr(o,i,n[a],s,!1);else Rr(o,i,n,s,!1)}function Nr(t,e){if(null!==e){const n=e.type;if(3&n)return At(e,t);if(4&n)return Lr(-1,t[e.index]);if(8&n){const n=e.child;if(null!==n)return Nr(t,n);{const n=t[e.index];return ht(n)?Lr(-1,n):It(n)}}if(32&n)return yr(e,t)()||It(t[e.index]);{const n=Dr(t,e);return null!==n?Array.isArray(n)?n[0]:Nr(vr(t[16]),n):Nr(t,e.next)}}return null}function Dr(t,e){return null!==e?t[16][6].projection[e.projection]:null}function Lr(t,e){const n=ct+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return Nr(t,r)}return e[7]}function Fr(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],u=n.type;if(s&&0===e&&(a&&ur(It(a),r),n.flags|=4),64!=(64&n.flags))if(8&u)Fr(t,e,n.child,r,i,o,!1),Cr(e,t,i,a,o);else if(32&u){const s=yr(n,r);let u;for(;u=s();)Cr(e,t,i,u,o);Cr(e,t,i,a,o)}else 16&u?Mr(t,e,r,n,i,o):Cr(e,t,i,a,o);n=s?n.projectionNext:n.next}}function Ur(t,e,n,r,i,o){Fr(n,r,t.firstChild,e,i,o,!1)}function Mr(t,e,n,r,i,o){const s=n[16],a=s[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)Cr(e,t,i,a[u],o);else Fr(t,e,a,s[3],i,o,!0)}function qr(t,e,n){St(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function Vr(t,e,n){St(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function jr(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}const Br="ng-template";function Gr(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==jr(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function zr(t){return 4===t.type&&t.value!==Br}function Hr(t,e,n){return e===(4!==t.type||n?t.value:Br)}function Zr(t,e,n){let r=4;const i=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(we(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!Hr(t,u,n)||""===u&&1===e.length){if(Wr(r))return!1;s=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!Gr(t.attrs,c,n)){if(Wr(r))return!1;s=!0}continue}const l=Kr(8&r?"class":u,i,zr(t),n);if(-1===l){if(Wr(r))return!1;s=!0;continue}if(""!==c){let t;t=l>o?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==jr(e,c,0)||2&r&&c!==t){if(Wr(r))return!1;s=!0}}}}else{if(!s&&!Wr(r)&&!Wr(u))return!1;if(s&&Wr(u))continue;s=!1,r=u|1&r}}return Wr(r)||s}function Wr(t){return 0==(1&t)}function Kr(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function Qr(t,e,n=!1){for(let r=0;r<e.length;r++)if(Zr(t,e[r],n))return!0;return!1}function Yr(t,e){return t?":not("+e.trim()+")":e}function $r(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const e=t[++n];i+="["+s+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||Wr(s)||(e+=Yr(o,i),i=""),r=s,o=o||!Wr(r);n++}return""!==i&&(e+=Yr(o,i)),e}const Jr={};function Xr(t){ti(Vt(),qt(),ue()+t,Zt())}function ti(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&de(e,r,n)}else{const r=t.preOrderHooks;null!==r&&fe(e,r,0,n)}ce(n)}function ei(t,e){return t<<17|e<<2}function ni(t){return t>>17&32767}function ri(t){return 2|t}function ii(t){return(131068&t)>>2}function oi(t,e){return-131069&t|e<<2}function si(t){return 1|t}function ai(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const n=t.data[o];Xt(i),n.contentQueries(2,e[o],o)}}}function ui(t,e,n,r,i,o,s,a,u,c){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,Lt(l),l[3]=l[15]=t,l[8]=n,l[10]=s||t&&t[10],l[11]=a||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=o,l[16]=2==e.type?t[16]:l,l}function ci(t,e,n,r,i){let o=t.data[e];if(null===o)o=function(t,e,n,r,i){const o=Gt(),s=Ht(),a=t.data[e]=function(t,e,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==o&&(s?null==o.child&&null!==a.parent&&(o.child=a):null===o.next&&(o.next=a)),a}(t,e,n,r,i),Ut.lFrame.inI18n&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const t=function(){const t=Ut.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===t?-1:t.injectorIndex}return zt(o,!0),o}function li(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function hi(t,e,n){ne(e);try{const r=t.viewQuery;null!==r&&Vi(1,r,n);const i=t.template;null!==i&&pi(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&ai(t,e),t.staticViewQueries&&Vi(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)Li(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,ae()}}function di(t,e,n,r){const i=e[2];if(256==(256&i))return;ne(e);const o=Zt();try{Lt(e),Ut.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&pi(t,e,n,2,r);const s=3==(3&i);if(!o)if(s){const n=t.preOrderCheckHooks;null!==n&&de(e,n,null)}else{const n=t.preOrderHooks;null!==n&&fe(e,n,0,null),pe(e,0)}if(function(t){for(let e=_r(t);null!==e;e=wr(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&Ft(r,1),n[2]|=1024}}}(e),function(t){for(let e=_r(t);null!==e;e=wr(e))for(let t=ct;t<e.length;t++){const n=e[t],r=n[1];Nt(n)&&di(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&ai(t,e),!o)if(s){const n=t.contentCheckHooks;null!==n&&de(e,n)}else{const n=t.contentHooks;null!==n&&fe(e,n,1),pe(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let t=0;t<n.length;t++){const r=n[t];if(r<0)ce(~r);else{const i=r,o=n[++t],s=n[++t];Yt(o,i),s(2,e[i])}}}finally{ce(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)Ni(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&Vi(2,u,r),!o)if(s){const n=t.viewCheckHooks;null!==n&&de(e,n)}else{const n=t.viewHooks;null!==n&&fe(e,n,2),pe(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Ft(e[3],-1))}finally{ae()}}function fi(t,e,n,r){const i=e[10],o=!Zt(),s=Ot(e);try{o&&!s&&i.begin&&i.begin(),s&&hi(t,e,r),di(t,e,n,r)}finally{o&&!s&&i.end&&i.end()}}function pi(t,e,n,r,i){const o=ue(),s=2&r;try{ce(-1),s&&e.length>ut&&ti(t,e,ut,Zt()),n(r,i)}finally{ce(o)}}function gi(t,e,n){Mt()&&(function(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||Re(n,e),ur(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const r=t.data[a],o=gt(r);o&&Ai(e,n,r);const u=Be(e,t,a,n);ur(u,e),null!==s&&Ri(0,a-i,u,r,0,s),o&&(Pt(n.index,e)[8]=u)}}(t,e,n,At(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=Ut.lFrame.currentDirectiveIndex;try{ce(o);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];$t(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||Ei(r,i)}}finally{ce(-1),$t(s)}}(t,e,n))}function mi(t,e,n=At){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function yi(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=vi(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function vi(t,e,n,r,i,o,s,a,u,c){const l=ut+r,h=l+i,d=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:Jr);return n}(l,h),f="function"==typeof c?c():c;return d[1]={type:t,blueprint:d,template:n,queries:null,viewQuery:a,declTNode:e,data:d.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:f,incompleteFirstPass:!1}}function _i(t,e,n,r){const i=Bi(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&Gi(t).push(r,i.length-1))}function wi(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function bi(t,e,n,r,i,o,s,a){const u=At(e,n);let c,l=e.inputs;var h;!a&&null!=l&&(c=l[r])?(Hi(t,n,c,r,i),ft(e)&&function(t,e){const n=Pt(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=s?s(i,e.value||"",r):i,St(o)?o.setProperty(u,r,i):be(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}function Ci(t,e,n,r){let i=!1;if(Mt()){const o=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];Qr(n,s.selectors,!1)&&(i||(i=[]),De(Re(n,e),t,s.type),gt(s)?(Si(t,n),i.unshift(s)):i.push(s))}return i}(t,e,n),s=null===r?null:{"":-1};if(null!==o){i=!0,Ii(n,t.data.length,o.length);for(let t=0;t<o.length;t++){const e=o[t];e.providersResolver&&e.providersResolver(e)}let r=!1,a=!1,u=li(t,e,o.length,null);for(let i=0;i<o.length;i++){const c=o[i];n.mergedAttrs=Ce(n.mergedAttrs,c.hostAttrs),ki(t,n,e,u,c),xi(u,c,s),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const l=c.type.prototype;!r&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),r=!0),a||!l.ngOnChanges&&!l.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),u++}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,o=[];let s=null,a=null;for(let u=e.directiveStart;u<n;u++){const t=r[u],n=t.inputs,c=null===i||zr(e)?null:Pi(n,i);o.push(c),s=wi(n,u,s),a=wi(t.outputs,u,a)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=s,e.outputs=a}(t,n)}s&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new m("301",`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,s)}return n.mergedAttrs=Ce(n.mergedAttrs,n.attrs),i}function Ti(t,e,n,r,i,o){const s=o.hostBindings;if(s){let n=t.hostBindingOpCodes;null===n&&(n=t.hostBindingOpCodes=[]);const o=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(n)!=o&&n.push(o),n.push(r,i,s)}}function Ei(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Si(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function xi(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;gt(e)&&(n[""]=t)}}function Ii(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function ki(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=mt(i.type)),s=new ve(o,gt(i),null);t.blueprint[r]=s,n[r]=s,Ti(t,e,0,r,li(t,n,i.hostVars,Jr),i)}function Ai(t,e,n){const r=At(e,t),i=yi(n),o=t[10],s=Fi(t,ui(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n),null,null));t[e.index]=s}function Ri(t,e,n,r,i,o){const s=o[e];if(null!==s){const t=r.setInput;for(let e=0;e<s.length;){const i=s[e++],o=s[e++],a=s[e++];null!==t?r.setInput(n,a,i,o):n[o]=a}}}function Pi(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function Oi(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function Ni(t,e){const n=Pt(e,t);if(Nt(n)){const t=n[1];80&n[2]?di(t,n,t.template,n[8]):n[5]>0&&Di(n)}}function Di(t){for(let n=_r(t);null!==n;n=wr(n))for(let t=ct;t<n.length;t++){const e=n[t];if(1024&e[2]){const t=e[1];di(t,e,t.template,e[8])}else e[5]>0&&Di(e)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=Pt(e[n],t);Nt(r)&&r[5]>0&&Di(r)}}function Li(t,e){const n=Pt(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),hi(r,n,n[8])}function Fi(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Ui(t){for(;t;){t[2]|=64;const e=vr(t);if(0!=(512&t[2])&&!e)return t;t=e}return null}function Mi(t,e,n){const r=e[10];r.begin&&r.begin();try{di(t,e,t.template,n)}catch(i){throw zi(e,i),i}finally{r.end&&r.end()}}function qi(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=cr(n),i=r[1];fi(i,r,i.template,n)}}(t[8])}function Vi(t,e,n){Xt(0),e(t,n)}const ji=(()=>Promise.resolve(null))();function Bi(t){return t[7]||(t[7]=[])}function Gi(t){return t.cleanup||(t.cleanup=[])}function zi(t,e){const n=t[9],r=n?n.get(fr,null):null;r&&r.handleError(e)}function Hi(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],u=e[s],c=t.data[s];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function Zi(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const t=e[s];"number"==typeof t?o=t:1==o?i=h(i,t):2==o&&(r=h(r,t+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}const Wi=new $e("INJECTOR",-1);class Ki{get(t,e=un){if(e===un){const e=new Error(`NullInjectorError: No provider for ${l(t)}!`);throw e.name="NullInjectorError",e}return e}}const Qi=new $e("Set Injector scope."),Yi={},$i={};let Ji;function Xi(){return void 0===Ji&&(Ji=new Ki),Ji}function to(t,e=null,n=null,r){return new eo(t,n,e||Xi(),r)}class eo{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&en(e,n=>this.processProvider(n,t,e)),en([t],t=>this.processInjectorType(t,[],i)),this.records.set(Wi,io(void 0,this));const o=this.records.get(Qi);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof t?null:l(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=un,n=A.Default){this.assertNotDestroyed();const r=fn(this);try{if(!(n&A.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof $e)&&C(t);e=n&&this.injectableDefInScope(n)?io(no(t),Yi):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&A.Self?Xi():this.parent).get(t,e=n&A.Optional&&e===un?null:e)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(l(t)),r)throw o;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e[ln]&&i.unshift(e[ln]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=l(e);if(Array.isArray(e))i=e.map(l).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):l(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(cn,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(o,t,"R3InjectorError",this.source)}throw o}finally{fn(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(l(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=p(t)))return!1;let r=E(t);const i=null==r&&t.ngModule||void 0,o=void 0===i?t:i,s=-1!==n.indexOf(o);if(void 0!==i&&(r=E(i)),null==r)return!1;if(null!=r.imports&&!s){let t;n.push(o);try{en(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];en(r,t=>this.processProvider(t,n,r||B))}}this.injectorDefTypes.add(o);const a=mt(o)||(()=>new o);this.records.set(o,io(a,Yi));const u=r.providers;if(null!=u&&!s){const e=t;en(u,t=>this.processProvider(t,e,u))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=so(t=p(t))?t:p(t&&t.provide);const i=function(t,e,n){return oo(t)?io(void 0,t.useValue):io(ro(t),Yi)}(t);if(so(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=io(void 0,Yi,!0),e.factory=()=>mn(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===Yi&&(e.value=$i,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){if(!t.providedIn)return!1;const e=p(t.providedIn);return"string"==typeof e?"any"===e||e===this.scope:this.injectorDefTypes.has(e)}}function no(t){const e=C(t),n=null!==e?e.factory:mt(t);if(null!==n)return n;if(t instanceof $e)throw new Error(`Token ${l(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=function(t,e){const n=[];for(let r=0;r<t;r++)n.push("?");return n}(e);throw new Error(`Can't resolve all parameters for ${l(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[S]||t[I]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function ro(t,e,n){let r;if(so(t)){const e=p(t);return mt(e)||no(e)}if(oo(t))r=()=>p(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...mn(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>gn(p(t.useExisting));else{const e=p(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return mt(e)||no(e);r=()=>new e(...mn(t.deps))}var i;return r}function io(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function oo(t){return null!==t&&"object"==typeof t&&hn in t}function so(t){return"function"==typeof t}const ao=function(t,e,n){return function(t,e=null,n=null,r){const i=to(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let uo=(()=>{class t{static create(t,e){return Array.isArray(t)?ao(t,e,""):ao(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=un,t.NULL=new Ki,t.\u0275prov=w({token:t,providedIn:"any",factory:()=>gn(Wi)}),t.__NG_ELEMENT_ID__=-1,t})();function co(t,e){he(cr(t)[1],Bt())}function lo(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const r=[t];for(;e;){let i;if(gt(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);const e=t;e.inputs=ho(t.inputs),e.declaredInputs=ho(t.declaredInputs),e.outputs=ho(t.outputs);const n=i.hostBindings;n&&go(t,n);const o=i.viewQuery,s=i.contentQueries;if(o&&fo(t,o),s&&po(t,s),c(t.inputs,i.inputs),c(t.declaredInputs,i.declaredInputs),c(t.outputs,i.outputs),gt(i)&&i.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(i.data.animation)}}const e=i.features;if(e)for(let r=0;r<e.length;r++){const i=e[r];i&&i.ngInherit&&i(t),i===lo&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Ce(i.hostAttrs,n=Ce(n,i.hostAttrs))}}(r)}function ho(t){return t===j?{}:t===B?[]:t}function fo(t,e){const n=t.viewQuery;t.viewQuery=n?(t,r)=>{e(t,r),n(t,r)}:e}function po(t,e){const n=t.contentQueries;t.contentQueries=n?(t,r,i)=>{e(t,r,i),n(t,r,i)}:e}function go(t,e){const n=t.hostBindings;t.hostBindings=n?(t,r)=>{e(t,r),n(t,r)}:e}let mo=null;function yo(){if(!mo){const t=V.Symbol;if(t&&t.iterator)mo=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(mo=n)}}}return mo}function vo(t){return!!_o(t)&&(Array.isArray(t)||!(t instanceof Map)&&yo()in t)}function _o(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function wo(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function bo(t,e,n,r){const i=qt();return wo(i,Kt(),e)&&(Vt(),function(t,e,n,r,i,o){const s=At(t,e);!function(t,e,n,r,i,o,s){if(null==o)St(t)?t.removeAttribute(e,i,n):e.removeAttribute(i);else{const a=null==s?y(o):s(o,r||"",i);St(t)?t.setAttribute(e,i,a,n):n?e.setAttributeNS(n,i,a):e.setAttribute(i,a)}}(e[11],s,o,t.value,n,r,i)}(le(),i,t,e,n,r)),bo}function Co(t,e,n,r,i,o,s,a){const u=qt(),c=Vt(),l=t+ut,h=c.firstCreatePass?function(t,e,n,r,i,o,s,a,u){const c=e.consts,l=ci(e,t,4,s||null,Dt(c,a));Ci(e,n,l,Dt(c,u)),he(e,l);const h=l.tViews=vi(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(l,c,u,e,n,r,i,o,s):c.data[l];zt(h,!1);const d=u[11].createComment("");Or(c,u,d,h),ur(d,u),Fi(u,u[l]=Oi(d,u,d,h)),pt(h)&&gi(c,u,h),null!=s&&mi(u,h,a)}function To(t,e=A.Default){const n=qt();return null===n?gn(t,e):Ue(Bt(),n,p(t),e)}function Eo(t,e,n){const r=qt();return wo(r,Kt(),e)&&bi(Vt(),le(),r,t,e,r[11],n,!1),Eo}function So(t,e,n,r,i){const o=i?"class":"style";Hi(t,n,e.inputs[o],o,r)}function xo(t,e,n,r){const i=qt(),o=Vt(),s=ut+t,a=i[11],u=i[s]=Tr(a,e,Ut.lFrame.currentNamespace),c=o.firstCreatePass?function(t,e,n,r,i,o,s){const a=e.consts,u=ci(e,t,2,i,Dt(a,o));return Ci(e,n,u,Dt(a,s)),null!==u.attrs&&Zi(u,u.attrs,!1),null!==u.mergedAttrs&&Zi(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(s,o,i,0,e,n,r):o.data[s];zt(c,!0);const l=c.mergedAttrs;null!==l&&_e(a,u,l);const h=c.classes;null!==h&&Vr(a,u,h);const d=c.styles;null!==d&&qr(a,u,d),64!=(64&c.flags)&&Or(o,i,u,c),0===Ut.lFrame.elementDepthCount&&ur(u,i),Ut.lFrame.elementDepthCount++,pt(c)&&(gi(o,i,c),function(t,e,n){if(dt(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}(o,c,i)),null!==r&&mi(i,c)}function Io(){let t=Bt();Ht()?Ut.lFrame.isParent=!1:(t=t.parent,zt(t,!1));const e=t;Ut.lFrame.elementDepthCount--;const n=Vt();n.firstCreatePass&&(he(n,t),dt(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&So(n,e,qt(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&So(n,e,qt(),e.stylesWithoutHost,!1)}function ko(t,e,n,r){xo(t,e,n,r),Io()}function Ao(){return qt()}function Ro(t){return!!t&&"function"==typeof t.then}function Po(t){return!!t&&"function"==typeof t.subscribe}const Oo=Po;function No(t,e,n,r){const i=qt(),o=Vt(),s=Bt();return function(t,e,n,r,i,o,s,a){const u=pt(r),c=t.firstCreatePass&&Gi(t),l=Bi(e);let h=!0;if(3&r.type){const d=At(r,e),f=a?a(d):d,p=l.length,g=a?t=>a(It(t[r.index])):r.index;if(St(n)){let s=null;if(!a&&u&&(s=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const t=i[o];if(t===n&&i[o+1]===r){const t=e[7],n=i[o+2];return t.length>n?t[n]:null}"string"==typeof t&&(o+=2)}return null}(t,e,i,r.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=o,s.__ngLastListenerFn__=o,h=!1;else{o=Lo(r,e,0,o,!1);const t=n.listen(f,i,o);l.push(o,t),c&&c.push(i,g,p,p+1)}}else o=Lo(r,e,0,o,!0),f.addEventListener(i,o,s),l.push(o),c&&c.push(i,g,p,s)}else o=Lo(r,e,0,o,!1);const d=r.outputs;let f;if(h&&null!==d&&(f=d[i])){const t=f.length;if(t)for(let n=0;n<t;n+=2){const t=e[f[n]][f[n+1]].subscribe(o),s=l.length;l.push(o,t),c&&c.push(i,r.index,s,-(s+1))}}}(o,i,i[11],s,t,e,!!n,r),No}function Do(t,e,n,r){try{return!1!==n(r)}catch(i){return zi(t,i),!1}}function Lo(t,e,n,r,i){return function n(o){if(o===Function)return r;const s=2&t.flags?Pt(t.index,e):e;0==(32&e[2])&&Ui(s);let a=Do(e,0,r,o),u=n.__ngNextListenerFn__;for(;u;)a=Do(e,0,u,o)&&a,u=u.__ngNextListenerFn__;return i&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function Fo(t=1){return function(t){return(Ut.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,Ut.lFrame.contextLView))[8]}(t)}function Uo(t,e,n,r,i){const o=t[n+1],s=null===e;let a=r?ni(o):ii(o),u=!1;for(;0!==a&&(!1===u||s);){const n=t[a+1];Mo(t[a],e)&&(u=!0,t[a+1]=r?si(n):ri(n)),a=r?ni(n):ii(n)}u&&(t[n+1]=r?ri(o):si(o))}function Mo(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&an(t,e)>=0}const qo={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Vo(t){return t.substring(qo.key,qo.keyEnd)}function jo(t,e){const n=qo.textEnd;return n===e?-1:(e=qo.keyEnd=function(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}(t,qo.key=e,n),Bo(t,e,n))}function Bo(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function Go(t,e){return function(t,e,n,r){const i=qt(),o=Vt(),s=Qt(2);o.firstUpdatePass&&Wo(o,t,s,true),e!==Jr&&wo(i,s,e)&&Yo(o,o.data[ue()],i,i[11],t,i[s+1]=function(t,e){return null==t||"object"==typeof t&&(t=l(An(t))),t}(e),true,s)}(t,e),Go}function zo(t){!function(t,e,n,r){const i=Vt(),o=Qt(2);i.firstUpdatePass&&Wo(i,null,o,r);const s=qt();if(n!==Jr&&wo(s,o,n)){const a=i.data[ue()];if(Xo(a,r)&&!Zo(i,o)){let t=a.classesWithoutHost;null!==t&&(n=h(t,n||"")),So(i,a,s,n,r)}else!function(t,e,n,r,i,o,s,a){i===Jr&&(i=B);let u=0,c=0,l=0<i.length?i[0]:null,h=0<o.length?o[0]:null;for(;null!==l||null!==h;){const s=u<i.length?i[u+1]:void 0,d=c<o.length?o[c+1]:void 0;let f,p=null;l===h?(u+=2,c+=2,s!==d&&(p=h,f=d)):null===h||null!==l&&l<h?(u+=2,p=l):(c+=2,p=h,f=d),null!==p&&Yo(t,e,n,r,p,f,true,a),l=u<i.length?i[u]:null,h=c<o.length?o[c]:null}}(i,a,s,s[11],s[o+1],s[o+1]=function(t,e,n){if(null==n||""===n)return B;const r=[],i=An(n);if(Array.isArray(i))for(let o=0;o<i.length;o++)t(r,i[o],!0);else if("object"==typeof i)for(const o in i)i.hasOwnProperty(o)&&t(r,o,i[o]);else"string"==typeof i&&e(r,i);return r}(t,e,n),0,o)}}(on,Ho,t,!0)}function Ho(t,e){for(let n=function(t){return function(t){qo.key=0,qo.keyEnd=0,qo.value=0,qo.valueEnd=0,qo.textEnd=t.length}(t),jo(t,Bo(t,0,qo.textEnd))}(e);n>=0;n=jo(e,n))on(t,Vo(e),!0)}function Zo(t,e){return e>=t.expandoStartIndex}function Wo(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[ue()],s=Zo(t,n);Xo(o,r)&&null===e&&!s&&(e=!1),e=function(t,e,n,r){const i=function(t){const e=Ut.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=Qo(n=Ko(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=Ko(i,t,e,n,r),null===o){let n=function(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==ii(r))return t[ni(r)]}(t,e,r);void 0!==n&&Array.isArray(n)&&(n=Ko(null,t,e,n[1],r),n=Qo(n,e.attrs,r),function(t,e,n,r){t[ni(n?e.classBindings:e.styleBindings)]=r}(t,e,r,n))}else o=function(t,e,n){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=Qo(r,t[o].hostAttrs,n);return Qo(r,e.attrs,n)}(t,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),n}(i,o,e,r),function(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=ni(s),u=ii(s);t[r]=n;let c,l=!1;if(Array.isArray(n)){const t=n;c=t[1],(null===c||an(t,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){const e=ni(t[a+1]);t[r+1]=ei(e,a),0!==e&&(t[e+1]=oi(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=ei(a,0),0!==a&&(t[a+1]=oi(t[a+1],r)),a=r;else t[r+1]=ei(u,0),0===a?a=r:t[u+1]=oi(t[u+1],r),u=r;l&&(t[r+1]=ri(t[r+1])),Uo(t,c,r,!0),Uo(t,c,r,!1),function(t,e,n,r,i){const o=i?t.residualClasses:t.residualStyles;null!=o&&"string"==typeof e&&an(o,e)>=0&&(n[r+1]=si(n[r+1]))}(e,c,t,r,o),s=ei(a,u),o?e.classBindings=s:e.styleBindings=s}(i,o,e,n,s,r)}}function Ko(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=Qo(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function Qo(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),on(t,s,!!n||e[++o]))}return void 0===t?null:t}function Yo(t,e,n,r,i,o,s,a){if(!(3&e.type))return;const u=t.data,c=u[a+1];Jo(1==(1&c)?$o(u,e,n,i,ii(c),s):void 0)||(Jo(o)||2==(2&c)&&(o=$o(u,null,n,i,a,s)),function(t,e,n,r,i){const o=St(t);if(e)i?o?t.addClass(n,r):n.classList.add(r):o?t.removeClass(n,r):n.classList.remove(r);else{let e=-1===r.indexOf("-")?void 0:mr.DashCase;if(null==i)o?t.removeStyle(n,r,e):n.style.removeProperty(r);else{const s="string"==typeof i&&i.endsWith("!important");s&&(i=i.slice(0,-10),e|=mr.Important),o?t.setStyle(n,r,i,e):n.style.setProperty(r,i,s?"important":"")}}}(r,s,kt(ue(),n),i,o))}function $o(t,e,n,r,i,o){const s=null===e;let a;for(;i>0;){const e=t[i],o=Array.isArray(e),u=o?e[1]:e,c=null===u;let l=n[i+1];l===Jr&&(l=c?B:void 0);let h=c?sn(l,r):u===r?l:void 0;if(o&&!Jo(h)&&(h=sn(e,r)),Jo(h)&&(a=h,s))return a;const d=t[i+1];i=s?ni(d):ii(d)}if(null!==e){let t=o?e.residualClasses:e.residualStyles;null!=t&&(a=sn(t,r))}return a}function Jo(t){return void 0!==t}function Xo(t,e){return 0!=(t.flags&(e?16:32))}function ts(t,e=""){const n=qt(),r=Vt(),i=t+ut,o=r.firstCreatePass?ci(r,i,1,e,null):r.data[i],s=n[i]=function(t,e){return St(t)?t.createText(e):t.createTextNode(e)}(n[11],e);Or(r,n,s,o),zt(o,!1)}function es(t){return ns("",t,""),es}function ns(t,e,n){const r=qt(),i=function(t,e,n,r){return wo(t,Kt(),n)?e+y(n)+r:Jr}(r,t,e,n);return i!==Jr&&function(t,e,n){const r=kt(e,t);!function(t,e,n){St(t)?t.setValue(e,n):e.textContent=n}(t[11],r,n)}(r,ue(),i),ns}function rs(t,e,n){const r=qt();return wo(r,Kt(),e)&&bi(Vt(),le(),r,t,e,r[11],n,!0),rs}const is=void 0;var os=["en",[["a","p"],["AM","PM"],is],[["AM","PM"],is,is],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],is,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],is,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",is,"{1} 'at' {0}",is],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let ss={};function as(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=cs(e);if(n)return n;const r=e.split("-")[0];if(n=cs(r),n)return n;if("en"===r)return os;throw new Error(`Missing locale data for the locale "${t}".`)}function us(t){return as(t)[ls.PluralCase]}function cs(t){return t in ss||(ss[t]=V.ng&&V.ng.common&&V.ng.common.locales&&V.ng.common.locales[t]),ss[t]}var ls=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});const hs="en-US";let ds=hs;function fs(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t} [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(ds=t.toLowerCase().replace(/_/g,"-"))}function ps(t,e,n,r,i){if(t=p(t),Array.isArray(t))for(let o=0;o<t.length;o++)ps(t[o],e,n,r,i);else{const o=Vt(),s=qt();let a=so(t)?t:p(t.provide),u=ro(t);const c=Bt(),l=1048575&c.providerIndexes,h=c.directiveStart,d=c.providerIndexes>>20;if(so(t)||!t.multi){const r=new ve(u,i,To),f=ys(a,e,i?l:l+d,h);-1===f?(De(Re(c,s),o,a),gs(o,t,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(r),s.push(r)):(n[f]=r,s[f]=r)}else{const f=ys(a,e,l+d,h),p=ys(a,e,l,l+d),g=f>=0&&n[f],m=p>=0&&n[p];if(i&&!m||!i&&!g){De(Re(c,s),o,a);const l=function(t,e,n,r,i){const o=new ve(t,n,To);return o.multi=[],o.index=e,o.componentProviders=0,ms(o,i,r&&!n),o}(i?_s:vs,n.length,i,r,u);!i&&m&&(n[p].providerFactory=l),gs(o,t,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(l),s.push(l)}else gs(o,t,f>-1?f:p,ms(n[i?p:f],u,!i&&r));!i&&r&&m&&n[p].componentProviders++}}}function gs(t,e,n,r){const i=so(e);if(i||e.useClass){const o=(e.useClass||e).prototype.ngOnDestroy;if(o){const s=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const t=s.indexOf(n);-1===t?s.push(n,[r,o]):s[t+1].push(r,o)}else s.push(n,o)}}}function ms(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function ys(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function vs(t,e,n,r){return ws(this.multi,[])}function _s(t,e,n,r){const i=this.multi;let o;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=Be(n,n[1],this.providerFactory.index,r);o=e.slice(0,t),ws(i,o);for(let n=t;n<e.length;n++)o.push(e[n])}else o=[],ws(i,o);return o}function ws(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function bs(t,e=[]){return n=>{n.providersResolver=(n,r)=>function(t,e,n){const r=Vt();if(r.firstCreatePass){const i=gt(t);ps(n,r.data,r.blueprint,i,!0),ps(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}class Cs{}class Ts{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${l(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let Es=(()=>{class t{}return t.NULL=new Ts,t})();function Ss(...t){}function xs(t,e){return new ks(At(t,e))}const Is=function(){return xs(Bt(),qt())};let ks=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=Is,t})();function As(t){return t instanceof ks?t.nativeElement:t}class Rs{}let Ps=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Os(),t})();const Os=function(){const t=qt(),e=Pt(Bt().index,t);return function(t){return t[11]}(lt(e)?e:t)};let Ns=(()=>{class t{}return t.\u0275prov=w({token:t,providedIn:"root",factory:()=>null}),t})();class Ds{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const Ls=new Ds("12.0.0");class Fs{constructor(){}supports(t){return vo(t)}create(t){return new Ms(t)}}const Us=(t,e)=>e;class Ms{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Us}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const o=!n||e&&e.currentIndex<Bs(n,r,i)?e:n,s=Bs(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);const t=s-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;e<=o&&o<t&&(i[n]=r+1)}i[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!vo(t))throw new Error(`Error trying to diff '${l(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),o=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[yo()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),o=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):t=this._addAfter(new qs(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new js),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new js),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class qs{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Vs{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class js{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new Vs,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Bs(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class Gs{constructor(){}supports(t){return t instanceof Map||_o(t)}create(){return new zs}}class zs{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||_o(t)))throw new Error(`Error trying to diff '${l(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new Hs(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class Hs{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Zs(){return new Ws([new Fs])}let Ws=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||Zs()),deps:[[t,new wn,new _n]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=w({token:t,providedIn:"root",factory:Zs}),t})();function Ks(){return new Qs([new Gs])}let Qs=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||Ks()),deps:[[t,new wn,new _n]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=w({token:t,providedIn:"root",factory:Ks}),t})();function Ys(t,e,n,r,i=!1){for(;null!==n;){const o=e[n.index];if(null!==o&&r.push(It(o)),ht(o))for(let t=ct;t<o.length;t++){const e=o[t],n=e[1].firstChild;null!==n&&Ys(e[1],e,n,r)}const s=n.type;if(8&s)Ys(t,e,n.child,r);else if(32&s){const t=yr(n,e);let i;for(;i=t();)r.push(i)}else if(16&s){const t=Dr(e,n);if(Array.isArray(t))r.push(...t);else{const n=vr(e[16]);Ys(n[1],n,t,r,!0)}}n=i?n.projectionNext:n.next}return r}class $s{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return Ys(e,t,e.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(ht(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(Sr(t,n),rn(e,n))}this._attachedToViewContainer=!1}xr(this._lView[1],this._lView)}onDestroy(t){_i(this._lView[1],this._lView,null,t)}markForCheck(){Ui(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Mi(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){Wt(!0);try{Mi(t,e,n)}finally{Wt(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var t;this._appRef=null,Ur(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class Js extends $s{constructor(t){super(t),this._view=t}detectChanges(){qi(this._view)}checkNoChanges(){!function(t){Wt(!0);try{qi(t)}finally{Wt(!1)}}(this._view)}get context(){return null}}const Xs=function(t){return function(t,e,n){if(ft(t)&&!n){const n=Pt(t.index,e);return new $s(n,n)}return 47&t.type?new $s(e[16],e):null}(Bt(),qt(),16==(16&t))};let ta=(()=>{class t{}return t.__NG_ELEMENT_ID__=Xs,t})();const ea=[new Gs],na=new Ws([new Fs]),ra=new Qs(ea),ia=function(){return ua(Bt(),qt())};let oa=(()=>{class t{}return t.__NG_ELEMENT_ID__=ia,t})();const sa=oa,aa=class extends sa{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=ui(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),hi(e,n,t),new $s(n)}};function ua(t,e){return 4&t.type?new aa(e,t,xs(t,e)):null}class ca{}class la{}const ha=function(){return ya(Bt(),qt())};let da=(()=>{class t{}return t.__NG_ELEMENT_ID__=ha,t})();const fa=da,pa=class extends fa{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return xs(this._hostTNode,this._hostLView)}get injector(){return new He(this._hostTNode,this._hostLView)}get parentInjector(){const t=Ne(this._hostTNode,this._hostLView);if(Ee(t)){const e=xe(t,this._hostLView),n=Se(t);return new He(e[1].data[n+8],e)}return new He(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=ga(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-ct}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){const t=o.get(ca,null);t&&(i=t)}const s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}insert(t,e){const n=t._lView,r=n[1];if(ht(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new pa(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e),o=this._lContainer;!function(t,e,n,r){const i=ct+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-ct?(e[4]=n[i],nn(n,ct+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,o,i);const s=Lr(i,o),a=n[11],u=Pr(a,o[7]);return null!==u&&function(t,e,n,r,i,o){r[0]=i,r[6]=e,Ur(t,r,n,1,i,o)}(r,o[6],a,n,u,s),t.attachToViewContainerRef(),nn(ma(o),i,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=ga(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=Sr(this._lContainer,e);n&&(rn(ma(this._lContainer),e),xr(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=Sr(this._lContainer,e);return n&&null!=rn(ma(this._lContainer),e)?new $s(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function ga(t){return t[8]}function ma(t){return t[8]||(t[8]=[])}function ya(t,e){let n;const r=e[t.index];if(ht(r))n=r;else{let i;if(8&t.type)i=It(r);else{const n=e[11];i=n.createComment("");const r=At(t,e);kr(n,Pr(n,r),i,function(t,e){return St(t)?t.nextSibling(e):e.nextSibling}(n,r),!1)}e[t.index]=n=Oi(r,e,i,t),Fi(e,n)}return new pa(n,t,e)}const va={};class _a extends Es{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=st(t);return new Ca(e,this.ngModule)}}function wa(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const ba=new $e("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>pr});class Ca extends Cs{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map($r).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return wa(this.componentDef.inputs)}get outputs(){return wa(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const o=t.get(n,va,i);return o!==va||r===va?o:e.get(n,r,i)}}}(t,r.injector):t,o=i.get(Rs,xt),s=i.get(Ns,null),a=o.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(St(t))return t.selectRootElement(e,n===L.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):Tr(o.createRenderer(null,this.componentDef),u,function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:pr,clean:ji,playerHandler:null,flags:0},d=vi(0,null,null,1,0,null,null,null,null,null),f=ui(null,d,h,l,null,null,o,a,s,i);let p,g;ne(f);try{const t=function(t,e,n,r,i,o){const s=n[1];n[20]=t;const a=ci(s,20,2,"#host",null),u=a.mergedAttrs=e.hostAttrs;null!==u&&(Zi(a,u,!0),null!==t&&(_e(i,t,u),null!==a.classes&&Vr(i,t,a.classes),null!==a.styles&&qr(i,t,a.styles)));const c=r.createRenderer(t,e),l=ui(n,yi(e),null,e.onPush?64:16,n[20],a,r,c,null,null);return s.firstCreatePass&&(De(Re(a,n),s,e.type),Si(s,a),Ii(a,n.length,1)),Fi(n,l),n[20]=l}(c,this.componentDef,f,o,a);if(c)if(n)_e(a,c,["ng-version",Ls.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!Wr(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&_e(a,c,t),e&&e.length>0&&Vr(a,c,e.join(" "))}if(g=Rt(d,ut),void 0!==e){const t=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}p=function(t,e,n,r,i){const o=n[1],s=function(t,e,n){const r=Bt();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),ki(t,r,e,li(t,e,1,null),n));const i=Be(e,t,r.directiveStart,r);ur(i,e);const o=At(r,e);return o&&ur(o,e),i}(o,n,e);if(r.components.push(s),t[8]=s,i&&i.forEach(t=>t(s,e)),e.contentQueries){const t=Bt();e.contentQueries(1,s,t.directiveStart)}const a=Bt();return!o.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(ce(a.index),Ti(n[1],a,0,a.directiveStart,a.directiveEnd,e),Ei(e,s)),s}(t,this.componentDef,f,h,[co]),hi(d,f,null)}finally{ae()}return new Ta(this.componentType,p,xs(g,f),f,g)}}class Ta extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=e,this.hostView=this.changeDetectorRef=new Js(r),this.componentType=t}get injector(){return new He(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const Ea=new Map;class Sa extends ca{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new _a(this);const n=at(t),r=t[W]||null;r&&fs(r),this._bootstrapComponents=gr(n.bootstrap),this._r3Injector=to(t,e,[{provide:ca,useValue:this},{provide:Es,useValue:this.componentFactoryResolver}],l(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=uo.THROW_IF_NOT_FOUND,n=A.Default){return t===uo||t===ca||t===Wi?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class xa extends la{constructor(t){super(),this.moduleType=t,null!==at(t)&&function(t){const e=new Set;!function t(n){const r=at(n,!0),i=r.id;null!==i&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${l(e)} vs ${l(e.name)}`)}(i,Ea.get(i),n),Ea.set(i,n));const o=gr(r.imports);for(const s of o)e.has(s)||(e.add(s),t(s))}(t)}(t)}create(t){return new Sa(this.moduleType,t)}}function Ia(t){return e=>{setTimeout(t,void 0,e)}}const ka=class extends r.xQ{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){var r,o,s;let a=t,u=e||(()=>null),c=n;if(t&&"object"==typeof t){const e=t;a=null===(r=e.next)||void 0===r?void 0:r.bind(e),u=null===(o=e.error)||void 0===o?void 0:o.bind(e),c=null===(s=e.complete)||void 0===s?void 0:s.bind(e)}this.__isAsync&&(u=Ia(u),a&&(a=Ia(a)),c&&(c=Ia(c)));const l=super.subscribe({next:a,error:u,complete:c});return t instanceof i.w&&t.add(l),l}};function Aa(){return this._results[yo()]()}class Ra{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=yo(),n=Ra.prototype;n[e]||(n[e]=Aa)}get changes(){return this._changes||(this._changes=new ka)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const n=this;n.dirty=!1;const r=tn(t);(this._changesDetected=!function(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}(n._results,r,e))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class Pa{constructor(t){this.queryList=t,this.matches=null}clone(){return new Pa(this.queryList)}setDirty(){this.queryList.setDirty()}}class Oa{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new Oa(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==Ga(t,e).matches&&this.queries[e].setDirty()}}class Na{constructor(t,e,n=null){this.predicate=t,this.flags=e,this.read=n}}class Da{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new Da(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class La{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new La(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(t,e,Fa(e,i)),this.matchTNodeWithReadOption(t,e,je(e,t,i,!1,!1))}else n===oa?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,je(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===ks||r===da||r===oa&&4&e.type)this.addMatch(e.index,-2);else{const n=je(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function Fa(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function Ua(t,e,n,r){return-1===n?function(t,e){return 11&t.type?xs(t,e):4&t.type?ua(t,e):null}(e,t):-2===n?function(t,e,n){return n===ks?xs(e,t):n===oa?ua(e,t):n===da?ya(e,t):void 0}(t,e,r):Be(t,t[1],n,e)}function Ma(t,e,n,r){const i=e[19].queries[r];if(null===i.matches){const r=t.data,o=n.matches,s=[];for(let t=0;t<o.length;t+=2){const i=o[t];s.push(i<0?null:Ua(e,r[i],o[t+1],n.metadata.read))}i.matches=s}return i.matches}function qa(t,e,n,r){const i=t.queries.getByIndex(n),o=i.matches;if(null!==o){const s=Ma(t,e,i,n);for(let t=0;t<o.length;t+=2){const n=o[t];if(n>0)r.push(s[t/2]);else{const i=o[t+1],s=e[-n];for(let t=ct;t<s.length;t++){const e=s[t];e[17]===e[3]&&qa(e[1],e,i,r)}if(null!==s[9]){const t=s[9];for(let e=0;e<t.length;e++){const n=t[e];qa(n[1],n,i,r)}}}}}return r}function Va(t){const e=qt(),n=Vt(),r=Jt();Xt(r+1);const i=Ga(n,r);if(t.dirty&&Ot(e)===(2==(2&i.metadata.flags))){if(null===i.matches)t.reset([]);else{const o=i.crossesNgTemplate?qa(n,e,r,[]):Ma(n,e,i,r);t.reset(o,As),t.notifyOnChanges()}return!0}return!1}function ja(t,e,n,r){const i=Vt();if(i.firstCreatePass){const o=Bt();(function(t,e,n){null===t.queries&&(t.queries=new Da),t.queries.track(new La(e,n))})(i,new Na(e,n,r),o.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(i,t),2==(2&n)&&(i.staticContentQueries=!0)}!function(t,e,n){const r=new Ra(4==(4&n));_i(t,e,r,r.destroy),null===e[19]&&(e[19]=new Oa),e[19].queries.push(new Pa(r))}(i,qt(),n)}function Ba(){return t=qt(),e=Jt(),t[19].queries[e].queryList;var t,e}function Ga(t,e){return t.queries.getByIndex(e)}const za=new $e("Application Initializer");let Ha=(()=>{class t{constructor(t){this.appInits=t,this.resolve=Ss,this.reject=Ss,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();if(Ro(e))t.push(e);else if(Oo(e)){const n=new Promise((t,n)=>{e.subscribe({complete:t,error:n})});t.push(n)}}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(gn(za,8))},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();const Za=new $e("AppId"),Wa={provide:Za,useFactory:function(){return`${Ka()}${Ka()}${Ka()}`},deps:[]};function Ka(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Qa=new $e("Platform Initializer"),Ya=new $e("Platform ID"),$a=new $e("appBootstrapListener");let Ja=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();const Xa=new $e("LocaleId"),tu=new $e("DefaultCurrencyCode");class eu{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const nu=function(t){return new xa(t)},ru=nu,iu=function(t){return Promise.resolve(nu(t))},ou=function(t){const e=nu(t),n=gr(at(t).declarations).reduce((t,e)=>{const n=st(e);return n&&t.push(new Ca(n)),t},[]);return new eu(e,n)},su=ou,au=function(t){return Promise.resolve(ou(t))};let uu=(()=>{class t{constructor(){this.compileModuleSync=ru,this.compileModuleAsync=iu,this.compileModuleAndAllComponentsSync=su,this.compileModuleAndAllComponentsAsync=au}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();const cu=(()=>Promise.resolve(0))();function lu(t){"undefined"==typeof Zone?cu.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class hu{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ka(!1),this.onMicrotaskEmpty=new ka(!1),this.onStable=new ka(!1),this.onError=new ka(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&e,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let t=V.requestAnimationFrame,e=V.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=()=>{!function(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(V,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,pu(t),t.isCheckStableRunning=!0,fu(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),pu(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{try{return gu(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||t.shouldCoalesceRunChangeDetection)&&e(),mu(t)}},onInvoke:(n,r,i,o,s,a,u)=>{try{return gu(t),n.invoke(i,o,s,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),mu(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,pu(t),fu(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!hu.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(hu.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,du,Ss,Ss);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const du={};function fu(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function pu(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function gu(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function mu(t){t._nesting--,fu(t)}class yu{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ka,this.onMicrotaskEmpty=new ka,this.onStable=new ka,this.onError=new ka}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let vu=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{hu.assertNotInAngularZone(),lu(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())lu(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(gn(hu))},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})(),_u=(()=>{class t{constructor(){this._applications=new Map,Tu.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return Tu.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();class wu{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}function bu(t){Tu=t}let Cu,Tu=new wu,Eu=!0,Su=!1;function xu(){return Su=!0,Eu}function Iu(){if(Su)throw new Error("Cannot enable prod mode after platform setup.");Eu=!1}const ku=new $e("AllowMultipleToken");class Au{constructor(t,e){this.name=t,this.token=e}}function Ru(t,e,n=[]){const r=`Platform: ${e}`,i=new $e(r);return(e=[])=>{let o=Pu();if(!o||o.injector.get(ku,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:Qi,useValue:"platform"});!function(t){if(Cu&&!Cu.destroyed&&!Cu.injector.get(ku,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Cu=t.get(Ou);const e=t.get(Qa,null);e&&e.forEach(t=>t())}(uo.create({providers:t,name:r}))}return function(t){const e=Pu();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function Pu(){return Cu&&!Cu.destroyed?Cu:null}let Ou=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new yu:("zone.js"===t?void 0:t)||new hu({enableLongStackTrace:xu(),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(e?e.ngZone:void 0,{ngZoneEventCoalescing:e&&e.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:e&&e.ngZoneRunCoalescing||!1}),r=[{provide:hu,useValue:n}];return n.run(()=>{const e=uo.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),o=i.injector.get(fr,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const t=n.onError.subscribe({next:t=>{o.handleError(t)}});i.onDestroy(()=>{Lu(this._modules,i),t.unsubscribe()})}),function(t,e,n){try{const r=n();return Ro(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,n,()=>{const t=i.injector.get(Ha);return t.runInitializers(),t.donePromise.then(()=>(fs(i.injector.get(Xa,hs)||hs),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=Nu({},e);return function(t,e,n){const r=new xa(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(Du);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${l(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(gn(uo))},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();function Nu(t,e){return Array.isArray(e)?e.reduce(Nu,t):Object.assign(Object.assign({},t),e)}let Du=(()=>{class t{constructor(t,e,n,r,i){this._zone=t,this._injector=e,this._exceptionHandler=n,this._componentFactoryResolver=r,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const u=new o.y(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),c=new o.y(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{hu.assertNotInAngularZone(),lu(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{hu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=(0,s.T)(u,c.pipe((0,a.B)()))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof Cs?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(ca),i=n.create(uo.NULL,[],e||n.selector,r),o=i.location.nativeElement,s=i.injector.get(vu,null),a=s&&i.injector.get(_u);return s&&a&&a.registerApplication(o,s),i.onDestroy(()=>{this.detachView(i.hostView),Lu(this.components,i),a&&a.unregisterApplication(o)}),this._loadComponent(i),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;Lu(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get($a,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(gn(hu),gn(uo),gn(fr),gn(Es),gn(Ha))},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();function Lu(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Fu{}class Uu{}const Mu={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let qu=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||Mu}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n(8255)(e).then(t=>t[r]).then(t=>Vu(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n(8255)(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>Vu(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(gn(uu),gn(Uu,8))},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();function Vu(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const ju=function(t){return null},Bu=Ru(null,"core",[{provide:Ya,useValue:"unknown"},{provide:Ou,deps:[uo]},{provide:_u,deps:[]},{provide:Ja,deps:[]}]),Gu=[{provide:Du,useClass:Du,deps:[hu,uo,fr,Es,Ha]},{provide:ba,deps:[hu],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:Ha,useClass:Ha,deps:[[new _n,za]]},{provide:uu,useClass:uu,deps:[]},Wa,{provide:Ws,useFactory:function(){return na},deps:[]},{provide:Qs,useFactory:function(){return ra},deps:[]},{provide:Xa,useFactory:function(t){return fs(t=t||"undefined"!=typeof $localize&&$localize.locale||hs),t},deps:[[new vn(Xa),new _n,new wn]]},{provide:tu,useValue:"USD"}];let zu=(()=>{class t{constructor(t){}}return t.\u0275fac=function(e){return new(e||t)(gn(Du))},t.\u0275mod=et({type:t}),t.\u0275inj=b({providers:Gu}),t})()},2346:(t,e,n)=>{"use strict";n.d(e,{hO:()=>x,xv:()=>_,Dh:()=>v,HU:()=>f,GT:()=>y,sI:()=>E,on:()=>b,ss:()=>p,pX:()=>m,yq:()=>C});var r=n(8489),i=n(8569),o=n(6599),s=n(4187),a=n(9098),u=n(5366),c=n(1858);function l(){}t=n.hmd(t);class h{constructor(t,e=r.N){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const r=this.zone;return this.delegate.schedule(function(e){r.runGuarded(()=>{t.apply(this,[e])})},e,n)}}class d{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",l,{},l,l)),e.pipe((0,o.b)({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class f{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new h(Zone.current)),this.insideAngular=t.run(()=>new h(Zone.current,i.z))}}function p(t){return function(e){return(e=e.lift(new d(t.ngZone))).pipe((0,s.R)(t.outsideAngular),(0,a.QV)(t.insideAngular))}}const g=["ngOnDestroy"],m=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{var i;if(t[o])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(o,t[o]),t[o];if(g.indexOf(o)>-1)return()=>{};const s=e.toPromise().then(t=>{const e=t&&t[o];return"function"==typeof e?e.bind(t):e&&e.then?e.then(t=>n.run(()=>t)):n.run(()=>e)});return new Proxy(()=>{},{get:(t,e)=>s[e],apply:(t,e,n)=>s.then(t=>{var e;const i=t&&t(...n);return(null===(e=null==r?void 0:r.spy)||void 0===e?void 0:e.apply)&&r.spy.apply(o,n,i),i})})})}),y=(t,e)=>{e.forEach(e=>{Object.getOwnPropertyNames(e.prototype||e).forEach(n=>{Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype||e,n))})})},v=new u.OlP("angularfire2.app.options"),_=new u.OlP("angularfire2.app.nameOrConfig"),w=new u.GfV("6.1.4");function b(e,n,r){const i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";const o=c.Z.apps.filter(t=>t&&t.name===i.name)[0]||n.runOutsideAngular(()=>c.Z.initializeApp(e,i));try{JSON.stringify(e)!==JSON.stringify(o.options)&&T("error",`${o.name} Firebase App already initialized with different options${t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(s){}return o}const C=()=>{T("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},T=(t,...e)=>{(0,u.X6Q)()&&"undefined"!=typeof console&&console[t](...e)};function E(e,n,r,i,o){const[s,...a]=globalThis.\u0275AngularfireInstanceCache.get(e)||[];if(s){try{o.some((t,e)=>{const n=a[e];return t&&"object"==typeof t?JSON.stringify(t)!==JSON.stringify(n):t!==n})&&T("error",`${n} was already initialized on the ${r.name} Firebase App instance with different settings.${t.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(u){}return s}{const t=i();return globalThis.\u0275AngularfireInstanceCache.set(e,[t,...o]),t}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const S={provide:class{},useFactory:b,deps:[v,u.R0b,[new u.FiY,_]]};let x=(()=>{class t{constructor(t){c.Z.registerVersion("angularfire",w.full,t.toString()),c.Z.registerVersion("angular",u.q4F.full)}static initializeApp(e,n){return{ngModule:t,providers:[{provide:v,useValue:e},{provide:_,useValue:n}]}}}return t.\u0275fac=function(e){return new(e||t)(u.LFG(u.Lbi))},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({providers:[S]}),t})()},1062:(t,e,n)=>{"use strict";n.d(e,{Z:()=>b});var r,i,o=n(4762),s=n(250),a=n(5119),u=n(308),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new s.LL("app","Firebase",c),h="@firebase/app",d="[DEFAULT]",f=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/app-check"]="fire-app-check",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),p=new u.Yd("@firebase/app"),g=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=(0,s.p$)(t),this.container=new a.H0(e.name),this._addComponent(new a.wA("app",function(){return r},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(t){return r._addComponent(t)})}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(t){return t.delete()}))}).then(function(){t.isDeleted_=!0})},t.prototype._getService=function(t,e){var n;void 0===e&&(e=d),this.checkDestroyed_();var r=this.container.getProvider(t);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=d),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){p.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();g.prototype.name&&g.prototype.options||g.prototype.delete||console.log("dc");var m=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=d);var a=o.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if((0,s.r3)(e,a))throw l.create("duplicate-app",{appName:a});var u=new t(n,o,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=f[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),u=e.match(/\s|\//);if(s||u){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&u&&c.push("and"),u&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void p.warn(c.join(" "))}o(new a.wA(i+"-version",function(){return{library:i,version:e}},"VERSION"))},setLogLevel:u.Ub,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument");(0,u.Am)(t,e)},apps:null,SDK_VERSION:"8.6.1",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(!(0,s.r3)(e,t=t||d))throw l.create("no-app",{appName:t});return e[t]}function o(o){var a=o.name;if(n.has(a))return p.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var u=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw l.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==o.serviceProps&&(0,s.ZB)(u,o.serviceProps),r[a]=u,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,a).apply(this,o.multipleInstances?t:[])}}for(var c=0,h=Object.keys(e);c<h.length;c++)e[h[c]]._addComponent(o);return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map(function(t){return e[t]})}}),i.App=t,r}(g);return e.INTERNAL=(0,o.pi)((0,o.pi)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){(0,s.ZB)(e,t)},createSubscribe:s.ne,ErrorFactory:s.LL,deepExtend:s.ZB}),e}(),y=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null}).filter(function(t){return t}).join(" ")},t}();if((0,s.jU)()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var v=self.firebase.SDK_VERSION;v&&v.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var _=m.initializeApp;m.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,s.UG)()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),_.apply(void 0,t)};var w=m;!function(t,e){t.INTERNAL.registerComponent(new a.wA("platform-logger",function(t){return new y(t)},"PRIVATE")),t.registerVersion(h,"0.6.22",void 0),t.registerVersion("fire-js","")}(w);const b=w},5119:(t,e,n)=>{"use strict";n.d(e,{wA:()=>o,H0:()=>u,zt:()=>a});var r=n(4762),i=n(250),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),s="[DEFAULT]",a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Set}return t.prototype.get=function(t){void 0===t&&(t=s);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.BH;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=(0,r.pi)({identifier:s,optional:!1},t),n=e.optional,i=this.normalizeInstanceIdentifier(e.identifier);if(!this.isInitialized(i)&&!this.shouldAutoInitialize()){if(n)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(n)return null;throw o}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:s})}catch(h){}try{for(var i=(0,r.XA)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var a=(0,r.CR)(o.value,2),u=a[1],c=this.normalizeInstanceIdentifier(a[0]);try{var l=this.getOrInitializeService({instanceIdentifier:c});u.resolve(l)}catch(h){}}}catch(d){e={error:d}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=s),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return(0,r.mG)(this,void 0,void 0,function(){var t;return(0,r.Jh)(this,function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all((0,r.ev)((0,r.ev)([],(0,r.CR)(t.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}))),(0,r.CR)(t.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()}))))];case 1:return e.sent(),[2]}})})},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=s),this.instances.has(t)},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var i=t.instanceIdentifier,o=t.options,a=void 0===o?{}:o,u=this.normalizeInstanceIdentifier(void 0===i?s:i);if(this.isInitialized(u))throw Error(this.name+"("+u+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var c=this.getOrInitializeService({instanceIdentifier:u,options:a});try{for(var l=(0,r.XA)(this.instancesDeferred.entries()),h=l.next();!h.done;h=l.next()){var d=(0,r.CR)(h.value,2),f=d[1];u===this.normalizeInstanceIdentifier(d[0])&&f.resolve(c)}}catch(p){e={error:p}}finally{try{h&&!h.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}return this.invokeOnInitCallbacks(c,u),c},t.prototype.onInit=function(t){var e=this;return this.onInitCallbacks.add(t),function(){e.onInitCallbacks.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,i;try{for(var o=(0,r.XA)(this.onInitCallbacks),s=o.next();!s.done;s=o.next()){var a=s.value;try{a(t,e)}catch(u){}}}catch(c){n={error:c}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===s?void 0:e),options:i}),this.instances.set(n,o),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(a){}return o||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:s:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}(),u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},2107:(t,e,n)=>{"use strict";var r=n(1062),i=n(5119),o=n(250),s=n(4762),a=n(308);t=n.hmd(t);var u="";function c(t){u=t}var l,h=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),(0,o.Pz)(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:(0,o.cI)(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),d=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return(0,o.r3)(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),f=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new h(e)}}catch(n){}return new d},p=f("localStorage"),g=f("sessionStorage"),m=new a.Yd("@firebase/database"),y=(l=1,function(){return l++}),v=function(t){var e=(0,o.dS)(t),n=new o.gQ;n.update(e);var r=n.digest();return o.US.encodeByteArray(r)},_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=_.apply(null,i):n+="object"==typeof i?(0,o.Pz)(i):i,n+=" "}return n},w=null,b=!0,C=function(t,e){(0,o.hu)(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(m.logLevel=a.in.VERBOSE,w=m.log.bind(m),e&&g.set("logging_enabled",!0)):"function"==typeof t?w=t:(w=null,g.remove("logging_enabled"))},T=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===b&&(b=!1,null===w&&!0===g.get("logging_enabled")&&C(!0)),w){var n=_.apply(null,t);w(n)}},E=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];T.apply(void 0,(0,s.ev)([t],(0,s.CR)(e)))}},S=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+_.apply(void 0,(0,s.ev)([],(0,s.CR)(t)));m.error(n)},x=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+_.apply(void 0,(0,s.ev)([],(0,s.CR)(t)));throw m.error(n),new Error(n)},I=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+_.apply(void 0,(0,s.ev)([],(0,s.CR)(t)));m.warn(n)},k=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},A="[MIN_NAME]",R="[MAX_NAME]",P=function(t,e){if(t===e)return 0;if(t===A||e===R)return-1;if(e===A||t===R)return 1;var n=q(t),r=q(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},O=function(t,e){return t===e?0:t<e?-1:1},N=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+(0,o.Pz)(e))},D=function(t){if("object"!=typeof t||null===t)return(0,o.Pz)(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=(0,o.Pz)(e[i]),r+=":",r+=D(t[e[i]]);return r+"}"},L=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)r.push(t.substring(i,i+e>n?n:i+e));return r};function F(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var U=function(t){var e,n,r,i,s;(0,o.hu)(!k(t),"Invalid JSON number"),0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,r=Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));var a=[];for(s=52;s;s-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(s=11;s;s-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(e?1:0),a.reverse();var u=a.join(""),c="";for(s=0;s<64;s+=8){var l=parseInt(u.substr(s,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()},M=new RegExp("^-?(0*)\\d{1,10}$"),q=function(t){if(M.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},V=function(t){try{t()}catch(e){setTimeout(function(){throw I("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},j=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},B=function(){function t(t,e){var n=this;this.appName_=t,this.appCheckProvider=e,this.appCheck=null==e?void 0:e.getImmediate({optional:!0}),this.appCheck||null==e||e.get().then(function(t){return n.appCheck=t})}return t.prototype.getToken=function(t){var e=this;return this.appCheck?this.appCheck.getToken(t):new Promise(function(n,r){setTimeout(function(){e.appCheck?e.getToken(t).then(n,r):n(null)},0)})},t.prototype.addTokenChangeListener=function(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then(function(e){return e.addTokenListener(t)})},t.prototype.notifyForInvalidToken=function(){I('Provided AppCheck credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly.')},t}(),G=function(){function t(t,e,n){var r=this;this.appName_=t,this.firebaseOptions_=e,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit(function(t){return r.auth_=t})}return t.prototype.getToken=function(t){var e=this;return this.auth_?this.auth_.getToken(t).catch(function(t){return t&&"auth/token-not-initialized"===t.code?(T("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)}):new Promise(function(n,r){setTimeout(function(){e.auth_?e.getToken(t).then(n,r):n(null)},0)})},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(function(e){return e.addAuthTokenListener(t)})},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then(function(e){return e.removeAuthTokenListener(t)})},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';I(t+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},t}(),z=function(){function t(t){this.accessToken=t}return t.prototype.getToken=function(t){return Promise.resolve({accessToken:this.accessToken})},t.prototype.addTokenChangeListener=function(t){t(this.accessToken)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.OWNER="owner",t}(),H=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Z="websocket",W="long_polling",K=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===s&&(s=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=p.get("host:"+t)||this._host}return t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&p.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host+"/"+(this.includeNamespaceInQueryParams?"?ns="+this.namespace:"")},t}();function Q(t,e,n){var r;if((0,o.hu)("string"==typeof e,"typeof type must == string"),(0,o.hu)("object"==typeof n,"typeof params must == object"),e===Z)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else{if(e!==W)throw new Error("Unknown connection type: "+e);r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?"}(function(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams})(t)&&(n.ns=t.namespace);var i=[];return F(n,function(t,e){i.push(t+"="+e)}),r+i.join("&")}var Y=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),(0,o.r3)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return(0,o.p$)(this.counters_)},t}(),$={},J={};function X(t){var e=t.toString();return $[e]||($[e]=new Y),$[e]}var tt=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&V(function(){n.onMessage_(t[e])})},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==r(););},t}(),et="start",nt="close",rt=function(){function t(t,e,n,r,i,o,s){var a=this;this.connId=t,this.repoInfo=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=o,this.lastSessionId=s,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=E(t),this.stats_=X(e),this.urlFn=function(t){return a.appCheckToken&&(t.ac=a.appCheckToken),Q(e,W,t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new tt(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null},Math.floor(3e4)),function(t){if((0,o.Yr)()||"complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(function(){if(!n.isClosed_){n.scriptTagHolder=new it(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=(0,s.CR)(t,5),i=r[0],o=r[1],a=r[2];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===et)n.id=o,n.password=a;else{if(i!==nt)throw new Error("Unrecognized command received: "+i);o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,function(){n.onClosed_()})):n.onClosed_()}},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=(0,s.CR)(t,2),i=r[0],o=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,o)},function(){n.onClosed_()},n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),n.appCheckToken&&(t.ac=n.appCheckToken),"undefined"!=typeof location&&location.hostname&&H.test(location.hostname)&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,function(){})}})},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!((0,o.Yr)()||!t.forceAllow_&&(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=(0,o.Pz)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=(0,o.h$)(e),r=L(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!(0,o.Yr)()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=(0,o.Pz)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),it=function(){function t(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,o.Yr)())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=y(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(s='<script>document.domain="'+document.domain+'";<\/script>');var a="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(u){T("frame writing exception"),u.stack&&T(u.stack),T(u)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||T("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)},Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return this.addLongPollTag_(e+=n,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,function(){clearTimeout(i),r()})},t.prototype.addTag=function(t,e){var n=this;(0,o.Yr)()?this.doNodeLongPoll(t,e):setTimeout(function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){T("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}},Math.floor(1))},t}(),ot=null;"undefined"!=typeof MozWebSocket?ot=MozWebSocket:"undefined"!=typeof WebSocket&&(ot=WebSocket);var st=function(){function t(e,n,r,i,o,s,a){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=E(this.connId),this.stats_=X(n),this.connURL=t.connectionURL_(n,s,a,i),this.nodeAdmin=n.nodeAdmin}return t.connectionURL_=function(t,e,n,r){var i={v:"5"};return!(0,o.Yr)()&&"undefined"!=typeof location&&location.hostname&&H.test(location.hostname)&&(i.r="f"),e&&(i.s=e),n&&(i.ls=n),r&&(i.ac=r),Q(t,Z,i)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,p.set("previous_websocket_failure",!0);try{if((0,o.Yr)()){var r={headers:{"User-Agent":"Firebase/5/"+u+"/"+process.platform+"/"+(this.nodeAdmin?"AdminNode":"Node"),"X-Firebase-GMPID":this.applicationId||""}};this.nodeAdmin?r.headers.Authorization=this.authToken||"":r.headers["X-Firebase-AppCheck"]=this.appCheckToken||"";var i=process.env,s=0===this.connURL.indexOf("wss://")?i.HTTPS_PROXY||i.https_proxy:i.HTTP_PROXY||i.http_proxy;s&&(r.proxy={origin:s}),this.mySock=new ot(this.connURL,[],r)}else this.mySock=new ot(this.connURL,[],r={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(c){this.log_("Error instantiating WebSocket.");var a=c.message||c.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==ot&&!t.forceDisallow_},t.previouslyFailed=function(){return p.isInMemoryStorage||!0===p.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){p.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=(0,o.cI)(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if((0,o.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=(0,o.Pz)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=L(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),at=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[rt,st]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,i=st&&st.isAvailable(),o=i&&!st.previouslyFailed();if(e.webSocketOnly&&(i||I("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[st];else{var a=this.transports_=[];try{for(var u=(0,s.XA)(t.ALL_TRANSPORTS),c=u.next();!c.done;c=u.next()){var l=c.value;l&&l.isAvailable()&&a.push(l)}}catch(h){n={error:h}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),ut=function(){function t(t,e,n,r,i,o,s,a,u,c){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=o,this.onReady_=s,this.onDisconnect_=a,this.onKill_=u,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=E("c:"+this.id+":"),this.transportManager_=new at(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(n,r)},Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=j(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){this.sendData_({t:"d",d:t})},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=N("t",t),n=N("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=N("t",t),n=N("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=N("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?S("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):S("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&I("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),j(function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())},Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):j(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(p.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),ct=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.refreshAppCheckToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),lt=function(){function t(t){this.allowedEvents_=t,this.listeners_={},(0,o.hu)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=(0,s.ev)([],(0,s.CR)(this.listeners_[t])),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){(0,o.hu)(this.allowedEvents_.find(function(e){return e===t}),"Unknown event: "+t)},t}(),ht=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||(0,o.uI)()||(window.addEventListener("online",function(){e.online_||(e.online_=!0,e.trigger("online",!0))},!1),window.addEventListener("offline",function(){e.online_&&(e.online_=!1,e.trigger("online",!1))},!1)),e}return(0,s.ZT)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return(0,o.hu)("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(lt),dt=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t}();function ft(){return new dt("")}function pt(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function gt(t){return t.pieces_.length-t.pieceNum_}function mt(t){var e=t.pieceNum_;return e<t.pieces_.length&&e++,new dt(t.pieces_,e)}function yt(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function vt(t,e){return void 0===e&&(e=0),t.pieces_.slice(t.pieceNum_+e)}function _t(t){if(t.pieceNum_>=t.pieces_.length)return null;for(var e=[],n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new dt(e,0)}function wt(t,e){for(var n=[],r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof dt)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new dt(n,0)}function bt(t){return t.pieceNum_>=t.pieces_.length}function Ct(t,e){var n=pt(t),r=pt(e);if(null===n)return e;if(n===r)return Ct(mt(t),mt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Tt(t,e){for(var n=vt(t,0),r=vt(e,0),i=0;i<n.length&&i<r.length;i++){var o=P(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function Et(t,e){if(gt(t)!==gt(e))return!1;for(var n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function St(t,e){var n=t.pieceNum_,r=e.pieceNum_;if(gt(t)>gt(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var xt=function(){return function(t,e){this.errorPrefix_=e,this.parts_=vt(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=(0,o.ug)(this.parts_[n]);It(this)}}();function It(t){if(t.byteLength_>768)throw new Error(t.errorPrefix_+"has a key path longer than 768 bytes ("+t.byteLength_+").");if(t.parts_.length>32)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+kt(t))}function kt(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}var At,Rt,Pt=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))},!1),r}return(0,s.ZT)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return(0,o.hu)("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(lt),Ot=1e3,Nt=function(t){function e(n,r,i,s,a,u,c,l){var h=t.call(this)||this;if(h.repoInfo_=n,h.applicationId_=r,h.onDataUpdate_=i,h.onConnectStatus_=s,h.onServerInfoUpdate_=a,h.authTokenProvider_=u,h.appCheckTokenProvider_=c,h.authOverride_=l,h.id=e.nextPersistentConnectionId_++,h.log_=E("p:"+h.id+":"),h.interruptReasons_={},h.listens=new Map,h.outstandingPuts_=[],h.outstandingGets_=[],h.outstandingPutCount_=0,h.outstandingGetCount_=0,h.onDisconnectRequestQueue_=[],h.connected_=!1,h.reconnectDelay_=Ot,h.maxReconnectDelay_=3e5,h.securityDebugCallback_=null,h.lastSessionId=null,h.establishConnectionTimer_=null,h.visible_=!1,h.requestCBHash_={},h.requestNumber_=0,h.realtime_=null,h.authToken_=null,h.appCheckToken_=null,h.forceTokenRefresh_=!1,h.invalidAuthTokenCount_=0,h.invalidAppCheckTokenCount_=0,h.firstConnection_=!0,h.lastConnectionAttemptTime_=null,h.lastConnectionEstablishedTime_=null,l&&!(0,o.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return Pt.getInstance().on("visible",h.onVisible_,h),-1===n.host.indexOf("fblocal")&&ht.getInstance().on("online",h.onOnline_,h),h}return(0,s.ZT)(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_((0,o.Pz)(i)),(0,o.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.get=function(t){var e=this;this.initConnection_();var n=new o.BH,r={p:t._path.toString(),q:t._queryObject},i={action:"g",request:r,onComplete:function(t){var i=t.d;"ok"===t.s?(e.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var s=this.outstandingGets_.length-1;return this.connected_||setTimeout(function(){var t=e.outstandingGets_[s];void 0!==t&&i===t&&(delete e.outstandingGets_[s],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),e.log_("get "+s+" timed out on connection"),n.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(s),n.promise},e.prototype.listen=function(t,e,n,r){this.initConnection_();var i=t._queryIdentifier,s=t._path.toString();this.log_("Listen called for "+s+" "+i),this.listens.has(s)||this.listens.set(s,new Map),(0,o.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,o.hu)(!this.listens.get(s).has(i),"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(s).set(i,a),this.connected_&&this.sendListen_(a)},e.prototype.sendGet_=function(t){var e=this,n=this.outstandingGets_[t];this.sendRequest("g",n.request,function(r){delete e.outstandingGets_[t],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);var s={p:i};t.tag&&(s.q=r._queryObject,s.t=t.tag),s.h=t.hashFn(),this.sendRequest("q",s,function(s){var a=s.d,u=s.s;e.warnOnListenWarnings_(a,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",s),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,a))})},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&(0,o.r3)(t,"w")){var n=(0,o.DV)(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e._queryParams.getIndex().toString()+'"',i=e._path.toString();I("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||(0,o.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.refreshAppCheckToken=function(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},function(){})},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=(0,o.w9)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,function(n){var r=n.s,i=n.d||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))})}},e.prototype.tryAppCheck=function(){var t=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},function(e){var n=e.s,r=e.d||"error";"ok"===n?t.invalidAppCheckTokenCount_=0:t.onAppCheckRevoked_(n,r)})},e.prototype.unlisten=function(t,e){var n=t._path.toString(),r=t._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),(0,o.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t._queryObject,e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,function(t){r&&setTimeout(function(){r(t.s,t.d)},Math.floor(0))})},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){this.initConnection_();var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)})},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,function(t){"ok"!==t.s&&e.log_("reportStats","Error sending stats: "+t.d)})}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+(0,o.Pz)(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"apc"===t?this.onAppCheckRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):S("Unrecognized action received from server: "+(0,o.Pz)(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;(0,o.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){e.establishConnectionTimer_=null,e.establishConnection_()},Math.floor(t))},e.prototype.initConnection_=function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ot,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Ot,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Ot),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){return(0,s.mG)(this,void 0,void 0,function(){var t,n,r,i,a,u,c,l,h,d,f,p,g,m=this;return(0,s.Jh)(this,function(y){switch(y.label){case 0:if(!this.shouldReconnect_())return[3,4];this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+e.nextConnectionId_++,a=this.lastSessionId,u=!1,c=null,this.realtime_={close:l=function(){c?c.close():(u=!0,r())},sendRequest:function(t){(0,o.hu)(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(t)}},h=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,y.label=1;case 1:return y.trys.push([1,3,,4]),[4,Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)])];case 2:return d=s.CR.apply(void 0,[y.sent(),2]),f=d[0],p=d[1],u?T("getToken() completed but was canceled"):(T("getToken() completed. Creating connection."),this.authToken_=f&&f.accessToken,this.appCheckToken_=p&&p.token,c=new ut(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,n,r,function(t){I(t+" ("+m.repoInfo_.toString()+")"),m.interrupt("server_kill")},a)),[3,4];case 3:return g=y.sent(),this.log_("Failed to get token: "+g),u||(this.repoInfo_.nodeAdmin&&I(g),l()),[3,4];case 4:return[2]}})})},e.prototype.interrupt=function(t){T("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){T("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,o.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Ot,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map(function(t){return D(t)}).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new dt(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){T("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onAppCheckRevoked_=function(t,e){T("App check token revoked: "+t+"/"+e),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth(),this.tryAppCheck();try{for(var i=(0,s.XA)(this.listens.values()),o=i.next();!o.done;o=i.next()){var a=o.value;try{for(var u=(n=void 0,(0,s.XA)(a.values())),c=u.next();!c.done;c=u.next())this.sendListen_(c.value)}catch(d){n={error:d}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(f){t={error:f}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}for(l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)},e.prototype.sendConnectStats_=function(){var t={},e="js";(0,o.Yr)()&&(e=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+e+"."+u.replace(/\./g,"-")]=1,(0,o.uI)()?t["framework.cordova"]=1:(0,o.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=ht.getInstance().currentlyOnline();return(0,o.xb)(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(ct),Dt=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),Lt=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new Dt(A,t),r=new Dt(A,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return Dt.MIN},t}(),Ft=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,s.ZT)(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return At},set:function(t){At=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return P(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw(0,o.g5)("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return Dt.MIN},e.prototype.maxPost=function(){return new Dt(R,At)},e.prototype.makePost=function(t,e){return(0,o.hu)("string"==typeof t,"KeyIndex indexValue must always be a string."),new Dt(t,At)},e.prototype.toString=function(){return".key"},e}(Lt),Ut=new Ft,Mt=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),qt=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:jt.EMPTY_NODE,this.right=null!=o?o:jt.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return jt.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return jt.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),Vt=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new qt(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),jt=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,qt.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,qt.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new Mt(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new Mt(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new Mt(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new Mt(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new Vt,t}();function Bt(t,e){return P(t.name,e.name)}function Gt(t,e){return P(t,e)}var zt,Ht,Zt,Wt,Kt,Qt=function(t){return"number"==typeof t?"number:"+U(t):"string:"+t},Yt=function(t){if(t.isLeafNode()){var e=t.val();(0,o.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,o.r3)(e,".sv"),"Priority must be a string or number.")}else(0,o.hu)(t===Rt||t.isEmpty(),"priority of unexpected type.");(0,o.hu)(t===Rt||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},$t=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,(0,o.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Yt(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return zt},set:function(t){zt=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return bt(e)?this:".priority"===pt(e)?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=pt(e);return null===r?n:n.isEmpty()&&".priority"!==r?this:((0,o.hu)(".priority"!==r||1===gt(e),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(mt(e),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+Qt(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?U(this.value_):this.value_,this.lazyHash_=v(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:((0,o.hu)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,i=t.VALUE_TYPE_ORDER.indexOf(n),s=t.VALUE_TYPE_ORDER.indexOf(r);return(0,o.hu)(i>=0,"Unknown leaf type: "+n),(0,o.hu)(s>=0,"Unknown leaf type: "+r),i===s?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}(),Jt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,s.ZT)(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?P(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return Dt.MIN},e.prototype.maxPost=function(){return new Dt(R,new $t("[PRIORITY-POST]",Zt))},e.prototype.makePost=function(t,e){var n=Ht(t);return new Dt(e,new $t("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(Lt)),Xt=Math.log(2),te=function(){function t(t){this.count=parseInt(Math.log(t+1)/Xt,10),this.current_=this.count-1;var e=parseInt(Array(this.count+1).join("1"),2);this.bits_=t+1&e}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),ee=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,s,a=r-e;if(0===a)return null;if(1===a)return o=t[e],s=n?n(o):o,new qt(s,o.node,qt.BLACK,null,null);var u=parseInt(a/2,10)+e,c=i(e,u),l=i(u+1,r);return o=t[u],s=n?n(o):o,new qt(s,o.node,qt.BLACK,c,l)},o=function(e){for(var r=null,o=null,s=t.length,a=function(e,r){var o=s-e,a=s;s-=e;var c=i(o+1,a),l=t[o],h=n?n(l):l;u(new qt(h,l.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var l=e.nextBitIsOne(),h=Math.pow(2,e.count-(c+1));l?a(h,qt.BLACK):(a(h,qt.BLACK),a(h,qt.RED))}return o}(new te(t.length));return new jt(r||e,o)},ne={},re=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return(0,o.hu)(ne&&Jt,"ChildrenNode.ts has not been loaded"),Wt=Wt||new t({".priority":ne},{".priority":Jt})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=(0,o.DV)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof jt?e:null},t.prototype.hasIndex=function(t){return(0,o.r3)(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){(0,o.hu)(e!==Ut,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],a=!1,u=n.getIterator(Dt.Wrap),c=u.getNext();c;)a=a||e.isDefinedOn(c.node),i.push(c),c=u.getNext();r=a?ee(i,e.getCompare()):ne;var l=e.toString(),h=(0,s.pi)({},this.indexSet_);h[l]=e;var d=(0,s.pi)({},this.indexes_);return d[l]=r,new t(d,h)},t.prototype.addToIndexes=function(e,n){var r=this;return new t((0,o.UI)(this.indexes_,function(t,i){var s=(0,o.DV)(r.indexSet_,i);if((0,o.hu)(s,"Missing index implementation for "+i),t===ne){if(s.isDefinedOn(e.node)){for(var a=[],u=n.getIterator(Dt.Wrap),c=u.getNext();c;)c.name!==e.name&&a.push(c),c=u.getNext();return a.push(e),ee(a,s.getCompare())}return ne}var l=n.get(e.name),h=t;return l&&(h=h.remove(new Dt(e.name,l))),h.insert(e,e.node)}),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t((0,o.UI)(this.indexes_,function(t){if(t===ne)return t;var r=n.get(e.name);return r?t.remove(new Dt(e.name,r)):t}),this.indexSet_)},t}(),ie=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Yt(this.priorityNode_),this.children_.isEmpty()&&(0,o.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return Kt||(Kt=new t(new jt(Gt),null,re.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||Kt},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?Kt:e},t.prototype.getChild=function(t){var e=pt(t);return null===e?this:this.getImmediateChild(e).getChild(mt(t))},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if((0,o.hu)(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new Dt(e,n),i=void 0,s=void 0;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));var a=i.isEmpty()?Kt:this.priorityNode_;return new t(i,a,s)},t.prototype.updateChild=function(t,e){var n=pt(t);if(null===n)return e;(0,o.hu)(".priority"!==pt(t)||1===gt(t),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(mt(t),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(Jt,function(s,a){n[s]=a.val(e),r++,o&&t.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):o=!1}),!e&&o&&i<2*r){var s=[];for(var a in n)s[a]=n[a];return s}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+Qt(this.getPriority().val())+":"),this.forEachChild(Jt,function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)}),this.lazyHash_=""===t?"":v(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Dt(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new Dt(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new Dt(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal(function(t){return e(t.name,t.node)}):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,function(t){return t});for(var r=this.children_.getIteratorFrom(t.name,Dt.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,function(t){return t});for(var r=this.children_.getReverseIteratorFrom(t.name,Dt.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===oe?-1:0},t.prototype.withIndex=function(e){if(e===Ut||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===Ut||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(Jt),r=e.getIterator(Jt),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===Ut?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),oe=new(function(t){function e(){return t.call(this,new jt(Gt),ie.EMPTY_NODE,re.Default)||this}return(0,s.ZT)(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return ie.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(ie));function se(t,e){if(void 0===e&&(e=null),null===t)return ie.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),(0,o.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new $t(t,se(e));if(t instanceof Array){var n=ie.EMPTY_NODE;return F(t,function(e,r){if((0,o.r3)(t,e)&&"."!==e.substring(0,1)){var i=se(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(e,i))}}),n.updatePriority(se(e))}var r=[],i=!1;if(F(t,function(t,e){if("."!==t.substring(0,1)){var n=se(e);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new Dt(t,n)))}}),0===r.length)return ie.EMPTY_NODE;var s=ee(r,Bt,function(t){return t.name},Gt);if(i){var a=ee(r,Jt.getCompare());return new ie(s,se(e),new re({".priority":a},{".priority":Jt}))}return new ie(s,se(e),re.Default)}Object.defineProperties(Dt,{MIN:{value:new Dt(A,ie.EMPTY_NODE)},MAX:{value:new Dt(R,oe)}}),Ft.__EMPTY_NODE=ie.EMPTY_NODE,$t.__childrenNodeConstructor=ie,Rt=oe,Zt=oe,Ht=se;var ae,ue,ce=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,(0,o.hu)(!bt(e)&&".priority"!==pt(e),"Can't create PathIndex with empty path or .priority key"),n}return(0,s.ZT)(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?P(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=se(t),r=ie.EMPTY_NODE.updateChild(this.indexPath_,n);return new Dt(e,r)},e.prototype.maxPost=function(){var t=ie.EMPTY_NODE.updateChild(this.indexPath_,oe);return new Dt(R,t)},e.prototype.toString=function(){return vt(this.indexPath_,0).join("/")},e}(Lt),le=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,s.ZT)(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?P(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return Dt.MIN},e.prototype.maxPost=function(){return Dt.MAX},e.prototype.makePost=function(t,e){var n=se(t);return new Dt(e,n)},e.prototype.toString=function(){return".value"},e}(Lt)),he="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",de=(ae=0,ue=[],function(t){var e,n=t===ae;ae=t;var r=new Array(8);for(e=7;e>=0;e--)r[e]=he.charAt(t%64),t=Math.floor(t/64);(0,o.hu)(0===t,"Cannot push at time == 0");var i=r.join("");if(n){for(e=11;e>=0&&63===ue[e];e--)ue[e]=0;ue[e]++}else for(e=0;e<12;e++)ue[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)i+=he.charAt(ue[e]);return(0,o.hu)(20===i.length,"nextPushId: Length should be 20."),i}),fe=function(t){if("2147483647"===t)return"-";var e=q(t);if(null!=e)return""+(e+1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return R;var o=he.charAt(he.indexOf(n[i])+1);return n[i]=o,n.slice(0,i+1).join("")},pe=function(t){if("-2147483648"===t)return A;var e=q(t);if(null!=e)return""+(e-1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=he.charAt(he.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))};function ge(t){return{type:"value",snapshotNode:t}}function me(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function ye(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function ve(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}var _e=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,s){(0,o.hu)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?t:(null!=s&&(n.isEmpty()?t.hasChild(e)?s.trackChildChange(ye(e,a)):(0,o.hu)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(me(e,n)):s.trackChildChange(ve(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(Jt,function(t,r){e.hasChild(t)||n.trackChildChange(ye(t,r))}),e.isLeafNode()||e.forEachChild(Jt,function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(ve(e,r,i))}else n.trackChildChange(me(e,r))})),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?ie.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),we=function(){function t(e){this.indexedFilter_=new _e(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new Dt(e,n))||(n=ie.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=ie.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(ie.EMPTY_NODE);var i=this;return e.forEachChild(Jt,function(t,e){i.matches(new Dt(t,e))||(r=r.updateImmediateChild(t,ie.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),be=function(){function t(t){this.rangedFilter_=new we(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new Dt(e,n))||(n=ie.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=ie.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=ie.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(ie.EMPTY_NODE);var a=void 0,u=void 0,c=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(t,e){return l(e,t)}}else i=r.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();)s=i.getNext(),!h&&c(a,s)<=0&&(h=!0),h&&o<this.limit_&&c(s,u)<=0?o++:r=r.updateImmediateChild(s.name,ie.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var s;if(this.reverse_){var a=this.index_.getCompare();s=function(t,e){return a(e,t)}}else s=this.index_.getCompare();var u=t;(0,o.hu)(u.numChildren()===this.limit_,"");var c=new Dt(e,n),l=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(u.hasChild(e)){for(var d=u.getImmediateChild(e),f=r.getChildAfterChild(this.index_,l,this.reverse_);null!=f&&(f.name===e||u.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var p=null==f?1:s(f,c);if(h&&!n.isEmpty()&&p>=0)return null!=i&&i.trackChildChange(ve(e,n,d)),u.updateImmediateChild(e,n);null!=i&&i.trackChildChange(ye(e,d));var g=u.updateImmediateChild(e,ie.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(me(f.name,f.node)),g.updateImmediateChild(f.name,f.node)):g}return n.isEmpty()?t:h&&s(l,c)>=0?(null!=i&&(i.trackChildChange(ye(l.name,l.node)),i.trackChildChange(me(e,n))),u.updateImmediateChild(e,n).updateImmediateChild(l.name,ie.EMPTY_NODE)):t},t}(),Ce=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Jt}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.hasStartAfter=function(){return this.startAfterSet_},t.prototype.hasEndBefore=function(){return this.endBeforeSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},t.prototype.getIndexStartValue=function(){return(0,o.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return(0,o.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:A},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return(0,o.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return(0,o.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:R},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return(0,o.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Jt},t.prototype.copy=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t}();function Te(t,e,n){var r=t.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function Ee(t,e,n){var r=t.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function Se(t,e){var n=t.copy();return n.index_=e,n}function xe(t){var e,n={};return t.isDefault()||(t.index_===Jt?e="$priority":t.index_===le?e="$value":t.index_===Ut?e="$key":((0,o.hu)(t.index_ instanceof ce,"Unrecognized index type!"),e=t.index_.toString()),n.orderBy=(0,o.Pz)(e),t.startSet_&&(n.startAt=(0,o.Pz)(t.indexStartValue_),t.startNameSet_&&(n.startAt+=","+(0,o.Pz)(t.indexStartName_))),t.endSet_&&(n.endAt=(0,o.Pz)(t.indexEndValue_),t.endNameSet_&&(n.endAt+=","+(0,o.Pz)(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?n.limitToFirst=t.limit_:n.limitToLast=t.limit_)),n}function Ie(t){var e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_)),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_)),t.limitSet_){e.l=t.limit_;var n=t.viewFrom_;""===n&&(n=t.isViewFromLeft()?"l":"r"),e.vf=n}return t.index_!==Jt&&(e.i=t.index_.toString()),e}var ke=function(t){function e(e,n,r,i){var o=t.call(this)||this;return o.repoInfo_=e,o.onDataUpdate_=n,o.authTokenProvider_=r,o.appCheckTokenProvider_=i,o.log_=E("p:rest:"),o.listens_={},o}return(0,s.ZT)(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:((0,o.hu)(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())},e.prototype.listen=function(t,n,r,i){var s=this,a=t._path.toString();this.log_("Listen called for "+a+" "+t._queryIdentifier);var u=e.getListenId_(t,r),c={};this.listens_[u]=c;var l=xe(t._queryParams);this.restRequest_(a+".json",l,function(t,e){var n=e;404===t&&(n=null,t=null),null===t&&s.onDataUpdate_(a,n,!1,r),(0,o.DV)(s.listens_,u)===c&&i(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)})},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.get=function(t){var e=this,n=xe(t._queryParams),r=t._path.toString(),i=new o.BH;return this.restRequest_(r+".json",n,function(t,n){var o=n;404===t&&(o=null,t=null),null===t?(e.onDataUpdate_(r,o,!1,null),i.resolve(o)):i.reject(new Error(o))}),i.promise},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;return void 0===e&&(e={}),e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(function(i){var a=(0,s.CR)(i,2),u=a[0],c=a[1];u&&u.accessToken&&(e.auth=u.accessToken),c&&c.token&&(e.ac=c.token);var l=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+(0,o.xO)(e);r.log_("Sending REST request for "+l);var h=new XMLHttpRequest;h.onreadystatechange=function(){if(n&&4===h.readyState){r.log_("REST Response for "+l+" received. status:",h.status,"response:",h.responseText);var t=null;if(h.status>=200&&h.status<300){try{t=(0,o.cI)(h.responseText)}catch(e){I("Failed to parse JSON response for "+l+": "+h.responseText)}n(null,t)}else 401!==h.status&&404!==h.status&&I("Got unsuccessful REST response for "+l+" Status: "+h.status),n(h.status);n=null}},h.open("GET",l,!0),h.send()})},e}(ct),Ae=function(){function t(){this.rootNode_=ie.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}();function Re(){return{value:null,children:new Map}}function Pe(t,e,n){if(bt(e))t.value=n,t.children.clear();else if(null!==t.value)t.value=t.value.updateChild(e,n);else{var r=pt(e);t.children.has(r)||t.children.set(r,Re()),Pe(t.children.get(r),e=mt(e),n)}}function Oe(t,e){if(bt(e))return t.value=null,t.children.clear(),!0;if(null!==t.value){if(t.value.isLeafNode())return!1;var n=t.value;return t.value=null,n.forEachChild(Jt,function(e,n){Pe(t,new dt(e),n)}),Oe(t,e)}if(t.children.size>0){var r=pt(e);return e=mt(e),t.children.has(r)&&Oe(t.children.get(r),e)&&t.children.delete(r),0===t.children.size}return!0}function Ne(t,e,n){null!==t.value?n(e,t.value):function(t,e){t.children.forEach(function(t,n){e(n,t)})}(t,function(t,r){Ne(r,new dt(e.toString()+"/"+t),n)})}var De=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=(0,s.pi)({},t);return this.last_&&F(this.last_,function(t,n){e[t]=e[t]-n}),this.last_=t,e},t}(),Le=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new De(t);var n=1e4+2e4*Math.random();j(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;F(e,function(e,i){i>0&&(0,o.r3)(t.statsToReport_,e)&&(n[e]=i,r=!0)}),r&&this.server_.reportStats(n),j(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),Fe=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}({});function Ue(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var Me,qe=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=Fe.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return t.prototype.operationForChild=function(e){if(bt(this.path)){if(null!=this.affectedTree.value)return(0,o.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new dt(e));return new t(ft(),n,this.revert)}return(0,o.hu)(pt(this.path)===e,"operationForChild called for unrelated child."),new t(mt(this.path),this.affectedTree,this.revert)},t}(),Ve=function(){function t(t,e){this.source=t,this.path=e,this.type=Fe.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return bt(this.path)?new t(this.source,ft()):new t(this.source,mt(this.path))},t}(),je=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=Fe.OVERWRITE}return t.prototype.operationForChild=function(e){return bt(this.path)?new t(this.source,ft(),this.snap.getImmediateChild(e)):new t(this.source,mt(this.path),this.snap)},t}(),Be=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=Fe.MERGE}return t.prototype.operationForChild=function(e){if(bt(this.path)){var n=this.children.subtree(new dt(e));return n.isEmpty()?null:n.value?new je(this.source,ft(),n.value):new t(this.source,ft(),n)}return(0,o.hu)(pt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,mt(this.path),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),Ge=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(bt(t))return this.isFullyInitialized()&&!this.filtered_;var e=pt(t);return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),ze=function(){return function(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}();function He(t,e,n,r,i,s){var a=r.filter(function(t){return t.type===n});a.sort(function(e,n){return function(t,e,n){if(null==e.childName||null==n.childName)throw(0,o.g5)("Should only compare child_ events.");var r=new Dt(e.childName,e.snapshotNode),i=new Dt(n.childName,n.snapshotNode);return t.index_.compare(r,i)}(t,e,n)}),a.forEach(function(n){var r=function(t,e,n){return"value"===e.type||"child_removed"===e.type||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}(t,n,s);i.forEach(function(i){i.respondsTo(n.type)&&e.push(i.createEvent(r,t.query_))})})}function Ze(t,e){return{eventCache:t,serverCache:e}}function We(t,e,n,r){return Ze(new Ge(e,n,r),t.serverCache)}function Ke(t,e,n,r){return Ze(t.eventCache,new Ge(e,n,r))}function Qe(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Ye(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var $e=function(){function t(t,e){void 0===e&&(Me||(Me=new jt(O)),e=Me),this.value=t,this.children=e}return t.fromObject=function(e){var n=new t(null);return F(e,function(t,e){n=n.set(new dt(t),e)}),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:ft(),value:this.value};if(bt(t))return null;var n=pt(t),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(mt(t),e);return null!=i?{path:wt(new dt(n),i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},t.prototype.subtree=function(e){if(bt(e))return this;var n=pt(e),r=this.children.get(n);return null!==r?r.subtree(mt(e)):new t(null)},t.prototype.set=function(e,n){if(bt(e))return new t(n,this.children);var r=pt(e),i=(this.children.get(r)||new t(null)).set(mt(e),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(bt(e))return this.children.isEmpty()?new t(null):new t(null,this.children);var n=pt(e),r=this.children.get(n);if(r){var i=r.remove(mt(e)),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?new t(null):new t(this.value,o)}return this},t.prototype.get=function(t){if(bt(t))return this.value;var e=pt(t),n=this.children.get(e);return n?n.get(mt(t)):null},t.prototype.setTree=function(e,n){if(bt(e))return n;var r,i=pt(e),o=(this.children.get(i)||new t(null)).setTree(mt(e),n);return r=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new t(this.value,r)},t.prototype.fold=function(t){return this.fold_(ft(),t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal(function(r,i){n[r]=i.fold_(wt(t,r),e)}),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,ft(),e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(bt(t))return null;var i=pt(t),o=this.children.get(i);return o?o.findOnPath_(mt(t),wt(e,i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,ft(),e)},t.prototype.foreachOnPath_=function(e,n,r){if(bt(e))return this;this.value&&r(n,this.value);var i=pt(e),o=this.children.get(i);return o?o.foreachOnPath_(mt(e),wt(n,i),r):new t(null)},t.prototype.foreach=function(t){this.foreach_(ft(),t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal(function(n,r){r.foreach_(wt(t,n),e)}),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal(function(e,n){n.value&&t(e,n.value)})},t}(),Je=function(){function t(t){this.writeTree_=t}return t.empty=function(){return new t(new $e(null))},t}();function Xe(t,e,n){if(bt(e))return new Je(new $e(n));var r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,s=Ct(i,e);return o=o.updateChild(s,n),new Je(t.writeTree_.set(i,o))}var a=new $e(n),u=t.writeTree_.setTree(e,a);return new Je(u)}function tn(t,e,n){var r=t;return F(n,function(t,n){r=Xe(r,wt(e,t),n)}),r}function en(t,e){if(bt(e))return Je.empty();var n=t.writeTree_.setTree(e,new $e(null));return new Je(n)}function nn(t,e){return null!=rn(t,e)}function rn(t,e){var n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(Ct(n.path,e)):null}function on(t){var e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Jt,function(t,n){e.push(new Dt(t,n))}):t.writeTree_.children.inorderTraversal(function(t,n){null!=n.value&&e.push(new Dt(t,n.value))}),e}function sn(t,e){if(bt(e))return t;var n=rn(t,e);return new Je(null!=n?new $e(n):t.writeTree_.subtree(e))}function an(t){return t.writeTree_.isEmpty()}function un(t,e){return cn(ft(),t.writeTree_,e)}function cn(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);var r=null;return e.children.inorderTraversal(function(e,i){".priority"===e?((0,o.hu)(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=cn(wt(t,e),i,n)}),n.getChild(t).isEmpty()||null===r||(n=n.updateChild(wt(t,".priority"),r)),n}function ln(t,e){return bn(e,t)}function hn(t,e){if(t.snap)return St(t.path,e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&St(wt(t.path,n),e))return!0;return!1}function dn(t){return t.visible}function fn(t,e,n){for(var r=Je.empty(),i=0;i<t.length;++i){var s=t[i];if(e(s)){var a=s.path,u=void 0;if(s.snap)St(n,a)?r=Xe(r,u=Ct(n,a),s.snap):St(a,n)&&(u=Ct(a,n),r=Xe(r,ft(),s.snap.getChild(u)));else{if(!s.children)throw(0,o.g5)("WriteRecord should have .snap or .children");if(St(n,a))r=tn(r,u=Ct(n,a),s.children);else if(St(a,n))if(bt(u=Ct(a,n)))r=tn(r,ft(),s.children);else{var c=(0,o.DV)(s.children,pt(u));if(c){var l=c.getChild(mt(u));r=Xe(r,ft(),l)}}}}}return r}function pn(t,e,n,r,i){if(r||i){var o=sn(t.visibleWrites,e);return!i&&an(o)?n:i||null!=n||nn(o,ft())?un(fn(t.allWrites,function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(St(t.path,e)||St(e,t.path))},e),n||ie.EMPTY_NODE):null}var s=rn(t.visibleWrites,e);if(null!=s)return s;var a=sn(t.visibleWrites,e);return an(a)?n:null!=n||nn(a,ft())?un(a,n||ie.EMPTY_NODE):null}function gn(t,e,n,r){return pn(t.writeTree,t.treePath,e,n,r)}function mn(t,e){return function(t,e,n){var r=ie.EMPTY_NODE,i=rn(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Jt,function(t,e){r=r.updateImmediateChild(t,e)}),r;if(n){var o=sn(t.visibleWrites,e);return n.forEachChild(Jt,function(t,e){var n=un(sn(o,new dt(t)),e);r=r.updateImmediateChild(t,n)}),on(o).forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r}return on(sn(t.visibleWrites,e)).forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r}(t.writeTree,t.treePath,e)}function yn(t,e,n,r){return function(t,e,n,r,i){(0,o.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");var s=wt(e,n);if(nn(t.visibleWrites,s))return null;var a=sn(t.visibleWrites,s);return an(a)?i.getChild(n):un(a,i.getChild(n))}(t.writeTree,t.treePath,e,n,r)}function vn(t,e){return function(t,e){return rn(t.visibleWrites,e)}(t.writeTree,wt(t.treePath,e))}function _n(t,e,n){return function(t,e,n,r){var i=wt(e,n),o=rn(t.visibleWrites,i);return null!=o?o:r.isCompleteForChild(n)?un(sn(t.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(t.writeTree,t.treePath,e,n)}function wn(t,e){return bn(wt(t.treePath,e),t.writeTree)}function bn(t,e){return{treePath:t,writeTree:e}}var Cn=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;(0,o.hu)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),(0,o.hu)(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===e&&"child_removed"===i)this.changeMap.set(n,ve(n,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===e&&"child_changed"===i)this.changeMap.set(n,ye(n,r.oldSnap));else if("child_changed"===e&&"child_added"===i)this.changeMap.set(n,me(n,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==i)throw(0,o.g5)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,ve(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),Tn=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),En=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new Ge(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return _n(this.writes_,t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Ye(this.viewCache_),i=function(t,e,n,r,i,o){return function(t,e,n,r,i,o,s){var a,u=sn(t.visibleWrites,e),c=rn(u,ft());if(null!=c)a=c;else{if(null==n)return[];a=un(u,n)}if((a=a.withIndex(s)).isEmpty()||a.isLeafNode())return[];for(var l=[],h=s.getCompare(),d=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s),f=d.getNext();f&&l.length<1;)0!==h(f,r)&&l.push(f),f=d.getNext();return l}(t.writeTree,t.treePath,e,n,0,i,o)}(this.writes_,r,e,0,n,t);return 0===i.length?null:i[0]},t}();function Sn(t,e,n,r,i,s){var a=e.eventCache;if(null!=vn(r,n))return e;var u=void 0,c=void 0;if(bt(n))if((0,o.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){var l=Ye(e),h=mn(r,l instanceof ie?l:ie.EMPTY_NODE);u=t.filter.updateFullNode(e.eventCache.getNode(),h,s)}else{var d=gn(r,Ye(e));u=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{var f=pt(n);if(".priority"===f){(0,o.hu)(1===gt(n),"Can't have a priority with additional path components");var p=a.getNode(),g=yn(r,n,p,c=e.serverCache.getNode());u=null!=g?t.filter.updatePriority(p,g):a.getNode()}else{var m=mt(n),y=void 0;if(a.isCompleteForChild(f)){c=e.serverCache.getNode();var v=yn(r,n,a.getNode(),c);y=null!=v?a.getNode().getImmediateChild(f).updateChild(m,v):a.getNode().getImmediateChild(f)}else y=_n(r,f,e.serverCache);u=null!=y?t.filter.updateChild(a.getNode(),f,y,m,i,s):a.getNode()}}return We(e,u,a.isFullyInitialized()||bt(n),t.filter.filtersNodes())}function xn(t,e,n,r,i,o,s,a){var u,c=e.serverCache,l=s?t.filter:t.filter.getIndexedFilter();if(bt(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var h=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),h,null)}else{var d=pt(n);if(!c.isCompleteForPath(n)&&gt(n)>1)return e;var f=mt(n),p=c.getNode().getImmediateChild(d).updateChild(f,r);u=".priority"===d?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),d,p,f,Tn,null)}var g=Ke(e,u,c.isFullyInitialized()||bt(n),l.filtersNodes());return Sn(t,g,n,i,new En(i,g,o),a)}function In(t,e,n,r,i,o,s){var a,u,c=e.eventCache,l=new En(i,e,o);if(bt(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,s),a=We(e,u,!0,t.filter.filtersNodes());else{var h=pt(n);if(".priority"===h)u=t.filter.updatePriority(e.eventCache.getNode(),r),a=We(e,u,c.isFullyInitialized(),c.isFiltered());else{var d=mt(n),f=c.getNode().getImmediateChild(h),p=void 0;if(bt(d))p=r;else{var g=l.getCompleteChild(h);p=null!=g?".priority"===yt(d)&&g.getChild(_t(d)).isEmpty()?g:g.updateChild(d,r):ie.EMPTY_NODE}a=f.equals(p)?e:We(e,t.filter.updateChild(c.getNode(),h,p,d,l,s),c.isFullyInitialized(),t.filter.filtersNodes())}}return a}function kn(t,e){return t.eventCache.isCompleteForChild(e)}function An(t,e,n){return n.foreach(function(t,n){e=e.updateChild(t,n)}),e}function Rn(t,e,n,r,i,o,s,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;var u,c=e;u=bt(n)?r:new $e(null).setTree(n,r);var l=e.serverCache.getNode();return u.children.inorderTraversal(function(n,r){if(l.hasChild(n)){var u=An(0,e.serverCache.getNode().getImmediateChild(n),r);c=xn(t,c,new dt(n),u,i,o,s,a)}}),u.children.inorderTraversal(function(n,r){var u=!e.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!l.hasChild(n)&&!u){var h=An(0,e.serverCache.getNode().getImmediateChild(n),r);c=xn(t,c,new dt(n),h,i,o,s,a)}}),c}var Pn,On=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n,r=this.query_._queryParams,i=new _e(r.getIndex()),o=(n=r).loadsAllData()?new _e(n.getIndex()):n.hasLimit()?new be(n):new we(n);this.processor_=function(t){return{filter:t}}(o);var s=e.serverCache,a=e.eventCache,u=i.updateFullNode(ie.EMPTY_NODE,s.getNode(),null),c=o.updateFullNode(ie.EMPTY_NODE,a.getNode(),null),l=new Ge(u,s.isFullyInitialized(),i.filtersNodes()),h=new Ge(c,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=Ze(h,l),this.eventGenerator_=new ze(this.query_)}return Object.defineProperty(t.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),t}();function Nn(t,e){var n=Ye(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!bt(e)&&!n.getImmediateChild(pt(e)).isEmpty())?n.getChild(e):null}function Dn(t){return 0===t.eventRegistrations_.length}function Ln(t,e,n){var r=[];if(n){(0,o.hu)(null==e,"A cancel should cancel all event registrations.");var i=t.query._path;t.eventRegistrations_.forEach(function(t){var e=t.createCancelEvent(n,i);e&&r.push(e)})}if(e){for(var s=[],a=0;a<t.eventRegistrations_.length;++a){var u=t.eventRegistrations_[a];if(u.matches(e)){if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(a+1));break}}else s.push(u)}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function Fn(t,e,n,r){e.type===Fe.MERGE&&null!==e.source.queryId&&((0,o.hu)(Ye(t.viewCache_),"We should always have a full cache before handling merges"),(0,o.hu)(Qe(t.viewCache_),"Missing event cache, even though we have a server cache"));var i,s,a=t.viewCache_,u=function(t,e,n,r,i){var s,a,u=new Cn;if(n.type===Fe.OVERWRITE){var c=n;c.source.fromUser?s=In(t,e,c.path,c.snap,r,i,u):((0,o.hu)(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!bt(c.path),s=xn(t,e,c.path,c.snap,r,i,a,u))}else if(n.type===Fe.MERGE){var l=n;l.source.fromUser?s=function(t,e,n,r,i,o,s){var a=e;return r.foreach(function(r,u){var c=wt(n,r);kn(e,pt(c))&&(a=In(t,a,c,u,i,o,s))}),r.foreach(function(r,u){var c=wt(n,r);kn(e,pt(c))||(a=In(t,a,c,u,i,o,s))}),a}(t,e,l.path,l.children,r,i,u):((0,o.hu)(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),s=Rn(t,e,l.path,l.children,r,i,a,u))}else if(n.type===Fe.ACK_USER_WRITE){var h=n;s=h.revert?function(t,e,n,r,i,s){var a;if(null!=vn(r,n))return e;var u=new En(r,e,i),c=e.eventCache.getNode(),l=void 0;if(bt(n)||".priority"===pt(n)){var h=void 0;if(e.serverCache.isFullyInitialized())h=gn(r,Ye(e));else{var d=e.serverCache.getNode();(0,o.hu)(d instanceof ie,"serverChildren would be complete if leaf node"),h=mn(r,d)}l=t.filter.updateFullNode(c,h=h,s)}else{var f=pt(n),p=_n(r,f,e.serverCache);null==p&&e.serverCache.isCompleteForChild(f)&&(p=c.getImmediateChild(f)),(l=null!=p?t.filter.updateChild(c,f,p,mt(n),u,s):e.eventCache.getNode().hasChild(f)?t.filter.updateChild(c,f,ie.EMPTY_NODE,mt(n),u,s):c).isEmpty()&&e.serverCache.isFullyInitialized()&&(a=gn(r,Ye(e))).isLeafNode()&&(l=t.filter.updateFullNode(l,a,s))}return a=e.serverCache.isFullyInitialized()||null!=vn(r,ft()),We(e,l,a,t.filter.filtersNodes())}(t,e,h.path,r,i,u):function(t,e,n,r,i,o,s){if(null!=vn(i,n))return e;var a=e.serverCache.isFiltered(),u=e.serverCache;if(null!=r.value){if(bt(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return xn(t,e,n,u.getNode().getChild(n),i,o,a,s);if(bt(n)){var c=new $e(null);return u.getNode().forEachChild(Ut,function(t,e){c=c.set(new dt(t),e)}),Rn(t,e,n,c,i,o,a,s)}return e}var l=new $e(null);return r.foreach(function(t,e){var r=wt(n,t);u.isCompleteForPath(r)&&(l=l.set(t,u.getNode().getChild(r)))}),Rn(t,e,n,l,i,o,a,s)}(t,e,h.path,h.affectedTree,r,i,u)}else{if(n.type!==Fe.LISTEN_COMPLETE)throw(0,o.g5)("Unknown operation type: "+n.type);s=function(t,e,n,r,i){var o=e.serverCache;return Sn(t,Ke(e,o.getNode(),o.isFullyInitialized()||bt(n),o.isFiltered()),n,r,Tn,i)}(t,e,n.path,r,u)}var d=u.getChanges();return function(t,e,n){var r=e.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=Qe(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(ge(Qe(e)))}}(e,s,d),{viewCache:s,changes:d}}(t.processor_,a,e,n,r);return i=t.processor_,(0,o.hu)((s=u.viewCache).eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),(0,o.hu)(s.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),(0,o.hu)(u.viewCache.serverCache.isFullyInitialized()||!a.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=u.viewCache,Un(t,u.changes,u.viewCache.eventCache.getNode(),null)}function Un(t,e,n,r){return function(t,e,n,r){var i=[],o=[];return e.forEach(function(e){"child_changed"===e.type&&t.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&o.push({type:"child_moved",snapshotNode:e.snapshotNode,childName:e.childName})}),He(t,i,"child_removed",e,r,n),He(t,i,"child_added",e,r,n),He(t,i,"child_moved",o,r,n),He(t,i,"child_changed",e,r,n),He(t,i,"value",e,r,n),i}(t.eventGenerator_,e,n,r?[r]:t.eventRegistrations_)}var Mn,qn=function(){return function(){this.views=new Map}}();function Vn(t,e,n,r){var i,a,u=e.source.queryId;if(null!==u){var c=t.views.get(u);return(0,o.hu)(null!=c,"SyncTree gave us an op for an invalid query."),Fn(c,e,n,r)}var l=[];try{for(var h=(0,s.XA)(t.views.values()),d=h.next();!d.done;d=h.next())l=l.concat(Fn(c=d.value,e,n,r))}catch(f){i={error:f}}finally{try{d&&!d.done&&(a=h.return)&&a.call(h)}finally{if(i)throw i.error}}return l}function jn(t,e,n,r,i){var o=t.views.get(e._queryIdentifier);if(!o){var s=gn(n,i?r:null),a=!1;s?a=!0:r instanceof ie?(s=mn(n,r),a=!1):(s=ie.EMPTY_NODE,a=!1);var u=Ze(new Ge(s,a,!1),new Ge(r,i,!1));return new On(e,u)}return o}function Bn(t){var e,n,r=[];try{for(var i=(0,s.XA)(t.views.values()),o=i.next();!o.done;o=i.next()){var a=o.value;a.query._queryParams.loadsAllData()||r.push(a)}}catch(u){e={error:u}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function Gn(t,e){var n,r,i=null;try{for(var o=(0,s.XA)(t.views.values()),a=o.next();!a.done;a=o.next())i=i||Nn(a.value,e)}catch(u){n={error:u}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i}function zn(t,e){return e._queryParams.loadsAllData()?Wn(t):t.views.get(e._queryIdentifier)}function Hn(t,e){return null!=zn(t,e)}function Zn(t){return null!=Wn(t)}function Wn(t){var e,n;try{for(var r=(0,s.XA)(t.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;if(o.query._queryParams.loadsAllData())return o}}catch(a){e={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return null}var Kn=1,Qn=function(){return function(t){this.listenProvider_=t,this.syncPointTree_=new $e(null),this.pendingWriteTree_={visibleWrites:Je.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}();function Yn(t,e,n,r,i){return function(t,e,n,r,i){(0,o.hu)(r>t.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Xe(t.visibleWrites,e,n)),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r,i),i?nr(t,new je({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,n)):[]}function $n(t,e,n){void 0===n&&(n=!1);var r=function(t,e){for(var n=0;n<t.allWrites.length;n++){var r=t.allWrites[n];if(r.writeId===e)return r}return null}(t.pendingWriteTree_,e);if(function(t,e){var n=t.allWrites.findIndex(function(t){return t.writeId===e});(0,o.hu)(n>=0,"removeWrite called with nonexistent writeId.");var r=t.allWrites[n];t.allWrites.splice(n,1);for(var i=r.visible,s=!1,a=t.allWrites.length-1;i&&a>=0;){var u=t.allWrites[a];u.visible&&(a>=n&&hn(u,r.path)?i=!1:St(r.path,u.path)&&(s=!0)),a--}return!!i&&(s?(function(t){t.visibleWrites=fn(t.allWrites,dn,ft()),t.lastWriteId=t.allWrites.length>0?t.allWrites[t.allWrites.length-1].writeId:-1}(t),!0):(r.snap?t.visibleWrites=en(t.visibleWrites,r.path):F(r.children,function(e){t.visibleWrites=en(t.visibleWrites,wt(r.path,e))}),!0))}(t.pendingWriteTree_,e)){var i=new $e(null);return null!=r.snap?i=i.set(ft(),!0):F(r.children,function(t){i=i.set(new dt(t),!0)}),nr(t,new qe(r.path,i,n))}return[]}function Jn(t,e,n){return nr(t,new je({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,n))}function Xn(t,e,n,r){var i=e._path,a=t.syncPointTree_.get(i),u=[];if(a&&("default"===e._queryIdentifier||Hn(a,e))){var c=function(t,e,n,r){var i,a,u=e._queryIdentifier,c=[],l=[],h=Zn(t);if("default"===u)try{for(var d=(0,s.XA)(t.views.entries()),f=d.next();!f.done;f=d.next()){var p,g=(0,s.CR)(f.value,2),m=g[0];l=l.concat(Ln(p=g[1],n,r)),Dn(p)&&(t.views.delete(m),p.query._queryParams.loadsAllData()||c.push(p.query))}}catch(y){i={error:y}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}else(p=t.views.get(u))&&(l=l.concat(Ln(p,n,r)),Dn(p)&&(t.views.delete(u),p.query._queryParams.loadsAllData()||c.push(p.query)));return h&&!Zn(t)&&c.push(new((0,o.hu)(Pn,"Reference.ts has not been loaded"),Pn)(e._repo,e._path)),{removed:c,events:l}}(a,e,n,r);0===a.views.size&&(t.syncPointTree_=t.syncPointTree_.remove(i));var l=c.removed;u=c.events;var h=-1!==l.findIndex(function(t){return t._queryParams.loadsAllData()}),d=t.syncPointTree_.findOnPath(i,function(t,e){return Zn(e)});if(h&&!d){var f=t.syncPointTree_.subtree(i);if(!f.isEmpty())for(var p=function(t){return t.fold(function(t,e,n){if(e&&Zn(e))return[Wn(e)];var r=[];return e&&(r=Bn(e)),F(n,function(t,e){r=r.concat(e)}),r})}(f),g=0;g<p.length;++g){var m=p[g],y=m.query,v=or(t,m);t.listenProvider_.startListening(hr(y),sr(t,y),v.hashFn,v.onComplete)}}!d&&l.length>0&&!r&&(h?t.listenProvider_.stopListening(hr(e),null):l.forEach(function(e){var n=t.queryToTagMap.get(ar(e));t.listenProvider_.stopListening(hr(e),n)})),function(t,e){for(var n=0;n<e.length;++n){var r=e[n];if(!r._queryParams.loadsAllData()){var i=ar(r),o=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(o)}}}(t,l)}return u}function tr(t,e,n){var r=e._path,i=null,s=!1;t.syncPointTree_.foreachOnPath(r,function(t,e){var n=Ct(t,r);i=i||Gn(e,n),s=s||Zn(e)});var a,u=t.syncPointTree_.get(r);u?(s=s||Zn(u),i=i||Gn(u,ft())):(u=new qn,t.syncPointTree_=t.syncPointTree_.set(r,u)),null!=i?a=!0:(a=!1,i=ie.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild(function(t,e){var n=Gn(e,ft());n&&(i=i.updateImmediateChild(t,n))}));var c=Hn(u,e);if(!c&&!e._queryParams.loadsAllData()){var l=ar(e);(0,o.hu)(!t.queryToTagMap.has(l),"View does not exist, but we have a tag");var h=Kn++;t.queryToTagMap.set(l,h),t.tagToQueryMap.set(h,l)}var d=function(t,e,n,r,i,o){var s=jn(t,e,r,i,o);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,s),function(t,e){t.eventRegistrations_.push(e)}(s,n),function(t,e){var n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Jt,function(t,e){r.push(me(t,e))}),n.isFullyInitialized()&&r.push(ge(n.getNode())),Un(t,r,n.getNode(),e)}(s,n)}(u,e,n,ln(t.pendingWriteTree_,r),i,a);if(!c&&!s){var f=zn(u,e);d=d.concat(function(t,e,n){var r=e._path,i=sr(t,e),s=or(t,n),a=t.listenProvider_.startListening(hr(e),i,s.hashFn,s.onComplete),u=t.syncPointTree_.subtree(r);if(i)(0,o.hu)(!Zn(u.value),"If we're adding a query, it shouldn't be shadowed");else for(var c=u.fold(function(t,e,n){if(!bt(t)&&e&&Zn(e))return[Wn(e).query];var r=[];return e&&(r=r.concat(Bn(e).map(function(t){return t.query}))),F(n,function(t,e){r=r.concat(e)}),r}),l=0;l<c.length;++l){var h=c[l];t.listenProvider_.stopListening(hr(h),sr(t,h))}return a}(t,e,f))}return d}function er(t,e,n){var r=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,function(t,n){var r=Gn(n,Ct(t,e));if(r)return r});return pn(r,e,i,n,!0)}function nr(t,e){return rr(e,t.syncPointTree_,null,ln(t.pendingWriteTree_,ft()))}function rr(t,e,n,r){if(bt(t.path))return ir(t,e,n,r);var i=e.get(ft());null==n&&null!=i&&(n=Gn(i,ft()));var o=[],s=pt(t.path),a=t.operationForChild(s),u=e.children.get(s);if(u&&a){var c=n?n.getImmediateChild(s):null,l=wn(r,s);o=o.concat(rr(a,u,c,l))}return i&&(o=o.concat(Vn(i,t,r,n))),o}function ir(t,e,n,r){var i=e.get(ft());null==n&&null!=i&&(n=Gn(i,ft()));var o=[];return e.children.inorderTraversal(function(e,i){var s=n?n.getImmediateChild(e):null,a=wn(r,e),u=t.operationForChild(e);u&&(o=o.concat(ir(u,i,s,a)))}),i&&(o=o.concat(Vn(i,t,r,n))),o}function or(t,e){var n=e.query,r=sr(t,n);return{hashFn:function(){return(function(t){return t.viewCache_.serverCache.getNode()}(e)||ie.EMPTY_NODE).hash()},onComplete:function(e){if("ok"===e)return r?function(t,e,n){var r=ur(t,n);if(r){var i=cr(r),o=i.path,s=i.queryId,a=Ct(o,e);return lr(t,o,new Ve(Ue(s),a))}return[]}(t,n._path,r):function(t,e){return nr(t,new Ve({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(t,n._path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}(e,n);return Xn(t,n,null,i)}}}function sr(t,e){var n=ar(e);return t.queryToTagMap.get(n)}function ar(t){return t._path.toString()+"$"+t._queryIdentifier}function ur(t,e){return t.tagToQueryMap.get(e)}function cr(t){var e=t.indexOf("$");return(0,o.hu)(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new dt(t.substr(0,e))}}function lr(t,e,n){var r=t.syncPointTree_.get(e);return(0,o.hu)(r,"Missing sync point for query tag that we're tracking"),Vn(r,n,ln(t.pendingWriteTree_,e),null)}function hr(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new((0,o.hu)(Mn,"Reference.ts has not been loaded"),Mn)(t._repo,t._path):t}var dr=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),fr=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=wt(this.path_,e);return new t(this.syncTree_,n)},t.prototype.node=function(){return er(this.syncTree_,this.path_)},t}(),pr=function(t,e,n){return t&&"object"==typeof t?((0,o.hu)(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?gr(t[".sv"],e,n):"object"==typeof t[".sv"]?mr(t[".sv"],e):void(0,o.hu)(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},gr=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:(0,o.hu)(!1,"Unexpected server value: "+t)}},mr=function(t,e,n){t.hasOwnProperty("increment")||(0,o.hu)(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&(0,o.hu)(!1,"Unexpected increment value: "+r);var i=e.node();if((0,o.hu)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var s=i.getValue();return"number"!=typeof s?r:s+r},yr=function(t,e,n,r){return _r(e,new fr(n,t),r)},vr=function(t,e,n){return _r(t,new dr(e),n)};function _r(t,e,n){var r,i=t.getPriority().val(),o=pr(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var s=t,a=pr(s.getValue(),e,n);return a!==s.getValue()||o!==s.getPriority().val()?new $t(a,se(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new $t(o))),u.forEachChild(Jt,function(t,i){var o=_r(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))}),r}var wr=function(){return function(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n={children:{},childCount:0}),this.name=t,this.parent=e,this.node=n}}();function br(t,e){for(var n=e instanceof dt?e:new dt(e),r=t,i=pt(n);null!==i;){var s=(0,o.DV)(r.node.children,i)||{children:{},childCount:0};r=new wr(i,r,s),i=pt(n=mt(n))}return r}function Cr(t){return t.node.value}function Tr(t,e){t.node.value=e,kr(t)}function Er(t){return t.node.childCount>0}function Sr(t,e){F(t.node.children,function(n,r){e(new wr(n,t,r))})}function xr(t,e,n,r){n&&!r&&e(t),Sr(t,function(t){xr(t,e,!0,r)}),n&&r&&e(t)}function Ir(t){return new dt(null===t.parent?t.name:Ir(t.parent)+"/"+t.name)}function kr(t){null!==t.parent&&function(t,e,n){var r=function(t){return void 0===Cr(t)&&!Er(t)}(n),i=(0,o.r3)(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,kr(t)):r||i||(t.node.children[e]=n.node,t.node.childCount++,kr(t))}(t.parent,t.name,t)}var Ar=/[\[\].#$\/\u0000-\u001F\u007F]/,Rr=/[\[\].#$\u0000-\u001F\u007F]/,Pr=10485760,Or=function(t){return"string"==typeof t&&0!==t.length&&!Ar.test(t)},Nr=function(t){return"string"==typeof t&&0!==t.length&&!Rr.test(t)},Dr=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!k(t)||t&&"object"==typeof t&&(0,o.r3)(t,".sv")},Lr=function(t,e,n,r){r&&void 0===e||Fr((0,o.gK)(t,"value"),e,n)},Fr=function(t,e,n){var r=n instanceof dt?new xt(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+kt(r));if("function"==typeof e)throw new Error(t+"contains a function "+kt(r)+" with contents = "+e.toString());if(k(e))throw new Error(t+"contains "+e.toString()+" "+kt(r));if("string"==typeof e&&e.length>Pr/3&&(0,o.ug)(e)>Pr)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+kt(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var i=!1,s=!1;if(F(e,function(e,n){if(".value"===e)i=!0;else if(".priority"!==e&&".sv"!==e&&(s=!0,!Or(e)))throw new Error(t+" contains an invalid key ("+e+") "+kt(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var a,u;!function(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=(0,o.ug)(e),It(t)}(r,e),Fr(t,n,r),u=(a=r).parts_.pop(),a.byteLength_-=(0,o.ug)(u),a.parts_.length>0&&(a.byteLength_-=1)}),i&&s)throw new Error(t+' contains ".value" child '+kt(r)+" in addition to actual children.")}},Ur=function(t,e,n,r){if(!r||void 0!==e){var i=(0,o.gK)(t,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");var s=[];F(e,function(t,e){var r=new dt(t);if(Fr(i,e,wt(n,r)),".priority"===yt(r)&&!Dr(e))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(r)}),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=vt(r=e[n]),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!Or(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(Tt);var s=null;for(n=0;n<e.length;n++){if(r=e[n],null!==s&&St(s,r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(i,s)}},Mr=function(t,e,n){if(!n||void 0!==e){if(k(e))throw new Error((0,o.gK)(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Dr(e))throw new Error((0,o.gK)(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},qr=function(t,e,n){if(!n||void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,o.gK)(t,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},Vr=function(t,e,n,r){if(!(r&&void 0===n||Or(n)))throw new Error((0,o.gK)(t,e)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},jr=function(t,e,n,r){if(!(r&&void 0===n||Nr(n)))throw new Error((0,o.gK)(t,e)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Br=function(t,e){if(".info"===pt(e))throw new Error(t+" failed = Can't modify data under /.info/")},Gr=function(t,e){var n=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!Or(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==n.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Nr(t)}(n))throw new Error((0,o.gK)(t,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},zr=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error((0,o.gK)(t,e)+"must be a boolean.")},Hr=function(){return function(){this.eventLists_=[],this.recursionDepth_=0}}();function Zr(t,e){for(var n=null,r=0;r<e.length;r++){var i=e[r],o=i.getPath();null===n||Et(o,n.path)||(t.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&t.eventLists_.push(n)}function Wr(t,e,n){Zr(t,n),Qr(t,function(t){return Et(t,e)})}function Kr(t,e,n){Zr(t,n),Qr(t,function(t){return St(t,e)||St(e,t)})}function Qr(t,e){t.recursionDepth_++;for(var n=!0,r=0;r<t.eventLists_.length;r++){var i=t.eventLists_[r];i&&(e(i.path)?(Yr(t.eventLists_[r]),t.eventLists_[r]=null):n=!1)}n&&(t.eventLists_=[]),t.recursionDepth_--}function Yr(t){for(var e=0;e<t.events.length;e++){var n=t.events[e];if(null!==n){t.events[e]=null;var r=n.getEventRunner();w&&T("event: "+n.toString()),V(r)}}}var $r="repo_interrupt",Jr=function(){function t(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Hr,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Re(),this.transactionQueueTree_=new wr,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t}();function Xr(t){var e=t.infoData_.getNode(new dt(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function ti(t){return(e=(e={timestamp:Xr(t)})||{}).timestamp=e.timestamp||(new Date).getTime(),e;var e}function ei(t,e,n,r,i){t.dataUpdateCount++;var s=new dt(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;var a=[];if(i)if(r){var u=(0,o.UI)(n,function(t){return se(t)});a=function(t,e,n,r){var i=ur(t,r);if(i){var o=cr(i),s=o.path,a=o.queryId,u=Ct(s,e),c=$e.fromObject(n);return lr(t,s,new Be(Ue(a),u,c))}return[]}(t.serverSyncTree_,s,u,i)}else{var c=se(n);a=function(t,e,n,r){var i=ur(t,r);if(null!=i){var o=cr(i),s=o.path,a=o.queryId,u=Ct(s,e);return lr(t,s,new je(Ue(a),u,n))}return[]}(t.serverSyncTree_,s,c,i)}else if(r){var l=(0,o.UI)(n,function(t){return se(t)});a=function(t,e,n){var r=$e.fromObject(n);return nr(t,new Be({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(t.serverSyncTree_,s,l)}else{var h=se(n);a=Jn(t.serverSyncTree_,s,h)}var d=s;a.length>0&&(d=pi(t,s)),Kr(t.eventQueue_,d,a)}function ni(t,e){ri(t,"connected",e),!1===e&&function(t){li(t,"onDisconnectEvents");var e=ti(t),n=Re();Ne(t.onDisconnect_,ft(),function(r,i){var o=yr(r,i,t.serverSyncTree_,e);Pe(n,r,o)});var r=[];Ne(n,ft(),function(e,n){r=r.concat(Jn(t.serverSyncTree_,e,n));var i=_i(t,e);pi(t,i)}),t.onDisconnect_=Re(),Kr(t.eventQueue_,ft(),r)}(t)}function ri(t,e,n){var r=new dt("/.info/"+e),i=se(n);t.infoData_.updateSnapshot(r,i);var o=Jn(t.infoSyncTree_,r,i);Kr(t.eventQueue_,r,o)}function ii(t){return t.nextWriteId_++}function oi(t,e,n,r,i){li(t,"set",{path:e.toString(),value:n,priority:r});var o=ti(t),s=se(n,r),a=er(t.serverSyncTree_,e),u=vr(s,a,o),c=ii(t),l=Yn(t.serverSyncTree_,e,u,c,!0);Zr(t.eventQueue_,l),t.server_.put(e.toString(),s.val(!0),function(n,r){var o="ok"===n;o||I("set at "+e+" failed: "+n);var s=$n(t.serverSyncTree_,c,!o);Kr(t.eventQueue_,e,s),hi(0,i,n,r)});var h=_i(t,e);pi(t,h),Kr(t.eventQueue_,h,[])}function si(t,e,n){t.server_.onDisconnectCancel(e.toString(),function(r,i){"ok"===r&&Oe(t.onDisconnect_,e),hi(0,n,r,i)})}function ai(t,e,n,r){var i=se(n);t.server_.onDisconnectPut(e.toString(),i.val(!0),function(n,o){"ok"===n&&Pe(t.onDisconnect_,e,i),hi(0,r,n,o)})}function ui(t,e,n){var r;r=".info"===pt(e._path)?Xn(t.infoSyncTree_,e,n):Xn(t.serverSyncTree_,e,n),Wr(t.eventQueue_,e._path,r)}function ci(t){t.persistentConnection_&&t.persistentConnection_.interrupt($r)}function li(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r="";t.persistentConnection_&&(r=t.persistentConnection_.id+":"),T.apply(void 0,(0,s.ev)([r],(0,s.CR)(e)))}function hi(t,e,n,r){e&&V(function(){if("ok"===n)e(null);else{var t=(n||"error").toUpperCase(),i=t;r&&(i+=": "+r);var o=new Error(i);o.code=t,e(o)}})}function di(t,e,n){return er(t.serverSyncTree_,e,n)||ie.EMPTY_NODE}function fi(t,e){if(void 0===e&&(e=t.transactionQueueTree_),e||vi(t,e),Cr(e)){var n=mi(t,e);(0,o.hu)(n.length>0,"Sending zero length transaction queue"),n.every(function(t){return 0===t.status})&&function(t,e,n){for(var r=n.map(function(t){return t.currentWriteId}),i=di(t,e,r),s=i,a=i.hash(),u=0;u<n.length;u++){var c=n[u];(0,o.hu)(0===c.status,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=1,c.retryCount++;var l=Ct(e,c.path);s=s.updateChild(l,c.currentOutputSnapshotRaw)}var h=s.val(!0),d=e;t.server_.put(d.toString(),h,function(r){li(t,"transaction put response",{path:d.toString(),status:r});var i=[];if("ok"===r){for(var o=[],s=function(e){n[e].status=2,i=i.concat($n(t.serverSyncTree_,n[e].currentWriteId)),n[e].onComplete&&o.push(function(){return n[e].onComplete(null,!0,n[e].currentOutputSnapshotResolved)}),n[e].unwatcher()},a=0;a<n.length;a++)s(a);for(vi(t,br(t.transactionQueueTree_,e)),fi(t,t.transactionQueueTree_),Kr(t.eventQueue_,e,i),a=0;a<o.length;a++)V(o[a])}else{if("datastale"===r)for(a=0;a<n.length;a++)n[a].status=3===n[a].status?4:0;else for(I("transaction at "+d.toString()+" failed: "+r),a=0;a<n.length;a++)n[a].status=4,n[a].abortReason=r;pi(t,e)}},a)}(t,Ir(e),n)}else Er(e)&&Sr(e,function(e){fi(t,e)})}function pi(t,e){var n=gi(t,e),r=Ir(n);return function(t,e,n){if(0!==e.length){for(var r=[],i=[],s=e.filter(function(t){return 0===t.status}).map(function(t){return t.currentWriteId}),a=function(a){var u,c=e[a],l=Ct(n,c.path),h=!1;if((0,o.hu)(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===c.status)h=!0,u=c.abortReason,i=i.concat($n(t.serverSyncTree_,c.currentWriteId,!0));else if(0===c.status)if(c.retryCount>=25)h=!0,u="maxretry",i=i.concat($n(t.serverSyncTree_,c.currentWriteId,!0));else{var d=di(t,c.path,s);c.currentInputSnapshot=d;var f=e[a].update(d.val());if(void 0!==f){Fr("transaction failed: Data returned ",f,c.path);var p=se(f);"object"==typeof f&&null!=f&&(0,o.r3)(f,".priority")||(p=p.updatePriority(d.getPriority()));var g=c.currentWriteId,m=ti(t),y=vr(p,d,m);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=y,c.currentWriteId=ii(t),s.splice(s.indexOf(g),1),i=(i=i.concat(Yn(t.serverSyncTree_,c.path,y,c.currentWriteId,c.applyLocally))).concat($n(t.serverSyncTree_,g,!0))}else h=!0,u="nodata",i=i.concat($n(t.serverSyncTree_,c.currentWriteId,!0))}Kr(t.eventQueue_,n,i),i=[],h&&(e[a].status=2,setTimeout(e[a].unwatcher,Math.floor(0)),e[a].onComplete&&r.push("nodata"===u?function(){return e[a].onComplete(null,!1,e[a].currentInputSnapshot)}:function(){return e[a].onComplete(new Error(u),!1,null)}))},u=0;u<e.length;u++)a(u);for(vi(t,t.transactionQueueTree_),u=0;u<r.length;u++)V(r[u]);fi(t,t.transactionQueueTree_)}}(t,mi(t,n),r),r}function gi(t,e){var n,r=t.transactionQueueTree_;for(n=pt(e);null!==n&&void 0===Cr(r);)r=br(r,n),n=pt(e=mt(e));return r}function mi(t,e){var n=[];return yi(t,e,n),n.sort(function(t,e){return t.order-e.order}),n}function yi(t,e,n){var r=Cr(e);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);Sr(e,function(e){yi(t,e,n)})}function vi(t,e){var n=Cr(e);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,Tr(e,n.length>0?n:void 0)}Sr(e,function(e){vi(t,e)})}function _i(t,e){var n=Ir(gi(t,e)),r=br(t.transactionQueueTree_,e);return function(t,e,n){for(var r=t.parent;null!==r;){if(e(r))return!0;r=r.parent}}(r,function(e){wi(t,e)}),wi(t,r),xr(r,function(e){wi(t,e)}),n}function wi(t,e){var n=Cr(e);if(n){for(var r=[],i=[],s=-1,a=0;a<n.length;a++)3===n[a].status||(1===n[a].status?((0,o.hu)(s===a-1,"All SENT items should be at beginning of queue."),s=a,n[a].status=3,n[a].abortReason="set"):((0,o.hu)(0===n[a].status,"Unexpected transaction status in abort"),n[a].unwatcher(),i=i.concat($n(t.serverSyncTree_,n[a].currentWriteId,!0)),n[a].onComplete&&r.push(n[a].onComplete.bind(null,new Error("set"),!1,null))));for(-1===s?Tr(e,void 0):n.length=s+1,Kr(t.eventQueue_,Ir(e),i),a=0;a<r.length;a++)V(r[a])}}var bi=function(t,e){var n=Ci(t),r=n.namespace;return"firebase.com"===n.domain&&x(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||x("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&I("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new K(n.host,n.secure,r,e,"ws"===n.scheme||"wss"===n.scheme,"",r!==n.subdomain),path:new dt(n.pathString)}},Ci=function(t){var e="",n="",r="",i="",o="",a=!0,u="https",c=443;if("string"==typeof t){var l=t.indexOf("//");l>=0&&(u=t.substring(0,l-1),t=t.substring(l+2));var h=t.indexOf("/");-1===h&&(h=t.length);var d=t.indexOf("?");-1===d&&(d=t.length),e=t.substring(0,Math.min(h,d)),h<d&&(i=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}e+="/"+i}return e}(t.substring(h,d)));var f=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=(0,s.XA)(t.split("&")),o=i.next();!o.done;o=i.next()){var a=o.value;if(0!==a.length){var u=a.split("=");2===u.length?r[decodeURIComponent(u[0])]=decodeURIComponent(u[1]):I("Invalid query segment '"+a+"' in query '"+t+"'")}}}catch(c){e={error:c}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,d)));(l=e.indexOf(":"))>=0?(a="https"===u||"wss"===u,c=parseInt(e.substring(l+1),10)):l=e.length;var p=e.slice(0,l);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{var g=e.indexOf(".");r=e.substring(0,g).toLowerCase(),n=e.substring(g+1),o=r}"ns"in f&&(o=f.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:a,scheme:u,pathString:i,namespace:o}},Ti=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+(0,o.Pz)(this.snapshot.exportVal())},t}(),Ei=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),Si=function(){function t(t,e){this.snapshotCallback=t,this.cancelCallback=e}return t.prototype.onValue=function(t,e){this.snapshotCallback.call(null,t,e)},t.prototype.onCancel=function(t){return(0,o.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)},Object.defineProperty(t.prototype,"hasCancelCallback",{get:function(){return!!this.cancelCallback},enumerable:!1,configurable:!0}),t.prototype.matches=function(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context},t}(),xi=function(){function t(t,e){this._repo=t,this._path=e}return t.prototype.cancel=function(){var t=new o.BH;return si(this._repo,this._path,t.wrapCallback(function(){})),t.promise},t.prototype.remove=function(){Br("OnDisconnect.remove",this._path);var t=new o.BH;return ai(this._repo,this._path,null,t.wrapCallback(function(){})),t.promise},t.prototype.set=function(t){Br("OnDisconnect.set",this._path),Lr("OnDisconnect.set",t,this._path,!1);var e=new o.BH;return ai(this._repo,this._path,t,e.wrapCallback(function(){})),e.promise},t.prototype.setWithPriority=function(t,e){Br("OnDisconnect.setWithPriority",this._path),Lr("OnDisconnect.setWithPriority",t,this._path,!1),Mr("OnDisconnect.setWithPriority",e,!1);var n=new o.BH;return function(t,e,n,r,i){var o=se(n,r);t.server_.onDisconnectPut(e.toString(),o.val(!0),function(n,r){"ok"===n&&Pe(t.onDisconnect_,e,o),hi(0,i,n,r)})}(this._repo,this._path,t,e,n.wrapCallback(function(){})),n.promise},t.prototype.update=function(t){Br("OnDisconnect.update",this._path),Ur("OnDisconnect.update",t,this._path,!1);var e=new o.BH;return function(t,e,n,r){if((0,o.xb)(n))return T("onDisconnect().update() called with empty data.  Don't do anything."),void hi(0,r,"ok",void 0);t.server_.onDisconnectMerge(e.toString(),n,function(i,o){"ok"===i&&F(n,function(n,r){var i=se(r);Pe(t.onDisconnect_,wt(e,n),i)}),hi(0,r,i,o)})}(this._repo,this._path,t,e.wrapCallback(function(){})),e.promise},t}(),Ii=function(){function t(t,e,n,r){this._repo=t,this._path=e,this._queryParams=n,this._orderByCalled=r}return Object.defineProperty(t.prototype,"key",{get:function(){return bt(this._path)?null:yt(this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Pi(this._repo,this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_queryIdentifier",{get:function(){var t=Ie(this._queryParams),e=D(t);return"{}"===e?"default":e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_queryObject",{get:function(){return Ie(this._queryParams)},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){if(!((e=(0,o.m9)(e))instanceof t))return!1;var n=this._repo===e._repo,r=Et(this._path,e._path);return n&&r&&this._queryIdentifier===e._queryIdentifier},t.prototype.toJSON=function(){return this.toString()},t.prototype.toString=function(){return this._repo.toString()+function(t){for(var e="",n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}(this._path)},t}();function ki(t,e){if(!0===t._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Ai(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Ut){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==A)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==R)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===Jt){if(null!=e&&!Dr(e)||null!=n&&!Dr(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,o.hu)(t.getIndex()instanceof ce||t.getIndex()===le,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Ri(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var Pi=function(t){function e(e,n){return t.call(this,e,n,new Ce,!1)||this}return(0,s.ZT)(e,t),Object.defineProperty(e.prototype,"parent",{get:function(){var t=_t(this._path);return null===t?null:new e(this._repo,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){for(var t=this;null!==t.parent;)t=t.parent;return t},enumerable:!1,configurable:!0}),e}(Ii),Oi=function(){function t(t,e,n){this._node=t,this.ref=e,this._index=n}return Object.defineProperty(t.prototype,"priority",{get:function(){return this._node.getPriority().val()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"key",{get:function(){return this.ref.key},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._node.numChildren()},enumerable:!1,configurable:!0}),t.prototype.child=function(e){var n=new dt(e),r=Li(this.ref,e);return new t(this._node.getChild(n),r,Jt)},t.prototype.exists=function(){return!this._node.isEmpty()},t.prototype.exportVal=function(){return this._node.val(!0)},t.prototype.forEach=function(e){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,function(r,i){return e(new t(i,Li(n.ref,r),Jt))})},t.prototype.hasChild=function(t){var e=new dt(t);return!this._node.getChild(e).isEmpty()},t.prototype.hasChildren=function(){return!this._node.isLeafNode()&&!this._node.isEmpty()},t.prototype.toJSON=function(){return this.exportVal()},t.prototype.val=function(){return this._node.val()},t}();function Ni(t,e){return(t=(0,o.m9)(t))._checkNotDeleted("ref"),void 0!==e?Li(t._root,e):t._root}function Di(t,e){(t=(0,o.m9)(t))._checkNotDeleted("refFromURL");var n=bi(e,t._repo.repoInfo_.nodeAdmin);Gr("refFromURL",n);var r=n.repoInfo;return t._repo.repoInfo_.isCustomHost()||r.host===t._repo.repoInfo_.host||x("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+t._repo.repoInfo_.host+")"),Ni(t,n.path.toString())}function Li(t,e){var n;return null===pt((t=(0,o.m9)(t))._path)?((n=e)&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),jr("child","path",n,!1)):jr("child","path",e,!1),new Pi(t._repo,wt(t._path,e))}function Fi(t,e){t=(0,o.m9)(t),Br("push",t._path),Lr("push",e,t._path,!0);var n,r=Xr(t._repo),i=de(r),s=Li(t,i),a=Li(t,i);return n=null!=e?Mi(a,e).then(function(){return a}):Promise.resolve(a),s.then=n.then.bind(n),s.catch=n.then.bind(n,void 0),s}function Ui(t){return Br("remove",t._path),Mi(t,null)}function Mi(t,e){t=(0,o.m9)(t),Br("set",t._path),Lr("set",e,t._path,!1);var n=new o.BH;return oi(t._repo,t._path,e,null,n.wrapCallback(function(){})),n.promise}function qi(t,e){t=(0,o.m9)(t),Br("setPriority",t._path),Mr("setPriority",e,!1);var n=new o.BH;return oi(t._repo,wt(t._path,".priority"),e,null,n.wrapCallback(function(){})),n.promise}function Vi(t,e,n){if(Br("setWithPriority",t._path),Lr("setWithPriority",e,t._path,!1),Mr("setWithPriority",n,!1),".length"===t.key||".keys"===t.key)throw"setWithPriority failed: "+t.key+" is a read-only object.";var r=new o.BH;return oi(t._repo,t._path,e,n,r.wrapCallback(function(){})),r.promise}function ji(t,e){Ur("update",e,t._path,!1);var n=new o.BH;return function(t,e,n,r){li(t,"update",{path:e.toString(),value:n});var i=!0,s=ti(t),a={};if(F(n,function(n,r){i=!1,a[n]=yr(wt(e,n),se(r),t.serverSyncTree_,s)}),i)T("update() called with empty data.  Don't do anything."),hi(0,r,"ok",void 0);else{var u=ii(t),c=function(t,e,n,r){!function(t,e,n,r){(0,o.hu)(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=tn(t.visibleWrites,e,n),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r);var i=$e.fromObject(n);return nr(t,new Be({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(t.serverSyncTree_,e,a,u);Zr(t.eventQueue_,c),t.server_.merge(e.toString(),n,function(n,i){var o="ok"===n;o||I("update at "+e+" failed: "+n);var s=$n(t.serverSyncTree_,u,!o),a=s.length>0?pi(t,e):e;Kr(t.eventQueue_,a,s),hi(0,r,n,i)}),F(n,function(n){var r=_i(t,wt(e,n));pi(t,r)}),Kr(t.eventQueue_,e,[])}}(t._repo,t._path,e,n.wrapCallback(function(){})),n.promise}var Bi=function(){function t(t){this.callbackContext=t}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e._queryParams.getIndex();return new Ti("value",this,new Oi(t.snapshotNode,new Pi(e._repo,e._path),n))},t.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,null)}},t.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new Ei(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))},t.prototype.hasAnyCallback=function(){return null!==this.callbackContext},t}(),Gi=function(){function t(t,e){this.eventType=t,this.callbackContext=e}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return this.eventType===("children_removed"===e?"child_removed":e)},t.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new Ei(this,t,e):null},t.prototype.createEvent=function(t,e){(0,o.hu)(null!=t.childName,"Child events should have a childName.");var n=Li(new Pi(e._repo,e._path),t.childName),r=e._queryParams.getIndex();return new Ti(t.type,this,new Oi(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,t.prevName)}},t.prototype.matches=function(e){return e instanceof t&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))},t.prototype.hasAnyCallback=function(){return!!this.callbackContext},t}();function zi(t,e,n,r,i){var o;if("object"==typeof r&&(o=void 0,i=r),"function"==typeof r&&(o=r),i&&i.onlyOnce){var s=n,a=function(e,n){ui(t._repo,t,c),s(e,n)};a.userCallback=n.userCallback,a.context=n.context,n=a}var u=new Si(n,o||void 0),c="value"===e?new Bi(u):new Gi(e,u);return function(t,e,n){var r;r=".info"===pt(e._path)?tr(t.infoSyncTree_,e,n):tr(t.serverSyncTree_,e,n),Wr(t.eventQueue_,e._path,r)}(t._repo,t,c),function(){return ui(t._repo,t,c)}}function Hi(t,e,n,r){return zi(t,"value",e,n,r)}function Zi(t,e,n,r){return zi(t,"child_added",e,n,r)}function Wi(t,e,n,r){return zi(t,"child_changed",e,n,r)}function Ki(t,e,n,r){return zi(t,"child_moved",e,n,r)}function Qi(t,e,n,r){return zi(t,"child_removed",e,n,r)}function Yi(t,e,n){var r=null,i=n?new Si(n):null;"value"===e?r=new Bi(i):e&&(r=new Gi(e,i)),ui(t._repo,t,r)}var $i=function(){return function(){}}(),Ji=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return(0,s.ZT)(e,t),e.prototype._apply=function(t){Lr("endAt",this._value,t._path,!0);var e=Ee(t._queryParams,this._value,this._key);if(Ri(e),Ai(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ii(t._repo,t._path,e,t._orderByCalled)},e}($i);function Xi(t,e){return Vr("endAt","key",e,!0),new Ji(t,e)}var to=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return(0,s.ZT)(e,t),e.prototype._apply=function(t){Lr("endBefore",this._value,t._path,!1);var e,n,r,i,o=(n=this._value,r=this._key,(e=t._queryParams).index_===Ut?("string"==typeof n&&(n=pe(n)),i=Ee(e,n,r)):i=Ee(e,n,null==r?A:pe(r)),i.endBeforeSet_=!0,i);if(Ri(o),Ai(o),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ii(t._repo,t._path,o,t._orderByCalled)},e}($i);function eo(t,e){return Vr("endBefore","key",e,!0),new to(t,e)}var no=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return(0,s.ZT)(e,t),e.prototype._apply=function(t){Lr("startAt",this._value,t._path,!0);var e=Te(t._queryParams,this._value,this._key);if(Ri(e),Ai(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Ii(t._repo,t._path,e,t._orderByCalled)},e}($i);function ro(t,e){return void 0===t&&(t=null),Vr("startAt","key",e,!0),new no(t,e)}var io=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return(0,s.ZT)(e,t),e.prototype._apply=function(t){Lr("startAfter",this._value,t._path,!1);var e,n,r,i,o=(n=this._value,r=this._key,(e=t._queryParams).index_===Ut?("string"==typeof n&&(n=fe(n)),i=Te(e,n,r)):i=Te(e,n,null==r?R:fe(r)),i.startAfterSet_=!0,i);if(Ri(o),Ai(o),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Ii(t._repo,t._path,o,t._orderByCalled)},e}($i);function oo(t,e){return Vr("startAfter","key",e,!0),new io(t,e)}var so=function(t){function e(e){var n=t.call(this)||this;return n._limit=e,n}return(0,s.ZT)(e,t),e.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ii(t._repo,t._path,(e=this._limit,(n=t._queryParams.copy()).limitSet_=!0,n.limit_=e,n.viewFrom_="l",n),t._orderByCalled);var e,n},e}($i);function ao(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new so(t)}var uo=function(t){function e(e){var n=t.call(this)||this;return n._limit=e,n}return(0,s.ZT)(e,t),e.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ii(t._repo,t._path,(e=this._limit,(n=t._queryParams.copy()).limitSet_=!0,n.limit_=e,n.viewFrom_="r",n),t._orderByCalled);var e,n},e}($i);function co(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new uo(t)}var lo=function(t){function e(e){var n=t.call(this)||this;return n._path=e,n}return(0,s.ZT)(e,t),e.prototype._apply=function(t){ki(t,"orderByChild");var e=new dt(this._path);if(bt(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new ce(e),r=Se(t._queryParams,n);return Ai(r),new Ii(t._repo,t._path,r,!0)},e}($i);function ho(t){if("$key"===t)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===t)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===t)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return jr("orderByChild","path",t,!1),new lo(t)}var fo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,s.ZT)(e,t),e.prototype._apply=function(t){ki(t,"orderByKey");var e=Se(t._queryParams,Ut);return Ai(e),new Ii(t._repo,t._path,e,!0)},e}($i);function po(){return new fo}var go=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,s.ZT)(e,t),e.prototype._apply=function(t){ki(t,"orderByPriority");var e=Se(t._queryParams,Jt);return Ai(e),new Ii(t._repo,t._path,e,!0)},e}($i);function mo(){return new go}var yo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,s.ZT)(e,t),e.prototype._apply=function(t){ki(t,"orderByValue");var e=Se(t._queryParams,le);return Ai(e),new Ii(t._repo,t._path,e,!0)},e}($i);function vo(){return new yo}var _o=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return(0,s.ZT)(e,t),e.prototype._apply=function(t){if(Lr("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Ji(this._value,this._key)._apply(new no(this._value,this._key)._apply(t))},e}($i);function wo(t,e){return Vr("equalTo","key",e,!0),new _o(t,e)}function bo(t){for(var e,n,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var a=(0,o.m9)(t);try{for(var u=(0,s.XA)(r),c=u.next();!c.done;c=u.next()){var l=c.value;a=l._apply(a)}}catch(h){e={error:h}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}return a}!function(t){(0,o.hu)(!Pn,"__referenceConstructor has already been defined"),Pn=t}(Pi),function(t){(0,o.hu)(!Mn,"__referenceConstructor has already been defined"),Mn=t}(Pi);var Co={},To=!1;function Eo(t,e,n,r,i){var o=r||t.options.databaseURL;void 0===o&&(t.options.projectId||x("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),T("Using default host for project ",t.options.projectId),o=t.options.projectId+"-default-rtdb.firebaseio.com");var s,a=bi(o,i),u=a.repoInfo,c=void 0;"undefined"!=typeof process&&(c=process.env.FIREBASE_DATABASE_EMULATOR_HOST),c?(s=!0,u=(a=bi(o="http://"+c+"?ns="+u.namespace,i)).repoInfo):s=!a.repoInfo.secure;var l=i&&s?new z(z.OWNER):new G(t.name,t.options,e);Gr("Invalid Firebase Database URL",a),bt(a.path)||x("Database URL must point to the root of a Firebase Database (not including a child path).");var h=function(t,e,n,r){var i=Co[e.name];i||(Co[e.name]=i={});var o=i[t.toURLString()];return o&&x("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new Jr(t,To,n,r),i[t.toURLString()]=o,o}(u,t,l,new B(t.name,n));return new So(h,t)}var So=function(){function t(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}return Object.defineProperty(t.prototype,"_repo",{get:function(){return this._instanceStarted||(function(t,e,n){if(t.stats_=X(t.repoInfo_),t.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)t.server_=new ke(t.repoInfo_,function(e,n,r,i){ei(t,e,n,r,i)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(function(){return ni(t,!0)},0);else{if(null!=n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,o.Pz)(n)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}t.persistentConnection_=new Nt(t.repoInfo_,e,function(e,n,r,i){ei(t,e,n,r,i)},function(e){ni(t,e)},function(e){!function(t,e){F(e,function(e,n){ri(t,e,n)})}(t,e)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}var r,i;t.authTokenProvider_.addTokenChangeListener(function(e){t.server_.refreshAuthToken(e)}),t.appCheckProvider_.addTokenChangeListener(function(e){t.server_.refreshAppCheckToken(e.token)}),t.statsReporter_=(r=function(){return new Le(t.stats_,t.server_)},i=t.repoInfo_.toString(),J[i]||(J[i]=r()),J[i]),t.infoData_=new Ae,t.infoSyncTree_=new Qn({startListening:function(e,n,r,i){var o=[],s=t.infoData_.getNode(e._path);return s.isEmpty()||(o=Jn(t.infoSyncTree_,e._path,s),setTimeout(function(){i("ok")},0)),o},stopListening:function(){}}),ri(t,"connected",!1),t.serverSyncTree_=new Qn({startListening:function(e,n,r,i){return t.server_.listen(e,r,n,function(n,r){var o=i(n,r);Kr(t.eventQueue_,e._path,o)}),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_root",{get:function(){return this._rootInternal||(this._rootInternal=new Pi(this._repo,ft())),this._rootInternal},enumerable:!1,configurable:!0}),t.prototype._delete=function(){var t,e,n;return this._checkNotDeleted("delete"),t=this._repo,(n=Co[e=this.app.name])&&n[t.key]===t||x("Database "+e+"("+t.repoInfo_+") has already been deleted."),ci(t),delete n[t.key],this._repoInternal=null,this._rootInternal=null,Promise.resolve()},t.prototype._checkNotDeleted=function(t){null===this._rootInternal&&x("Cannot call "+t+" on a deleted database.")},t}();function xo(t){(t=(0,o.m9)(t))._checkNotDeleted("goOffline"),ci(t._repo)}function Io(t){var e;(t=(0,o.m9)(t))._checkNotDeleted("goOnline"),(e=t._repo).persistentConnection_&&e.persistentConnection_.resume($r)}var ko={".sv":"timestamp"},Ao=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}();function Ro(t,e,n){var r;if(t=(0,o.m9)(t),Br("Reference.transaction",t._path),".length"===t.key||".keys"===t.key)throw"Reference.transaction failed: "+t.key+" is a read-only object.";var i=null===(r=null==n?void 0:n.applyLocally)||void 0===r||r,s=new o.BH,a=Hi(t,function(){});return function(e,n,r,i,a,u){li(e,"transaction on "+n);var c={path:n,update:r,onComplete:function(e,n,r){var i=null;e?s.reject(e):(i=new Oi(r,new Pi(t._repo,t._path),Jt),s.resolve(new Ao(n,i)))},status:null,order:y(),applyLocally:u,retryCount:0,unwatcher:a,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},l=di(e,n,void 0);c.currentInputSnapshot=l;var h=c.update(l.val());if(void 0===h)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{Fr("transaction failed: Data returned ",h,c.path),c.status=0;var d=br(e.transactionQueueTree_,n),f=Cr(d)||[];f.push(c),Tr(d,f);var p=void 0;"object"==typeof h&&null!==h&&(0,o.r3)(h,".priority")?(p=(0,o.DV)(h,".priority"),(0,o.hu)(Dr(p),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):p=(er(e.serverSyncTree_,n)||ie.EMPTY_NODE).getPriority().val();var g=ti(e),m=se(h,p),v=vr(m,l,g);c.currentOutputSnapshotRaw=m,c.currentOutputSnapshotResolved=v,c.currentWriteId=ii(e);var _=Yn(e.serverSyncTree_,n,v,c.currentWriteId,c.applyLocally);Kr(e.eventQueue_,n,_),fi(e,e.transactionQueueTree_)}}(t._repo,t._path,e,0,a,i),s.promise}var Po=function(){function t(t){this._delegate=t}return t.prototype.cancel=function(t){(0,o.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,o.Wj)("OnDisconnect.cancel","onComplete",t,!0);var e=this._delegate.cancel();return t&&e.then(function(){return t(null)},function(e){return t(e)}),e},t.prototype.remove=function(t){(0,o.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,o.Wj)("OnDisconnect.remove","onComplete",t,!0);var e=this._delegate.remove();return t&&e.then(function(){return t(null)},function(e){return t(e)}),e},t.prototype.set=function(t,e){(0,o.Dv)("OnDisconnect.set",1,2,arguments.length),(0,o.Wj)("OnDisconnect.set","onComplete",e,!0);var n=this._delegate.set(t);return e&&n.then(function(){return e(null)},function(t){return e(t)}),n},t.prototype.setWithPriority=function(t,e,n){(0,o.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,o.Wj)("OnDisconnect.setWithPriority","onComplete",n,!0);var r=this._delegate.setWithPriority(t,e);return n&&r.then(function(){return n(null)},function(t){return n(t)}),r},t.prototype.update=function(t,e){if((0,o.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,I("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,o.Wj)("OnDisconnect.update","onComplete",e,!0);var i=this._delegate.update(t);return e&&i.then(function(){return e(null)},function(t){return e(t)}),i},t}(),Oo=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return(0,o.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),No=function(){function t(t,e){this._database=t,this._delegate=e}return t.prototype.val=function(){return(0,o.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()},t.prototype.exportVal=function(){return(0,o.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()},t.prototype.toJSON=function(){return(0,o.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()},t.prototype.exists=function(){return(0,o.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()},t.prototype.child=function(e){return(0,o.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),jr("DataSnapshot.child","path",e,!1),new t(this._database,this._delegate.child(e))},t.prototype.hasChild=function(t){return(0,o.Dv)("DataSnapshot.hasChild",1,1,arguments.length),jr("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)},t.prototype.getPriority=function(){return(0,o.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority},t.prototype.forEach=function(e){var n=this;return(0,o.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,o.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(function(r){return e(new t(n._database,r))})},t.prototype.hasChildren=function(){return(0,o.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()},Object.defineProperty(t.prototype,"key",{get:function(){return this._delegate.key},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return(0,o.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size},t.prototype.getRef=function(){return(0,o.Dv)("DataSnapshot.ref",0,0,arguments.length),new Lo(this._database,this._delegate.ref)},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),Do=function(){function t(t,e){this.database=t,this._delegate=e}return t.prototype.on=function(e,n,r,i){var s,a=this;(0,o.Dv)("Query.on",2,4,arguments.length),(0,o.Wj)("Query.on","callback",n,!1);var u=t.getCancelAndContextArgs_("Query.on",r,i),c=function(t,e){n.call(u.context,new No(a.database,t),e)};c.userCallback=n,c.context=u.context;var l=null===(s=u.cancel)||void 0===s?void 0:s.bind(u.context);switch(e){case"value":return Hi(this._delegate,c,l),n;case"child_added":return Zi(this._delegate,c,l),n;case"child_removed":return Qi(this._delegate,c,l),n;case"child_changed":return Wi(this._delegate,c,l),n;case"child_moved":return Ki(this._delegate,c,l),n;default:throw new Error((0,o.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},t.prototype.off=function(t,e,n){if((0,o.Dv)("Query.off",0,3,arguments.length),qr("Query.off",t,!0),(0,o.Wj)("Query.off","callback",e,!0),(0,o.lb)("Query.off","context",n,!0),e){var r=function(){};r.userCallback=e,r.context=n,Yi(this._delegate,t,r)}else Yi(this._delegate,t)},t.prototype.get=function(){var t=this;return function(t){return function(t,e){var n=function(t,e){var n=e._path,r=null;t.syncPointTree_.foreachOnPath(n,function(t,e){var i=Ct(t,n);r=r||Gn(e,i)});var i=t.syncPointTree_.get(n);i?r=r||Gn(i,ft()):(i=new qn,t.syncPointTree_=t.syncPointTree_.set(n,i));var o=null!=r,s=o?new Ge(r,!0,!1):null;return Qe(jn(i,e,ln(t.pendingWriteTree_,e._path),o?s.getNode():ie.EMPTY_NODE,o).viewCache_)}(t.serverSyncTree_,e);return null!=n?Promise.resolve(n):t.server_.get(e).then(function(n){var r=se(n),i=Jn(t.serverSyncTree_,e._path,r);return Wr(t.eventQueue_,e._path,i),Promise.resolve(r)},function(n){return li(t,"get for query "+(0,o.Pz)(e)+" failed: "+n),Promise.reject(new Error(n))})}((t=(0,o.m9)(t))._repo,t).then(function(e){return new Oi(e,new Pi(t._repo,t._path),t._queryParams.getIndex())})}(this._delegate).then(function(e){return new No(t.database,e)})},t.prototype.once=function(e,n,r,i){var s=this;(0,o.Dv)("Query.once",1,4,arguments.length),(0,o.Wj)("Query.once","callback",n,!0);var a=t.getCancelAndContextArgs_("Query.once",r,i),u=new o.BH,c=function(t,e){var r=new No(s.database,t);n&&n.call(a.context,r,e),u.resolve(r)};c.userCallback=n,c.context=a.context;var l=function(t){a.cancel&&a.cancel.call(a.context,t),u.reject(t)};switch(e){case"value":Hi(this._delegate,c,l,{onlyOnce:!0});break;case"child_added":Zi(this._delegate,c,l,{onlyOnce:!0});break;case"child_removed":Qi(this._delegate,c,l,{onlyOnce:!0});break;case"child_changed":Wi(this._delegate,c,l,{onlyOnce:!0});break;case"child_moved":Ki(this._delegate,c,l,{onlyOnce:!0});break;default:throw new Error((0,o.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise},t.prototype.limitToFirst=function(e){return(0,o.Dv)("Query.limitToFirst",1,1,arguments.length),new t(this.database,bo(this._delegate,ao(e)))},t.prototype.limitToLast=function(e){return(0,o.Dv)("Query.limitToLast",1,1,arguments.length),new t(this.database,bo(this._delegate,co(e)))},t.prototype.orderByChild=function(e){return(0,o.Dv)("Query.orderByChild",1,1,arguments.length),new t(this.database,bo(this._delegate,ho(e)))},t.prototype.orderByKey=function(){return(0,o.Dv)("Query.orderByKey",0,0,arguments.length),new t(this.database,bo(this._delegate,po()))},t.prototype.orderByPriority=function(){return(0,o.Dv)("Query.orderByPriority",0,0,arguments.length),new t(this.database,bo(this._delegate,mo()))},t.prototype.orderByValue=function(){return(0,o.Dv)("Query.orderByValue",0,0,arguments.length),new t(this.database,bo(this._delegate,vo()))},t.prototype.startAt=function(e,n){return void 0===e&&(e=null),(0,o.Dv)("Query.startAt",0,2,arguments.length),new t(this.database,bo(this._delegate,ro(e,n)))},t.prototype.startAfter=function(e,n){return void 0===e&&(e=null),(0,o.Dv)("Query.startAfter",0,2,arguments.length),new t(this.database,bo(this._delegate,oo(e,n)))},t.prototype.endAt=function(e,n){return void 0===e&&(e=null),(0,o.Dv)("Query.endAt",0,2,arguments.length),new t(this.database,bo(this._delegate,Xi(e,n)))},t.prototype.endBefore=function(e,n){return void 0===e&&(e=null),(0,o.Dv)("Query.endBefore",0,2,arguments.length),new t(this.database,bo(this._delegate,eo(e,n)))},t.prototype.equalTo=function(e,n){return(0,o.Dv)("Query.equalTo",1,2,arguments.length),new t(this.database,bo(this._delegate,wo(e,n)))},t.prototype.toString=function(){return(0,o.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()},t.prototype.toJSON=function(){return(0,o.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()},t.prototype.isEqual=function(e){if((0,o.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(e._delegate)},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:void 0,context:void 0};if(e&&n)r.cancel=e,(0,o.Wj)(t,"cancel",r.cancel,!0),r.context=n,(0,o.lb)(t,"context",r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error((0,o.gK)(t,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return new Lo(this.database,new Pi(this._delegate._repo,this._delegate._path))},enumerable:!1,configurable:!0}),t}(),Lo=function(t){function e(e,n){var r=t.call(this,e,new Ii(n._repo,n._path,new Ce,!1))||this;return r.database=e,r._delegate=n,r}return(0,s.ZT)(e,t),e.prototype.getKey=function(){return(0,o.Dv)("Reference.key",0,0,arguments.length),this._delegate.key},e.prototype.child=function(t){return(0,o.Dv)("Reference.child",1,1,arguments.length),"number"==typeof t&&(t=String(t)),new e(this.database,Li(this._delegate,t))},e.prototype.getParent=function(){(0,o.Dv)("Reference.parent",0,0,arguments.length);var t=this._delegate.parent;return t?new e(this.database,t):null},e.prototype.getRoot=function(){return(0,o.Dv)("Reference.root",0,0,arguments.length),new e(this.database,this._delegate.root)},e.prototype.set=function(t,e){(0,o.Dv)("Reference.set",1,2,arguments.length),(0,o.Wj)("Reference.set","onComplete",e,!0);var n=Mi(this._delegate,t);return e&&n.then(function(){return e(null)},function(t){return e(t)}),n},e.prototype.update=function(t,e){if((0,o.Dv)("Reference.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,I("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Br("Reference.update",this._delegate._path),(0,o.Wj)("Reference.update","onComplete",e,!0);var i=ji(this._delegate,t);return e&&i.then(function(){return e(null)},function(t){return e(t)}),i},e.prototype.setWithPriority=function(t,e,n){(0,o.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,o.Wj)("Reference.setWithPriority","onComplete",n,!0);var r=Vi(this._delegate,t,e);return n&&r.then(function(){return n(null)},function(t){return n(t)}),r},e.prototype.remove=function(t){(0,o.Dv)("Reference.remove",0,1,arguments.length),(0,o.Wj)("Reference.remove","onComplete",t,!0);var e=Ui(this._delegate);return t&&e.then(function(){return t(null)},function(e){return t(e)}),e},e.prototype.transaction=function(t,e,n){var r=this;(0,o.Dv)("Reference.transaction",1,3,arguments.length),(0,o.Wj)("Reference.transaction","transactionUpdate",t,!1),(0,o.Wj)("Reference.transaction","onComplete",e,!0),zr("Reference.transaction","applyLocally",n,!0);var i=Ro(this._delegate,t,{applyLocally:n}).then(function(t){return new Oo(t.committed,new No(r.database,t.snapshot))});return e&&i.then(function(t){return e(null,t.committed,t.snapshot)},function(t){return e(t,!1,null)}),i},e.prototype.setPriority=function(t,e){(0,o.Dv)("Reference.setPriority",1,2,arguments.length),(0,o.Wj)("Reference.setPriority","onComplete",e,!0);var n=qi(this._delegate,t);return e&&n.then(function(){return e(null)},function(t){return e(t)}),n},e.prototype.push=function(t,n){var r=this;(0,o.Dv)("Reference.push",0,2,arguments.length),(0,o.Wj)("Reference.push","onComplete",n,!0);var i=Fi(this._delegate,t),s=i.then(function(t){return new e(r.database,t)});n&&s.then(function(){return n(null)},function(t){return n(t)});var a=new e(this.database,i);return a.then=s.then.bind(s),a.catch=s.catch.bind(s,void 0),a},e.prototype.onDisconnect=function(){return Br("Reference.onDisconnect",this._delegate._path),new Po(new xi(this._delegate._repo,this._delegate._path))},Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(Do),Fo=function(){function t(t,e){var n=this;this._delegate=t,this.app=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={}),(t=(0,o.m9)(t))._checkNotDeleted("useEmulator"),t._instanceStarted&&x("Cannot call useEmulator() after instance has already been initialized.");var i=t._repoInternal,s=void 0;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&x('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new z(z.OWNER);else if(r.mockUserToken){var a=(0,o.Sg)(r.mockUserToken,t.app.options.projectId);s=new z(a)}!function(t,e,n,r){t.repoInfo_=new K(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),r&&(t.authTokenProvider_=r)}(i,e,n,s)}(this._delegate,t,e,n)},t.prototype.ref=function(t){if((0,o.Dv)("database.ref",0,1,arguments.length),t instanceof Lo){var e=Di(this._delegate,t.toString());return new Lo(this,e)}return e=Ni(this._delegate,t),new Lo(this,e)},t.prototype.refFromURL=function(t){var e="database.refFromURL";(0,o.Dv)(e,1,1,arguments.length);var n=Di(this._delegate,t);return new Lo(this,n)},t.prototype.goOffline=function(){return(0,o.Dv)("database.goOffline",0,0,arguments.length),xo(this._delegate)},t.prototype.goOnline=function(){return(0,o.Dv)("database.goOnline",0,0,arguments.length),Io(this._delegate)},t.ServerValue={TIMESTAMP:ko,increment:function(t){return function(t){return{".sv":{increment:t}}}(t)}},t}(),Uo=Object.freeze({__proto__:null,forceLongPolling:function(){st.forceDisallow(),rt.forceAllow()},forceWebSockets:function(){rt.forceDisallow()},isWebSocketsAvailable:function(){return st.isAvailable()},setSecurityDebugCallback:function(t,e){t._delegate._repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){!function(t,e){if(void 0===e&&(e=!1),"undefined"!=typeof console){var n;e?(t.statsListener_||(t.statsListener_=new De(t.stats_)),n=t.statsListener_.get()):n=t.stats_.get();var r=Object.keys(n).reduce(function(t,e){return Math.max(e.length,t)},0);F(n,function(t,e){for(var n=t,i=t.length;i<r+2;i++)n+=" ";console.log(n+e)})}}(t._delegate._repo,e)},statsIncrementCounter:function(t,e){!function(t,e){t.stats_.incrementCounter(e),t.statsReporter_.statsToReport_[e]=!0}(t._delegate._repo,e)},dataUpdateCount:function(t){return t._delegate._repo.dataUpdateCount},interceptServerData:function(t,e){return function(t,e){t.interceptServerDataCallback_=e}(t._delegate._repo,e)},initStandalone:function(t){var e=t.app,n=t.url,r=t.customAuthImpl,o=t.namespace,s=t.nodeAdmin,a=void 0!==s&&s;c(t.version);var u=new i.zt("auth-internal",new i.H0("database-standalone"));return u.setComponent(new i.wA("auth-internal",function(){return r},"PRIVATE")),{instance:new Fo(Eo(e,u,void 0,n,a),e),namespace:o}}}),Mo=Nt;Nt.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},Nt.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var qo=Object.freeze({__proto__:null,DataConnection:Mo,RealTimeConnection:ut,hijackHash:function(t){var e=Nt.prototype.put;return Nt.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){Nt.prototype.put=e}},ConnectionTarget:K,queryIdentifier:function(t){return t._delegate._queryIdentifier},forceRestClient:function(t){!function(t){To=t}(t)}}),Vo=Fo.ServerValue;!function(e){c(e.SDK_VERSION);var n=e.INTERNAL.registerComponent(new i.wA("database",function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return new Fo(Eo(r,i,o,n),r)},"PUBLIC").setServiceProps({Reference:Lo,Query:Do,Database:Fo,DataSnapshot:No,enableLogging:C,INTERNAL:Uo,ServerValue:Vo,TEST_ACCESS:qo}).setMultipleInstances(!0));e.registerVersion("@firebase/database","0.10.1"),(0,o.Yr)()&&(t.exports=n)}(r.Z)},308:(t,e,n)=>{"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i;n.d(e,{in:()=>s,Yd:()=>h,Ub:()=>d,Am:()=>f});var o=[],s=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),a={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},u=s.INFO,c=((i={})[s.DEBUG]="log",i[s.VERBOSE]="log",i[s.INFO]="info",i[s.WARN]="warn",i[s.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in s))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.DEBUG],t)),this._logHandler.apply(this,r([this,s.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.VERBOSE],t)),this._logHandler.apply(this,r([this,s.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.INFO],t)),this._logHandler.apply(this,r([this,s.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.WARN],t)),this._logHandler.apply(this,r([this,s.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.ERROR],t)),this._logHandler.apply(this,r([this,s.ERROR],t))},t}();function d(t){o.forEach(function(e){e.setLogLevel(t)})}function f(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}}).filter(function(t){return t}).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:s[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=o;r<i.length;r++)n(i[r])}},250:(t,e,n)=>{"use strict";n.d(e,{BH:()=>d,LL:()=>S,ZR:()=>E,gQ:()=>M,hu:()=>i,g5:()=>o,US:()=>a,h$:()=>u,r3:()=>N,Sg:()=>f,ne:()=>q,p$:()=>l,ZB:()=>h,gK:()=>G,m9:()=>K,z$:()=>p,GJ:()=>O,jU:()=>y,ru:()=>v,d:()=>w,xb:()=>L,w1:()=>b,uI:()=>g,UG:()=>m,Yr:()=>T,b$:()=>_,Mn:()=>C,w9:()=>P,cI:()=>k,UI:()=>F,xO:()=>U,DV:()=>D,ug:()=>W,dS:()=>Z,Pz:()=>A,Dv:()=>B,Wj:()=>z,lb:()=>H});var r=n(4762),i=function(t,e){if(!t)throw o(e)},o=function(t){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+t)},s=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},a={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=(15&a)<<2|c>>6,h=63&c;u||(h=64,s||(l=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[l],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(s(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();r.push(o<<2|s>>4),64!==a&&(r.push(s<<4&240|a>>2),64!==u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},u=function(t){var e=s(t);return a.encodeByteArray(e,!0)},c=function(t){try{return a.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function l(t){return h(void 0,t)}function h(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=h(t[n],e[n]));return t}var d=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}();function f(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var s=(0,r.pi)({iss:"https://securetoken.google.com/"+n,aud:n,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[a.encodeString(JSON.stringify({alg:"none",type:"JWT"}),!1),a.encodeString(JSON.stringify(s),!1),""].join(".")}function p(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function g(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(p())}function m(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function y(){return"object"==typeof self&&self.self===self}function v(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function _(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function w(){return p().indexOf("Electron/")>=0}function b(){var t=p();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function C(){return p().indexOf("MSAppHost/")>=0}function T(){return!1}var E=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,S.prototype.create),o}return(0,r.ZT)(e,t),e}(Error),S=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?x(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new E(i,a,r);return u},t}();function x(t,e){return t.replace(I,function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"})}var I=/\{\$([^}]+)}/g;function k(t){return JSON.parse(t)}function A(t){return JSON.stringify(t)}var R=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=k(c(o[0])||""),n=k(c(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(s){}return{header:e,claims:n,data:r,signature:i}},P=function(t){var e=R(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},O=function(t){var e=R(t).claims;return"object"==typeof e&&!0===e.admin};function N(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function D(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function L(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function F(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function U(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach(function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""}var M=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,o,s=this.chain_[0],a=this.chain_[1],u=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=c^a&(u^c),o=1518500249):(i=a^u^c,o=1859775393):r<60?(i=a&u|c&(a|u),o=2400959708):(i=a^u^c,o=3395469782);var h=(s<<5|s>>>27)+i+l+o+n[r]&4294967295;l=c,c=u,u=4294967295&(a<<30|a>>>2),a=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function q(t,e){var n=new V(t,e);return n.subscribe.bind(n)}var V=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=j),void 0===r.error&&(r.error=j),void 0===r.complete&&(r.complete=j);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function j(){}var B=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function G(t,e){return t+" failed: "+e+" argument "}function z(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(G(t,e)+"must be a valid function.")}function H(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(G(t,e)+"must be a valid context object.")}var Z=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var o=t.charCodeAt(r);if(o>=55296&&o<=56319){var s=o-55296;r++,i(r<t.length,"Surrogate pair missing trail surrogate."),o=65536+(s<<10)+(t.charCodeAt(r)-56320)}o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=63&o|128):o<65536?(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=63&o|128):(e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=63&o|128)}return e},W=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};function K(t){return t&&t._delegate?t._delegate:t}},1858:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r.Z});var r=n(1062);r.Z.registerVersion("firebase","8.6.1","app")},8318:(t,e,n)=>{"use strict";n.d(e,{y:()=>c});var r=n(6673),i=n(5331),o=n(7498),s=n(6197),a=n(3392),u=n(1484);let c=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:s}=this,a=function(t,e,n){if(t){if(t instanceof r.L)return t;if(t[i.b])return t[i.b]()}return t||e||n?new r.L(t,e,n):new r.L(o.c)}(t,e,n);if(a.add(s?s.call(a,this.source):this.source||u.v.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),u.v.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(t){try{return this._subscribe(t)}catch(e){u.v.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof r.L?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=l(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[s.L](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?a.y:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=l(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function l(t){if(t||(t=u.v.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},7498:(t,e,n)=>{"use strict";n.d(e,{c:()=>o});var r=n(1484),i=n(4294);const o={closed:!0,next(t){},error(t){if(r.v.useDeprecatedSynchronousErrorHandling)throw t;(0,i.z)(t)},complete(){}}},5959:(t,e,n)=>{"use strict";n.d(e,{Yc:()=>c,xQ:()=>l});var r=n(8318),i=n(6673),o=n(7570),s=n(3895),a=n(9291),u=n(5331);class c extends i.L{constructor(t){super(t),this.destination=t}}let l=(()=>{class t extends r.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.b](){return new c(this)}lift(t){const e=new h(this,this);return e.operator=t,e}next(t){if(this.closed)throw new s.N;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new s.N;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new s.N;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new s.N;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new s.N;return this.hasError?(t.error(this.thrownError),o.w.EMPTY):this.isStopped?(t.complete(),o.w.EMPTY):(this.observers.push(t),new a.W(this,t))}asObservable(){const t=new r.y;return t.source=this,t}}return t.create=(t,e)=>new h(t,e),t})();class h extends l{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):o.w.EMPTY}}},9291:(t,e,n)=>{"use strict";n.d(e,{W:()=>i});var r=n(7570);class i extends r.w{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},6673:(t,e,n)=>{"use strict";n.d(e,{L:()=>c});var r=n(5024),i=n(7498),o=n(7570),s=n(5331),a=n(1484),u=n(4294);class c extends o.w{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.c;break;case 1:if(!t){this.destination=i.c;break}if("object"==typeof t){t instanceof c?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,t,e,n)}}[s.b](){return this}static create(t,e,n){const r=new c(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class l extends c{constructor(t,e,n,o){let s;super(),this._parentSubscriber=t;let a=this;(0,r.m)(e)?s=e:e&&(s=e.next,n=e.error,o=e.complete,e!==i.c&&(a=Object.create(e),(0,r.m)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=s,this._error=n,this._complete=o}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.v.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a.v;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):(0,u.z)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;(0,u.z)(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.v.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.v.useDeprecatedSynchronousErrorHandling)throw n;(0,u.z)(n)}}__tryOrSetError(t,e,n){if(!a.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.v.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):((0,u.z)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},7570:(t,e,n)=>{"use strict";n.d(e,{w:()=>a});var r=n(8470),i=n(2056),o=n(5024);const s=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let a=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:a,_unsubscribe:c,_subscriptions:l}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if((0,o.m)(c)){a&&(this._unsubscribe=void 0);try{c.call(this)}catch(h){e=h instanceof s?u(h.errors):[h]}}if((0,r.k)(l)){let t=-1,n=l.length;for(;++t<n;){const n=l[t];if((0,i.K)(n))try{n.unsubscribe()}catch(h){e=e||[],h instanceof s?e=e.concat(u(h.errors)):e.push(h)}}}if(e)throw new s(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var e;return t.EMPTY=((e=new t).closed=!0,e),t})();function u(t){return t.reduce((t,e)=>t.concat(e instanceof s?e.errors:e),[])}},1484:(t,e,n)=>{"use strict";n.d(e,{v:()=>i});let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},6882:(t,e,n)=>{"use strict";n.d(e,{IY:()=>s,Ds:()=>a,ft:()=>u});var r=n(6673),i=n(8318),o=n(6015);class s extends r.L{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.L{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function u(t,e){if(e.closed)return;if(t instanceof i.y)return t.subscribe(e);let n;try{n=(0,o.s)(t)(e)}catch(r){e.error(r)}return n}},2875:(t,e,n)=>{"use strict";n.d(e,{c:()=>a,N:()=>u});var r=n(5959),i=n(8318),o=n(7570),s=n(1564);class a extends i.y{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new o.w,t.add(this.source.subscribe(new c(this.getSubject(),this))),t.closed&&(this._connection=null,t=o.w.EMPTY)),t}refCount(){return(0,s.x)()(this)}}const u=(()=>{const t=a.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class c extends r.Yc{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}},653:(t,e,n)=>{"use strict";n.d(e,{E:()=>i,c:()=>o});var r=n(8318);const i=new r.y(t=>t.complete());function o(t){return t?function(t){return new r.y(e=>t.schedule(()=>e.complete()))}(t):i}},9764:(t,e,n)=>{"use strict";n.d(e,{D:()=>h});var r=n(8318),i=n(6015),o=n(7570),s=n(6197),a=n(2570),u=n(5686),c=n(5168),l=n(9653);function h(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[s.L]}(t))return function(t,e){return new r.y(n=>{const r=new o.w;return r.add(e.schedule(()=>{const i=t[s.L]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if((0,c.t)(t))return function(t,e){return new r.y(n=>{const r=new o.w;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if((0,l.z)(t))return(0,a.r)(t,e);if(function(t){return t&&"function"==typeof t[u.hZ]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.y(n=>{const r=new o.w;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[u.hZ](),r.add(e.schedule(function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof r.y?t:new r.y((0,i.s)(t))}},9342:(t,e,n)=>{"use strict";n.d(e,{n:()=>s});var r=n(8318),i=n(625),o=n(2570);function s(t,e){return e?(0,o.r)(t,e):new r.y((0,i.V)(t))}},1906:(t,e,n)=>{"use strict";n.d(e,{T:()=>a});var r=n(8318),i=n(6163),o=n(7471),s=n(9342);function a(...t){let e=Number.POSITIVE_INFINITY,n=null,a=t[t.length-1];return(0,i.K)(a)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof a&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof r.y?t[0]:(0,o.J)(e)((0,s.n)(t,n))}},878:(t,e,n)=>{"use strict";n.d(e,{of:()=>s});var r=n(6163),i=n(9342),o=n(2570);function s(...t){let e=t[t.length-1];return(0,r.K)(e)?(t.pop(),(0,o.r)(t,e)):(0,i.n)(t)}},9996:(t,e,n)=>{"use strict";n.d(e,{U:()=>i});var r=n(6673);function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(t,e))}}class o{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new s(t,this.project,this.thisArg))}}class s extends r.L{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},7471:(t,e,n)=>{"use strict";n.d(e,{J:()=>o});var r=n(3982),i=n(3392);function o(t=Number.POSITIVE_INFINITY){return(0,r.zg)(i.y,t)}},3982:(t,e,n)=>{"use strict";n.d(e,{zg:()=>s});var r=n(9996),i=n(9764),o=n(6882);function s(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?o=>o.pipe(s((n,o)=>(0,i.D)(t(n,o)).pipe((0,r.U)((t,r)=>e(n,t,o,r))),n)):("number"==typeof e&&(n=e),e=>e.lift(new a(t,n)))}class a{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new u(t,this.project,this.concurrent))}}class u extends o.Ds{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new o.IY(this),n=this.destination;n.add(e);const r=(0,o.ft)(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},9098:(t,e,n)=>{"use strict";n.d(e,{ht:()=>l,QV:()=>u});var r=n(6673),i=n(653),o=n(878),s=n(8318);let a=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return(0,o.of)(this.value);case"E":return t=this.error,new s.y(e=>e.error(t));case"C":return(0,i.c)()}var t;throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})();function u(t,e=0){return function(n){return n.lift(new c(t,e))}}class c{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new l(t,this.scheduler,this.delay))}}class l extends r.L{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(l.dispatch,this.delay,new h(t,this.destination)))}_next(t){this.scheduleMessage(a.createNext(t))}_error(t){this.scheduleMessage(a.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(a.createComplete()),this.unsubscribe()}}class h{constructor(t,e){this.notification=t,this.destination=e}}},1564:(t,e,n)=>{"use strict";n.d(e,{x:()=>i});var r=n(6673);function i(){return function(t){return t.lift(new o(t))}}class o{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new s(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class s extends r.L{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}},1055:(t,e,n)=>{"use strict";n.d(e,{B:()=>a});var r=n(2875),i=n(1564),o=n(5959);function s(){return new o.xQ}function a(){return t=>{return(0,i.x)()((e=s,function(t){let n;n="function"==typeof e?e:function(){return e};const i=Object.create(t,r.N);return i.source=t,i.subjectFactory=n,i})(t));var e}}},4187:(t,e,n)=>{"use strict";n.d(e,{R:()=>m});var r=n(8318);let i=1;const o=(()=>Promise.resolve())(),s={};function a(t){return t in s&&(delete s[t],!0)}const u={setImmediate(t){const e=i++;return s[e]=!0,o.then(()=>a(e)&&t()),e},clearImmediate(t){a(t)}};var c=n(8277);class l extends c.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=u.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(u.clearImmediate(e),t.scheduled=void 0)}}var h=n(1098);class d extends h.v{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}const f=new d(l);var p=n(8470);class g extends r.y{constructor(t,e=0,n=f){var r;super(),this.source=t,this.delayTime=e,this.scheduler=n,((0,p.k)(r=e)||!(r-parseFloat(r)+1>=0)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=f)}static create(t,e=0,n=f){return new g(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(g.dispatch,this.delayTime,{source:this.source,subscriber:t})}}function m(t,e=0){return function(n){return n.lift(new y(t,e))}}class y{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new g(e,this.delay,this.scheduler).subscribe(t)}}},6599:(t,e,n)=>{"use strict";n.d(e,{b:()=>s});var r=n(6673);function i(){}var o=n(5024);function s(t,e,n){return function(r){return r.lift(new a(t,e,n))}}class a{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new u(t,this.nextOrObserver,this.error,this.complete))}}class u extends r.L{constructor(t,e,n,r){super(t),this._tapNext=i,this._tapError=i,this._tapComplete=i,this._tapError=n||i,this._tapComplete=r||i,(0,o.m)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||i,this._tapError=e.error||i,this._tapComplete=e.complete||i)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}},2570:(t,e,n)=>{"use strict";n.d(e,{r:()=>o});var r=n(8318),i=n(7570);function o(t,e){return new r.y(n=>{const r=new i.w;let o=0;return r.add(e.schedule(function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},8277:(t,e,n)=>{"use strict";n.d(e,{o:()=>o});var r=n(7570);class i extends r.w{constructor(t,e){super()}schedule(t,e=0){return this}}class o extends i{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n,r=!1;try{this.work(t)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}},1098:(t,e,n)=>{"use strict";n.d(e,{v:()=>i});let r=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class i extends r{constructor(t,e=r.now){super(t,()=>i.delegate&&i.delegate!==this?i.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}},8569:(t,e,n)=>{"use strict";n.d(e,{z:()=>i,P:()=>o});var r=n(8277);const i=new(n(1098).v)(r.o),o=i},8489:(t,e,n)=>{"use strict";n.d(e,{c:()=>u,N:()=>a});var r=n(8277);class i extends r.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}var o=n(1098);class s extends o.v{}const a=new s(i),u=a},5686:(t,e,n)=>{"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(e,{hZ:()=>i});const i=r()},6197:(t,e,n)=>{"use strict";n.d(e,{L:()=>r});const r=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")()},5331:(t,e,n)=>{"use strict";n.d(e,{b:()=>r});const r=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())()},3895:(t,e,n)=>{"use strict";n.d(e,{N:()=>r});const r=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})()},4294:(t,e,n)=>{"use strict";function r(t){setTimeout(()=>{throw t},0)}n.d(e,{z:()=>r})},3392:(t,e,n)=>{"use strict";function r(t){return t}n.d(e,{y:()=>r})},8470:(t,e,n)=>{"use strict";n.d(e,{k:()=>r});const r=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))()},9653:(t,e,n)=>{"use strict";n.d(e,{z:()=>r});const r=t=>t&&"number"==typeof t.length&&"function"!=typeof t},5024:(t,e,n)=>{"use strict";function r(t){return"function"==typeof t}n.d(e,{m:()=>r})},2056:(t,e,n)=>{"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,{K:()=>r})},5168:(t,e,n)=>{"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,{t:()=>r})},6163:(t,e,n)=>{"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,{K:()=>r})},6015:(t,e,n)=>{"use strict";n.d(e,{s:()=>l});var r=n(625),i=n(4294),o=n(5686),s=n(6197),a=n(9653),u=n(5168),c=n(2056);const l=t=>{if(t&&"function"==typeof t[s.L])return l=t,t=>{const e=l[s.L]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if((0,a.z)(t))return(0,r.V)(t);if((0,u.t)(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i.z),t);if(t&&"function"==typeof t[o.hZ])return e=t,t=>{const n=e[o.hZ]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=(0,c.K)(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,l}},625:(t,e,n)=>{"use strict";n.d(e,{V:()=>r});const r=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}},2501:function(t){t.exports=function(){"use strict";const t=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),e="SweetAlert2:",n=t=>t.charAt(0).toUpperCase()+t.slice(1),r=t=>Array.prototype.slice.call(t),i=t=>{console.warn("".concat(e," ").concat("object"==typeof t?t.join(" "):t))},o=t=>{console.error("".concat(e," ").concat(t))},s=[],a=(t,e)=>{"function"==typeof t&&t(e)},u=t=>"function"==typeof t?t():t,c=t=>t&&"function"==typeof t.toPromise,l=t=>c(t)?t.toPromise():Promise.resolve(t),h=t=>t&&Promise.resolve(t)===t,d=t=>t instanceof Element||(t=>"object"==typeof t&&t.jquery)(t),f=t=>{const e={};for(const n in t)e[t[n]]="swal2-"+t[n];return e},p=f(["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"]),g=f(["success","warning","info","question","error"]),m=()=>document.body.querySelector(".".concat(p.container)),y=t=>{const e=m();return e?e.querySelector(t):null},v=t=>y(".".concat(t)),_=()=>v(p.popup),w=()=>v(p.icon),b=()=>v(p.title),C=()=>v(p["html-container"]),T=()=>v(p.image),E=()=>v(p["progress-steps"]),S=()=>v(p["validation-message"]),x=()=>y(".".concat(p.actions," .").concat(p.confirm)),I=()=>y(".".concat(p.actions," .").concat(p.deny)),k=()=>y(".".concat(p.loader)),A=()=>y(".".concat(p.actions," .").concat(p.cancel)),R=()=>v(p.actions),P=()=>v(p.footer),O=()=>v(p["timer-progress-bar"]),N=()=>v(p.close),D=()=>{const t=r(_().querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])')).sort((t,e)=>(t=parseInt(t.getAttribute("tabindex")))>(e=parseInt(e.getAttribute("tabindex")))?1:t<e?-1:0),e=r(_().querySelectorAll('\n  a[href],\n  area[href],\n  input:not([disabled]),\n  select:not([disabled]),\n  textarea:not([disabled]),\n  button:not([disabled]),\n  iframe,\n  object,\n  embed,\n  [tabindex="0"],\n  [contenteditable],\n  audio[controls],\n  video[controls],\n  summary\n')).filter(t=>"-1"!==t.getAttribute("tabindex"));return(t=>{const e=[];for(let n=0;n<t.length;n++)-1===e.indexOf(t[n])&&e.push(t[n]);return e})(t.concat(e)).filter(t=>J(t))},L=()=>!F()&&!document.body.classList.contains(p["no-backdrop"]),F=()=>document.body.classList.contains(p["toast-shown"]),U={previousBodyPadding:null},M=(t,e)=>{if(t.textContent="",e){const n=(new DOMParser).parseFromString(e,"text/html");r(n.querySelector("head").childNodes).forEach(e=>{t.appendChild(e)}),r(n.querySelector("body").childNodes).forEach(e=>{t.appendChild(e)})}},q=(t,e)=>{if(!e)return!1;const n=e.split(/\s+/);for(let r=0;r<n.length;r++)if(!t.classList.contains(n[r]))return!1;return!0},V=(t,e,n)=>{if(((t,e)=>{r(t.classList).forEach(n=>{Object.values(p).includes(n)||Object.values(g).includes(n)||Object.values(e.showClass).includes(n)||t.classList.remove(n)})})(t,e),e.customClass&&e.customClass[n]){if("string"!=typeof e.customClass[n]&&!e.customClass[n].forEach)return i("Invalid type of customClass.".concat(n,'! Expected string or iterable object, got "').concat(typeof e.customClass[n],'"'));z(t,e.customClass[n])}},j=(t,e)=>{if(!e)return null;switch(e){case"select":case"textarea":case"file":return Z(t,p[e]);case"checkbox":return t.querySelector(".".concat(p.checkbox," input"));case"radio":return t.querySelector(".".concat(p.radio," input:checked"))||t.querySelector(".".concat(p.radio," input:first-child"));case"range":return t.querySelector(".".concat(p.range," input"));default:return Z(t,p.input)}},B=t=>{if(t.focus(),"file"!==t.type){const e=t.value;t.value="",t.value=e}},G=(t,e,n)=>{t&&e&&("string"==typeof e&&(e=e.split(/\s+/).filter(Boolean)),e.forEach(e=>{t.forEach?t.forEach(t=>{n?t.classList.add(e):t.classList.remove(e)}):n?t.classList.add(e):t.classList.remove(e)}))},z=(t,e)=>{G(t,e,!0)},H=(t,e)=>{G(t,e,!1)},Z=(t,e)=>{for(let n=0;n<t.childNodes.length;n++)if(q(t.childNodes[n],e))return t.childNodes[n]},W=(t,e,n)=>{n==="".concat(parseInt(n))&&(n=parseInt(n)),n||0===parseInt(n)?t.style[e]="number"==typeof n?"".concat(n,"px"):n:t.style.removeProperty(e)},K=(t,e="flex")=>{t.style.display=e},Q=t=>{t.style.display="none"},Y=(t,e,n,r)=>{const i=t.querySelector(e);i&&(i.style[n]=r)},$=(t,e,n)=>{e?K(t,n):Q(t)},J=t=>!(!t||!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)),X=t=>!!(t.scrollHeight>t.clientHeight),tt=t=>{const e=window.getComputedStyle(t),n=parseFloat(e.getPropertyValue("animation-duration")||"0"),r=parseFloat(e.getPropertyValue("transition-duration")||"0");return n>0||r>0},et=(t,e=!1)=>{const n=O();J(n)&&(e&&(n.style.transition="none",n.style.width="100%"),setTimeout(()=>{n.style.transition="width ".concat(t/1e3,"s linear"),n.style.width="0%"},10))},nt=()=>"undefined"==typeof window||"undefined"==typeof document,rt='\n <div aria-labelledby="'.concat(p.title,'" aria-describedby="').concat(p["html-container"],'" class="').concat(p.popup,'" tabindex="-1">\n   <button type="button" class="').concat(p.close,'"></button>\n   <ul class="').concat(p["progress-steps"],'"></ul>\n   <div class="').concat(p.icon,'"></div>\n   <img class="').concat(p.image,'" />\n   <h2 class="').concat(p.title,'" id="').concat(p.title,'"></h2>\n   <div class="').concat(p["html-container"],'"></div>\n   <input class="').concat(p.input,'" />\n   <input type="file" class="').concat(p.file,'" />\n   <div class="').concat(p.range,'">\n     <input type="range" />\n     <output></output>\n   </div>\n   <select class="').concat(p.select,'"></select>\n   <div class="').concat(p.radio,'"></div>\n   <label for="').concat(p.checkbox,'" class="').concat(p.checkbox,'">\n     <input type="checkbox" />\n     <span class="').concat(p.label,'"></span>\n   </label>\n   <textarea class="').concat(p.textarea,'"></textarea>\n   <div class="').concat(p["validation-message"],'" id="').concat(p["validation-message"],'"></div>\n   <div class="').concat(p.actions,'">\n     <div class="').concat(p.loader,'"></div>\n     <button type="button" class="').concat(p.confirm,'"></button>\n     <button type="button" class="').concat(p.deny,'"></button>\n     <button type="button" class="').concat(p.cancel,'"></button>\n   </div>\n   <div class="').concat(p.footer,'"></div>\n   <div class="').concat(p["timer-progress-bar-container"],'">\n     <div class="').concat(p["timer-progress-bar"],'"></div>\n   </div>\n </div>\n').replace(/(^|\n)\s*/g,""),it=()=>{Ue.isVisible()&&Ue.resetValidationMessage()},ot=(t,e)=>{t instanceof HTMLElement?e.appendChild(t):"object"==typeof t?st(t,e):t&&M(e,t)},st=(t,e)=>{t.jquery?at(e,t):M(e,t.toString())},at=(t,e)=>{if(t.textContent="",0 in e)for(let n=0;n in e;n++)t.appendChild(e[n].cloneNode(!0));else t.appendChild(e.cloneNode(!0))},ut=(()=>{if(nt())return!1;const t=document.createElement("div"),e={WebkitAnimation:"webkitAnimationEnd",OAnimation:"oAnimationEnd oanimationend",animation:"animationend"};for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&void 0!==t.style[n])return e[n];return!1})();function ct(t,e,r){$(t,r["show".concat(n(e),"Button")],"inline-block"),M(t,r["".concat(e,"ButtonText")]),t.setAttribute("aria-label",r["".concat(e,"ButtonAriaLabel")]),t.className=p[e],V(t,r,"".concat(e,"Button")),z(t,r["".concat(e,"ButtonClass")])}var lt={promise:new WeakMap,innerParams:new WeakMap,domCache:new WeakMap};const ht=["input","file","range","select","radio","checkbox","textarea"],dt=(t,e)=>{t.placeholder&&!e.inputPlaceholder||(t.placeholder=e.inputPlaceholder)},ft=(t,e,n)=>{if(n.inputLabel){t.id=p.input;const r=document.createElement("label"),i=p["input-label"];r.setAttribute("for",t.id),r.className=i,z(r,n.customClass.inputLabel),r.innerText=n.inputLabel,e.insertAdjacentElement("beforebegin",r)}},pt=t=>{const e=p[t]?p[t]:p.input;return Z(_(),e)},gt={};gt.text=gt.email=gt.password=gt.number=gt.tel=gt.url=(t,e)=>("string"==typeof e.inputValue||"number"==typeof e.inputValue?t.value=e.inputValue:h(e.inputValue)||i('Unexpected type of inputValue! Expected "string", "number" or "Promise", got "'.concat(typeof e.inputValue,'"')),ft(t,t,e),dt(t,e),t.type=e.input,t),gt.file=(t,e)=>(ft(t,t,e),dt(t,e),t),gt.range=(t,e)=>{const n=t.querySelector("input"),r=t.querySelector("output");return n.value=e.inputValue,n.type=e.input,r.value=e.inputValue,ft(n,t,e),t},gt.select=(t,e)=>{if(t.textContent="",e.inputPlaceholder){const n=document.createElement("option");M(n,e.inputPlaceholder),n.value="",n.disabled=!0,n.selected=!0,t.appendChild(n)}return ft(t,t,e),t},gt.radio=t=>(t.textContent="",t),gt.checkbox=(t,e)=>{const n=j(_(),"checkbox");n.value=1,n.id=p.checkbox,n.checked=Boolean(e.inputValue);const r=t.querySelector("span");return M(r,e.inputPlaceholder),t},gt.textarea=(t,e)=>{if(t.value=e.inputValue,dt(t,e),ft(t,t,e),"MutationObserver"in window){const e=parseInt(window.getComputedStyle(_()).width);new MutationObserver(()=>{const n=t.offsetWidth+(r=t,parseInt(window.getComputedStyle(r).marginLeft)+parseInt(window.getComputedStyle(r).marginRight));var r;_().style.width=n>e?"".concat(n,"px"):null}).observe(t,{attributes:!0,attributeFilter:["style"]})}return t};const mt=(t,e)=>{const n=C();V(n,e,"htmlContainer"),e.html?(ot(e.html,n),K(n,"block")):e.text?(n.textContent=e.text,K(n,"block")):Q(n),((t,e)=>{const n=_(),r=lt.innerParams.get(t),i=!r||e.input!==r.input;ht.forEach(t=>{const r=p[t],o=Z(n,r);((t,e)=>{const n=j(_(),t);if(n){(t=>{for(let e=0;e<t.attributes.length;e++){const n=t.attributes[e].name;["type","value","style"].includes(n)||t.removeAttribute(n)}})(n);for(const t in e)n.setAttribute(t,e[t])}})(t,e.inputAttributes),o.className=r,i&&Q(o)}),e.input&&(i&&(t=>{if(!gt[t.input])return o('Unexpected type of input! Expected "text", "email", "password", "number", "tel", "select", "radio", "checkbox", "textarea", "file" or "url", got "'.concat(t.input,'"'));const e=pt(t.input),n=gt[t.input](e,t);K(n),setTimeout(()=>{B(n)})})(e),(t=>{const e=pt(t.input);t.customClass&&z(e,t.customClass.input)})(e))})(t,e)},yt=(t,e)=>{for(const n in g)e.icon!==n&&H(t,g[n]);z(t,g[e.icon]),wt(t,e),vt(),V(t,e,"icon")},vt=()=>{const t=_(),e=window.getComputedStyle(t).getPropertyValue("background-color"),n=t.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let r=0;r<n.length;r++)n[r].style.backgroundColor=e},_t=(t,e)=>{t.textContent="",M(t,e.iconHtml?bt(e.iconHtml):"success"===e.icon?'\n      <div class="swal2-success-circular-line-left"></div>\n      <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>\n      <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>\n      <div class="swal2-success-circular-line-right"></div>\n    ':"error"===e.icon?'\n      <span class="swal2-x-mark">\n        <span class="swal2-x-mark-line-left"></span>\n        <span class="swal2-x-mark-line-right"></span>\n      </span>\n    ':bt({question:"?",warning:"!",info:"i"}[e.icon]))},wt=(t,e)=>{if(e.iconColor){t.style.color=e.iconColor,t.style.borderColor=e.iconColor;for(const n of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])Y(t,n,"backgroundColor",e.iconColor);Y(t,".swal2-success-ring","borderColor",e.iconColor)}},bt=t=>'<div class="'.concat(p["icon-content"],'">').concat(t,"</div>"),Ct=(t,e)=>{((t,e)=>{const n=m(),r=_();e.toast?(W(n,"width",e.width),r.style.width="100%",r.insertBefore(k(),w())):W(r,"width",e.width),W(r,"padding",e.padding),e.background&&(r.style.background=e.background),Q(S()),((t,e)=>{t.className="".concat(p.popup," ").concat(J(t)?e.showClass.popup:""),e.toast?(z([document.documentElement,document.body],p["toast-shown"]),z(t,p.toast)):z(t,p.modal),V(t,e,"popup"),"string"==typeof e.customClass&&z(t,e.customClass),e.icon&&z(t,p["icon-".concat(e.icon)])})(r,e)})(0,e),((t,e)=>{const n=m();n&&(function(t,e){"string"==typeof e?t.style.background=e:e||z([document.documentElement,document.body],p["no-backdrop"])}(n,e.backdrop),!e.backdrop&&e.allowOutsideClick&&i('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`'),function(t,e){e in p?z(t,p[e]):(i('The "position" parameter is not valid, defaulting to "center"'),z(t,p.center))}(n,e.position),function(t,e){if(e&&"string"==typeof e){const n="grow-".concat(e);n in p&&z(t,p[n])}}(n,e.grow),V(n,e,"container"))})(0,e),((t,e)=>{const n=E();if(!e.progressSteps||0===e.progressSteps.length)return Q(n);K(n),n.textContent="",e.currentProgressStep>=e.progressSteps.length&&i("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),e.progressSteps.forEach((t,r)=>{const i=(t=>{const e=document.createElement("li");return z(e,p["progress-step"]),M(e,t),e})(t);if(n.appendChild(i),r===e.currentProgressStep&&z(i,p["active-progress-step"]),r!==e.progressSteps.length-1){const t=(t=>{const e=document.createElement("li");return z(e,p["progress-step-line"]),t.progressStepsDistance&&(e.style.width=t.progressStepsDistance),e})(e);n.appendChild(t)}})})(0,e),((t,e)=>{const n=lt.innerParams.get(t),r=w();n&&e.icon===n.icon?(_t(r,e),yt(r,e)):e.icon||e.iconHtml?e.icon&&-1===Object.keys(g).indexOf(e.icon)?(o('Unknown icon! Expected "success", "error", "warning", "info" or "question", got "'.concat(e.icon,'"')),Q(r)):(K(r),_t(r,e),yt(r,e),z(r,e.showClass.icon)):Q(r)})(t,e),((t,e)=>{const n=T();if(!e.imageUrl)return Q(n);K(n,""),n.setAttribute("src",e.imageUrl),n.setAttribute("alt",e.imageAlt),W(n,"width",e.imageWidth),W(n,"height",e.imageHeight),n.className=p.image,V(n,e,"image")})(0,e),((t,e)=>{const n=b();$(n,e.title||e.titleText,"block"),e.title&&ot(e.title,n),e.titleText&&(n.innerText=e.titleText),V(n,e,"title")})(0,e),((t,e)=>{const n=N();M(n,e.closeButtonHtml),V(n,e,"closeButton"),$(n,e.showCloseButton),n.setAttribute("aria-label",e.closeButtonAriaLabel)})(0,e),mt(t,e),((t,e)=>{const n=R(),r=k(),i=x(),o=I(),s=A();e.showConfirmButton||e.showDenyButton||e.showCancelButton||Q(n),V(n,e,"actions"),ct(i,"confirm",e),ct(o,"deny",e),ct(s,"cancel",e),function(t,e,n,r){if(!r.buttonsStyling)return H([t,e,n],p.styled);z([t,e,n],p.styled),r.confirmButtonColor&&(t.style.backgroundColor=r.confirmButtonColor,z(t,p["default-outline"])),r.denyButtonColor&&(e.style.backgroundColor=r.denyButtonColor,z(e,p["default-outline"])),r.cancelButtonColor&&(n.style.backgroundColor=r.cancelButtonColor,z(n,p["default-outline"]))}(i,o,s,e),e.reverseButtons&&(n.insertBefore(s,r),n.insertBefore(o,r),n.insertBefore(i,r)),M(r,e.loaderHtml),V(r,e,"loader")})(0,e),((t,e)=>{const n=P();$(n,e.footer),e.footer&&ot(e.footer,n),V(n,e,"footer")})(0,e),a(e.didRender,_())},Tt=()=>x()&&x().click(),Et=t=>{let e=_();e||Ue.fire(),e=_();const n=k();F()?Q(w()):St(e,t),K(n),e.setAttribute("data-loading",!0),e.setAttribute("aria-busy",!0),e.focus()},St=(t,e)=>{const n=R(),r=k();!e&&J(x())&&(e=x()),K(n),e&&(Q(e),r.setAttribute("data-button-to-replace",e.className)),r.parentNode.insertBefore(r,e),z([t,n],p.loading)},xt={},It=()=>{if(xt.timeout)return(()=>{const t=O(),e=parseInt(window.getComputedStyle(t).width);t.style.removeProperty("transition"),t.style.width="100%";const n=parseInt(window.getComputedStyle(t).width),r=parseInt(e/n*100);t.style.removeProperty("transition"),t.style.width="".concat(r,"%")})(),xt.timeout.stop()},kt=()=>{if(xt.timeout){const t=xt.timeout.start();return et(t),t}};let At=!1;const Rt={},Pt=t=>{for(let e=t.target;e&&e!==document;e=e.parentNode)for(const t in Rt){const n=e.getAttribute(t);if(n)return void Rt[t].fire({template:n})}},Ot={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},Nt=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],Dt={},Lt=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],Ft=t=>Object.prototype.hasOwnProperty.call(Ot,t),Ut=t=>Dt[t],Mt=t=>{Ft(t)||i('Unknown parameter "'.concat(t,'"'))},qt=t=>{Lt.includes(t)&&i('The parameter "'.concat(t,'" is incompatible with toasts'))},Vt=t=>{var e,n,r;Ut(t)&&(e=t,n=Ut(t),r='"'.concat(e,'" is deprecated and will be removed in the next major release. Please use "').concat(n,'" instead.'),s.includes(r)||(s.push(r),i(r)))};var jt=Object.freeze({isValidParameter:Ft,isUpdatableParameter:t=>-1!==Nt.indexOf(t),isDeprecatedParameter:Ut,argsToParams:t=>{const e={};return"object"!=typeof t[0]||d(t[0])?["title","html","icon"].forEach((n,r)=>{const i=t[r];"string"==typeof i||d(i)?e[n]=i:void 0!==i&&o("Unexpected type of ".concat(n,'! Expected "string" or "Element", got ').concat(typeof i))}):Object.assign(e,t[0]),e},isVisible:()=>J(_()),clickConfirm:Tt,clickDeny:()=>I()&&I().click(),clickCancel:()=>A()&&A().click(),getContainer:m,getPopup:_,getTitle:b,getHtmlContainer:C,getImage:T,getIcon:w,getInputLabel:()=>v(p["input-label"]),getCloseButton:N,getActions:R,getConfirmButton:x,getDenyButton:I,getCancelButton:A,getLoader:k,getFooter:P,getTimerProgressBar:O,getFocusableElements:D,getValidationMessage:S,isLoading:()=>_().hasAttribute("data-loading"),fire:function(...t){return new this(...t)},mixin:function(t){return class extends(this){_main(e,n){return super._main(e,Object.assign({},t,n))}}},showLoading:Et,enableLoading:Et,getTimerLeft:()=>xt.timeout&&xt.timeout.getTimerLeft(),stopTimer:It,resumeTimer:kt,toggleTimer:()=>{const t=xt.timeout;return t&&(t.running?It():kt())},increaseTimer:t=>{if(xt.timeout){const e=xt.timeout.increase(t);return et(e,!0),e}},isTimerRunning:()=>xt.timeout&&xt.timeout.isRunning(),bindClickHandler:function(t="data-swal-template"){Rt[t]=this,At||(document.body.addEventListener("click",Pt),At=!0)}});function Bt(){const t=lt.innerParams.get(this);if(!t)return;const e=lt.domCache.get(this);Q(e.loader),F()?t.icon&&K(w()):Gt(e),H([e.popup,e.actions],p.loading),e.popup.removeAttribute("aria-busy"),e.popup.removeAttribute("data-loading"),e.confirmButton.disabled=!1,e.denyButton.disabled=!1,e.cancelButton.disabled=!1}const Gt=t=>{const e=t.popup.getElementsByClassName(t.loader.getAttribute("data-button-to-replace"));e.length?K(e[0],"inline-block"):!J(x())&&!J(I())&&!J(A())&&Q(t.actions)},zt=t=>{const e=t.target,n=m();return!(Ht(t)||Zt(t)||e!==n&&(X(n)||"INPUT"===e.tagName||X(C())&&C().contains(e)))},Ht=t=>t.touches&&t.touches.length&&"stylus"===t.touches[0].touchType,Zt=t=>t.touches&&t.touches.length>1;var Wt={swalPromiseResolve:new WeakMap};function Kt(t,e,n,i){F()?Xt(t,i):((t=>new Promise(e=>{if(!t)return e();const n=window.scrollX,r=window.scrollY;xt.restoreFocusTimeout=setTimeout(()=>{xt.previousActiveElement&&xt.previousActiveElement.focus?(xt.previousActiveElement.focus(),xt.previousActiveElement=null):document.body&&document.body.focus(),e()},100),window.scrollTo(n,r)}))(n).then(()=>Xt(t,i)),xt.keydownTarget.removeEventListener("keydown",xt.keydownHandler,{capture:xt.keydownListenerCapture}),xt.keydownHandlerAdded=!1),e.parentNode&&e.remove(),L()&&(null!==U.previousBodyPadding&&(document.body.style.paddingRight="".concat(U.previousBodyPadding,"px"),U.previousBodyPadding=null),(()=>{if(q(document.body,p.iosfix)){const t=parseInt(document.body.style.top,10);H(document.body,p.iosfix),document.body.style.top="",document.body.scrollTop=-1*t}})(),r(document.body.children).forEach(t=>{t.hasAttribute("data-previous-aria-hidden")?(t.setAttribute("aria-hidden",t.getAttribute("data-previous-aria-hidden")),t.removeAttribute("data-previous-aria-hidden")):t.removeAttribute("aria-hidden")})),H([document.documentElement,document.body],[p.shown,p["height-auto"],p["no-backdrop"],p["toast-shown"]])}function Qt(t){const e=_();if(!e)return;t=Yt(t);const n=lt.innerParams.get(this);if(!n||q(e,n.hideClass.popup))return;const r=Wt.swalPromiseResolve.get(this);H(e,n.showClass.popup),z(e,n.hideClass.popup);const i=m();H(i,n.showClass.backdrop),z(i,n.hideClass.backdrop),$t(this,e,n),r(t)}const Yt=t=>void 0===t?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},t),$t=(t,e,n)=>{const r=m(),i=ut&&tt(e);a(n.willClose,e),i?Jt(t,e,r,n.returnFocus,n.didClose):Kt(t,r,n.returnFocus,n.didClose)},Jt=(t,e,n,r,i)=>{xt.swalCloseEventFinishedCallback=Kt.bind(null,t,n,r,i),e.addEventListener(ut,function(t){t.target===e&&(xt.swalCloseEventFinishedCallback(),delete xt.swalCloseEventFinishedCallback)})},Xt=(t,e)=>{setTimeout(()=>{a(e),t._destroy()})};function te(t,e,n){const r=lt.domCache.get(t);e.forEach(t=>{r[t].disabled=n})}function ee(t,e){if(!t)return!1;if("radio"===t.type){const n=t.parentNode.parentNode.querySelectorAll("input");for(let t=0;t<n.length;t++)n[t].disabled=e}else t.disabled=e}class ne{constructor(t,e){this.callback=t,this.remaining=e,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date-this.started),this.remaining}increase(t){const e=this.running;return e&&this.stop(),this.remaining+=t,e&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}var re={email:(t,e)=>/^[a-zA-Z0-9.+_-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]{2,24}$/.test(t)?Promise.resolve():Promise.resolve(e||"Invalid email address"),url:(t,e)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(t)?Promise.resolve():Promise.resolve(e||"Invalid URL")};function ie(t){(function(t){t.inputValidator||Object.keys(re).forEach(e=>{t.input===e&&(t.inputValidator=re[e])})})(t),t.showLoaderOnConfirm&&!t.preConfirm&&i("showLoaderOnConfirm is set to true, but preConfirm is not defined.\nshowLoaderOnConfirm should be used together with preConfirm, see usage example:\nhttps://sweetalert2.github.io/#ajax-request"),function(t){(!t.target||"string"==typeof t.target&&!document.querySelector(t.target)||"string"!=typeof t.target&&!t.target.appendChild)&&(i('Target parameter is not valid, defaulting to "body"'),t.target="body")}(t),"string"==typeof t.title&&(t.title=t.title.split("\n").join("<br />")),(t=>{const e=(()=>{const t=m();return!!t&&(t.remove(),H([document.documentElement,document.body],[p["no-backdrop"],p["toast-shown"],p["has-column"]]),!0)})();if(nt())return void o("SweetAlert2 requires document to initialize");const n=document.createElement("div");n.className=p.container,e&&z(n,p["no-transition"]),M(n,rt);const r="string"==typeof(i=t.target)?document.querySelector(i):i;var i;r.appendChild(n),(t=>{const e=_();e.setAttribute("role",t.toast?"alert":"dialog"),e.setAttribute("aria-live",t.toast?"polite":"assertive"),t.toast||e.setAttribute("aria-modal","true")})(t),(t=>{"rtl"===window.getComputedStyle(t).direction&&z(m(),p.rtl)})(r),(()=>{const t=_(),e=Z(t,p.input),n=Z(t,p.file),r=t.querySelector(".".concat(p.range," input")),i=t.querySelector(".".concat(p.range," output")),o=Z(t,p.select),s=t.querySelector(".".concat(p.checkbox," input")),a=Z(t,p.textarea);e.oninput=it,n.onchange=it,o.onchange=it,s.onchange=it,a.oninput=it,r.oninput=()=>{it(),i.value=r.value},r.onchange=()=>{it(),r.nextSibling.value=r.value}})()})(t)}const oe=["swal-title","swal-html","swal-footer"],se=(t,e)=>{r(t.attributes).forEach(n=>{-1===e.indexOf(n.name)&&i(['Unrecognized attribute "'.concat(n.name,'" on <').concat(t.tagName.toLowerCase(),">."),"".concat(e.length?"Allowed attributes are: ".concat(e.join(", ")):"To set the value, use HTML within the element.")])})},ae=t=>{const e=_();if(t.target!==e)return;const n=m();e.removeEventListener(ut,ae),n.style.overflowY="auto"},ue=(t,e)=>{ut&&tt(e)?(t.style.overflowY="hidden",e.addEventListener(ut,ae)):t.style.overflowY="auto"},ce=(t,e,n)=>{(()=>{if((/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1)&&!q(document.body,p.iosfix)){const t=document.body.scrollTop;document.body.style.top="".concat(-1*t,"px"),z(document.body,p.iosfix),(()=>{const t=m();let e;t.ontouchstart=t=>{e=zt(t)},t.ontouchmove=t=>{e&&(t.preventDefault(),t.stopPropagation())}})(),(()=>{if(!navigator.userAgent.match(/(CriOS|FxiOS|EdgiOS|YaBrowser|UCBrowser)/i)){const t=44;_().scrollHeight>window.innerHeight-t&&(m().style.paddingBottom="".concat(t,"px"))}})()}})(),e&&"hidden"!==n&&(null===U.previousBodyPadding&&document.body.scrollHeight>window.innerHeight&&(U.previousBodyPadding=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight="".concat(U.previousBodyPadding+(()=>{const t=document.createElement("div");t.className=p["scrollbar-measure"],document.body.appendChild(t);const e=t.getBoundingClientRect().width-t.clientWidth;return document.body.removeChild(t),e})(),"px"))),setTimeout(()=>{t.scrollTop=0})},le=(t,e,n)=>{z(t,n.showClass.backdrop),e.style.setProperty("opacity","0","important"),K(e,"grid"),setTimeout(()=>{z(e,n.showClass.popup),e.style.removeProperty("opacity")},10),z([document.documentElement,document.body],p.shown),n.heightAuto&&n.backdrop&&!n.toast&&z([document.documentElement,document.body],p["height-auto"])},he={select:(t,e,n)=>{const r=Z(t,p.select),i=(t,e,r)=>{const i=document.createElement("option");i.value=r,M(i,e),i.selected=fe(r,n.inputValue),t.appendChild(i)};e.forEach(t=>{const e=t[0],n=t[1];if(Array.isArray(n)){const t=document.createElement("optgroup");t.label=e,t.disabled=!1,r.appendChild(t),n.forEach(e=>i(t,e[1],e[0]))}else i(r,n,e)}),r.focus()},radio:(t,e,n)=>{const r=Z(t,p.radio);e.forEach(t=>{const e=t[0],i=t[1],o=document.createElement("input"),s=document.createElement("label");o.type="radio",o.name=p.radio,o.value=e,fe(e,n.inputValue)&&(o.checked=!0);const a=document.createElement("span");M(a,i),a.className=p.label,s.appendChild(o),s.appendChild(a),r.appendChild(s)});const i=r.querySelectorAll("input");i.length&&i[0].focus()}},de=t=>{const e=[];return"undefined"!=typeof Map&&t instanceof Map?t.forEach((t,n)=>{let r=t;"object"==typeof r&&(r=de(r)),e.push([n,r])}):Object.keys(t).forEach(n=>{let r=t[n];"object"==typeof r&&(r=de(r)),e.push([n,r])}),e},fe=(t,e)=>e&&e.toString()===t.toString(),pe=(t,e,n)=>{const r=((t,e)=>{const n=t.getInput();if(!n)return null;switch(e.input){case"checkbox":return(t=>t.checked?1:0)(n);case"radio":return(t=>t.checked?t.value:null)(n);case"file":return(t=>t.files.length?null!==t.getAttribute("multiple")?t.files:t.files[0]:null)(n);default:return e.inputAutoTrim?n.value.trim():n.value}})(t,e);e.inputValidator?ge(t,e,r,n):t.getInput().checkValidity()?"deny"===n?me(t,e,r):ve(t,e,r):(t.enableButtons(),t.showValidationMessage(e.validationMessage))},ge=(t,e,n,r)=>{t.disableInput(),Promise.resolve().then(()=>l(e.inputValidator(n,e.validationMessage))).then(i=>{t.enableButtons(),t.enableInput(),i?t.showValidationMessage(i):"deny"===r?me(t,e,n):ve(t,e,n)})},me=(t,e,n)=>{e.showLoaderOnDeny&&Et(I()),e.preDeny?Promise.resolve().then(()=>l(e.preDeny(n,e.validationMessage))).then(e=>{!1===e?t.hideLoading():t.closePopup({isDenied:!0,value:void 0===e?n:e})}):t.closePopup({isDenied:!0,value:n})},ye=(t,e)=>{t.closePopup({isConfirmed:!0,value:e})},ve=(t,e,n)=>{e.showLoaderOnConfirm&&Et(),e.preConfirm?(t.resetValidationMessage(),Promise.resolve().then(()=>l(e.preConfirm(n,e.validationMessage))).then(e=>{J(S())||!1===e?t.hideLoading():ye(t,void 0===e?n:e)})):ye(t,n)},_e=(t,e,n)=>{const r=D();if(r.length)return(e+=n)===r.length?e=0:-1===e&&(e=r.length-1),r[e].focus();_().focus()},we=["ArrowRight","ArrowDown"],be=["ArrowLeft","ArrowUp"],Ce=(t,e,n)=>{if(!e.isComposing&&e.target&&t.getInput()&&e.target.outerHTML===t.getInput().outerHTML){if(["textarea","file"].includes(n.input))return;Tt(),e.preventDefault()}},Te=(t,e)=>{const n=t.target,r=D();let i=-1;for(let o=0;o<r.length;o++)if(n===r[o]){i=o;break}_e(0,i,t.shiftKey?-1:1),t.stopPropagation(),t.preventDefault()},Ee=t=>{if(![x(),I(),A()].includes(document.activeElement))return;const e=we.includes(t)?"nextElementSibling":"previousElementSibling",n=document.activeElement[e];n&&n.focus()},Se=(e,n,r)=>{u(n.allowEscapeKey)&&(e.preventDefault(),r(t.esc))};let xe=!1;const Ie=(t,e)=>{const o=(t=>{const e="string"==typeof t.template?document.querySelector(t.template):t.template;if(!e)return{};const o=e.content;return(t=>{const e=oe.concat(["swal-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);r(t.children).forEach(t=>{const n=t.tagName.toLowerCase();-1===e.indexOf(n)&&i("Unrecognized element <".concat(n,">"))})})(o),Object.assign((t=>{const e={};return r(t.querySelectorAll("swal-param")).forEach(t=>{se(t,["name","value"]);const n=t.getAttribute("name");let r=t.getAttribute("value");"boolean"==typeof Ot[n]&&"false"===r&&(r=!1),"object"==typeof Ot[n]&&(r=JSON.parse(r)),e[n]=r}),e})(o),(t=>{const e={};return r(t.querySelectorAll("swal-button")).forEach(t=>{se(t,["type","color","aria-label"]);const r=t.getAttribute("type");e["".concat(r,"ButtonText")]=t.innerHTML,e["show".concat(n(r),"Button")]=!0,t.hasAttribute("color")&&(e["".concat(r,"ButtonColor")]=t.getAttribute("color")),t.hasAttribute("aria-label")&&(e["".concat(r,"ButtonAriaLabel")]=t.getAttribute("aria-label"))}),e})(o),(t=>{const e={},n=t.querySelector("swal-image");return n&&(se(n,["src","width","height","alt"]),n.hasAttribute("src")&&(e.imageUrl=n.getAttribute("src")),n.hasAttribute("width")&&(e.imageWidth=n.getAttribute("width")),n.hasAttribute("height")&&(e.imageHeight=n.getAttribute("height")),n.hasAttribute("alt")&&(e.imageAlt=n.getAttribute("alt"))),e})(o),(t=>{const e={},n=t.querySelector("swal-icon");return n&&(se(n,["type","color"]),n.hasAttribute("type")&&(e.icon=n.getAttribute("type")),n.hasAttribute("color")&&(e.iconColor=n.getAttribute("color")),e.iconHtml=n.innerHTML),e})(o),(t=>{const e={},n=t.querySelector("swal-input");n&&(se(n,["type","label","placeholder","value"]),e.input=n.getAttribute("type")||"text",n.hasAttribute("label")&&(e.inputLabel=n.getAttribute("label")),n.hasAttribute("placeholder")&&(e.inputPlaceholder=n.getAttribute("placeholder")),n.hasAttribute("value")&&(e.inputValue=n.getAttribute("value")));const i=t.querySelectorAll("swal-input-option");return i.length&&(e.inputOptions={},r(i).forEach(t=>{se(t,["value"]);const n=t.getAttribute("value");e.inputOptions[n]=t.innerHTML})),e})(o),((t,e)=>{const n={};for(const r in e){const i=e[r],o=t.querySelector(i);o&&(se(o,[]),n[i.replace(/^swal-/,"")]=o.innerHTML.trim())}return n})(o,oe))})(t),s=Object.assign({},Ot,e,o,t);return s.showClass=Object.assign({},Ot.showClass,s.showClass),s.hideClass=Object.assign({},Ot.hideClass,s.hideClass),s},ke=(e,n,i)=>new Promise(s=>{const d=t=>{e.closePopup({isDismissed:!0,dismiss:t})};Wt.swalPromiseResolve.set(e,s),n.confirmButton.onclick=()=>((t,e)=>{t.disableButtons(),e.input?pe(t,e,"confirm"):ve(t,e,!0)})(e,i),n.denyButton.onclick=()=>((t,e)=>{t.disableButtons(),e.returnInputValueOnDeny?pe(t,e,"deny"):me(t,e,!1)})(e,i),n.cancelButton.onclick=()=>((e,n)=>{e.disableButtons(),n(t.cancel)})(e,d),n.closeButton.onclick=()=>d(t.close),((e,n,r)=>{lt.innerParams.get(e).toast?((e,n,r)=>{n.popup.onclick=()=>{const n=lt.innerParams.get(e);n.showConfirmButton||n.showDenyButton||n.showCancelButton||n.showCloseButton||n.timer||n.input||r(t.close)}})(e,n,r):((t=>{t.popup.onmousedown=()=>{t.container.onmouseup=function(e){t.container.onmouseup=void 0,e.target===t.container&&(xe=!0)}}})(n),(t=>{t.container.onmousedown=()=>{t.popup.onmouseup=function(e){t.popup.onmouseup=void 0,(e.target===t.popup||t.popup.contains(e.target))&&(xe=!0)}}})(n),((e,n,r)=>{n.container.onclick=i=>{const o=lt.innerParams.get(e);xe?xe=!1:i.target===n.container&&u(o.allowOutsideClick)&&r(t.backdrop)}})(e,n,r))})(e,n,d),((t,e,n,r)=>{e.keydownTarget&&e.keydownHandlerAdded&&(e.keydownTarget.removeEventListener("keydown",e.keydownHandler,{capture:e.keydownListenerCapture}),e.keydownHandlerAdded=!1),n.toast||(e.keydownHandler=e=>((t,e,n)=>{const r=lt.innerParams.get(t);r&&(r.stopKeydownPropagation&&e.stopPropagation(),"Enter"===e.key?Ce(t,e,r):"Tab"===e.key?Te(e,r):[...we,...be].includes(e.key)?Ee(e.key):"Escape"===e.key&&Se(e,r,n))})(t,e,r),e.keydownTarget=n.keydownListenerCapture?window:_(),e.keydownListenerCapture=n.keydownListenerCapture,e.keydownTarget.addEventListener("keydown",e.keydownHandler,{capture:e.keydownListenerCapture}),e.keydownHandlerAdded=!0)})(e,xt,i,d),((t,e)=>{"select"===e.input||"radio"===e.input?((t,e)=>{const n=_(),r=t=>he[e.input](n,de(t),e);c(e.inputOptions)||h(e.inputOptions)?(Et(x()),l(e.inputOptions).then(e=>{t.hideLoading(),r(e)})):"object"==typeof e.inputOptions?r(e.inputOptions):o("Unexpected type of inputOptions! Expected object, Map or Promise, got ".concat(typeof e.inputOptions))})(t,e):["text","email","number","tel","textarea"].includes(e.input)&&(c(e.inputValue)||h(e.inputValue))&&((t,e)=>{const n=t.getInput();Q(n),l(e.inputValue).then(r=>{n.value="number"===e.input?parseFloat(r)||0:"".concat(r),K(n),n.focus(),t.hideLoading()}).catch(e=>{o("Error in inputValue promise: ".concat(e)),n.value="",K(n),n.focus(),t.hideLoading()})})(t,e)})(e,i),(t=>{const e=m(),n=_();a(t.willOpen,n);const i=window.getComputedStyle(document.body).overflowY;le(e,n,t),setTimeout(()=>{ue(e,n)},10),L()&&(ce(e,t.scrollbarPadding,i),r(document.body.children).forEach(t=>{t===m()||t.contains(m())||(t.hasAttribute("aria-hidden")&&t.setAttribute("data-previous-aria-hidden",t.getAttribute("aria-hidden")),t.setAttribute("aria-hidden","true"))})),F()||xt.previousActiveElement||(xt.previousActiveElement=document.activeElement),setTimeout(()=>a(t.didOpen,n)),H(e,p["no-transition"])})(i),Ae(xt,i,d),Re(n,i),setTimeout(()=>{n.container.scrollTop=0})}),Ae=(t,e,n)=>{const r=O();Q(r),e.timer&&(t.timeout=new ne(()=>{n("timer"),delete t.timeout},e.timer),e.timerProgressBar&&(K(r),setTimeout(()=>{t.timeout&&t.timeout.running&&et(e.timer)})))},Re=(t,e)=>{if(!e.toast)return u(e.allowEnterKey)?void(Pe(t,e)||_e(0,-1,1)):Oe()},Pe=(t,e)=>e.focusDeny&&J(t.denyButton)?(t.denyButton.focus(),!0):e.focusCancel&&J(t.cancelButton)?(t.cancelButton.focus(),!0):!(!e.focusConfirm||!J(t.confirmButton)||(t.confirmButton.focus(),0)),Oe=()=>{document.activeElement&&"function"==typeof document.activeElement.blur&&document.activeElement.blur()},Ne=t=>{for(const e in t)t[e]=new WeakMap};var De=Object.freeze({hideLoading:Bt,disableLoading:Bt,getInput:function(t){const e=lt.innerParams.get(t||this),n=lt.domCache.get(t||this);return n?j(n.popup,e.input):null},close:Qt,closePopup:Qt,closeModal:Qt,closeToast:Qt,enableButtons:function(){te(this,["confirmButton","denyButton","cancelButton"],!1)},disableButtons:function(){te(this,["confirmButton","denyButton","cancelButton"],!0)},enableInput:function(){return ee(this.getInput(),!1)},disableInput:function(){return ee(this.getInput(),!0)},showValidationMessage:function(t){const e=lt.domCache.get(this),n=lt.innerParams.get(this);M(e.validationMessage,t),e.validationMessage.className=p["validation-message"],n.customClass&&n.customClass.validationMessage&&z(e.validationMessage,n.customClass.validationMessage),K(e.validationMessage);const r=this.getInput();r&&(r.setAttribute("aria-invalid",!0),r.setAttribute("aria-describedBy",p["validation-message"]),B(r),z(r,p.inputerror))},resetValidationMessage:function(){const t=lt.domCache.get(this);t.validationMessage&&Q(t.validationMessage);const e=this.getInput();e&&(e.removeAttribute("aria-invalid"),e.removeAttribute("aria-describedBy"),H(e,p.inputerror))},getProgressSteps:function(){return lt.domCache.get(this).progressSteps},_main:function(t,e={}){(t=>{for(const e in t)Mt(e),t.toast&&qt(e),Vt(e)})(Object.assign({},e,t)),xt.currentInstance&&xt.currentInstance._destroy(),xt.currentInstance=this;const n=Ie(t,e);ie(n),Object.freeze(n),xt.timeout&&(xt.timeout.stop(),delete xt.timeout),clearTimeout(xt.restoreFocusTimeout);const r=(t=>{const e={popup:_(),container:m(),actions:R(),confirmButton:x(),denyButton:I(),cancelButton:A(),loader:k(),closeButton:N(),validationMessage:S(),progressSteps:E()};return lt.domCache.set(t,e),e})(this);return Ct(this,n),lt.innerParams.set(this,n),ke(this,r,n)},update:function(t){const e=_(),n=lt.innerParams.get(this);if(!e||q(e,n.hideClass.popup))return i("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");const r={};Object.keys(t).forEach(e=>{Ue.isUpdatableParameter(e)?r[e]=t[e]:i('Invalid parameter to update: "'.concat(e,'". Updatable params are listed here: https://github.com/sweetalert2/sweetalert2/blob/master/src/utils/params.js\n\nIf you think this parameter should be updatable, request it here: https://github.com/sweetalert2/sweetalert2/issues/new?template=02_feature_request.md'))});const o=Object.assign({},n,r);Ct(this,o),lt.innerParams.set(this,o),Object.defineProperties(this,{params:{value:Object.assign({},this.params,t),writable:!1,enumerable:!0}})},_destroy:function(){const t=lt.domCache.get(this),e=lt.innerParams.get(this);e&&(t.popup&&xt.swalCloseEventFinishedCallback&&(xt.swalCloseEventFinishedCallback(),delete xt.swalCloseEventFinishedCallback),xt.deferDisposalTimer&&(clearTimeout(xt.deferDisposalTimer),delete xt.deferDisposalTimer),a(e.didDestroy),delete this.params,delete xt.keydownHandler,delete xt.keydownTarget,Ne(lt),Ne(Wt))}});let Le;class Fe{constructor(...t){if("undefined"==typeof window)return;Le=this;const e=Object.freeze(this.constructor.argsToParams(t));Object.defineProperties(this,{params:{value:e,writable:!1,enumerable:!0,configurable:!0}});const n=this._main(this.params);lt.promise.set(this,n)}then(t){return lt.promise.get(this).then(t)}finally(t){return lt.promise.get(this).finally(t)}}Object.assign(Fe.prototype,De),Object.assign(Fe,jt),Object.keys(De).forEach(t=>{Fe[t]=function(...e){if(Le)return Le[t](...e)}}),Fe.DismissReason=t,Fe.version="11.0.8";const Ue=Fe;return Ue.default=Ue,Ue}(),void 0!==this&&this.Sweetalert2&&(this.swal=this.sweetAlert=this.Swal=this.SweetAlert=this.Sweetalert2),"undefined"!=typeof document&&function(t,e){var n=t.createElement("style");if(t.getElementsByTagName("head")[0].appendChild(n),n.styleSheet)n.styleSheet.disabled||(n.styleSheet.cssText=e);else try{n.innerHTML=e}catch(t){n.innerText=e}}(document,'.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4!important;grid-row:1/4!important;grid-template-columns:1fr 99fr 1fr;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 .625em #d9d9d9}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:700}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.3125em;padding:0}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-styled:focus{box-shadow:0 0 0 1px #fff,0 0 0 3px rgba(100,150,200,.5)}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;transform:rotate(45deg);border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-.8em;left:-.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{-webkit-animation:swal2-toast-animate-success-line-tip .75s;animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{-webkit-animation:swal2-toast-animate-success-line-long .75s;animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{-webkit-animation:swal2-toast-show .5s;animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{-webkit-animation:swal2-toast-hide .1s forwards;animation:swal2-toast-hide .1s forwards}.swal2-container{display:grid;position:fixed;z-index:1060;top:0;right:0;bottom:0;left:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end" "gap gap gap";grid-template-rows:auto auto auto .625em;height:100%;padding:.625em .625em 0;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}.swal2-container::after{content:"";grid-column:1/4;grid-row:4;height:.625em}.swal2-container.swal2-backdrop-show,.swal2-container.swal2-noanimation{background:rgba(0,0,0,.4)}.swal2-container.swal2-backdrop-hide{background:0 0!important}.swal2-container.swal2-bottom-start,.swal2-container.swal2-center-start,.swal2-container.swal2-top-start{grid-template-columns:minmax(0,1fr) auto auto}.swal2-container.swal2-bottom,.swal2-container.swal2-center,.swal2-container.swal2-top{grid-template-columns:auto minmax(0,1fr) auto}.swal2-container.swal2-bottom-end,.swal2-container.swal2-center-end,.swal2-container.swal2-top-end{grid-template-columns:auto auto minmax(0,1fr)}.swal2-container.swal2-top-start>.swal2-popup{align-self:start}.swal2-container.swal2-top>.swal2-popup{grid-column:2;align-self:start;justify-self:center}.swal2-container.swal2-top-end>.swal2-popup,.swal2-container.swal2-top-right>.swal2-popup{grid-column:3;align-self:start;justify-self:end}.swal2-container.swal2-center-left>.swal2-popup,.swal2-container.swal2-center-start>.swal2-popup{grid-row:2;align-self:center}.swal2-container.swal2-center>.swal2-popup{grid-column:2;grid-row:2;align-self:center;justify-self:center}.swal2-container.swal2-center-end>.swal2-popup,.swal2-container.swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;align-self:center;justify-self:end}.swal2-container.swal2-bottom-left>.swal2-popup,.swal2-container.swal2-bottom-start>.swal2-popup{grid-column:1;grid-row:3;align-self:end}.swal2-container.swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;justify-self:center;align-self:end}.swal2-container.swal2-bottom-end>.swal2-popup,.swal2-container.swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;align-self:end;justify-self:end}.swal2-container.swal2-grow-fullscreen>.swal2-popup,.swal2-container.swal2-grow-row>.swal2-popup{grid-column:1/4;width:100%}.swal2-container.swal2-grow-column>.swal2-popup,.swal2-container.swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}.swal2-container.swal2-no-transition{transition:none!important}.swal2-popup{display:none;position:relative;box-sizing:border-box;width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;font-family:inherit;font-size:1rem}.swal2-popup:focus{outline:0}.swal2-popup.swal2-loading{overflow-y:hidden}.swal2-title{position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:#595959;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}.swal2-actions{display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:100%;margin:1.25em auto 0;padding:0}.swal2-actions:not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}.swal2-actions:not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0,0,0,.1),rgba(0,0,0,.1))}.swal2-actions:not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0,0,0,.2),rgba(0,0,0,.2))}.swal2-loader{display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;-webkit-animation:swal2-rotate-loading 1.5s linear 0s infinite normal;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 transparent #2778c4 transparent}.swal2-styled{margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px transparent;font-weight:500}.swal2-styled:not([disabled]){cursor:pointer}.swal2-styled.swal2-confirm{border:0;border-radius:.25em;background:initial;background-color:#7367f0;color:#fff;font-size:1em}.swal2-styled.swal2-confirm:focus{box-shadow:0 0 0 3px rgba(115,103,240,.5)}.swal2-styled.swal2-deny{border:0;border-radius:.25em;background:initial;background-color:#ea5455;color:#fff;font-size:1em}.swal2-styled.swal2-deny:focus{box-shadow:0 0 0 3px rgba(234,84,85,.5)}.swal2-styled.swal2-cancel{border:0;border-radius:.25em;background:initial;background-color:#6e7d88;color:#fff;font-size:1em}.swal2-styled.swal2-cancel:focus{box-shadow:0 0 0 3px rgba(110,125,136,.5)}.swal2-styled.swal2-default-outline:focus{box-shadow:0 0 0 3px rgba(100,150,200,.5)}.swal2-styled:focus{outline:0}.swal2-styled::-moz-focus-inner{border:0}.swal2-footer{justify-content:center;margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:#545454;font-size:1em}.swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto!important;height:.25em;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}.swal2-timer-progress-bar{width:100%;height:.25em;background:rgba(0,0,0,.2)}.swal2-image{max-width:100%;margin:2em auto 1em}.swal2-close{z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:0 0;color:#ccc;font-family:serif;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}.swal2-close:hover{transform:none;background:0 0;color:#f27474}.swal2-close:focus{outline:0;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}.swal2-close::-moz-focus-inner{border:0}.swal2-html-container{z-index:1;justify-content:center;margin:0;padding:1em 1.6em .3em;color:#545454;font-size:1.125em;font-weight:400;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word}.swal2-checkbox,.swal2-file,.swal2-input,.swal2-radio,.swal2-select,.swal2-textarea{margin:1em 2em 0}.swal2-file,.swal2-input,.swal2-textarea{box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid #d9d9d9;border-radius:.1875em;background:inherit;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px transparent;color:inherit;font-size:1.125em}.swal2-file.swal2-inputerror,.swal2-input.swal2-inputerror,.swal2-textarea.swal2-inputerror{border-color:#f27474!important;box-shadow:0 0 2px #f27474!important}.swal2-file:focus,.swal2-input:focus,.swal2-textarea:focus{border:1px solid #b4dbed;outline:0;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}.swal2-file::-moz-placeholder,.swal2-input::-moz-placeholder,.swal2-textarea::-moz-placeholder{color:#ccc}.swal2-file:-ms-input-placeholder,.swal2-input:-ms-input-placeholder,.swal2-textarea:-ms-input-placeholder{color:#ccc}.swal2-file::placeholder,.swal2-input::placeholder,.swal2-textarea::placeholder{color:#ccc}.swal2-range{margin:1em 2em 0;background:#fff}.swal2-range input{width:80%}.swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}.swal2-range input,.swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}.swal2-input{height:2.625em;padding:0 .75em}.swal2-input[type=number]{max-width:10em}.swal2-file{width:75%;margin-right:auto;margin-left:auto;background:inherit;font-size:1.125em}.swal2-textarea{height:6.75em;padding:.75em}.swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:inherit;color:inherit;font-size:1.125em}.swal2-checkbox,.swal2-radio{align-items:center;justify-content:center;background:#fff;color:inherit}.swal2-checkbox label,.swal2-radio label{margin:0 .6em;font-size:1.125em}.swal2-checkbox input,.swal2-radio input{flex-shrink:0;margin:0 .4em}.swal2-input-label{display:flex;justify-content:center;margin:1em auto 0}.swal2-validation-message{align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:#f0f0f0;color:#666;font-size:1em;font-weight:300}.swal2-validation-message::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}.swal2-icon{position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:.25em solid transparent;border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}.swal2-icon.swal2-error{border-color:#f27474;color:#f27474}.swal2-icon.swal2-error .swal2-x-mark{position:relative;flex-grow:1}.swal2-icon.swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}.swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}.swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}.swal2-icon.swal2-error.swal2-icon-show{-webkit-animation:swal2-animate-error-icon .5s;animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-error.swal2-icon-show .swal2-x-mark{-webkit-animation:swal2-animate-error-x-mark .5s;animation:swal2-animate-error-x-mark .5s}.swal2-icon.swal2-warning{border-color:#facea8;color:#f8bb86}.swal2-icon.swal2-info{border-color:#9de0f6;color:#3fc3ee}.swal2-icon.swal2-question{border-color:#c9dae1;color:#87adbd}.swal2-icon.swal2-success{border-color:#a5dc86;color:#a5dc86}.swal2-icon.swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;transform:rotate(45deg);border-radius:50%}.swal2-icon.swal2-success [class^=swal2-success-circular-line][class$=left]{top:-.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}.swal2-icon.swal2-success [class^=swal2-success-circular-line][class$=right]{top:-.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}.swal2-icon.swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-.25em;left:-.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}.swal2-icon.swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}.swal2-icon.swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}.swal2-icon.swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}.swal2-icon.swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-line-tip{-webkit-animation:swal2-animate-success-line-tip .75s;animation:swal2-animate-success-line-tip .75s}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-line-long{-webkit-animation:swal2-animate-success-line-long .75s;animation:swal2-animate-success-line-long .75s}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-circular-line-right{-webkit-animation:swal2-rotate-success-circular-line 4.25s ease-in;animation:swal2-rotate-success-circular-line 4.25s ease-in}.swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:inherit;font-weight:600}.swal2-progress-steps li{display:inline-block;position:relative}.swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}.swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}[class^=swal2]{-webkit-tap-highlight-color:transparent}.swal2-show{-webkit-animation:swal2-show .3s;animation:swal2-show .3s}.swal2-hide{-webkit-animation:swal2-hide .15s forwards;animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@-webkit-keyframes swal2-toast-show{0%{transform:translateY(-.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0)}}@keyframes swal2-toast-show{0%{transform:translateY(-.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0)}}@-webkit-keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@-webkit-keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@-webkit-keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@-webkit-keyframes swal2-show{0%{transform:scale(.7)}45%{transform:scale(1.05)}80%{transform:scale(.95)}100%{transform:scale(1)}}@keyframes swal2-show{0%{transform:scale(.7)}45%{transform:scale(1.05)}80%{transform:scale(.95)}100%{transform:scale(1)}}@-webkit-keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(.5);opacity:0}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(.5);opacity:0}}@-webkit-keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@-webkit-keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@-webkit-keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@-webkit-keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(.4);opacity:0}50%{margin-top:1.625em;transform:scale(.4);opacity:0}80%{margin-top:-.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(.4);opacity:0}50%{margin-top:1.625em;transform:scale(.4);opacity:0}80%{margin-top:-.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@-webkit-keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0);opacity:1}}@-webkit-keyframes swal2-rotate-loading{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}@keyframes swal2-rotate-loading{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto!important}body.swal2-no-backdrop .swal2-container{top:auto;right:auto;bottom:auto;left:auto;max-width:calc(100% - .625em * 2);background-color:transparent!important}body.swal2-no-backdrop .swal2-container>.swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}body.swal2-no-backdrop .swal2-container.swal2-top{top:0;left:50%;transform:translateX(-50%)}body.swal2-no-backdrop .swal2-container.swal2-top-left,body.swal2-no-backdrop .swal2-container.swal2-top-start{top:0;left:0}body.swal2-no-backdrop .swal2-container.swal2-top-end,body.swal2-no-backdrop .swal2-container.swal2-top-right{top:0;right:0}body.swal2-no-backdrop .swal2-container.swal2-center{top:50%;left:50%;transform:translate(-50%,-50%)}body.swal2-no-backdrop .swal2-container.swal2-center-left,body.swal2-no-backdrop .swal2-container.swal2-center-start{top:50%;left:0;transform:translateY(-50%)}body.swal2-no-backdrop .swal2-container.swal2-center-end,body.swal2-no-backdrop .swal2-container.swal2-center-right{top:50%;right:0;transform:translateY(-50%)}body.swal2-no-backdrop .swal2-container.swal2-bottom{bottom:0;left:50%;transform:translateX(-50%)}body.swal2-no-backdrop .swal2-container.swal2-bottom-left,body.swal2-no-backdrop .swal2-container.swal2-bottom-start{bottom:0;left:0}body.swal2-no-backdrop .swal2-container.swal2-bottom-end,body.swal2-no-backdrop .swal2-container.swal2-bottom-right{right:0;bottom:0}@media print{body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow-y:scroll!important}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown) .swal2-container{position:static!important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:transparent}body.swal2-toast-shown .swal2-container.swal2-top{top:0;right:auto;bottom:auto;left:50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{top:0;right:0;bottom:auto;left:auto}body.swal2-toast-shown .swal2-container.swal2-top-left,body.swal2-toast-shown .swal2-container.swal2-top-start{top:0;right:auto;bottom:auto;left:0}body.swal2-toast-shown .swal2-container.swal2-center-left,body.swal2-toast-shown .swal2-container.swal2-center-start{top:50%;right:auto;bottom:auto;left:0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{top:50%;right:auto;bottom:auto;left:50%;transform:translate(-50%,-50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{top:50%;right:0;bottom:auto;left:auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-left,body.swal2-toast-shown .swal2-container.swal2-bottom-start{top:auto;right:auto;bottom:0;left:0}body.swal2-toast-shown .swal2-container.swal2-bottom{top:auto;right:auto;bottom:0;left:50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{top:auto;right:0;bottom:0;left:auto}')},9603:(t,e,n)=>{"use strict";var r=n(5366);let i=null;function o(){return i}const s=new r.OlP("DocumentToken");let a=(()=>{class t{historyGo(t){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=(0,r.Yz7)({factory:u,token:t,providedIn:"platform"}),t})();function u(){return(0,r.LFG)(l)}const c=new r.OlP("Location Initialized");let l=(()=>{class t extends a{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return o().getBaseHref(this._doc)}onPopState(t){const e=o().getGlobalEventTarget(this._doc,"window");return e.addEventListener("popstate",t,!1),()=>e.removeEventListener("popstate",t)}onHashChange(t){const e=o().getGlobalEventTarget(this._doc,"window");return e.addEventListener("hashchange",t,!1),()=>e.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){h()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){h()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(s))},t.\u0275prov=(0,r.Yz7)({factory:d,token:t,providedIn:"platform"}),t})();function h(){return!!window.history.pushState}function d(){return new l((0,r.LFG)(s))}function f(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function p(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function g(t){return t&&"?"!==t[0]?"?"+t:t}let m=(()=>{class t{historyGo(t){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=(0,r.Yz7)({factory:y,token:t,providedIn:"root"}),t})();function y(t){const e=(0,r.LFG)(s).location;return new _((0,r.LFG)(a),e&&e.origin||"")}const v=new r.OlP("appBaseHref");let _=(()=>{class t extends m{constructor(t,e){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return f(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+g(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformLocation).historyGo)||void 0===n||n.call(e,t)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(a),r.LFG(v,8))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),w=(()=>{class t extends m{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=e&&(this._baseHref=e)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=f(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformLocation).historyGo)||void 0===n||n.call(e,t)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(a),r.LFG(v,8))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),b=(()=>{class t{constructor(t,e){this._subject=new r.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=p(T(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+g(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,T(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformStrategy).historyGo)||void 0===n||n.call(e,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(m),r.LFG(a))},t.normalizeQueryParams=g,t.joinWithSlash=f,t.stripTrailingSlash=p,t.\u0275prov=(0,r.Yz7)({factory:C,token:t,providedIn:"root"}),t})();function C(){return new b((0,r.LFG)(m),(0,r.LFG)(a))}function T(t){return t.replace(/\/index.html$/,"")}var E=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({});const S=r.kL8;class x{}let I=(()=>{class t extends x{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(S(e||this.locale)(t)){case E.Zero:return"zero";case E.One:return"one";case E.Two:return"two";case E.Few:return"few";case E.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.soG))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class k{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let A=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;if(!this._differ&&e)try{this._differ=this._differs.find(e).create(this.ngForTrackBy)}catch(zv){throw new Error(`Cannot find a differ supporting object '${e}' of type '${t=e,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new k(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new R(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const o=new R(t,i);e.push(o)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.s_b),r.Y36(r.Rgc),r.Y36(r.ZZ4))},t.\u0275dir=r.lG2({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class R{constructor(t,e){this.record=t,this.view=e}}let P=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new O,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){N("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){N("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.s_b),r.Y36(r.Rgc))},t.\u0275dir=r.lG2({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class O{constructor(){this.$implicit=null,this.ngIf=null}}function N(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${(0,r.AaK)(e)}'.`)}let D=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[{provide:x,useClass:I}]}),t})();function L(t){return"server"===t}let F=(()=>{class t{}return t.\u0275prov=(0,r.Yz7)({token:t,providedIn:"root",factory:()=>new U((0,r.LFG)(s),window)}),t})();class U{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&(t.body.createShadowRoot||t.body.attachShadow)){const n=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let r=n.currentNode;for(;r;){const t=r.shadowRoot;if(t){const n=t.getElementById(e)||t.querySelector(`[name="${e}"]`);if(n)return n}r=n.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),this.attemptFocus(e))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=M(this.window.history)||M(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(zv){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(zv){return!1}}}function M(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class q extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var t;t=new q,i||(i=t)}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=(j=j||document.querySelector("base"),j?j.getAttribute("href"):null);return null==e?null:function(t){V=V||document.createElement("a"),V.setAttribute("href",t);const e=V.pathname;return"/"===e.charAt(0)?e:`/${e}`}(e)}resetBaseElement(){j=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return function(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}(document.cookie,t)}}let V,j=null;const B=new r.OlP("TRANSITION_ID"),G=[{provide:r.ip1,useFactory:function(t,e,n){return()=>{n.get(r.CZH).donePromise.then(()=>{const n=o();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[B,s,r.zs3],multi:!0}];class z{static init(){(0,r.VLi)(new z)}addToWindow(t){r.dqk.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.dqk.getAllAngularTestabilities=()=>t.getAllTestabilities(),r.dqk.getAllAngularRootElements=()=>t.getAllRootElements(),r.dqk.frameworkStabilizers||(r.dqk.frameworkStabilizers=[]),r.dqk.frameworkStabilizers.push(t=>{const e=r.dqk.getAllAngularTestabilities();let n=e.length,i=!1;const o=function(e){i=i||e,n--,0==n&&t(i)};e.forEach(function(t){t.whenStable(o)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?o().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}let H=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const Z=new r.OlP("EventManagerPlugins");let W=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Z),r.LFG(r.R0b))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class K{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=o().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let Q=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),Y=(()=>{class t extends Q{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,e,n){t.forEach(t=>{const r=this._doc.createElement("style");r.textContent=t,n.push(e.appendChild(r))})}addHost(t){const e=[];this._addStylesToHost(this._stylesSet,t,e),this._hostNodes.set(t,e)}removeHost(t){const e=this._hostNodes.get(t);e&&e.forEach($),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((e,n)=>{this._addStylesToHost(t,n,e)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach($))}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(s))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();function $(t){o().remove(t)}const J={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},X=/%COMP%/g;function tt(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?tt(t,i,n):(i=i.replace(X,t),n.push(i))}return n}function et(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let nt=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new rt(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case r.ifc.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new it(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case 1:case r.ifc.ShadowDom:return new ot(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=tt(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(W),r.LFG(Y),r.LFG(r.AFp))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class rt{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(J[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=J[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=J[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&(r.JOm.DashCase|r.JOm.Important)?t.style.setProperty(e,n,i&r.JOm.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&r.JOm.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,et(n)):this.eventManager.addEventListener(t,e,et(n))}}class it extends rt{constructor(t,e,n,r){super(t),this.component=n;const i=tt(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(X,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(X,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class ot extends rt{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=tt(r.id,r.styles,[]);for(let o=0;o<i.length;o++){const t=document.createElement("style");t.textContent=i[o],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let st=(()=>{class t extends K{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(s))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const at=["alt","control","meta","shift"],ut={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ct={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},lt={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let ht=(()=>{class t extends K{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),s=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>o().onAndCancel(e,i.domEventName,s))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let o="";if(at.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&ct.hasOwnProperty(e)&&(e=ct[e]))}return ut[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),at.forEach(r=>{r!=n&&(0,lt[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(s))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const dt=(0,r.eFA)(r._c5,"browser",[{provide:r.Lbi,useValue:"browser"},{provide:r.g9A,useValue:function(){q.makeCurrent(),z.init()},multi:!0},{provide:s,useFactory:function(){return(0,r.RDi)(document),document},deps:[]}]),ft=[[],{provide:r.zSh,useValue:"root"},{provide:r.qLn,useFactory:function(){return new r.qLn},deps:[]},{provide:Z,useClass:st,multi:!0,deps:[s,r.R0b,r.Lbi]},{provide:Z,useClass:ht,multi:!0,deps:[s]},[],{provide:nt,useClass:nt,deps:[W,Y,r.AFp]},{provide:r.FYo,useExisting:nt},{provide:Q,useExisting:Y},{provide:Y,useClass:Y,deps:[s]},{provide:r.dDg,useClass:r.dDg,deps:[r.R0b]},{provide:W,useClass:W,deps:[Z,r.R0b]},{provide:class{},useClass:H,deps:[]},[]];let pt=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:r.AFp,useValue:e.appId},{provide:B,useExisting:r.AFp},G]}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(t,12))},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:ft,imports:[D,r.hGG]}),t})();"undefined"!=typeof window&&window;var gt=n(9764),mt=n(878),yt=n(5959),vt=n(3895);class _t extends yt.xQ{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new vt.N;return this._value}next(t){super.next(this._value=t)}}var wt=n(6163),bt=n(8470),Ct=n(6673);class Tt extends Ct.L{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class Et extends Ct.L{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var St=n(6015),xt=n(8318);function It(t,e,n,r,i=new Et(t,n,r)){if(!i.closed)return e instanceof xt.y?e.subscribe(i):(0,St.s)(e)(i)}var kt=n(9342);const At={};class Rt{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new Pt(t,this.resultSelector))}}class Pt extends Tt{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(At),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++)this.add(It(this,t[n],void 0,n))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n){const r=this.values,i=this.toRespond?r[n]===At?--this.toRespond:this.toRespond:0;r[n]=e,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}const Ot=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})();var Nt=n(7471);function Dt(...t){return(0,Nt.J)(1)((0,mt.of)(...t))}var Lt=n(653);function Ft(t){return new xt.y(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?(0,gt.D)(n):(0,Lt.c)()).subscribe(e)})}var Ut=n(2875),Mt=n(9996),qt=n(6882);function Vt(t,e){return"function"==typeof e?n=>n.pipe(Vt((n,r)=>(0,gt.D)(t(n,r)).pipe((0,Mt.U)((t,i)=>e(n,t,r,i))))):e=>e.lift(new jt(t))}class jt{constructor(t){this.project=t}call(t,e){return e.subscribe(new Bt(t,this.project))}}class Bt extends qt.Ds{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new qt.IY(this),r=this.destination;r.add(n),this.innerSubscription=(0,qt.ft)(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}const Gt=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();function zt(t){return e=>0===t?(0,Lt.c)():e.lift(new Ht(t))}class Ht{constructor(t){if(this.total=t,this.total<0)throw new Gt}call(t,e){return e.subscribe(new Zt(t,this.total))}}class Zt extends Ct.L{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function Wt(...t){const e=t[t.length-1];return(0,wt.K)(e)?(t.pop(),n=>Dt(t,n,e)):e=>Dt(t,e)}function Kt(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new Qt(t,e,n))}}class Qt{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new Yt(t,this.accumulator,this.seed,this.hasSeed))}}class Yt extends Ct.L{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function $t(t,e){return function(n){return n.lift(new Jt(t,e))}}class Jt{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new Xt(t,this.predicate,this.thisArg))}}class Xt extends Ct.L{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}function te(t){return function(e){const n=new ee(t),r=e.lift(n);return n.caught=r}}class ee{constructor(t){this.selector=t}call(t,e){return e.subscribe(new ne(t,this.selector,this.caught))}}class ne extends qt.Ds{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new qt.IY(this);this.add(r);const i=(0,qt.ft)(n,r);i!==r&&this.add(i)}}}var re=n(3982);function ie(t,e){return(0,re.zg)(t,e,1)}function oe(t){return function(e){return 0===t?(0,Lt.c)():e.lift(new se(t))}}class se{constructor(t){if(this.total=t,this.total<0)throw new Gt}call(t,e){return e.subscribe(new ae(t,this.total))}}class ae extends Ct.L{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}function ue(t=he){return e=>e.lift(new ce(t))}class ce{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new le(t,this.errorFactory))}}class le extends Ct.L{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(rw){t=rw}this.destination.error(t)}}}function he(){return new Ot}function de(t=null){return e=>e.lift(new fe(t))}class fe{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new pe(t,this.defaultValue))}}class pe extends Ct.L{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var ge=n(3392);function me(t,e){const n=arguments.length>=2;return r=>r.pipe(t?$t((e,n)=>t(e,n,r)):ge.y,zt(1),n?de(e):ue(()=>new Ot))}var ye=n(6599),ve=n(1564),_e=n(7570);class we{constructor(t){this.callback=t}call(t,e){return e.subscribe(new be(t,this.callback))}}class be extends Ct.L{constructor(t,e){super(t),this.add(new _e.w(e))}}class Ce{constructor(t,e){this.id=t,this.url=e}}class Te extends Ce{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ee extends Ce{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Se extends Ce{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class xe extends Ce{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ie extends Ce{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ke extends Ce{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ae extends Ce{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Re extends Ce{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Pe extends Ce{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Oe{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Ne{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class De{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Le{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Fe{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ue{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Me{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const qe="primary";class Ve{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function je(t){return new Ve(t)}function Be(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function Ge(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const e=r[o],n=t[o];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function ze(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!He(t[i],e[i]))return!1;return!0}function He(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((t,e)=>r[e]===t)}return t===e}function Ze(t){return Array.prototype.concat.apply([],t)}function We(t){return t.length>0?t[t.length-1]:null}function Ke(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function Qe(t){return(0,r.CqO)(t)?t:(0,r.QGY)(t)?(0,gt.D)(Promise.resolve(t)):(0,mt.of)(t)}const Ye={exact:function t(e,n,r){if(!sn(e.segments,n.segments))return!1;if(!en(e.segments,n.segments,r))return!1;if(e.numberOfChildren!==n.numberOfChildren)return!1;for(const i in n.children){if(!e.children[i])return!1;if(!t(e.children[i],n.children[i],r))return!1}return!0},subset:Xe},$e={exact:function(t,e){return ze(t,e)},subset:function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>He(t[n],e[n]))},ignored:()=>!0};function Je(t,e,n){return Ye[n.paths](t.root,e.root,n.matrixParams)&&$e[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function Xe(t,e,n){return tn(t,e,e.segments,n)}function tn(t,e,n,r){if(t.segments.length>n.length){const i=t.segments.slice(0,n.length);return!!sn(i,n)&&!e.hasChildren()&&!!en(i,n,r)}if(t.segments.length===n.length){if(!sn(t.segments,n))return!1;if(!en(t.segments,n,r))return!1;for(const n in e.children){if(!t.children[n])return!1;if(!Xe(t.children[n],e.children[n],r))return!1}return!0}{const i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!!sn(t.segments,i)&&!!en(t.segments,i,r)&&!!t.children.primary&&tn(t.children.primary,e,o,r)}}function en(t,e,n){return e.every((e,r)=>$e[n](t[r].parameters,e.parameters))}class nn{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=je(this.queryParams)),this._queryParamMap}toString(){return cn.serialize(this)}}class rn{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Ke(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ln(this)}}class on{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=je(this.parameters)),this._parameterMap}toString(){return yn(this)}}function sn(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}class an{}class un{parse(t){const e=new Cn(t);return new nn(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var e;return`/${hn(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${fn(e)}=${fn(t)}`).join("&"):`${fn(e)}=${fn(n)}`});return e.length?`?${e.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${e=t.fragment,encodeURI(e)}`:""}`}}const cn=new un;function ln(t){return t.segments.map(t=>yn(t)).join("/")}function hn(t,e){if(!t.hasChildren())return ln(t);if(e){const e=t.children.primary?hn(t.children.primary,!1):"",n=[];return Ke(t.children,(t,e)=>{e!==qe&&n.push(`${e}:${hn(t,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function(t,e){let n=[];return Ke(t.children,(t,r)=>{r===qe&&(n=n.concat(e(t,r)))}),Ke(t.children,(t,r)=>{r!==qe&&(n=n.concat(e(t,r)))}),n}(t,(e,n)=>n===qe?[hn(t.children.primary,!1)]:[`${n}:${hn(e,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children.primary?`${ln(t)}/${e[0]}`:`${ln(t)}/(${e.join("//")})`}}function dn(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function fn(t){return dn(t).replace(/%3B/gi,";")}function pn(t){return dn(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function gn(t){return decodeURIComponent(t)}function mn(t){return gn(t.replace(/\+/g,"%20"))}function yn(t){return`${pn(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${pn(t)}=${pn(e[t])}`).join("")}`;var e}const vn=/^[^\/()?;=#]+/;function _n(t){const e=t.match(vn);return e?e[0]:""}const wn=/^[^=?&#]+/,bn=/^[^?&#]+/;class Cn{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new rn([],{}):new rn([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new rn(t,e)),n}parseSegment(){const t=_n(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new on(gn(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=_n(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=_n(this.remaining);t&&(n=t,this.capture(n))}t[gn(e)]=gn(n)}parseQueryParam(t){const e=function(t){const e=t.match(wn);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(bn);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=mn(e),i=mn(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=_n(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=qe);const o=this.parseChildren();e[i]=1===Object.keys(o).length?o.primary:new rn([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class Tn{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=En(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=En(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=Sn(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return Sn(t,this._root).map(t=>t.value)}}function En(t,e){if(t===e.value)return e;for(const n of e.children){const e=En(t,n);if(e)return e}return null}function Sn(t,e){if(t===e.value)return[e];for(const n of e.children){const r=Sn(t,n);if(r.length)return r.unshift(e),r}return[]}class xn{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function In(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class kn extends Tn{constructor(t,e){super(t),this.snapshot=e,Dn(this,t)}toString(){return this.snapshot.toString()}}function An(t,e){const n=function(t,e){const n=new On([],{},{},"",{},qe,e,null,t.root,-1,{});return new Nn("",new xn(n,[]))}(t,e),r=new _t([new on("",{})]),i=new _t({}),o=new _t({}),s=new _t({}),a=new _t(""),u=new Rn(r,i,s,a,o,qe,e,n.root);return u.snapshot=n.root,new kn(new xn(u,[]),n)}class Rn{constructor(t,e,n,r,i,o,s,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Mt.U)(t=>je(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Mt.U)(t=>je(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Pn(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class On{constructor(t,e,n,r,i,o,s,a,u,c,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=je(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=je(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Nn extends Tn{constructor(t,e){super(e),this.url=t,Dn(this,e)}toString(){return Ln(this._root)}}function Dn(t,e){e.value._routerState=t,e.children.forEach(e=>Dn(t,e))}function Ln(t){const e=t.children.length>0?` { ${t.children.map(Ln).join(", ")} } `:"";return`${t.value}${e}`}function Fn(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,ze(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),ze(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!ze(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),ze(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function Un(t,e){return ze(t.params,e.params)&&function(t,e){return sn(t,e)&&t.every((t,n)=>ze(t.parameters,e[n].parameters))}(t.url,e.url)&&!(!t.parent!=!e.parent)&&(!t.parent||Un(t.parent,e.parent))}function Mn(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function(t,e,n){return e.children.map(e=>{for(const r of n.children)if(t.shouldReuseRoute(e.value,r.value.snapshot))return Mn(t,e,r);return Mn(t,e)})}(t,e,n);return new xn(r,i)}{if(t.shouldAttach(e.value)){const n=t.retrieve(e.value);if(null!==n){const t=n.route;return qn(e,t),t}}const n=new Rn(new _t((r=e.value).url),new _t(r.params),new _t(r.queryParams),new _t(r.fragment),new _t(r.data),r.outlet,r.component,r),i=e.children.map(e=>Mn(t,e));return new xn(n,i)}var r}function qn(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(let n=0;n<t.children.length;++n)qn(t.children[n],e.children[n])}function Vn(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function jn(t){return"object"==typeof t&&null!=t&&t.outlets}function Bn(t,e,n,r,i){let o={};return r&&Ke(r,(t,e)=>{o[e]=Array.isArray(t)?t.map(t=>`${t}`):`${t}`}),new nn(n.root===t?e:Gn(n.root,t,e),o,i)}function Gn(t,e,n){const r={};return Ke(t.children,(t,i)=>{r[i]=t===e?n:Gn(t,e,n)}),new rn(t.segments,r)}class zn{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&Vn(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(jn);if(r&&r!==We(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Hn{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function Zn(t,e,n){if(t||(t=new rn([],{})),0===t.segments.length&&t.hasChildren())return Wn(t,e,n);const r=function(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const e=t.segments[i],s=n[r];if(jn(s))break;const a=`${s}`,u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&u&&"object"==typeof u&&void 0===u.outlets){if(!$n(a,u,e))return o;r+=2}else{if(!$n(a,{},e))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new rn(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new rn(t.segments.slice(r.pathIndex),t.children),Wn(e,0,i)}return r.match&&0===i.length?new rn(t.segments,{}):r.match&&!t.hasChildren()?Kn(t,e,n):r.match?Wn(t,0,i):Kn(t,e,n)}function Wn(t,e,n){if(0===n.length)return new rn(t.segments,{});{const r=function(t){return jn(t[0])?t[0].outlets:{[qe]:t}}(n),i={};return Ke(r,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(i[r]=Zn(t.children[r],e,n))}),Ke(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new rn(t.segments,i)}}function Kn(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const o=n[i];if(jn(o)){const t=Qn(o.outlets);return new rn(r,t)}if(0===i&&Vn(n[0])){r.push(new on(t.segments[e].path,Yn(n[0]))),i++;continue}const s=jn(o)?o.outlets.primary:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&Vn(a)?(r.push(new on(s,Yn(a))),i+=2):(r.push(new on(s,{})),i++)}return new rn(r,{})}function Qn(t){const e={};return Ke(t,(t,n)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[n]=Kn(new rn([],{}),0,t))}),e}function Yn(t){const e={};return Ke(t,(t,n)=>e[n]=`${t}`),e}function $n(t,e,n){return t==n.path&&ze(e,n.parameters)}class Jn{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),Fn(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=In(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),Ke(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,i=In(t);for(const o of Object.keys(i))this.deactivateRouteAndItsChildren(i[o],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(t,e,n){const r=In(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new Ue(t.value.snapshot))}),t.children.length&&this.forwardEvent(new Le(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(Fn(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),Xn(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function Xn(t){Fn(t.value),t.children.forEach(Xn)}class tr{constructor(t,e){this.routes=t,this.module=e}}function er(t){return"function"==typeof t}function nr(t){return t instanceof nn}const rr=Symbol("INITIAL_VALUE");function ir(){return Vt(t=>function(...t){let e,n;return(0,wt.K)(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&(0,bt.k)(t[0])&&(t=t[0]),(0,kt.n)(t,n).lift(new Rt(e))}(t.map(t=>t.pipe(zt(1),Wt(rr)))).pipe(Kt((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==rr)return t;if(r===rr&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||nr(r))return r}return t},t)},rr),$t(t=>t!==rr),(0,Mt.U)(t=>nr(t)?t:!0===t),zt(1)))}let or=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&r._UZ(0,"router-outlet")},directives:function(){return[ei]},encapsulation:2}),t})();function sr(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];ar(r,ur(e,r))}}function ar(t,e){t.children&&sr(t.children,e)}function ur(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function cr(t){const e=t.children&&t.children.map(cr),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==qe&&(n.component=or),n}function lr(t){return t.outlet||qe}function hr(t,e){const n=t.filter(t=>lr(t)===e);return n.push(...t.filter(t=>lr(t)!==e)),n}const dr={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function fr(t,e,n){var r;if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?Object.assign({},dr):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(e.matcher||Ge)(n,t,e);if(!i)return Object.assign({},dr);const o={};Ke(i.posParams,(t,e)=>{o[e]=t.path});const s=i.consumed.length>0?Object.assign(Object.assign({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:s,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function pr(t,e,n,r,i="corrected"){if(n.length>0&&function(t,e,n){return n.some(n=>gr(t,e,n)&&lr(n)!==qe)}(t,n,r)){const i=new rn(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const o of n)if(""===o.path&&lr(o)!==qe){const n=new rn([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[lr(o)]=n}return i}(t,e,r,new rn(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>gr(t,e,n))}(t,n,r)){const o=new rn(t.segments,function(t,e,n,r,i,o){const s={};for(const a of r)if(gr(t,n,a)&&!i[lr(a)]){const n=new rn([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===o?t.segments.length:e.length,s[lr(a)]=n}return Object.assign(Object.assign({},i),s)}(t,e,n,r,t.children,i));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}const o=new rn(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}function gr(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function mr(t,e,n,r){return!!(lr(t)===r||r!==qe&&gr(e,n,t))&&("**"===t.path||fr(e,t,n).matched)}function yr(t,e,n){return 0===e.length&&!t.children[n]}class vr{constructor(t){this.segmentGroup=t||null}}class _r{constructor(t){this.urlTree=t}}function wr(t){return new xt.y(e=>e.error(new vr(t)))}function br(t){return new xt.y(e=>e.error(new _r(t)))}function Cr(t){return new xt.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class Tr{constructor(t,e,n,i,o){this.configLoader=e,this.urlSerializer=n,this.urlTree=i,this.config=o,this.allowRedirects=!0,this.ngModule=t.get(r.h0i)}apply(){const t=pr(this.urlTree.root,[],[],this.config).segmentGroup,e=new rn(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,qe).pipe((0,Mt.U)(t=>this.createUrlTree(Er(t),this.urlTree.queryParams,this.urlTree.fragment))).pipe(te(t=>{if(t instanceof _r)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof vr)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,qe).pipe((0,Mt.U)(e=>this.createUrlTree(Er(e),t.queryParams,t.fragment))).pipe(te(t=>{if(t instanceof vr)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new rn([],{[qe]:t}):t;return new nn(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe((0,Mt.U)(t=>new rn([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){const r=[];for(const i of Object.keys(n.children))"primary"===i?r.unshift(i):r.push(i);return(0,gt.D)(r).pipe(ie(r=>{const i=n.children[r],o=hr(e,r);return this.expandSegmentGroup(t,o,i,r).pipe((0,Mt.U)(t=>({segment:t,outlet:r})))}),Kt((t,e)=>(t[e.outlet]=e.segment,t),{}),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?$t((e,n)=>t(e,n,r)):ge.y,oe(1),n?de(e):ue(()=>new Ot))}())}expandSegment(t,e,n,r,i,o){return(0,gt.D)(n).pipe(ie(s=>this.expandSegmentAgainstRoute(t,e,n,s,r,i,o).pipe(te(t=>{if(t instanceof vr)return(0,mt.of)(null);throw t}))),me(t=>!!t),te((t,n)=>{if(t instanceof Ot||"EmptyError"===t.name){if(yr(e,r,i))return(0,mt.of)(new rn([],{}));throw new vr(e)}throw t}))}expandSegmentAgainstRoute(t,e,n,r,i,o,s){return mr(r,e,i,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i,o):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):wr(e):wr(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?br(i):this.lineralizeSegments(n,i).pipe((0,re.zg)(n=>{const i=new rn(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){const{matched:s,consumedSegments:a,lastChild:u,positionalParamSegments:c}=fr(e,r,i);if(!s)return wr(e);const l=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith("/")?br(l):this.lineralizeSegments(r,l).pipe((0,re.zg)(r=>this.expandSegment(t,e,n,r.concat(i.slice(u)),o,!1)))}matchSegmentAgainstRoute(t,e,n,r,i){if("**"===n.path)return n.loadChildren?(n._loadedConfig?(0,mt.of)(n._loadedConfig):this.configLoader.load(t.injector,n)).pipe((0,Mt.U)(t=>(n._loadedConfig=t,new rn(r,{})))):(0,mt.of)(new rn(r,{}));const{matched:o,consumedSegments:s,lastChild:a}=fr(e,n,r);if(!o)return wr(e);const u=r.slice(a);return this.getChildConfig(t,n,r).pipe((0,re.zg)(t=>{const r=t.module,o=t.routes,{segmentGroup:a,slicedSegments:c}=pr(e,s,u,o),l=new rn(a.segments,a.children);if(0===c.length&&l.hasChildren())return this.expandChildren(r,o,l).pipe((0,Mt.U)(t=>new rn(s,t)));if(0===o.length&&0===c.length)return(0,mt.of)(new rn(s,{}));const h=lr(n)===i;return this.expandSegment(r,l,o,c,h?qe:i,!0).pipe((0,Mt.U)(t=>new rn(s.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?(0,mt.of)(new tr(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?(0,mt.of)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe((0,re.zg)(n=>n?this.configLoader.load(t.injector,e).pipe((0,Mt.U)(t=>(e._loadedConfig=t,t))):function(t){return new xt.y(e=>e.error(Be(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):(0,mt.of)(new tr([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;if(!r||0===r.length)return(0,mt.of)(!0);const i=r.map(r=>{const i=t.get(r);let o;if(function(t){return t&&er(t.canLoad)}(i))o=i.canLoad(e,n);else{if(!er(i))throw new Error("Invalid CanLoad guard");o=i(e,n)}return Qe(o)});return(0,mt.of)(i).pipe(ir(),(0,ye.b)(t=>{if(!nr(t))return;const e=Be(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),(0,Mt.U)(t=>!0===t))}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return(0,mt.of)(n);if(r.numberOfChildren>1||!r.children.primary)return Cr(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new nn(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return Ke(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let o={};return Ke(e.children,(e,i)=>{o[i]=this.createSegmentGroup(t,e,n,r)}),new rn(i,o)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function Er(t){const e={};for(const n of Object.keys(t.children)){const r=Er(t.children[n]);(r.segments.length>0||r.hasChildren())&&(e[n]=r)}return function(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new rn(t.segments.concat(e.segments),e.children)}return t}(new rn(t.segments,e))}class Sr{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class xr{constructor(t,e){this.component=t,this.route=e}}function Ir(t,e,n){const r=t._root;return Ar(r,e?e._root:null,n,[r.value])}function kr(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function Ar(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=In(e);return t.children.forEach(t=>{!function(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const u=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!sn(t.url,e.url);case"pathParamsOrQueryParamsChange":return!sn(t.url,e.url)||!ze(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Un(t,e)||!ze(t.queryParams,e.queryParams);case"paramsChange":default:return!Un(t,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Sr(r)):(o.data=s.data,o._resolvedData=s._resolvedData),Ar(t,e,o.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new xr(a.outlet.component,s))}else s&&Rr(e,a,i),i.canActivateChecks.push(new Sr(r)),Ar(t,null,o.component?a?a.children:null:n,r,i)}(t,o[t.value.outlet],n,r.concat([t.value]),i),delete o[t.value.outlet]}),Ke(o,(t,e)=>Rr(t,n.getContext(e),i)),i}function Rr(t,e,n){const r=In(t),i=t.value;Ke(r,(t,r)=>{Rr(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new xr(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class Pr{}function Or(t){return new xt.y(e=>e.error(t))}class Nr{constructor(t,e,n,r,i,o){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}recognize(){const t=pr(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,qe);if(null===e)return null;const n=new On([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},qe,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new xn(n,e),i=new Nn(this.url,r);return this.inheritParamsAndData(i._root),i}inheritParamsAndData(t){const e=t.value,n=Pn(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=[];for(const i of Object.keys(e.children)){const r=e.children[i],o=hr(t,i),s=this.processSegmentGroup(o,r,i);if(null===s)return null;n.push(...s)}const r=Lr(n);return r.sort((t,e)=>t.value.outlet===qe?-1:e.value.outlet===qe?1:t.value.outlet.localeCompare(e.value.outlet)),r}processSegment(t,e,n,r){for(const i of t){const t=this.processSegmentAgainstRoute(i,e,n,r);if(null!==t)return t}return yr(e,n,r)?[]:null}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo||!mr(t,e,n,r))return null;let i,o=[],s=[];if("**"===t.path){const r=n.length>0?We(n).parameters:{};i=new On(n,r,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Mr(t),lr(t),t.component,t,Fr(e),Ur(e)+n.length,qr(t))}else{const r=fr(e,t,n);if(!r.matched)return null;o=r.consumedSegments,s=n.slice(r.lastChild),i=new On(o,r.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Mr(t),lr(t),t.component,t,Fr(e),Ur(e)+o.length,qr(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:u,slicedSegments:c}=pr(e,o,s,a.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution);if(0===c.length&&u.hasChildren()){const t=this.processChildren(a,u);return null===t?null:[new xn(i,t)]}if(0===a.length&&0===c.length)return[new xn(i,[])];const l=lr(t)===r,h=this.processSegment(a,u,c,l?qe:r);return null===h?null:[new xn(i,h)]}}function Dr(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Lr(t){const e=[],n=new Set;for(const r of t){if(!Dr(r)){e.push(r);continue}const t=e.find(t=>r.value.routeConfig===t.value.routeConfig);void 0!==t?(t.children.push(...r.children),n.add(t)):e.push(r)}for(const r of n){const t=Lr(r.children);e.push(new xn(r.value,t))}return e.filter(t=>!n.has(t))}function Fr(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Ur(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function Mr(t){return t.data||{}}function qr(t){return t.resolve||{}}function Vr(t){return Vt(e=>{const n=t(e);return n?(0,gt.D)(n).pipe((0,Mt.U)(()=>e)):(0,mt.of)(e)})}class jr extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const Br=new r.OlP("ROUTES");class Gr{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const n=this.loadModuleFactory(e.loadChildren).pipe((0,Mt.U)(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const i=n.create(t);return new tr(Ze(i.injector.get(Br,void 0,r.XFs.Self|r.XFs.Optional)).map(cr),i)}),te(t=>{throw e._loader$=void 0,t}));return e._loader$=new Ut.c(n,()=>new yt.xQ).pipe((0,ve.x)()),e._loader$}loadModuleFactory(t){return"string"==typeof t?(0,gt.D)(this.loader.load(t)):Qe(t()).pipe((0,re.zg)(t=>t instanceof r.YKP?(0,mt.of)(t):(0,gt.D)(this.compiler.compileModuleAsync(t))))}}class zr{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Hr,this.attachRef=null}}class Hr{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new zr,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class Zr{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function Wr(t){throw t}function Kr(t,e,n){return e.parse("/")}function Qr(t,e){return(0,mt.of)(null)}const Yr={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},$r={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Jr=(()=>{class t{constructor(t,e,n,i,o,s,a,u){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=i,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new yt.xQ,this.errorHandler=Wr,this.malformedUriErrorHandler=Kr,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Qr,afterPreactivation:Qr},this.urlHandlingStrategy=new Zr,this.routeReuseStrategy=new jr,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.ngModule=o.get(r.h0i),this.console=o.get(r.c2e);const c=o.get(r.R0b);this.isNgZoneEnabled=c instanceof r.R0b&&r.R0b.isInAngularZone(),this.resetConfig(u),this.currentUrlTree=new nn(new rn([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Gr(s,a,t=>this.triggerEvent(new Oe(t)),t=>this.triggerEvent(new Ne(t))),this.routerState=An(this.currentUrlTree,this.rootComponentType),this.transitions=new _t({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe($t(t=>0!==t.id),(0,Mt.U)(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),Vt(t=>{let n=!1,r=!1;return(0,mt.of)(t).pipe((0,ye.b)(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Vt(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return(0,mt.of)(t).pipe(Vt(t=>{const n=this.transitions.getValue();return e.next(new Te(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?Lt.E:Promise.resolve(t)}),(r=this.ngModule.injector,i=this.configLoader,o=this.urlSerializer,s=this.config,Vt(t=>function(t,e,n,r,i){return new Tr(t,e,n,r,i).apply()}(r,i,o,t.extractedUrl,s).pipe((0,Mt.U)(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e}))))),(0,ye.b)(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return(0,re.zg)(o=>function(t,e,n,r,i="emptyOnly",o="legacy"){try{const s=new Nr(t,e,n,r,i,o).recognize();return null===s?Or(new Pr):(0,mt.of)(s)}catch(rw){return Or(rw)}}(t,e,o.urlAfterRedirects,n(o.urlAfterRedirects),r,i).pipe((0,Mt.U)(t=>Object.assign(Object.assign({},o),{targetSnapshot:t}))))}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,ye.b)(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects);const n=new Ie(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var r,i,o,s;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:o,extras:s}=t,a=new Te(n,this.serializeUrl(r),i,o);e.next(a);const u=An(r,this.rootComponentType).snapshot;return(0,mt.of)(Object.assign(Object.assign({},t),{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign(Object.assign({},s),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),Lt.E}),Vr(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),(0,ye.b)(t=>{const e=new ke(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),(0,Mt.U)(t=>Object.assign(Object.assign({},t),{guards:Ir(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return(0,re.zg)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?(0,mt.of)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return(0,gt.D)(t).pipe((0,re.zg)(t=>function(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||0===o.length)return(0,mt.of)(!0);const s=o.map(o=>{const s=kr(o,e,i);let a;if(function(t){return t&&er(t.canDeactivate)}(s))a=Qe(s.canDeactivate(t,e,n,r));else{if(!er(s))throw new Error("Invalid CanDeactivate guard");a=Qe(s(t,e,n,r))}return a.pipe(me())});return(0,mt.of)(s).pipe(ir())}(t.component,t.route,n,e,r)),me(t=>!0!==t,!0))}(s,r,i,t).pipe((0,re.zg)(n=>n&&function(t){return"boolean"==typeof t}(n)?function(t,e,n,r){return(0,gt.D)(e).pipe(ie(e=>Dt(function(t,e){return null!==t&&e&&e(new De(t)),(0,mt.of)(!0)}(e.route.parent,r),function(t,e){return null!==t&&e&&e(new Fe(t)),(0,mt.of)(!0)}(e.route,r),function(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>Ft(()=>{const i=e.guards.map(i=>{const o=kr(i,e.node,n);let s;if(function(t){return t&&er(t.canActivateChild)}(o))s=Qe(o.canActivateChild(r,t));else{if(!er(o))throw new Error("Invalid CanActivateChild guard");s=Qe(o(r,t))}return s.pipe(me())});return(0,mt.of)(i).pipe(ir())}));return(0,mt.of)(i).pipe(ir())}(t,e.path,n),function(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,mt.of)(!0);const i=r.map(r=>Ft(()=>{const i=kr(r,e,n);let o;if(function(t){return t&&er(t.canActivate)}(i))o=Qe(i.canActivate(e,t));else{if(!er(i))throw new Error("Invalid CanActivate guard");o=Qe(i(e,t))}return o.pipe(me())}));return(0,mt.of)(i).pipe(ir())}(t,e.route,n))),me(t=>!0!==t,!0))}(r,o,t,e):(0,mt.of)(n)),(0,Mt.U)(t=>Object.assign(Object.assign({},n),{guardsResult:t})))})}(this.ngModule.injector,t=>this.triggerEvent(t)),(0,ye.b)(t=>{if(nr(t.guardsResult)){const e=Be(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}const e=new Ae(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),$t(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const n=new Se(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(n),t.resolve(!1),!1}return!0}),Vr(t=>{if(t.guards.canActivateChecks.length)return(0,mt.of)(t).pipe((0,ye.b)(t=>{const e=new Re(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Vt(t=>{let n=!1;return(0,mt.of)(t).pipe((r=this.paramsInheritanceStrategy,i=this.ngModule.injector,(0,re.zg)(t=>{const{targetSnapshot:e,guards:{canActivateChecks:n}}=t;if(!n.length)return(0,mt.of)(t);let o=0;return(0,gt.D)(n).pipe(ie(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return(0,mt.of)({});const o={};return(0,gt.D)(i).pipe((0,re.zg)(i=>function(t,e,n,r){const i=kr(t,e,r);return Qe(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe((0,ye.b)(t=>{o[i]=t}))),oe(1),(0,re.zg)(()=>Object.keys(o).length===i.length?(0,mt.of)(o):Lt.E))}(t._resolve,t,e,r).pipe((0,Mt.U)(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),Pn(t,n).resolve),null)))}(t.route,e,r,i)),(0,ye.b)(()=>o++),oe(1),(0,re.zg)(e=>o===n.length?(0,mt.of)(t):Lt.E))})),(0,ye.b)({next:()=>n=!0,complete:()=>{if(!n){const n=new Se(t.id,this.serializeUrl(t.extractedUrl),"At least one route resolver didn't emit any value.");e.next(n),t.resolve(!1)}}}));var r,i}),(0,ye.b)(t=>{const e=new Pe(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),Vr(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),(0,Mt.U)(t=>{const e=function(t,e,n){const r=Mn(t,e._root,n?n._root:void 0);return new kn(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),(0,ye.b)(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),(o=this.rootContexts,s=this.routeReuseStrategy,a=t=>this.triggerEvent(t),(0,Mt.U)(t=>(new Jn(s,t.targetRouterState,t.currentRouterState,a).activate(o),t))),(0,ye.b)({next(){n=!0},complete(){n=!0}}),(i=()=>{if(!n&&!r){this.resetUrlToCurrentUrlTree();const n=new Se(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(n),t.resolve(!1)}this.currentNavigation=null},t=>t.lift(new we(i))),te(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=nr(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new Se(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new xe(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(Ah){t.reject(Ah)}}var i;return Lt.E}));var i,o,s,a}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const e=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,e)&&setTimeout(()=>{const{source:t,state:n,urlTree:r}=e,i={replaceUrl:!0};if(n){const t=Object.assign({},n);delete t.navigationId,0!==Object.keys(t).length&&(i.state=t)}this.scheduleNavigation(r,t,n,i)},0),this.lastLocationChangeInfo=e}))}extractLocationChangeInfoFromEvent(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,e){if(!t)return!0;const n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){sr(t),this.config=t.map(cr),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,e={}){const{relativeTo:n,queryParams:r,fragment:i,queryParamsHandling:o,preserveFragment:s}=e,a=n||this.routerState.root,u=s?this.currentUrlTree.fragment:i;let c=null;switch(o){case"merge":c=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=r||null}return null!==c&&(c=this.removeEmptyProps(c)),function(t,e,n,r,i){if(0===n.length)return Bn(e.root,e.root,e,r,i);const o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new zn(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return Ke(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new zn(n,e,r)}(n);if(o.toRoot())return Bn(e.root,new rn([],{}),e,r,i);const s=function(t,e,n){if(t.isAbsolute)return new Hn(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new Hn(t,t===e.root,0)}const r=Vn(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new Hn(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(o,e,t),a=s.processChildren?Wn(s.segmentGroup,s.index,o.commands):Zn(s.segmentGroup,s.index,o.commands);return Bn(s.segmentGroup,a,e,r,i)}(a,this.currentUrlTree,t,c,null!=u?u:null)}navigateByUrl(t,e={skipLocationChange:!1}){const n=nr(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(rw){e=this.malformedUriErrorHandler(rw,this.urlSerializer,t)}return e}isActive(t,e){let n;if(n=!0===e?Object.assign({},Yr):!1===e?Object.assign({},$r):e,nr(t))return Je(this.currentUrlTree,t,n);const r=this.parseUrl(t);return Je(this.currentUrlTree,r,n)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new Ee(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){if(this.disposed)return Promise.resolve(!1);const o=this.getTransition(),s="imperative"!==e&&"imperative"===(null==o?void 0:o.source),a=(this.lastSuccessfulId===o.id||this.currentNavigation?o.rawUrl:o.urlAfterRedirects).toString()===t.toString();if(s&&a)return Promise.resolve(!0);let u,c,l;i?(u=i.resolve,c=i.reject,l=i.promise):l=new Promise((t,e)=>{u=t,c=e});const h=++this.navigationId;return this.setTransition({id:h,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:u,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,n,r){const i=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(i)||e?this.location.replaceState(i,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(i,"",Object.assign(Object.assign({},r),{navigationId:n}))}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.DyG),r.LFG(an),r.LFG(Hr),r.LFG(b),r.LFG(r.zs3),r.LFG(r.v3s),r.LFG(r.Sil),r.LFG(void 0))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),Xr=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.route=e,this.commands=[],this.onChanges=new yt.xQ,null==n&&r.setAttribute(i.nativeElement,"tabindex","0")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}onClick(){const t={skipLocationChange:ti(this.skipLocationChange),replaceUrl:ti(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:ti(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Jr),r.Y36(Rn),r.$8M("tabindex"),r.Y36(r.Qsj),r.Y36(r.SBq))},t.\u0275dir=r.lG2({type:t,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,e){1&t&&r.NdJ("click",function(){return e.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[r.TTD]}),t})();function ti(t){return""===t||!!t}let ei=(()=>{class t{constructor(t,e,n,i,o){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new r.vpe,this.deactivateEvents=new r.vpe,this.name=i||qe,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new ni(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Hr),r.Y36(r.s_b),r.Y36(r._Vd),r.$8M("name"),r.Y36(r.sBO))},t.\u0275dir=r.lG2({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class ni{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===Rn?this.route:t===Hr?this.childContexts:this.parent.get(t,e)}}class ri{}class ii{preload(t,e){return(0,mt.of)(null)}}let oi=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new Gr(e,n,e=>t.triggerEvent(new Oe(e)),e=>t.triggerEvent(new Ne(e)))}setUpPreloading(){this.subscription=this.router.events.pipe($t(t=>t instanceof Ee),ie(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(r.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return(0,gt.D)(n).pipe((0,Nt.J)(),(0,Mt.U)(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>(e._loadedConfig?(0,mt.of)(e._loadedConfig):this.loader.load(t.injector,e)).pipe((0,re.zg)(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Jr),r.LFG(r.v3s),r.LFG(r.Sil),r.LFG(r.zs3),r.LFG(ri))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),si=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Te?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ee&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Me&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new Me(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Jr),r.LFG(F),r.LFG(void 0))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const ai=new r.OlP("ROUTER_CONFIGURATION"),ui=new r.OlP("ROUTER_FORROOT_GUARD"),ci=[b,{provide:an,useClass:un},{provide:Jr,useFactory:function(t,e,n,r,i,o,s,a={},u,c){const l=new Jr(null,t,e,n,r,i,o,Ze(s));return u&&(l.urlHandlingStrategy=u),c&&(l.routeReuseStrategy=c),function(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy)}(a,l),a.enableTracing&&l.events.subscribe(t=>{var e,n;null===(e=console.group)||void 0===e||e.call(console,`Router Event: ${t.constructor.name}`),console.log(t.toString()),console.log(t),null===(n=console.groupEnd)||void 0===n||n.call(console)}),l},deps:[an,Hr,b,r.zs3,r.v3s,r.Sil,Br,ai,[class{},new r.FiY],[class{},new r.FiY]]},Hr,{provide:Rn,useFactory:function(t){return t.routerState.root},deps:[Jr]},{provide:r.v3s,useClass:r.EAV},oi,ii,class{preload(t,e){return e().pipe(te(()=>(0,mt.of)(null)))}},{provide:ai,useValue:{enableTracing:!1}}];function li(){return new r.PXZ("Router",Jr)}let hi=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[ci,gi(e),{provide:ui,useFactory:pi,deps:[[Jr,new r.FiY,new r.tp0]]},{provide:ai,useValue:n||{}},{provide:m,useFactory:fi,deps:[a,[new r.tBr(v),new r.FiY],ai]},{provide:si,useFactory:di,deps:[Jr,F,ai]},{provide:ri,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:ii},{provide:r.PXZ,multi:!0,useFactory:li},[mi,{provide:r.ip1,multi:!0,useFactory:yi,deps:[mi]},{provide:_i,useFactory:vi,deps:[mi]},{provide:r.tb,multi:!0,useExisting:_i}]]}}static forChild(e){return{ngModule:t,providers:[gi(e)]}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(ui,8),r.LFG(Jr,8))},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({}),t})();function di(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new si(t,e,n)}function fi(t,e,n={}){return n.useHash?new w(t,e):new _(t,e)}function pi(t){return"guarded"}function gi(t){return[{provide:r.deG,multi:!0,useValue:t},{provide:Br,multi:!0,useValue:t}]}let mi=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new yt.xQ}appInitializer(){return this.injector.get(c,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(Jr),r=this.injector.get(ai);return"disabled"===r.initialNavigation?(n.setUpLocationChangeListener(),t(!0)):"enabled"===r.initialNavigation||"enabledBlocking"===r.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?(0,mt.of)(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()):t(!0),e})}bootstrapListener(t){const e=this.injector.get(ai),n=this.injector.get(oi),i=this.injector.get(si),o=this.injector.get(Jr),s=this.injector.get(r.z2F);t===s.components[0]&&("enabledNonBlocking"!==e.initialNavigation&&void 0!==e.initialNavigation||o.initialNavigation(),n.setUpPreloading(),i.init(),o.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.zs3))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();function yi(t){return t.appInitializer.bind(t)}function vi(t){return t.bootstrapListener.bind(t)}const _i=new r.OlP("Router Initializer");let wi=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-home"]],decls:2,vars:0,template:function(t,e){1&t&&(r.TgZ(0,"p"),r._uU(1,"home works!"),r.qZA())},styles:[""]}),t})();var bi=n(2056);function Ci(t,e){return new xt.y(n=>{const r=t.length;if(0===r)return void n.complete();const i=new Array(r);let o=0,s=0;for(let a=0;a<r;a++){const u=(0,gt.D)(t[a]);let c=!1;n.add(u.subscribe({next:t=>{c||(c=!0,s++),i[a]=t},error:t=>n.error(t),complete:()=>{o++,o!==r&&c||(s===r&&n.next(e?e.reduce((t,e,n)=>(t[e]=i[n],t),{}):i),n.complete())}}))}})}let Ti=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}setProperty(t,e){this._renderer.setProperty(this._elementRef.nativeElement,t,e)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.Qsj),r.Y36(r.SBq))},t.\u0275dir=r.lG2({type:t}),t})(),Ei=(()=>{class t extends Ti{}return t.\u0275fac=function(){let e;return function(n){return(e||(e=r.n5z(t)))(n||t)}}(),t.\u0275dir=r.lG2({type:t,features:[r.qOj]}),t})();const Si=new r.OlP("NgValueAccessor"),xi={provide:Si,useExisting:(0,r.Gpc)(()=>ki),multi:!0},Ii=new r.OlP("CompositionEventMode");let ki=(()=>{class t extends Ti{constructor(t,e,n){super(t,e),this._compositionMode=n,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=o()?o().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.Qsj),r.Y36(r.SBq),r.Y36(Ii,8))},t.\u0275dir=r.lG2({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&r.NdJ("input",function(t){return e._handleInput(t.target.value)})("blur",function(){return e.onTouched()})("compositionstart",function(){return e._compositionStart()})("compositionend",function(t){return e._compositionEnd(t.target.value)})},features:[r._Bn([xi]),r.qOj]}),t})();function Ai(t){return null==t||0===t.length}function Ri(t){return null!=t&&"number"==typeof t.length}const Pi=new r.OlP("NgValidators"),Oi=new r.OlP("NgAsyncValidators"),Ni=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Di{static min(t){return function(t){return e=>{if(Ai(e.value)||Ai(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}(t)}static max(t){return function(t){return e=>{if(Ai(e.value)||Ai(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}(t)}static required(t){return function(t){return Ai(t.value)?{required:!0}:null}(t)}static requiredTrue(t){return function(t){return!0===t.value?null:{required:!0}}(t)}static email(t){return function(t){return Ai(t.value)||Ni.test(t.value)?null:{email:!0}}(t)}static minLength(t){return function(t){return e=>Ai(e.value)||!Ri(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}(t)}static maxLength(t){return function(t){return e=>Ri(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}(t)}static pattern(t){return function(t){if(!t)return Li;let e,n;return"string"==typeof t?(n="","^"!==t.charAt(0)&&(n+="^"),n+=t,"$"!==t.charAt(t.length-1)&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),t=>{if(Ai(t.value))return null;const r=t.value;return e.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}(t)}static nullValidator(t){return null}static compose(t){return ji(t)}static composeAsync(t){return Gi(t)}}function Li(t){return null}function Fi(t){return null!=t}function Ui(t){const e=(0,r.QGY)(t)?(0,gt.D)(t):t;return(0,r.CqO)(e),e}function Mi(t){let e={};return t.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function qi(t,e){return e.map(e=>e(t))}function Vi(t){return t.map(t=>function(t){return!t.validate}(t)?t:e=>t.validate(e))}function ji(t){if(!t)return null;const e=t.filter(Fi);return 0==e.length?null:function(t){return Mi(qi(t,e))}}function Bi(t){return null!=t?ji(Vi(t)):null}function Gi(t){if(!t)return null;const e=t.filter(Fi);return 0==e.length?null:function(t){return function(...t){if(1===t.length){const e=t[0];if((0,bt.k)(e))return Ci(e,null);if((0,bi.K)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return Ci(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return Ci(t=1===t.length&&(0,bt.k)(t[0])?t[0]:t,null).pipe((0,Mt.U)(t=>e(...t)))}return Ci(t,null)}(qi(t,e).map(Ui)).pipe((0,Mt.U)(Mi))}}function zi(t){return null!=t?Gi(Vi(t)):null}function Hi(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function Zi(t){return t._rawValidators}function Wi(t){return t._rawAsyncValidators}let Ki=(()=>{class t{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=Bi(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=zi(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.lG2({type:t}),t})(),Qi=(()=>{class t extends Ki{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(){let e;return function(n){return(e||(e=r.n5z(t)))(n||t)}}(),t.\u0275dir=r.lG2({type:t,features:[r.qOj]}),t})();class Yi extends Ki{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class $i{constructor(t){this._cd=t}is(t){var e,n;return!!(null===(n=null===(e=this._cd)||void 0===e?void 0:e.control)||void 0===n?void 0:n[t])}}let Ji=(()=>{class t extends $i{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Yi,2))},t.\u0275dir=r.lG2({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.ekj("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))},features:[r.qOj]}),t})(),Xi=(()=>{class t extends $i{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Qi,10))},t.\u0275dir=r.lG2({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.ekj("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))},features:[r.qOj]}),t})();function to(t,e){ro(t,e,!0),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&oo(t,e)})}(t,e),function(t,e){const n=(t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&oo(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function(t,e){if(e.valueAccessor.setDisabledState){const n=t=>{e.valueAccessor.setDisabledState(t)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function eo(t,e,n=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),io(t,e,!0),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function no(t,e){t.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function ro(t,e,n){const r=Zi(t);null!==e.validator?t.setValidators(Hi(r,e.validator)):"function"==typeof r&&t.setValidators([r]);const i=Wi(t);if(null!==e.asyncValidator?t.setAsyncValidators(Hi(i,e.asyncValidator)):"function"==typeof i&&t.setAsyncValidators([i]),n){const n=()=>t.updateValueAndValidity();no(e._rawValidators,n),no(e._rawAsyncValidators,n)}}function io(t,e,n){let r=!1;if(null!==t){if(null!==e.validator){const n=Zi(t);if(Array.isArray(n)&&n.length>0){const i=n.filter(t=>t!==e.validator);i.length!==n.length&&(r=!0,t.setValidators(i))}}if(null!==e.asyncValidator){const n=Wi(t);if(Array.isArray(n)&&n.length>0){const i=n.filter(t=>t!==e.asyncValidator);i.length!==n.length&&(r=!0,t.setAsyncValidators(i))}}}if(n){const t=()=>{};no(e._rawValidators,t),no(e._rawAsyncValidators,t)}return r}function oo(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function so(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const ao="VALID",uo="INVALID",co="PENDING",lo="DISABLED";function ho(t){return(mo(t)?t.validators:t)||null}function fo(t){return Array.isArray(t)?Bi(t):t||null}function po(t,e){return(mo(e)?e.asyncValidators:t)||null}function go(t){return Array.isArray(t)?zi(t):t||null}function mo(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class yo{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=fo(this._rawValidators),this._composedAsyncValidatorFn=go(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===ao}get invalid(){return this.status===uo}get pending(){return this.status==co}get disabled(){return this.status===lo}get enabled(){return this.status!==lo}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=fo(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=go(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=co,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=lo,this.errors=null,this._forEachChild(e=>{e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=ao,this._forEachChild(e=>{e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==ao&&this.status!==co||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?lo:ao}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=co,this._hasOwnPendingAsyncValidator=!0;const e=Ui(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(e,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;let r=t;return e.forEach(t=>{r=r instanceof _o?r.controls.hasOwnProperty(t)?r.controls[t]:null:r instanceof wo&&r.at(t)||null}),r}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new r.vpe,this.statusChanges=new r.vpe}_calculateStatus(){return this._allControlsDisabled()?lo:this.errors?uo:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(co)?co:this._anyControlsHaveStatus(uo)?uo:ao}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){mo(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class vo extends yo{constructor(t=null,e,n){super(ho(e),po(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){so(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){so(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class _o extends yo{constructor(t,e,n){super(ho(e),po(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,n={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof vo?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const n=this.controls[e];n&&t(n,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&t(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,r)=>{n=e(n,t,r)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class wo extends yo{constructor(t,e,n){super(ho(e),po(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}at(t){return this.controls[t]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,n={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent})}removeAt(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof vo?t.value:t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}let bo=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.lG2({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})();const Co={provide:Si,useExisting:(0,r.Gpc)(()=>To),multi:!0};let To=(()=>{class t extends Ei{writeValue(t){this.setProperty("value",null==t?"":t)}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}}return t.\u0275fac=function(){let e;return function(n){return(e||(e=r.n5z(t)))(n||t)}}(),t.\u0275dir=r.lG2({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,e){1&t&&r.NdJ("input",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},features:[r._Bn([Co]),r.qOj]}),t})(),Eo=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({}),t})();const So=new r.OlP("NgModelWithFormControlWarning"),xo={provide:Qi,useExisting:(0,r.Gpc)(()=>Io)};let Io=(()=>{class t extends Qi{constructor(t,e){super(),this.validators=t,this.asyncValidators=e,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new r.vpe,this._setValidators(t),this._setAsyncValidators(e)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(io(this.form,this,!1),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const e=this.form.get(t.path);return to(e,t),e.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),e}getControl(t){return this.form.get(t.path)}removeControl(t){eo(t.control||null,t,!1),so(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,e){this.form.get(t.path).setValue(e)}onSubmit(t){return this.submitted=!0,e=this.directives,this.form._syncPendingControls(),e.forEach(t=>{const e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)}),this.ngSubmit.emit(t),!1;var e}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const e=t.control,n=this.form.get(t.path);e!==n&&(eo(e||null,t),n instanceof vo&&(to(n,t),t.control=n))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const e=this.form.get(t.path);(function(t,e){ro(t,e,!1)})(e,t),e.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const e=this.form.get(t.path);e&&function(t,e){return io(t,e,!1)}(e,t)&&e.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){ro(this.form,this,!1),this._oldForm&&io(this._oldForm,this,!1)}_checkFormPresent(){}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Pi,10),r.Y36(Oi,10))},t.\u0275dir=r.lG2({type:t,selectors:[["","formGroup",""]],hostBindings:function(t,e){1&t&&r.NdJ("submit",function(t){return e.onSubmit(t)})("reset",function(){return e.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[r._Bn([xo]),r.qOj,r.TTD]}),t})();const ko={provide:Yi,useExisting:(0,r.Gpc)(()=>Ao)};let Ao=(()=>{class t extends Yi{constructor(t,e,n,i,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.update=new r.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(e),this._setAsyncValidators(n),this.valueAccessor=function(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(t=>{t.constructor===ki?n=t:Object.getPrototypeOf(t.constructor)===Ei?r=t:i=t}),i||r||n||null}(0,i)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return t=null==this.name?this.name:this.name.toString(),[...this._parent.path,t];var t}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Qi,13),r.Y36(Pi,10),r.Y36(Oi,10),r.Y36(Si,10),r.Y36(So,8))},t.\u0275dir=r.lG2({type:t,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[r._Bn([ko]),r.qOj,r.TTD]}),t._ngModelWarningSentOnce=!1,t})(),Ro=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[Eo]]}),t})(),Po=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[Ro]}),t})(),Oo=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:So,useValue:e.warnOnNgModelWithFormControl}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[Ro]}),t})(),No=(()=>{class t{group(t,e=null){const n=this._reduceControls(t);let r,i=null,o=null;return null!=e&&(function(t){return void 0!==t.asyncValidators||void 0!==t.validators||void 0!==t.updateOn}(e)?(i=null!=e.validators?e.validators:null,o=null!=e.asyncValidators?e.asyncValidators:null,r=null!=e.updateOn?e.updateOn:void 0):(i=null!=e.validator?e.validator:null,o=null!=e.asyncValidator?e.asyncValidator:null)),new _o(n,{asyncValidators:o,updateOn:r,validators:i})}control(t,e,n){return new vo(t,e,n)}array(t,e,n){const r=t.map(t=>this._createControl(t));return new wo(r,e,n)}_reduceControls(t){const e={};return Object.keys(t).forEach(n=>{e[n]=this._createControl(t[n])}),e}_createControl(t){return t instanceof vo||t instanceof _o||t instanceof wo?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=(0,r.Yz7)({factory:function(){return new t},token:t,providedIn:Oo}),t})();var Do=n(2501),Lo=n.n(Do),Fo=n(8569);function Uo(){return t=>t.lift(new Mo)}class Mo{call(t,e){return e.subscribe(new qo(t))}}class qo extends Ct.L{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}function Vo(t,e){return n=>n.lift(new jo(t,e))}class jo{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new Bo(t,this.compare,this.keySelector))}}class Bo extends Ct.L{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}var Go=n(9098),zo=n(2346),Ho=n(1858),Zo=n(1062),Wo=n(250),Ko=n(308),Qo=function(t,e){return(Qo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Yo(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var $o,Jo="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Xo=Xo||{},ts=Jo||self;function es(){}function ns(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function rs(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var is="closure_uid_"+(1e9*Math.random()>>>0),os=0;function ss(t,e,n){return t.call.apply(t.bind,arguments)}function as(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function us(t,e,n){return(us=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ss:as).apply(null,arguments)}function cs(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function ls(){return Date.now()}function hs(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function ds(){this.j=this.j,this.i=this.i}ds.prototype.j=!1,ds.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,is)&&t[is]||(t[is]=++os)}(this)},ds.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var fs=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},ps=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function gs(t){return Array.prototype.concat.apply([],arguments)}function ms(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function ys(t){return/^[\s\xa0]*$/.test(t)}var vs,_s=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function ws(t,e){return-1!=t.indexOf(e)}function bs(t,e){return t<e?-1:t>e?1:0}t:{var Cs=ts.navigator;if(Cs){var Ts=Cs.userAgent;if(Ts){vs=Ts;break t}}vs=""}function Es(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function Ss(t){var e={};for(var n in t)e[n]=t[n];return e}var xs="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Is(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<xs.length;o++)n=xs[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function ks(t){return ks[" "](t),t}ks[" "]=es;var As,Rs,Ps=ws(vs,"Opera"),Os=ws(vs,"Trident")||ws(vs,"MSIE"),Ns=ws(vs,"Edge"),Ds=Ns||Os,Ls=ws(vs,"Gecko")&&!(ws(vs.toLowerCase(),"webkit")&&!ws(vs,"Edge"))&&!(ws(vs,"Trident")||ws(vs,"MSIE"))&&!ws(vs,"Edge"),Fs=ws(vs.toLowerCase(),"webkit")&&!ws(vs,"Edge");function Us(){var t=ts.document;return t?t.documentMode:void 0}t:{var Ms="",qs=(Rs=vs,Ls?/rv:([^\);]+)(\)|;)/.exec(Rs):Ns?/Edge\/([\d\.]+)/.exec(Rs):Os?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Rs):Fs?/WebKit\/(\S+)/.exec(Rs):Ps?/(?:Version)[ \/]?(\S+)/.exec(Rs):void 0);if(qs&&(Ms=qs?qs[1]:""),Os){var Vs=Us();if(null!=Vs&&Vs>parseFloat(Ms)){As=String(Vs);break t}}As=Ms}var js={};function Bs(t){return function(t,e){var n=js;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=_s(String(As)).split("."),r=_s(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=bs(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||bs(0==s[2].length,0==a[2].length)||bs(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e})}var Gs=ts.document&&Os&&(Us()||parseInt(As,10))||void 0,zs=!Os||9<=Number(Gs),Hs=Os&&!Bs("9"),Zs=function(){if(!ts.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{ts.addEventListener("test",es,e),ts.removeEventListener("test",es,e)}catch(n){}return t}();function Ws(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function Ks(t,e){if(Ws.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(Ls){t:{try{ks(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Qs[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}Ws.prototype.b=function(){this.defaultPrevented=!0},hs(Ks,Ws);var Qs={2:"touch",3:"pen",4:"mouse"};Ks.prototype.b=function(){Ks.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Hs)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var Ys="closure_listenable_"+(1e6*Math.random()|0),$s=0;function Js(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++$s,this.Y=this.Z=!1}function Xs(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function ta(t){this.src=t,this.a={},this.b=0}function ea(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=fs(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(Xs(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function na(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}ta.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=na(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new Js(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var ra="closure_lm_"+(1e6*Math.random()|0),ia={};function oa(t,e,n,r,i){if(r&&r.once)return aa(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)oa(t,e[o],n,r,i);return null}return n=ga(n),t&&t[Ys]?t.va(e,n,rs(r)?!!r.capture:!!r,i):sa(t,e,n,!1,r,i)}function sa(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=rs(i)?!!i.capture:!!i;if(s&&!zs)return null;var a=fa(t);if(a||(t[ra]=a=new ta(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=da,e=zs?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Zs||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(la(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function aa(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)aa(t,e[o],n,r,i);return null}return n=ga(n),t&&t[Ys]?t.wa(e,n,rs(r)?!!r.capture:!!r,i):sa(t,e,n,!0,r,i)}function ua(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)ua(t,e[o],n,r,i);else r=rs(r)?!!r.capture:!!r,n=ga(n),t&&t[Ys]?(t=t.c,(e=String(e).toString())in t.a&&-1<(n=na(o=t.a[e],n,r,i))&&(Xs(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=fa(t))&&(e=t.a[e.toString()],t=-1,e&&(t=na(e,n,r,i)),(n=-1<t?e[t]:null)&&ca(n))}function ca(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[Ys])ea(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(la(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=fa(e))?(ea(n,t),0==n.b&&(n.src=null,e[ra]=null)):Xs(t)}}}function la(t){return t in ia?ia[t]:ia[t]="on"+t}function ha(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&ca(t),n.call(r,e)}function da(t,e){if(t.Y)return!0;if(!zs){if(!e)t:{e=["window","event"];for(var n=ts,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return ha(t,e=new Ks(e,this))}return ha(t,new Ks(e,this))}function fa(t){return(t=t[ra])instanceof ta?t:null}var pa="__closure_events_fn_"+(1e9*Math.random()>>>0);function ga(t){return"function"==typeof t?t:(t[pa]||(t[pa]=function(e){return t.handleEvent(e)}),t[pa])}function ma(){ds.call(this),this.c=new ta(this),this.J=this,this.C=null}function ya(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new Ws(e,t);else if(e instanceof Ws)e.target=e.target||t;else{var i=e;Is(e=new Ws(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=va(s,r,!0,e)&&i}if(i=va(s=e.a=t,r,!0,e)&&i,i=va(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=va(s=e.a=n[o],r,!1,e)&&i}function va(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var a=s.listener,u=s.ca||s.src;s.Z&&ea(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}hs(ma,ds),ma.prototype[Ys]=!0,($o=ma.prototype).addEventListener=function(t,e,n,r){oa(this,t,e,n,r)},$o.removeEventListener=function(t,e,n,r){ua(this,t,e,n,r)},$o.G=function(){if(ma.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Xs(n[r]);delete e.a[t],e.b--}}this.C=null},$o.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},$o.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var _a=ts.JSON.stringify;function wa(){this.b=this.a=null}var ba,Ca=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,this.a=(t=this.a).next,t.next=null):t=this.c(),t},t}())(function(){return new Ea},function(t){t.reset()});function Ta(){var t=ka,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Ea(){this.next=this.b=this.a=null}function Sa(t){ts.setTimeout(function(){throw t},0)}function xa(t,e){ba||function(){var t=ts.Promise.resolve(void 0);ba=function(){t.then(Aa)}}(),Ia||(ba(),Ia=!0),ka.add(t,e)}wa.prototype.add=function(t,e){var n=Ca.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Ea.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Ea.prototype.reset=function(){this.next=this.b=this.a=null};var Ia=!1,ka=new wa;function Aa(){for(var t;t=Ta();){try{t.a.call(t.b)}catch(n){Sa(n)}var e=Ca;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}Ia=!1}function Ra(t,e){ma.call(this),this.b=t||1,this.a=e||ts,this.f=us(this.Za,this),this.g=ls()}function Pa(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function Oa(t,e,n){if("function"==typeof t)n&&(t=us(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=us(t.handleEvent,t)}return 2147483647<Number(e)?-1:ts.setTimeout(t,e||0)}function Na(t){t.a=Oa(function(){t.a=null,t.c&&(t.c=!1,Na(t))},t.h);var e=t.b;t.b=null,t.g.apply(null,e)}hs(Ra,ma),($o=Ra.prototype).aa=!1,$o.M=null,$o.Za=function(){if(this.aa){var t=ls()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),ya(this,"tick"),this.aa&&(Pa(this),this.start()))}},$o.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=ls())},$o.G=function(){Ra.X.G.call(this),Pa(this),delete this.a};var Da=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}Qo(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:Na(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(ts.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(ds);function La(t){ds.call(this),this.b=t,this.a={}}hs(La,ds);var Fa=[];function Ua(t,e,n,r){Array.isArray(n)||(n&&(Fa[0]=n.toString()),n=Fa);for(var i=0;i<n.length;i++){var o=oa(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Ma(t){Es(t.a,function(t,e){this.a.hasOwnProperty(e)&&ca(t)},t),t.a={}}function qa(){this.a=!0}function Va(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return _a(n)}catch(a){return e}}(t,n)+(r?" "+r:"")})}La.prototype.G=function(){La.X.G.call(this),Ma(this)},La.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},qa.prototype.info=function(){};var ja={},Ba=null;function Ga(){return Ba=Ba||new ma}function za(t){Ws.call(this,ja.Fa,t)}function Ha(t){var e=Ga();ya(e,new za(e,t))}function Za(t,e){Ws.call(this,ja.STAT_EVENT,t),this.stat=e}function Wa(t){var e=Ga();ya(e,new Za(e,t))}function Ka(t){Ws.call(this,ja.Ga,t)}function Qa(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return ts.setTimeout(function(){t()},e)}ja.Fa="serverreachability",hs(za,Ws),ja.STAT_EVENT="statevent",hs(Za,Ws),ja.Ga="timingevent",hs(Ka,Ws);var Ya={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},$a={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function Ja(){}function Xa(){}Ja.prototype.a=null;var tu,eu={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function nu(){Ws.call(this,"d")}function ru(){Ws.call(this,"c")}function iu(){}function ou(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new La(this),this.P=su,this.R=new Ra(t=Ds?125:void 0),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}hs(nu,Ws),hs(ru,Ws),hs(iu,Ja),tu=new iu;var su=45e3,au={},uu={};function cu(t,e,n){t.H=1,t.i=Pu(Su(e)),t.j=n,t.I=!0,lu(t,null)}function lu(t,e){t.u=ls(),fu(t),t.l=Su(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),zu(n.b,"t",r),t.D=0,t.a=Mc(t.g,t.g.C?e:null),0<t.O&&(t.F=new Da(us(t.Ca,t,t.a),t.O)),Ua(t.J,t.a,"readystatechange",t.Xa),e=t.B?Ss(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),Ha(1),function(t,e,n,r,i,o){t.info(function(){if(t.a)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s})}(t.c,t.m,t.l,t.f,t.S,t.j)}function hu(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=du(t,n);if(i==uu){4==e&&(t.h=4,Wa(14),r=!1),Va(t.c,t.f,null,"[Incomplete Response]");break}if(i==au){t.h=4,Wa(15),Va(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}Va(t.c,t.f,i,null),vu(t,i)}4==e&&0==n.length&&(t.h=1,Wa(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Rc(e),e.F=!0,Wa(11))):(Va(t.c,t.f,n,"[Invalid Chunked Response]"),yu(t),mu(t))}function du(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?uu:(n=Number(e.substring(n,r)),isNaN(n)?au:(r+=1)+n>e.length?uu:(e=e.substr(r,n),t.D=r+n,e))}function fu(t){t.T=ls()+t.P,pu(t,t.P)}function pu(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=Qa(us(t.Va,t),e)}function gu(t){t.o&&(ts.clearTimeout(t.o),t.o=null)}function mu(t){0==t.g.v||t.A||Nc(t.g,t)}function yu(t){gu(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,Pa(t.R),Ma(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function vu(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||$u(n.b,t)))if(n.I=t.N,!t.C&&$u(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(w_){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;Oc(n),bc(n)}Ac(n),Wa(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=Qa(us(n.Sa,n),6e3));if(1>=Yu(n.b)&&n.ea){try{n.ea()}catch(w_){}n.ea=void 0}}else Lc(n,11)}else if((t.C||n.a==t)&&Oc(n),!ys(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(n.P=(i=e[r])[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var a=i[5];if(null!=a&&"number"==typeof a&&0<a){var u=1.5*a;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&(ws(l,"spdy")||ws(l,"quic")||ws(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(Ju(h,h.b),h.b=null))}if(u.A){var d=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;d&&(u.na=d,Ru(u.B,u.A,d))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=ls()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var f=t;if((u=n).la=Uc(u,u.C?u.ga:null,u.fa),f.C){Xu(u.b,f);var p=f,g=u.D;g&&p.setTimeout(g),p.o&&(gu(p),fu(p)),u.a=f}else kc(u);0<n.g.length&&Ec(n)}else"stop"!=i[0]&&"close"!=i[0]||Lc(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?Lc(n,7):wc(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);Ha(4)}catch(w_){}}function _u(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(ns(t)||"string"==typeof t)ps(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(ns(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(ns(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function wu(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof wu)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function bu(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Cu(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Cu(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Cu(t,e){return Object.prototype.hasOwnProperty.call(t,e)}($o=ou.prototype).setTimeout=function(t){this.P=t},$o.Xa=function(t){t=t.target;var e=this.F;e&&3==mc(t)?e.f():this.Ca(t)},$o.Ca=function(t){try{if(t==this.a)t:{var e=mc(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!Ds&&!this.a.$())){this.A||4!=e||7==n||Ha(8==n||0>=r?3:2),gu(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s})}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ys(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.h=3,Wa(12),yu(this),mu(this);break t}Va(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,vu(this,u)}this.I?(hu(this,e,o),Ds&&this.b&&3==e&&(Ua(this.J,this.R,"tick",this.Wa),this.R.start())):(Va(this.c,this.f,o,null),vu(this,o)),4==e&&yu(this),this.b&&!this.A&&(4==e?Nc(this.g,this):(this.b=!1,fu(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,Wa(12)):(this.h=0,Wa(13)),yu(this),mu(this)}}}catch(c){}},$o.Wa=function(){if(this.a){var t=mc(this.a),e=this.a.$();this.D<e.length&&(gu(this),hu(this,t,e),this.b&&4!=t&&fu(this))}},$o.cancel=function(){this.A=!0,yu(this)},$o.Va=function(){this.o=null;var t=ls();0<=t-this.T?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.c,this.l),2!=this.H&&(Ha(3),Wa(17)),yu(this),this.h=2,mu(this)):pu(this,this.T-t)},($o=wu.prototype).K=function(){bu(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},$o.L=function(){return bu(this),this.a.concat()},$o.get=function(t,e){return Cu(this.b,t)?this.b[t]:e},$o.set=function(t,e){Cu(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},$o.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Tu=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Eu(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Eu){this.a=void 0!==e?e:t.a,xu(this,t.f),this.j=t.j,Iu(this,t.c),ku(this,t.h),this.g=t.g,e=t.b;var n=new Vu;n.c=e.c,e.a&&(n.a=new wu(e.a),n.b=e.b),Au(this,n),this.i=t.i}else t&&(n=String(t).match(Tu))?(this.a=!!e,xu(this,n[1]||"",!0),this.j=Ou(n[2]||""),Iu(this,n[3]||"",!0),ku(this,n[4]),this.g=Ou(n[5]||"",!0),Au(this,n[6]||"",!0),this.i=Ou(n[7]||"")):(this.a=!!e,this.b=new Vu(null,this.a))}function Su(t){return new Eu(t)}function xu(t,e,n){t.f=n?Ou(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Iu(t,e,n){t.c=n?Ou(e,!0):e}function ku(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Au(t,e,n){e instanceof Vu?(t.b=e,function(t,e){e&&!t.f&&(ju(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Bu(this,e),zu(this,n,t))},t)),t.f=e}(t.b,t.a)):(n||(e=Nu(e,Mu)),t.b=new Vu(e,t.a))}function Ru(t,e,n){t.b.set(e,n)}function Pu(t){return Ru(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^ls()).toString(36)),t}function Ou(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Nu(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Du),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Du(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Eu.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Nu(e,Lu,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(Nu(e,Lu,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(Nu(n,"/"==n.charAt(0)?Uu:Fu,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",Nu(n,qu)),t.join("")};var Lu=/[#\/\?@]/g,Fu=/[#\?:]/g,Uu=/[#\?]/g,Mu=/[#\?@]/g,qu=/#/g;function Vu(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function ju(t){t.a||(t.a=new wu,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function Bu(t,e){ju(t),e=Hu(t,e),Cu(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Cu((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&bu(t)))}function Gu(t,e){return ju(t),e=Hu(t,e),Cu(t.a.b,e)}function zu(t,e,n){Bu(t,e),0<n.length&&(t.c=null,t.a.set(Hu(t,e),ms(n)),t.b+=n.length)}function Hu(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}($o=Vu.prototype).add=function(t,e){ju(this),this.c=null,t=Hu(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},$o.forEach=function(t,e){ju(this),this.a.forEach(function(n,r){ps(n,function(n){t.call(e,n,r,this)},this)},this)},$o.L=function(){ju(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},$o.K=function(t){ju(this);var e=[];if("string"==typeof t)Gu(this,t)&&(e=gs(e,this.a.get(Hu(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=gs(e,t[n])}return e},$o.set=function(t,e){return ju(this),this.c=null,Gu(this,t=Hu(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},$o.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},$o.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var Zu=function(){return function(t,e){this.b=t,this.a=e}}();function Wu(t){this.g=t||Ku,t=ts.PerformanceNavigationTiming?0<(t=ts.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(ts.ia&&ts.ia.ya&&ts.ia.ya()&&ts.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var Ku=10;function Qu(t){return!!t.b||!!t.a&&t.a.size>=t.f}function Yu(t){return t.b?1:t.a?t.a.size:0}function $u(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function Ju(t,e){t.a?t.a.add(e):t.b=e}function Xu(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function tc(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=Yo(t.a.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.s)}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return ms(t.c)}function ec(){}function nc(){this.a=new ec}function rc(t,e,n){var r=n||"";try{_u(t,function(t,n){var i=t;rs(t)&&(i=_a(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(rw){throw e.push(r+"type="+encodeURIComponent("_badmap")),rw}}function ic(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}Wu.prototype.cancel=function(){var t,e;if(this.c=tc(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=Yo(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},ec.prototype.stringify=function(t){return ts.JSON.stringify(t,void 0)},ec.prototype.parse=function(t){return ts.JSON.parse(t,void 0)};var oc=ts.JSON.parse;function sc(t){ma.call(this),this.headers=new wu,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=ac,this.D=this.F=!1}hs(sc,ma);var ac="",uc=/^https?$/i,cc=["POST","PUT"];function lc(t){return"content-type"==t.toLowerCase()}function hc(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,dc(t),pc(t)}function dc(t){t.u||(t.u=!0,ya(t,"complete"),ya(t,"error"))}function fc(t){if(t.b&&void 0!==Xo&&(!t.s[1]||4!=mc(t)||2!=t.W()))if(t.l&&4==mc(t))Oa(t.za,0,t);else if(ya(t,"readystatechange"),4==mc(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(Tu)[1]||null;if(!o&&ts.self&&ts.self.location){var s=ts.self.location.protocol;o=s.substr(0,s.length-1)}i=!uc.test(o?o.toLowerCase():"")}e=i}if(e)ya(t,"complete"),ya(t,"success");else{t.h=6;try{var a=2<mc(t)?t.a.statusText:""}catch(n){a=""}t.f=a+" ["+t.W()+"]",dc(t)}}finally{pc(t)}}}function pc(t,e){if(t.a){gc(t);var n=t.a,r=t.s[0]?es:null;t.a=null,t.s=null,e||ya(t,"ready");try{n.onreadystatechange=r}catch(rw){}}}function gc(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(ts.clearTimeout(t.m),t.m=null)}function mc(t){return t.a?t.a.readyState:0}function yc(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return Es(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Ru(t,e,n))}function vc(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function _c(t){this.pa=0,this.g=[],this.c=new qa,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=vc("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=vc("baseRetryDelayMs",5e3,t),this.Ra=vc("retryDelaySeedMs",1e4,t),this.Ma=vc("forwardChannelMaxRetries",2,t),this.ma=vc("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new Wu(t&&t.concurrentRequestLimit),this.ka=new nc,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function wc(t){if(Cc(t),3==t.v){var e=t.R++,n=Su(t.B);Ru(n,"SID",t.J),Ru(n,"RID",e),Ru(n,"TYPE","terminate"),xc(t,n),(e=new ou(t,t.c,e,void 0)).H=2,e.i=Pu(Su(n)),n=!1,ts.navigator&&ts.navigator.sendBeacon&&(n=ts.navigator.sendBeacon(e.i.toString(),"")),!n&&ts.Image&&((new Image).src=e.i,n=!0),n||(e.a=Mc(e.g,null),e.a.ba(e.i)),e.u=ls(),fu(e)}Fc(t)}function bc(t){t.a&&(Rc(t),t.a.cancel(),t.a=null)}function Cc(t){bc(t),t.j&&(ts.clearTimeout(t.j),t.j=null),Oc(t),t.b.cancel(),t.h&&("number"==typeof t.h&&ts.clearTimeout(t.h),t.h=null)}function Tc(t,e){t.g.push(new Zu(t.Oa++,e)),3==t.v&&Ec(t)}function Ec(t){Qu(t.b)||t.h||(t.h=!0,xa(t.Ba,t),t.u=0)}function Sc(t,e){var n;n=e?e.f:t.R++;var r=Su(t.B);Ru(r,"SID",t.J),Ru(r,"RID",n),Ru(r,"AID",t.P),xc(t,r),t.i&&t.l&&yc(r,t.i,t.l),n=new ou(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=Ic(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),Ju(t.b,n),cu(n,r,e)}function xc(t,e){t.f&&_u({},function(t,n){Ru(e,n,t)})}function Ic(t,e,n){n=Math.min(t.g.length,n);var r=t.f?us(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].b)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),a=!1;else try{rc(l,s,"req"+c+"_")}catch(gl){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function kc(t){t.a||t.j||(t.T=1,xa(t.Aa,t),t.o=0)}function Ac(t){return!(t.a||t.j||3<=t.o||(t.T++,t.j=Qa(us(t.Aa,t),Dc(t,t.o)),t.o++,0))}function Rc(t){null!=t.s&&(ts.clearTimeout(t.s),t.s=null)}function Pc(t){t.a=new ou(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=Su(t.la);Ru(e,"RID","rpc"),Ru(e,"SID",t.J),Ru(e,"CI",t.H?"0":"1"),Ru(e,"AID",t.P),xc(t,e),Ru(e,"TYPE","xmlhttp"),t.i&&t.l&&yc(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=Pu(Su(e)),n.j=null,n.I=!0,lu(n,t)}function Oc(t){null!=t.m&&(ts.clearTimeout(t.m),t.m=null)}function Nc(t,e){var n=null;if(t.a==e){Oc(t),Rc(t),t.a=null;var r=2}else{if(!$u(t.b,e))return;n=e.s,Xu(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=ls()-e.u;var i=t.u;ya(r=Ga(),new Ka(r,n,e,i)),Ec(t)}else kc(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(Yu(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=Qa(us(t.Ba,t,e),Dc(t,t.u)),t.u++,0)))}(t,e)||2==r&&Ac(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:Lc(t,5);break;case 4:Lc(t,10);break;case 3:Lc(t,6);break;default:Lc(t,2)}}function Dc(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function Lc(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=us(t.Ya,t);n||(n=new Eu("//www.google.com/images/cleardot.gif"),ts.location&&"http"==ts.location.protocol||xu(n,"https"),Pu(n)),function(t,e){var n=new qa;if(ts.Image){var r=new Image;r.onload=cs(ic,n,r,"TestLoadImage: loaded",!0,e),r.onerror=cs(ic,n,r,"TestLoadImage: error",!1,e),r.onabort=cs(ic,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=cs(ic,n,r,"TestLoadImage: timeout",!1,e),ts.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else Wa(2);t.v=0,t.f&&t.f.ra(e),Fc(t),Cc(t)}function Fc(t){t.v=0,t.I=-1,t.f&&(0==tc(t.b).length&&0==t.g.length||(t.b.c.length=0,ms(t.g),t.g.length=0),t.f.qa())}function Uc(t,e,n){var r=function(t){return t instanceof Eu?Su(t):new Eu(t,void 0)}(n);if(""!=r.c)e&&Iu(r,e+"."+r.c),ku(r,r.h);else{var i=ts.location;r=function(t,e,n,r){var i=new Eu(null,void 0);return t&&xu(i,t),e&&Iu(i,e),n&&ku(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&Es(t.V,function(t,e){Ru(r,e,t)}),n=t.na,(e=t.A)&&n&&Ru(r,e,n),Ru(r,"VER",t.ha),xc(t,r),r}function Mc(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new sc(t.Na)).F=t.C,e}function qc(){}function Vc(){if(Os&&!(10<=Number(Gs)))throw Error("Environmental error: no available transport.")}function jc(t,e){ma.call(this),this.a=new _c(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!ys(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!ys(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new zc(this)}function Bc(t){nu.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Gc(){ru.call(this),this.status=1}function zc(t){this.a=t}($o=sc.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(t){var e;return(e=t.a)||(e=t.a={}),e}(this.H?this.H:tu),this.a.onreadystatechange=us(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(o){return void hc(this,o)}t=n||"";var i=new wu(this.headers);r&&_u(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=lc,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=ts.FormData&&t instanceof ts.FormData,!(0<=fs(cc,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{gc(this),0<this.o&&((this.D=function(t){return Os&&Bs(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=us(this.xa,this)):this.m=Oa(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){hc(this,o)}},$o.xa=function(){void 0!==Xo&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,ya(this,"timeout"),this.abort(8))},$o.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,ya(this,"complete"),ya(this,"abort"),pc(this))},$o.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),pc(this,!0)),sc.X.G.call(this)},$o.za=function(){this.j||(this.A||this.l||this.g?fc(this):this.Ua())},$o.Ua=function(){fc(this)},$o.W=function(){try{return 2<mc(this)?this.a.status:-1}catch(Rs){return-1}},$o.$=function(){try{return this.a?this.a.responseText:""}catch(Rs){return""}},$o.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),oc(e)}},$o.ua=function(){return this.h},$o.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},($o=_c.prototype).ha=8,$o.v=1,$o.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new ou(this,this.c,t,void 0),r=this.l;if(this.O&&(r?Is(r=Ss(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Ic(this,n,e),Ru(i=Su(this.B),"RID",t),Ru(i,"CVER",22),this.A&&Ru(i,"X-HTTP-Session-Id",this.A),xc(this,i),this.i&&r&&yc(i,this.i,r),Ju(this.b,n),this.Ia&&Ru(i,"TYPE","init"),this.da?(Ru(i,"$req",e),Ru(i,"SID","null"),n.U=!0,cu(n,i,null)):cu(n,i,e),this.v=2}}else 3==this.v&&(t?Sc(this,t):0==this.g.length||Qu(this.b)||Sc(this))},$o.Aa=function(){if(this.j=null,Pc(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=Qa(us(this.Ta,this),t)}},$o.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,Wa(10),bc(this),Pc(this))},$o.Sa=function(){null!=this.m&&(this.m=null,bc(this),Ac(this),Wa(19))},$o.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),Wa(2)):(this.c.info("Failed to ping google.com"),Wa(1))},($o=qc.prototype).ta=function(){},$o.sa=function(){},$o.ra=function(){},$o.qa=function(){},$o.Ja=function(){},Vc.prototype.a=function(t,e){return new jc(t,e)},hs(jc,ma),jc.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;Wa(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=Uc(t,null,t.fa),Ec(t)},jc.prototype.close=function(){wc(this.a)},jc.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,Tc(this.a,e)}else this.l?((e={}).__data__=_a(t),Tc(this.a,e)):Tc(this.a,t)},jc.prototype.G=function(){this.a.f=null,delete this.f,wc(this.a),delete this.a,jc.X.G.call(this)},hs(Bc,nu),hs(Gc,ru),hs(zc,qc),zc.prototype.ta=function(){ya(this.a,"a")},zc.prototype.sa=function(t){ya(this.a,new Bc(t))},zc.prototype.ra=function(t){ya(this.a,new Gc(t))},zc.prototype.qa=function(){ya(this.a,"b")},Vc.prototype.createWebChannel=Vc.prototype.a,jc.prototype.send=jc.prototype.h,jc.prototype.open=jc.prototype.g,jc.prototype.close=jc.prototype.close,Ya.NO_ERROR=0,Ya.TIMEOUT=8,Ya.HTTP_ERROR=6,$a.COMPLETE="complete",Xa.EventType=eu,eu.OPEN="a",eu.CLOSE="b",eu.ERROR="c",eu.MESSAGE="d",ma.prototype.listen=ma.prototype.va,sc.prototype.listenOnce=sc.prototype.wa,sc.prototype.getLastError=sc.prototype.Qa,sc.prototype.getLastErrorCode=sc.prototype.ua,sc.prototype.getStatus=sc.prototype.W,sc.prototype.getResponseJson=sc.prototype.Pa,sc.prototype.getResponseText=sc.prototype.$,sc.prototype.send=sc.prototype.ba;var Hc=Ya,Zc=$a,Wc=ja,Kc=Xa,Qc=sc,Yc=n(4762),$c=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();$c.o=-1;var Jc={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Xc=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return(0,Yc.ZT)(e,t),e}(Error),tl=new Ko.Yd("@firebase/firestore");function el(){return tl.logLevel}function nl(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(tl.logLevel<=Ko.in.DEBUG){var r=e.map(ol);tl.debug.apply(tl,(0,Yc.ev)(["Firestore (8.5.0): "+t],r))}}function rl(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(tl.logLevel<=Ko.in.ERROR){var r=e.map(ol);tl.error.apply(tl,(0,Yc.ev)(["Firestore (8.5.0): "+t],r))}}function il(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(tl.logLevel<=Ko.in.WARN){var r=e.map(ol);tl.warn.apply(tl,(0,Yc.ev)(["Firestore (8.5.0): "+t],r))}}function ol(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(rw){return t}}function sl(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.5.0) INTERNAL ASSERTION FAILED: "+t;throw rl(e),new Error(e)}function al(t,e){t||sl()}function ul(t,e){return t}function cl(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var ll=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=cl(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function hl(t,e){return t<e?-1:t>e?1:0}function dl(t,e,n){return t.length===e.length&&t.every(function(t,r){return n(t,e[r])})}function fl(t){return t+"\0"}var pl=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Xc(Jc.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Xc(Jc.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Xc(Jc.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Xc(Jc.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?hl(this.nanoseconds,t.nanoseconds):hl(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),gl=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new pl(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();function ml(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function yl(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function vl(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var _l=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&sl(),void 0===n?n=t.length-e:n>t.length-e&&sl(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),wl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Yc.ZT)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new Xc(Jc.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter(function(t){return t.length>0}))}return new e(r)},e.emptyPath=function(){return new e([])},e}(_l),bl=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Cl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Yc.ZT)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return bl.test(t)},e.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Xc(Jc.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new Xc(Jc.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Xc(Jc.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new Xc(Jc.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(_l),Tl=function(){function t(t){this.fields=t,t.sort(Cl.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return dl(this.fields,t.fields,function(t,e){return t.isEqual(e)})},t}(),El=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.binaryString)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return hl(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();El.EMPTY_BYTE_STRING=new El("");var Sl=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xl(t){if(al(!!t),"string"==typeof t){var e=0,n=Sl.exec(t);if(al(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Il(t.seconds),nanos:Il(t.nanos)}}function Il(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function kl(t){return"string"==typeof t?El.fromBase64String(t):El.fromUint8Array(t)}function Al(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Rl(t){var e=t.mapValue.fields.__previous_value__;return Al(e)?Rl(e):e}function Pl(t){var e=xl(t.mapValue.fields.__local_write_time__.timestampValue);return new pl(e.seconds,e.nanos)}function Ol(t){return null==t}function Nl(t){return 0===t&&1/t==-1/0}function Dl(t){return"number"==typeof t&&Number.isInteger(t)&&!Nl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var Ll=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(wl.fromString(e))},t.fromName=function(e){return new t(wl.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===wl.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return wl.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new wl(e.slice()))},t}();function Fl(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Al(t)?4:10:sl()}function Ul(t,e){var n=Fl(t);if(n!==Fl(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Pl(t).isEqual(Pl(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=xl(t.timestampValue),r=xl(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return kl(t.bytesValue).isEqual(kl(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Il(t.geoPointValue.latitude)===Il(e.geoPointValue.latitude)&&Il(t.geoPointValue.longitude)===Il(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Il(t.integerValue)===Il(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=Il(t.doubleValue),r=Il(e.doubleValue);return n===r?Nl(n)===Nl(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return dl(t.arrayValue.values||[],e.arrayValue.values||[],Ul);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(ml(n)!==ml(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Ul(n[i],r[i])))return!1;return!0}(t,e);default:return sl()}}function Ml(t,e){return void 0!==(t.values||[]).find(function(t){return Ul(t,e)})}function ql(t,e){var n=Fl(t),r=Fl(e);if(n!==r)return hl(n,r);switch(n){case 0:return 0;case 1:return hl(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=Il(t.integerValue||t.doubleValue),r=Il(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Vl(t.timestampValue,e.timestampValue);case 4:return Vl(Pl(t),Pl(e));case 5:return hl(t.stringValue,e.stringValue);case 6:return function(t,e){var n=kl(t),r=kl(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=hl(n[i],r[i]);if(0!==o)return o}return hl(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=hl(Il(t.latitude),Il(e.latitude));return 0!==n?n:hl(Il(t.longitude),Il(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=ql(n[i],r[i]);if(o)return o}return hl(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=hl(r[s],o[s]);if(0!==a)return a;var u=ql(n[r[s]],i[o[s]]);if(0!==u)return u}return hl(r.length,o.length)}(t.mapValue,e.mapValue);default:throw sl()}}function Vl(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return hl(t,e);var n=xl(t),r=xl(e),i=hl(n.seconds,r.seconds);return 0!==i?i:hl(n.nanos,r.nanos)}function jl(t){return Bl(t)}function Bl(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=xl(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?kl(t.bytesValue).toBase64():"referenceValue"in t?Ll.fromName(t.referenceValue).toString():"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=Bl(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+Bl(t.fields[o])}return e+"}"}(t.mapValue):sl();var e}function Gl(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function zl(t){return!!t&&"integerValue"in t}function Hl(t){return!!t&&"arrayValue"in t}function Zl(t){return!!t&&"nullValue"in t}function Wl(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Kl(t){return!!t&&"mapValue"in t}var Ql=function(){function t(t){this.overlayMap=new Map,this.partialValue=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(e){return t.extractNestedValue(this.buildProto(),e)},t.prototype.toProto=function(){return this.field(Cl.emptyPath())},t.prototype.set=function(t,e){this.setOverlay(t,e)},t.prototype.setAll=function(t){var e=this;t.forEach(function(t,n){t?e.set(n,t):e.delete(n)})},t.prototype.delete=function(t){this.setOverlay(t,null)},t.prototype.isEqual=function(t){return Ul(this.buildProto(),t.buildProto())},t.prototype.setOverlay=function(t,e){for(var n=this.overlayMap,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===Fl(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.lastSegment(),e)},t.prototype.applyOverlay=function(e,n){var r=this,i=!1,o=t.extractNestedValue(this.partialValue,e),s=Kl(o)?Object.assign({},o.mapValue.fields):{};return n.forEach(function(t,n){if(t instanceof Map){var o=r.applyOverlay(e.child(n),t);null!=o&&(s[n]=o,i=!0)}else null!==t?(s[n]=t,i=!0):s.hasOwnProperty(n)&&(delete s[n],i=!0)}),i?{mapValue:{fields:s}}:null},t.prototype.buildProto=function(){var t=this.applyOverlay(Cl.emptyPath(),this.overlayMap);return null!=t&&(this.partialValue=t,this.overlayMap.clear()),this.partialValue},t.extractNestedValue=function(t,e){if(e.isEmpty())return t;for(var n=t,r=0;r<e.length-1;++r){if(!n.mapValue.fields)return null;if(!Kl(n=n.mapValue.fields[e.get(r)]))return null}return(n=(n.mapValue.fields||{})[e.lastSegment()])||null},t.prototype.clone=function(){return new t(this.buildProto())},t}();function Yl(t){var e=[];return yl(t.fields||{},function(t,n){var r=new Cl([t]);if(Kl(n)){var i=Yl(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++)e.push(r.child(s[o]))}else e.push(r)}),new Tl(e)}var $l=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,gl.min(),Ql.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,Ql.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,Ql.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=Ql.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=Ql.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.toProto())+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),Jl=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.h=null};function Xl(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new Jl(t,e,n,r,i,o,s)}function th(t){var e=ul(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(function(t){return function(t){return t.field.canonicalString()+t.op.toString()+jl(t.value)}(t)}).join(","),n+="|ob:",n+=e.orderBy.map(function(t){return function(t){return t.field.canonicalString()+t.dir}(t)}).join(","),Ol(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=fh(e.startAt)),e.endAt&&(n+="|ub:",n+=fh(e.endAt)),e.h=n}return e.h}function eh(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!gh(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!Ul(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!yh(t.startAt,e.startAt)&&yh(t.endAt,e.endAt)}function nh(t){return Ll.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var rh=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return(0,Yc.ZT)(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new ih(t,n,r):"array-contains"===n?new uh(t,r):"in"===n?new ch(t,r):"not-in"===n?new lh(t,r):"array-contains-any"===n?new hh(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new oh(t,n):new sh(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(ql(e,this.value)):null!==e&&Fl(this.value)===Fl(e)&&this.m(ql(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return sl()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),ih=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=Ll.fromName(r.referenceValue),i}return(0,Yc.ZT)(e,t),e.prototype.matches=function(t){var e=Ll.comparator(t.key,this.key);return this.m(e)},e}(rh),oh=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=ah(0,n),r}return(0,Yc.ZT)(e,t),e.prototype.matches=function(t){return this.keys.some(function(e){return e.isEqual(t.key)})},e}(rh),sh=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=ah(0,n),r}return(0,Yc.ZT)(e,t),e.prototype.matches=function(t){return!this.keys.some(function(e){return e.isEqual(t.key)})},e}(rh);function ah(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(t){return Ll.fromName(t.referenceValue)})}var uh=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return(0,Yc.ZT)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return Hl(e)&&Ml(e.arrayValue,this.value)},e}(rh),ch=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return(0,Yc.ZT)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&Ml(this.value.arrayValue,e)},e}(rh),lh=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return(0,Yc.ZT)(e,t),e.prototype.matches=function(t){if(Ml(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!Ml(this.value.arrayValue,e)},e}(rh),hh=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return(0,Yc.ZT)(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!Hl(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return Ml(e.value.arrayValue,t)})},e}(rh),dh=function(t,e){this.position=t,this.before=e};function fh(t){return(t.before?"b":"a")+":"+t.position.map(function(t){return jl(t)}).join(",")}var ph=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function gh(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function mh(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.isKeyField()?Ll.comparator(Ll.fromName(s.referenceValue),n.key):ql(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function yh(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Ul(t.position[n],e.position[n]))return!1;return!0}var vh=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.p=null,this.T=null};function _h(t,e,n,r,i,o,s,a){return new vh(t,e,n,r,i,o,s,a)}function wh(t){return new vh(t)}function bh(t){return!Ol(t.limit)&&"F"===t.limitType}function Ch(t){return!Ol(t.limit)&&"L"===t.limitType}function Th(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Eh(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function Sh(t){return null!==t.collectionGroup}function xh(t){var e=ul(t);if(null===e.p){e.p=[];var n=Eh(e),r=Th(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new ph(n)),e.p.push(new ph(Cl.keyField(),"asc"));else{for(var i=!1,o=0,s=e.explicitOrderBy;o<s.length;o++){var a=s[o];e.p.push(a),a.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new ph(Cl.keyField(),u))}}}return e.p}function Ih(t){var e=ul(t);if(!e.T)if("F"===e.limitType)e.T=Xl(e.path,e.collectionGroup,xh(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=xh(e);r<i.length;r++){var o=i[r];n.push(new ph(o.field,"desc"===o.dir?"asc":"desc"))}var s=e.endAt?new dh(e.endAt.position,!e.endAt.before):null,a=e.startAt?new dh(e.startAt.position,!e.startAt.before):null;e.T=Xl(e.path,e.collectionGroup,n,e.filters,e.limit,s,a)}return e.T}function kh(t,e,n){return new vh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ah(t,e){return eh(Ih(t),Ih(e))&&t.limitType===e.limitType}function Rh(t){return th(Ih(t))+"|lt:"+t.limitType}function Ph(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map(function(t){return(e=t).field.canonicalString()+" "+e.op+" "+jl(e.value);var e}).join(", ")+"]"),Ol(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map(function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)}).join(", ")+"]"),t.startAt&&(e+=", startAt: "+fh(t.startAt)),t.endAt&&(e+=", endAt: "+fh(t.endAt)),"Target("+e+")"}(Ih(t))+"; limitType="+t.limitType+")"}function Oh(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):Ll.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!mh(t.startAt,xh(t),e)||t.endAt&&mh(t.endAt,xh(t),e))}(t,e)}function Nh(t){return function(e,n){for(var r=!1,i=0,o=xh(t);i<o.length;i++){var s=o[i],a=Dh(s,e,n);if(0!==a)return a;r=r||s.field.isKeyField()}return 0}}function Dh(t,e,n){var r=t.field.isKeyField()?Ll.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?ql(r,i):sl()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return sl()}}function Lh(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Nl(e)?"-0":e}}function Fh(t){return{integerValue:""+t}}function Uh(t,e){return Dl(e)?Fh(e):Lh(t,e)}var Mh=function(){this._=void 0};function qh(t,e,n){return t instanceof Bh?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Gh?zh(t,e):t instanceof Hh?Zh(t,e):function(t,e){var n=jh(t,e),r=Kh(n)+Kh(t.A);return zl(n)&&zl(t.A)?Fh(r):Lh(t.R,r)}(t,e)}function Vh(t,e,n){return t instanceof Gh?zh(t,e):t instanceof Hh?Zh(t,e):n}function jh(t,e){return t instanceof Wh?zl(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var Bh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Yc.ZT)(e,t),e}(Mh),Gh=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return(0,Yc.ZT)(e,t),e}(Mh);function zh(t,e){for(var n=Qh(e),r=function(t){n.some(function(e){return Ul(e,t)})||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Hh=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return(0,Yc.ZT)(e,t),e}(Mh);function Zh(t,e){for(var n=Qh(e),r=function(t){n=n.filter(function(e){return!Ul(e,t)})},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Wh=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return(0,Yc.ZT)(e,t),e}(Mh);function Kh(t){return Il(t.integerValue||t.doubleValue)}function Qh(t){return Hl(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Yh=function(t,e){this.field=t,this.transform=e},$h=function(t,e){this.version=t,this.transformResults=e},Jh=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Xh(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var td=function(){};function ed(t,e,n){t instanceof sd?function(t,e,n){var r=t.value.clone(),i=cd(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof ad?function(t,e,n){if(Xh(t.precondition,e)){var r=cd(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(ud(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function nd(t,e,n){t instanceof sd?function(t,e,n){if(Xh(t.precondition,e)){var r=t.value.clone(),i=ld(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(od(e),r).setHasLocalMutations()}}(t,e,n):t instanceof ad?function(t,e,n){if(Xh(t.precondition,e)){var r=ld(t.fieldTransforms,n,e),i=e.data;i.setAll(ud(t)),i.setAll(r),e.convertToFoundDocument(od(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){Xh(t.precondition,e)&&e.convertToNoDocument(gl.min())}(t,e)}function rd(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e.data.field(o.field),a=jh(o.transform,s||null);null!=a&&(null==n&&(n=Ql.empty()),n.set(o.field,a))}return n||null}function id(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&dl(t,e,function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Gh&&e instanceof Gh||t instanceof Hh&&e instanceof Hh?dl(t.elements,e.elements,Ul):t instanceof Wh&&e instanceof Wh?Ul(t.A,e.A):t instanceof Bh&&e instanceof Bh}(t.transform,e.transform)}(t,e)})}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function od(t){return t.isFoundDocument()?t.version:gl.min()}var sd=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return(0,Yc.ZT)(e,t),e}(td),ad=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.fieldMask=r,s.precondition=i,s.fieldTransforms=o,s.type=1,s}return(0,Yc.ZT)(e,t),e}(td);function ud(t){var e=new Map;return t.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}}),e}function cd(t,e,n){var r=new Map;al(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,Vh(s,a,n[i]))}return r}function ld(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=n.data.field(s.field);r.set(s.field,qh(a,u,e))}return r}var hd,dd,fd=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return(0,Yc.ZT)(e,t),e}(td),pd=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return(0,Yc.ZT)(e,t),e}(td),gd=function(t){this.count=t};function md(t){switch(t){case Jc.OK:return sl();case Jc.CANCELLED:case Jc.UNKNOWN:case Jc.DEADLINE_EXCEEDED:case Jc.RESOURCE_EXHAUSTED:case Jc.INTERNAL:case Jc.UNAVAILABLE:case Jc.UNAUTHENTICATED:return!1;case Jc.INVALID_ARGUMENT:case Jc.NOT_FOUND:case Jc.ALREADY_EXISTS:case Jc.PERMISSION_DENIED:case Jc.FAILED_PRECONDITION:case Jc.ABORTED:case Jc.OUT_OF_RANGE:case Jc.UNIMPLEMENTED:case Jc.DATA_LOSS:return!0;default:return sl()}}function yd(t){if(void 0===t)return rl("GRPC error has no .code"),Jc.UNKNOWN;switch(t){case hd.OK:return Jc.OK;case hd.CANCELLED:return Jc.CANCELLED;case hd.UNKNOWN:return Jc.UNKNOWN;case hd.DEADLINE_EXCEEDED:return Jc.DEADLINE_EXCEEDED;case hd.RESOURCE_EXHAUSTED:return Jc.RESOURCE_EXHAUSTED;case hd.INTERNAL:return Jc.INTERNAL;case hd.UNAVAILABLE:return Jc.UNAVAILABLE;case hd.UNAUTHENTICATED:return Jc.UNAUTHENTICATED;case hd.INVALID_ARGUMENT:return Jc.INVALID_ARGUMENT;case hd.NOT_FOUND:return Jc.NOT_FOUND;case hd.ALREADY_EXISTS:return Jc.ALREADY_EXISTS;case hd.PERMISSION_DENIED:return Jc.PERMISSION_DENIED;case hd.FAILED_PRECONDITION:return Jc.FAILED_PRECONDITION;case hd.ABORTED:return Jc.ABORTED;case hd.OUT_OF_RANGE:return Jc.OUT_OF_RANGE;case hd.UNIMPLEMENTED:return Jc.UNIMPLEMENTED;case hd.DATA_LOSS:return Jc.DATA_LOSS;default:return sl()}}(dd=hd||(hd={}))[dd.OK=0]="OK",dd[dd.CANCELLED=1]="CANCELLED",dd[dd.UNKNOWN=2]="UNKNOWN",dd[dd.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",dd[dd.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",dd[dd.NOT_FOUND=5]="NOT_FOUND",dd[dd.ALREADY_EXISTS=6]="ALREADY_EXISTS",dd[dd.PERMISSION_DENIED=7]="PERMISSION_DENIED",dd[dd.UNAUTHENTICATED=16]="UNAUTHENTICATED",dd[dd.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",dd[dd.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",dd[dd.ABORTED=10]="ABORTED",dd[dd.OUT_OF_RANGE=11]="OUT_OF_RANGE",dd[dd.UNIMPLEMENTED=12]="UNIMPLEMENTED",dd[dd.INTERNAL=13]="INTERNAL",dd[dd.UNAVAILABLE=14]="UNAVAILABLE",dd[dd.DATA_LOSS=15]="DATA_LOSS";var vd=function(){function t(t,e){this.comparator=t,this.root=e||wd.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,wd.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,wd.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal(function(e,n){return t(e,n),!1})},t.prototype.toString=function(){var t=[];return this.inorderTraversal(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new _d(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new _d(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new _d(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new _d(this.root,t,this.comparator,!0)},t}(),_d=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),wd=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw sl();if(this.right.isRed())throw sl();var t=this.left.check();if(t!==this.right.check())throw sl();return t+(this.isRed()?0:1)},t}();wd.EMPTY=null,wd.RED=!0,wd.BLACK=!1,wd.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw sl()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw sl()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw sl()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw sl()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw sl()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new wd(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var bd=function(){function t(t){this.comparator=t,this.data=new vd(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new Cd(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new Cd(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),Cd=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),Td=new vd(Ll.comparator);function Ed(){return Td}var Sd=new vd(Ll.comparator);function xd(){return Sd}var Id=new vd(Ll.comparator);function kd(){return Id}var Ad=new bd(Ll.comparator);function Rd(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Ad,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Pd=new bd(hl);function Od(){return Pd}var Nd=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,Dd.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(gl.min(),r,Od(),Ed(),Rd())},t}(),Dd=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(El.EMPTY_BYTE_STRING,n,Rd(),Rd(),Rd())},t}(),Ld=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},Fd=function(t,e){this.targetId=t,this.V=e},Ud=function(t,e,n,r){void 0===n&&(n=El.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Md=function(){function t(){this.S=0,this.D=jd(),this.C=El.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"O",{get:function(){return this.F},enumerable:!1,configurable:!0}),t.prototype.$=function(t){t.approximateByteSize()>0&&(this.F=!0,this.C=t)},t.prototype.M=function(){var t=Rd(),e=Rd(),n=Rd();return this.D.forEach(function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:sl()}}),new Dd(this.C,this.N,t,e,n)},t.prototype.L=function(){this.F=!1,this.D=jd()},t.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.F=!0,this.N=!0},t}(),qd=function(){function t(t){this.W=t,this.G=new Map,this.H=Ed(),this.J=Vd(),this.Y=new bd(hl)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.tt(r=o[i],t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.$(t.resumeToken);break;case 1:r.K(),r.k||r.L(),r.$(t.resumeToken);break;case 2:r.K(),r.k||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.$(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.$(t.resumeToken));break;default:sl()}})},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach(function(t,r){n.st(r)&&e(r)})},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(nh(i))if(0===n){var o=new Ll(i.path);this.tt(e,o,$l.newNoDocument(o,gl.min()))}else al(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach(function(r,i){var o=e.ot(i);if(o){if(r.current&&nh(o.target)){var s=new Ll(o.target.path);null!==e.H.get(s)||e.at(i,s)||e.tt(i,s,$l.newNoDocument(s,t))}r.O&&(n.set(i,r.M()),r.L())}});var r=Rd();this.J.forEach(function(t,n){var i=!0;n.forEachWhile(function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)}),i&&(r=r.add(t))});var i=new Nd(t,n,this.Y,this.H,r);return this.H=Ed(),this.J=Vd(),this.Y=new bd(hl),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new Md,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new bd(hl),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||nl("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new Md),this.W.getRemoteKeysForTarget(t).forEach(function(n){e.tt(t,n,null)})},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function Vd(){return new vd(Ll.comparator)}function jd(){return new vd(Ll.comparator)}var Bd={asc:"ASCENDING",desc:"DESCENDING"},Gd={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},zd=function(t,e){this.databaseId=t,this.I=e};function Hd(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Zd(t,e){return t.I?e.toBase64():e.toUint8Array()}function Wd(t,e){return Hd(t,e.toTimestamp())}function Kd(t){return al(!!t),gl.fromTimestamp(function(t){var e=xl(t);return new pl(e.seconds,e.nanos)}(t))}function Qd(t,e){return function(t){return new wl(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function Yd(t){var e=wl.fromString(t);return al(bf(e)),e}function $d(t,e){return Qd(t.databaseId,e.path)}function Jd(t,e){var n=Yd(e);if(n.get(1)!==t.databaseId.projectId)throw new Xc(Jc.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Xc(Jc.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ll(nf(n))}function Xd(t,e){return Qd(t.databaseId,e)}function tf(t){var e=Yd(t);return 4===e.length?wl.emptyPath():nf(e)}function ef(t){return new wl(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function nf(t){return al(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function rf(t,e,n){return{name:$d(t,e),fields:n.toProto().mapValue.fields}}function of(t,e,n){var r=Jd(t,e.name),i=Kd(e.updateTime),o=new Ql({mapValue:{fields:e.fields}}),s=$l.newFoundDocument(r,i,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}function sf(t,e){var n;if(e instanceof sd)n={update:rf(t,e.key,e.value)};else if(e instanceof fd)n={delete:$d(t,e.key)};else if(e instanceof ad)n={update:rf(t,e.key,e.data),updateMask:wf(e.fieldMask)};else{if(!(e instanceof pd))return sl();n={verify:$d(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(function(t){return function(t,e){var n=e.transform;if(n instanceof Bh)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Gh)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Hh)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Wh)return{fieldPath:e.field.canonicalString(),increment:n.A};throw sl()}(0,t)})),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Wd(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:sl()}(t,e.precondition)),n}function af(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?Jh.updateTime(Kd(t.updateTime)):void 0!==t.exists?Jh.exists(t.exists):Jh.none()}(e.currentDocument):Jh.none(),r=e.updateTransforms?e.updateTransforms.map(function(e){return function(t,e){var n=null;"setToServerValue"in e?(al("REQUEST_TIME"===e.setToServerValue),n=new Bh):"appendMissingElements"in e?n=new Gh(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new Hh(e.removeAllFromArray.values||[]):"increment"in e?n=new Wh(t,e.increment):sl();var r=Cl.fromServerFormat(e.fieldPath);return new Yh(r,n)}(t,e)}):[];if(e.update){var i=Jd(t,e.update.name),o=new Ql({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){return new Tl((t.fieldPaths||[]).map(function(t){return Cl.fromServerFormat(t)}))}(e.updateMask);return new ad(i,o,s,n,r)}return new sd(i,o,n,r)}if(e.delete){var a=Jd(t,e.delete);return new fd(a,n)}if(e.verify){var u=Jd(t,e.verify);return new pd(u,n)}return sl()}function uf(t,e){return{documents:[Xd(t,e.path)]}}function cf(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Xd(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Xd(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map(function(t){return function(t){if("=="===t.op){if(Wl(t.value))return{unaryFilter:{field:mf(t.field),op:"IS_NAN"}};if(Zl(t.value))return{unaryFilter:{field:mf(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Wl(t.value))return{unaryFilter:{field:mf(t.field),op:"IS_NOT_NAN"}};if(Zl(t.value))return{unaryFilter:{field:mf(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:mf(t.field),op:gf(t.op),value:t.value}}}(t)});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map(function(t){return function(t){return{field:mf(t.field),direction:pf(t.dir)}}(t)})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.I||Ol(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=df(e.startAt)),e.endAt&&(n.structuredQuery.endAt=df(e.endAt)),n}function lf(t){var e=tf(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){al(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=hf(n.where));var a=[];n.orderBy&&(a=n.orderBy.map(function(t){return function(t){return new ph(yf(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)}));var u=null;n.limit&&(u=function(t){var e;return Ol(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=ff(n.startAt));var l=null;return n.endAt&&(l=ff(n.endAt)),_h(e,i,a,s,u,"F",c,l)}function hf(t){return t?void 0!==t.unaryFilter?[_f(t)]:void 0!==t.fieldFilter?[vf(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return hf(t)}).reduce(function(t,e){return t.concat(e)}):sl():[]}function df(t){return{before:t.before,values:t.position}}function ff(t){return new dh(t.values||[],!!t.before)}function pf(t){return Bd[t]}function gf(t){return Gd[t]}function mf(t){return{fieldPath:t.canonicalString()}}function yf(t){return Cl.fromServerFormat(t.fieldPath)}function vf(t){return rh.create(yf(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return sl()}}(t.fieldFilter.op),t.fieldFilter.value)}function _f(t){switch(t.unaryFilter.op){case"IS_NAN":var e=yf(t.unaryFilter.field);return rh.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=yf(t.unaryFilter.field);return rh.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=yf(t.unaryFilter.field);return rh.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=yf(t.unaryFilter.field);return rh.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return sl()}}function wf(t){var e=[];return t.fields.forEach(function(t){return e.push(t.canonicalString())}),{fieldPaths:e}}function bf(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function Cf(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Ef(e)),e=Tf(t.get(n),e);return Ef(e)}function Tf(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function Ef(t){return t+"\x01\x01"}function Sf(t){var e=t.length;if(al(e>=2),2===e)return al("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),wl.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&sl(),t.charAt(s+1)){case"\x01":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:sl()}o=s+2}return new wl(r)}var xf=function(t,e){this.seconds=t,this.nanoseconds=e},If=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};If.store="owner",If.key="owner";var kf=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};kf.store="mutationQueues",kf.keyPath="userId";var Af=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Af.store="mutations",Af.keyPath="batchId",Af.userMutationsIndex="userMutationsIndex",Af.userMutationsKeyPath=["userId","batchId"];var Rf=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Cf(e)]},t.key=function(t,e,n){return[t,Cf(e),n]},t}();Rf.store="documentMutations",Rf.PLACEHOLDER=new Rf;var Pf=function(t,e){this.path=t,this.readTime=e},Of=function(t,e){this.path=t,this.version=e},Nf=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};Nf.store="remoteDocuments",Nf.readTimeIndex="readTimeIndex",Nf.readTimeIndexPath="readTime",Nf.collectionReadTimeIndex="collectionReadTimeIndex",Nf.collectionReadTimeIndexPath=["parentPath","readTime"];var Df=function(t){this.byteSize=t};Df.store="remoteDocumentGlobal",Df.key="remoteDocumentGlobalKey";var Lf=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};Lf.store="targets",Lf.keyPath="targetId",Lf.queryTargetsIndexName="queryTargetsIndex",Lf.queryTargetsKeyPath=["canonicalId","targetId"];var Ff=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Ff.store="targetDocuments",Ff.keyPath=["targetId","path"],Ff.documentTargetsIndex="documentTargetsIndex",Ff.documentTargetsKeyPath=["path","targetId"];var Uf=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Uf.key="targetGlobalKey",Uf.store="targetGlobal";var Mf=function(t,e){this.collectionId=t,this.parent=e};Mf.store="collectionParents",Mf.keyPath=["collectionId","parent"];var qf=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};qf.store="clientMetadata",qf.keyPath="clientId";var Vf=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};Vf.store="bundles",Vf.keyPath="bundleId";var jf=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};jf.store="namedQueries",jf.keyPath="name";var Bf=(0,Yc.ev)((0,Yc.ev)([],(0,Yc.ev)((0,Yc.ev)([],(0,Yc.ev)((0,Yc.ev)([],(0,Yc.ev)((0,Yc.ev)([],[kf.store,Af.store,Rf.store,Nf.store,Lf.store,If.store,Uf.store,Ff.store]),[qf.store])),[Df.store])),[Mf.store])),[Vf.store,jf.store]),Gf="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",zf=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(t){return t()})},t}(),Hf=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},Zf=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&sl(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t(function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}})},t.prototype.toPromise=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.waitFor=function(e){return new t(function(t,n){var r=0,i=0,o=!1;e.forEach(function(e){++r,e.next(function(){++i,o&&i===r&&t()},function(t){return n(t)})}),o=!0,i===r&&t()})},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.waitFor(r)},t}(),Wf=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new Hf,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new Yf(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=ep(e.target.error);n.ft.reject(new Yf(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new Yf(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(nl("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Jf(e)},t}(),Kf=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t((0,Wo.z$)())&&rl("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return nl("SimpleDb","Removing database:",t),Xf(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=(0,Wo.z$)(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return(0,Yc.mG)(this,void 0,void 0,function(){var e,n=this;return(0,Yc.Jh)(this,function(r){switch(r.label){case 0:return this.db?[3,2]:(nl("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new Yf(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new Xc(Jc.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new Yf(t,n))},i.onupgradeneeded=function(t){nl("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.wt.Rt(t.target.result,i.transaction,t.oldVersion,n.version).next(function(){nl("SimpleDb","Database upgrade to version "+n.version+" complete")})}})]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}})})},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return(0,Yc.mG)(this,void 0,void 0,function(){var i,o,s,a,u;return(0,Yc.Jh)(this,function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,l;return(0,Yc.Jh)(this,function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.At(t)];case 2:return a.db=h.sent(),e=Wf.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch(function(t){return e.abort(t),Zf.reject(t)}).toPromise(),u={},s.catch(function(){}),[4,e.dt];case 3:return[2,(u.value=(h.sent(),s),u)];case 4:return nl("SimpleDb","Transaction failed with error:",(c=h.sent()).message,"Retrying:",l="FirebaseError"!==c.name&&o<3),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}})},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),Qf=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return Xf(this.Pt.delete())},t}(),Yf=function(t){function e(e,n){var r=this;return(r=t.call(this,Jc.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return(0,Yc.ZT)(e,t),e}(Xc);function $f(t){return"IndexedDbTransactionError"===t.name}var Jf=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(nl("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(nl("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Xf(n)},t.prototype.add=function(t){return nl("SimpleDb","ADD",this.store.name,t,t),Xf(this.store.add(t))},t.prototype.get=function(t){var e=this;return Xf(this.store.get(t)).next(function(n){return void 0===n&&(n=null),nl("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return nl("SimpleDb","DELETE",this.store.name,t),Xf(this.store.delete(t))},t.prototype.count=function(){return nl("SimpleDb","COUNT",this.store.name),Xf(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.Ft=function(t,e){nl("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.kt=!1;var r=this.cursor(n);return this.xt(r,function(t,e,n){return n.delete()})},t.prototype.Ot=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.$t=function(t){var e=this.cursor({});return new Zf(function(n,r){e.onerror=function(t){var e=ep(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.xt=function(t,e){var n=[];return new Zf(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new Qf(i),s=e(i.primaryKey,i.value,o);if(s instanceof Zf){var a=s.catch(function(t){return o.done(),Zf.reject(t)});n.push(a)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}}).next(function(){return Zf.waitFor(n)})},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Xf(t){return new Zf(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=ep(t.target.error);n(e)}})}var tp=!1;function ep(t){var e=Kf._t((0,Wo.z$)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new Xc("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return tp||(tp=!0,setTimeout(function(){throw r},0)),r}}return t}var np=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return(0,Yc.ZT)(e,t),e}(zf);function rp(t,e){var n=ul(t);return Kf.It(n.Mt,e)}var ip=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&ed(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&nd(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&nd(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach(function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(gl.min())})},t.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},Rd())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&dl(this.mutations,t.mutations,function(t,e){return id(t,e)})&&dl(this.baseMutations,t.baseMutations,function(t,e){return id(t,e)})},t}(),op=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){al(e.mutations.length===r.length);for(var i=kd(),o=e.mutations,s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),sp=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=gl.min()),void 0===o&&(o=gl.min()),void 0===s&&(s=El.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),ap=function(t){this.Lt=t};function up(t,e){if(e.document)return of(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=Ll.fromSegments(e.noDocument.path),r=fp(e.noDocument.readTime),i=$l.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=Ll.fromSegments(e.unknownDocument.path);return r=fp(e.unknownDocument.version),$l.newUnknownDocument(o,r)}return sl()}function cp(t,e,n){var r=lp(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o=function(t,e){return{name:$d(t,e.key),fields:e.data.toProto().mapValue.fields,updateTime:Hd(t,e.version.toTimestamp())}}(t.Lt,e),s=e.hasCommittedMutations;return new Nf(null,null,o,s,r,i)}if(e.isNoDocument()){var a=e.key.path.toArray(),u=dp(e.version);return s=e.hasCommittedMutations,new Nf(null,new Pf(a,u),null,s,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),l=dp(e.version);return new Nf(new Of(c,l),null,null,!0,r,i)}return sl()}function lp(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function hp(t){var e=new pl(t[0],t[1]);return gl.fromTimestamp(e)}function dp(t){var e=t.toTimestamp();return new xf(e.seconds,e.nanoseconds)}function fp(t){var e=new pl(t.seconds,t.nanoseconds);return gl.fromTimestamp(e)}function pp(t,e){for(var n=(e.baseMutations||[]).map(function(e){return af(t.Lt,e)}),r=0;r<e.mutations.length-1;++r)r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform&&(e.mutations[r].updateTransforms=e.mutations[r+1].transform.fieldTransforms,e.mutations.splice(r+1,1),++r);var i=e.mutations.map(function(e){return af(t.Lt,e)}),o=pl.fromMillis(e.localWriteTimeMs);return new ip(e.batchId,o,n,i)}function gp(t){var e,n,r=fp(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?fp(t.lastLimboFreeSnapshotVersion):gl.min();return void 0!==t.query.documents?(al(1===(n=t.query).documents.length),e=Ih(wh(tf(n.documents[0])))):e=function(t){return Ih(lf(t))}(t.query),new sp(e,t.targetId,0,t.lastListenSequenceNumber,r,i,El.fromBase64String(t.resumeToken))}function mp(t,e){var n,r=dp(e.snapshotVersion),i=dp(e.lastLimboFreeSnapshotVersion);n=nh(e.target)?uf(t.Lt,e.target):cf(t.Lt,e.target);var o=e.resumeToken.toBase64();return new Lf(e.targetId,th(e.target),r,o,e.sequenceNumber,i,n)}function yp(t){var e=lf({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?kh(e,e.limit,"L"):e}var vp=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return _p(t).get(e).next(function(t){if(t)return{id:(e=t).bundleId,createTime:fp(e.createTime),version:e.version};var e})},t.prototype.saveBundleMetadata=function(t,e){return _p(t).put({bundleId:(n=e).id,createTime:dp(Kd(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return wp(t).get(e).next(function(t){if(t)return{name:(e=t).name,query:yp(e.bundledQuery),readTime:fp(e.readTime)};var e})},t.prototype.saveNamedQuery=function(t,e){return wp(t).put(function(t){return{name:t.name,readTime:dp(Kd(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function _p(t){return rp(t,Vf.store)}function wp(t){return rp(t,jf.store)}var bp=function(){function t(){this.Bt=new Cp}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),Zf.resolve()},t.prototype.getCollectionParents=function(t,e){return Zf.resolve(this.Bt.getEntries(e))},t}(),Cp=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new bd(wl.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new bd(wl.comparator)).toArray()},t}(),Tp=function(){function t(){this.qt=new Cp}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener(function(){n.qt.add(e)});var o={collectionId:r,parent:Cf(i)};return Ep(t).put(o)}return Zf.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[fl(e),""],!1,!0);return Ep(t).Nt(r).next(function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(Sf(o.parent))}return n})},t}();function Ep(t){return rp(t,Mf.store)}var Sp={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},xp=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function Ip(t,e,n){var r=t.store(Af.store),i=t.store(Rf.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.Ot({range:s},function(t,e,n){return a++,n.delete()});o.push(u.next(function(){al(1===a)}));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var d=h[l],f=Rf.key(e,d.key.path,n.batchId);o.push(i.delete(f)),c.push(d.key)}return Zf.waitFor(o).next(function(){return c})}function kp(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw sl();e=t.noDocument}return JSON.stringify(e).length}xp.DEFAULT_COLLECTION_PERCENTILE=10,xp.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,xp.DEFAULT=new xp(41943040,xp.DEFAULT_COLLECTION_PERCENTILE,xp.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),xp.DISABLED=new xp(-1,0,0);var Ap=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Qt={}}return t.Kt=function(e,n,r,i){return al(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Pp(t).Ot({index:Af.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=Op(t),s=Pp(t);return s.add({}).next(function(a){al("number"==typeof a);for(var u=new ip(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map(function(e){return sf(t.Lt,e)}),i=n.mutations.map(function(e){return sf(t.Lt,e)});return new Af(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),l=[],h=new bd(function(t,e){return hl(t.canonicalString(),e.canonicalString())}),d=0,f=r;d<f.length;d++){var p=f[d],g=Rf.key(i.userId,p.key.path,a);h=h.add(p.key.path.popLast()),l.push(s.put(c)),l.push(o.put(g,Rf.PLACEHOLDER))}return h.forEach(function(e){l.push(i.Ut.addToCollectionParentIndex(t,e))}),t.addOnCommittedListener(function(){i.Qt[a]=u.keys()}),Zf.waitFor(l).next(function(){return u})})},t.prototype.lookupMutationBatch=function(t,e){var n=this;return Pp(t).get(e).next(function(t){return t?(al(t.userId===n.userId),pp(n.R,t)):null})},t.prototype.jt=function(t,e){var n=this;return this.Qt[e]?Zf.resolve(this.Qt[e]):this.lookupMutationBatch(t,e).next(function(t){if(t){var r=t.keys();return n.Qt[e]=r,r}return null})},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Pp(t).Ot({index:Af.userMutationsIndex,range:i},function(t,e,i){e.userId===n.userId&&(al(e.batchId>=r),o=pp(n.R,e)),i.done()}).next(function(){return o})},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Pp(t).Ot({index:Af.userMutationsIndex,range:e,reverse:!0},function(t,e,r){n=e.batchId,r.done()}).next(function(){return n})},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Pp(t).Nt(Af.userMutationsIndex,n).next(function(t){return t.map(function(t){return pp(e.R,t)})})},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=Rf.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Op(t).Ot({range:i},function(r,i,s){var a=r[0],u=r[2],c=Sf(r[1]);if(a===n.userId&&e.path.isEqual(c))return Pp(t).get(u).next(function(t){if(!t)throw sl();al(t.userId===n.userId),o.push(pp(n.R,t))});s.done()}).next(function(){return o})},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new bd(hl),i=[];return e.forEach(function(e){var o=Rf.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=Op(t).Ot({range:s},function(t,i,o){var s=t[0],a=t[2],u=Sf(t[1]);s===n.userId&&e.path.isEqual(u)?r=r.add(a):o.done()});i.push(a)}),Zf.waitFor(i).next(function(){return n.Wt(t,r)})},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=Rf.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new bd(hl);return Op(t).Ot({range:s},function(t,e,o){var s=t[0],u=t[2],c=Sf(t[1]);s===n.userId&&r.isPrefixOf(c)?c.length===i&&(a=a.add(u)):o.done()}).next(function(){return n.Wt(t,a)})},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(Pp(t).get(e).next(function(t){if(null===t)throw sl();al(t.userId===n.userId),r.push(pp(n.R,t))}))}),Zf.waitFor(i).next(function(){return r})},t.prototype.removeMutationBatch=function(t,e){var n=this;return Ip(t.Mt,this.userId,e).next(function(r){return t.addOnCommittedListener(function(){n.Gt(e.batchId)}),Zf.forEach(r,function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)})})},t.prototype.Gt=function(t){delete this.Qt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next(function(n){if(!n)return Zf.resolve();var r=IDBKeyRange.lowerBound(Rf.prefixForUser(e.userId)),i=[];return Op(t).Ot({range:r},function(t,n,r){if(t[0]===e.userId){var o=Sf(t[1]);i.push(o)}else r.done()}).next(function(){al(0===i.length)})})},t.prototype.containsKey=function(t,e){return Rp(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return Np(t).get(this.userId).next(function(t){return t||new kf(e.userId,-1,"")})},t}();function Rp(t,e,n){var r=Rf.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Op(t).Ot({range:o,kt:!0},function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()}).next(function(){return s})}function Pp(t){return rp(t,Af.store)}function Op(t){return rp(t,Rf.store)}function Np(t){return rp(t,kf.store)}var Dp=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),Lp=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next(function(n){var r=new Dp(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next(function(){return n.highestTargetId})})},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next(function(t){return gl.fromTimestamp(new pl(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next(function(t){return t.highestListenSequenceNumber})},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)})},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next(function(){return n.Xt(t).next(function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)})})},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next(function(){return Fp(t).delete(e.targetId)}).next(function(){return n.Xt(t)}).next(function(e){return al(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)})},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return Fp(t).Ot(function(s,a){var u=gp(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))}).next(function(){return Zf.waitFor(o)}).next(function(){return i})},t.prototype.forEachTarget=function(t,e){return Fp(t).Ot(function(t,n){var r=gp(n);e(r)})},t.prototype.Xt=function(t){return Up(t).get(Uf.key).next(function(t){return al(null!==t),t})},t.prototype.Zt=function(t,e){return Up(t).put(Uf.key,e)},t.prototype.te=function(t,e){return Fp(t).put(mp(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next(function(t){return t.targetCount})},t.prototype.getTargetData=function(t,e){var n=th(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Fp(t).Ot({range:r,index:Lf.queryTargetsIndexName},function(t,n,r){var o=gp(n);eh(e,o.target)&&(i=o,r.done())}).next(function(){return i})},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=Mp(t);return e.forEach(function(e){var s=Cf(e.path);i.push(o.put(new Ff(n,s))),i.push(r.referenceDelegate.addReference(t,n,e))}),Zf.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=Mp(t);return Zf.forEach(e,function(e){var o=Cf(e.path);return Zf.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])})},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=Mp(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Mp(t),i=Rd();return r.Ot({range:n,kt:!0},function(t,e,n){var r=Sf(t[1]),o=new Ll(r);i=i.add(o)}).next(function(){return i})},t.prototype.containsKey=function(t,e){var n=Cf(e.path),r=IDBKeyRange.bound([n],[fl(n)],!1,!0),i=0;return Mp(t).Ot({index:Ff.documentTargetsIndex,kt:!0,range:r},function(t,e,n){0!==t[0]&&(i++,n.done())}).next(function(){return i>0})},t.prototype.lt=function(t,e){return Fp(t).get(e).next(function(t){return t?gp(t):null})},t}();function Fp(t){return rp(t,Lf.store)}function Up(t){return rp(t,Uf.store)}function Mp(t){return rp(t,Ff.store)}function qp(t){return(0,Yc.mG)(this,void 0,void 0,function(){return(0,Yc.Jh)(this,function(e){if(t.code!==Jc.FAILED_PRECONDITION||t.message!==Gf)throw t;return nl("LocalStore","Unexpectedly lost primary lease"),[2]})})}function Vp(t,e){var n=t[1],r=e[1],i=hl(t[0],e[0]);return 0===i?hl(n,r):i}var jp=function(){function t(t){this.ne=t,this.buffer=new bd(Vp),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Vp(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Bp=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;nl("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,function(){return(0,Yc.mG)(e,void 0,void 0,function(){var e;return(0,Yc.Jh)(this,function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return $f(e=n.sent())?(nl("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,qp(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}})})})},t}(),Gp=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return Zf.resolve($c.o);var r=new jp(e);return this.ae.forEachTarget(t,function(t){return r.re(t.sequenceNumber)}).next(function(){return n.ae.le(t,function(t){return r.re(t)})}).next(function(){return r.maxValue})},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(nl("LruGarbageCollector","Garbage collection skipped; disabled"),Zf.resolve(Sp)):this.getCacheSize(t).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(nl("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),Sp):n.fe(t,e)})},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,o,s,a,u,c=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(function(e){return e>c.params.maximumSequenceNumbersToCollect?(nl("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)}).next(function(r){return n=r,s=Date.now(),c.removeTargets(t,n,e)}).next(function(e){return i=e,a=Date.now(),c.removeOrphanedDocuments(t,n)}).next(function(t){return u=Date.now(),el()<=Ko.in.DEBUG&&nl("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),Zf.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})})},t}(),zp=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new Gp(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.de=function(t){var e=0;return this.le(t,function(t){e++}).next(function(){return e})},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,function(t,n){return e(n)})},t.prototype.addReference=function(t,e,n){return Hp(t,n)},t.prototype.removeReference=function(t,e,n){return Hp(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return Hp(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return Np(t).$t(function(r){return Rp(t,r,e).next(function(t){return t&&(n=!0),Zf.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,function(s,a){if(a<=e){var u=n._e(t,s).next(function(e){if(!e)return o++,r.getEntry(t,s).next(function(){return r.removeEntry(s),Mp(t).delete([0,Cf(s.path)])})});i.push(u)}}).next(function(){return Zf.waitFor(i)}).next(function(){return r.apply(t)}).next(function(){return o})},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return Hp(t,e)},t.prototype.we=function(t,e){var n,r=Mp(t),i=$c.o;return r.Ot({index:Ff.documentTargetsIndex},function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==$c.o&&e(new Ll(Sf(n)),i),i=s,n=o):i=$c.o}).next(function(){i!==$c.o&&e(new Ll(Sf(n)),i)})},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function Hp(t,e){return Mp(t).put(function(t,e){return new Ff(0,Cf(t.path),e)}(e,t.currentSequenceNumber))}var Zp=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(this.equalsFn(o[0],t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){yl(this.inner,function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}})},t.prototype.isEmpty=function(){return vl(this.inner)},t}(),Wp=function(){function t(){this.changes=new Zp(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:gl.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:$l.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?Zf.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),Kp=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return $p(t).put(Jp(e),n)},t.prototype.removeEntry=function(t,e){var n=$p(t),r=Jp(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.me(t,r)})},t.prototype.getEntry=function(t,e){var n=this;return $p(t).get(Jp(e)).next(function(t){return n.ye(e,t)})},t.prototype.ge=function(t,e){var n=this;return $p(t).get(Jp(e)).next(function(t){return{document:n.ye(e,t),size:kp(t)}})},t.prototype.getEntries=function(t,e){var n=this,r=Ed();return this.pe(t,e,function(t,e){var i=n.ye(t,e);r=r.insert(t,i)}).next(function(){return r})},t.prototype.Ee=function(t,e){var n=this,r=Ed(),i=new vd(Ll.comparator);return this.pe(t,e,function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,kp(e))}).next(function(){return{documents:r,Te:i}})},t.prototype.pe=function(t,e,n){if(e.isEmpty())return Zf.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return $p(t).Ot({range:r},function(t,e,r){for(var s=Ll.fromSegments(t);o&&Ll.comparator(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()}).next(function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=Ed(),o=e.path.length+1,s={};if(n.isEqual(gl.min())){var a=e.path.toArray();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.toArray(),c=lp(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=Nf.collectionReadTimeIndex}return $p(t).Ot(s,function(t,n,s){if(t.length===o){var a=up(r.R,n);e.path.isPrefixOf(a.key.path)?Oh(e,a)&&(i=i.insert(a.key,a)):s.done()}}).next(function(){return i})},t.prototype.newChangeBuffer=function(t){return new Qp(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return Yp(t).get(Df.key).next(function(t){return al(!!t),t})},t.prototype.me=function(t,e){return Yp(t).put(Df.key,e)},t.prototype.ye=function(t,e){if(e){var n=up(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(gl.min()))return n}return $l.newInvalidDocument(t)},t}(),Qp=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new Zp(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),r}return(0,Yc.ZT)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new bd(function(t,e){return hl(t.canonicalString(),e.canonicalString())});return this.changes.forEach(function(o,s){var a=e.Ae.get(o);if(s.document.isValidDocument()){var u=cp(e.Ie.R,s.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=kp(u);r+=c-a,n.push(e.Ie.addEntry(t,o,u))}else if(r-=a,e.trackRemovals){var l=cp(e.Ie.R,$l.newNoDocument(o,gl.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,l))}else n.push(e.Ie.removeEntry(t,o))}),i.forEach(function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))}),n.push(this.Ie.updateMetadata(t,r)),Zf.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next(function(t){return n.Ae.set(e,t.size),t.document})},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next(function(t){var e=t.documents;return t.Te.forEach(function(t,e){n.Ae.set(t,e)}),e})},e}(Wp);function Yp(t){return rp(t,Df.store)}function $p(t){return rp(t,Nf.store)}function Jp(t){return t.path.toArray()}var Xp=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;al(n<r&&n>=0&&r<=11);var o=new Wf("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(If.store)}(t),function(t){t.createObjectStore(kf.store,{keyPath:kf.keyPath}),t.createObjectStore(Af.store,{keyPath:Af.keyPath,autoIncrement:!0}).createIndex(Af.userMutationsIndex,Af.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Rf.store)}(t),tg(t),function(t){t.createObjectStore(Nf.store)}(t));var s=Zf.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Ff.store),t.deleteObjectStore(Lf.store),t.deleteObjectStore(Uf.store)}(t),tg(t)),s=s.next(function(){return function(t){var e=t.store(Uf.store),n=new Uf(0,0,gl.min().toTimestamp(),0);return e.put(Uf.key,n)}(o)})),n<4&&r>=4&&(0!==n&&(s=s.next(function(){return function(t,e){return e.store(Af.store).Nt().next(function(n){t.deleteObjectStore(Af.store),t.createObjectStore(Af.store,{keyPath:Af.keyPath,autoIncrement:!0}).createIndex(Af.userMutationsIndex,Af.userMutationsKeyPath,{unique:!0});var r=e.store(Af.store),i=n.map(function(t){return r.put(t)});return Zf.waitFor(i)})}(t,o)})),s=s.next(function(){!function(t){t.createObjectStore(qf.store,{keyPath:qf.keyPath})}(t)})),n<5&&r>=5&&(s=s.next(function(){return i.Re(o)})),n<6&&r>=6&&(s=s.next(function(){return function(t){t.createObjectStore(Df.store)}(t),i.be(o)})),n<7&&r>=7&&(s=s.next(function(){return i.ve(o)})),n<8&&r>=8&&(s=s.next(function(){return i.Pe(t,o)})),n<9&&r>=9&&(s=s.next(function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(Nf.store);e.createIndex(Nf.readTimeIndex,Nf.readTimeIndexPath,{unique:!1}),e.createIndex(Nf.collectionReadTimeIndex,Nf.collectionReadTimeIndexPath,{unique:!1})}(e)})),n<10&&r>=10&&(s=s.next(function(){return i.Ve(o)})),n<11&&r>=11&&(s=s.next(function(){!function(t){t.createObjectStore(Vf.store,{keyPath:Vf.keyPath})}(t),function(t){t.createObjectStore(jf.store,{keyPath:jf.keyPath})}(t)})),s},t.prototype.be=function(t){var e=0;return t.store(Nf.store).Ot(function(t,n){e+=kp(n)}).next(function(){var n=new Df(e);return t.store(Df.store).put(Df.key,n)})},t.prototype.Re=function(t){var e=this,n=t.store(kf.store),r=t.store(Af.store);return n.Nt().next(function(n){return Zf.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(Af.userMutationsIndex,i).next(function(r){return Zf.forEach(r,function(r){al(r.userId===n.userId);var i=pp(e.R,r);return Ip(t,n.userId,i).next(function(){})})})})})},t.prototype.ve=function(t){var e=t.store(Ff.store),n=t.store(Nf.store);return t.store(Uf.store).get(Uf.key).next(function(t){var r=[];return n.Ot(function(n,i){var o=new wl(n),s=function(t){return[0,Cf(t)]}(o);r.push(e.get(s).next(function(n){return n?Zf.resolve():function(n){return e.put(new Ff(0,Cf(n),t.highestListenSequenceNumber))}(o)}))}).next(function(){return Zf.waitFor(r)})})},t.prototype.Pe=function(t,e){t.createObjectStore(Mf.store,{keyPath:Mf.keyPath});var n=e.store(Mf.store),r=new Cp,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:Cf(i)})}};return e.store(Nf.store).Ot({kt:!0},function(t,e){var n=new wl(t);return i(n.popLast())}).next(function(){return e.store(Rf.store).Ot({kt:!0},function(t,e){var n=Sf(t[1]);return i(n.popLast())})})},t.prototype.Ve=function(t){var e=this,n=t.store(Lf.store);return n.Ot(function(t,r){var i=gp(r),o=mp(e.R,i);return n.put(o)})},t}();function tg(t){t.createObjectStore(Ff.store,{keyPath:Ff.keyPath}).createIndex(Ff.documentTargetsIndex,Ff.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Lf.store,{keyPath:Lf.keyPath}).createIndex(Lf.queryTargetsIndexName,Lf.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Uf.store)}var eg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",ng=function(){function t(e,n,r,i,o,s,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=s,this.document=a,this.De=c,this.Ce=l,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.Oe=null,this.$e=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new Xc(Jc.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new zp(this,i),this.Le=n+"main",this.R=new ap(u),this.Be=new Kf(this.Le,11,new Xp(this.R)),this.qe=new Lp(this.referenceDelegate,this.R),this.Ut=new Tp,this.Ue=function(t,e){return new Kp(t,e)}(this.R,this.Ut),this.Qe=new vp,this.window&&this.window.localStorage?this.Ke=this.window.localStorage:(this.Ke=null,!1===l&&rl("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new Xc(Jc.FAILED_PRECONDITION,eg);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(e){return t.qe.getHighestSequenceNumber(e)})}).then(function(e){t.Ne=new $c(e,t.De)}).then(function(){t.xe=!0}).catch(function(e){return t.Be&&t.Be.close(),Promise.reject(e)})},t.prototype.He=function(t){var e=this;return this.Me=function(n){return(0,Yc.mG)(e,void 0,void 0,function(){return(0,Yc.Jh)(this,function(e){return this.started?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt(function(n){return(0,Yc.mG)(e,void 0,void 0,function(){return(0,Yc.Jh)(this,function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget(function(){return(0,Yc.mG)(e,void 0,void 0,function(){return(0,Yc.Jh)(this,function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return ig(e).put(new qf(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.Je(e).next(function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable(function(){return t.Me(!1)}))})}).next(function(){return t.Ye(e)}).next(function(n){return t.isPrimary&&!n?t.Xe(e).next(function(){return!1}):!!n&&t.Ze(e).next(function(){return!0})})}).catch(function(e){if($f(e))return nl("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return nl("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(function(e){t.isPrimary!==e&&t.Se.enqueueRetryable(function(){return t.Me(e)}),t.isPrimary=e})},t.prototype.Je=function(t){var e=this;return rg(t).get(If.key).next(function(t){return Zf.resolve(e.tn(t))})},t.prototype.en=function(t){return ig(t).delete(this.clientId)},t.prototype.nn=function(){return(0,Yc.mG)(this,void 0,void 0,function(){var t,e,n,r=this;return(0,Yc.Jh)(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.sn(this.$e,18e5)?[3,2]:(this.$e=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var e=rp(t,qf.store);return e.Nt().next(function(t){var n=r.rn(t,18e5),i=t.filter(function(t){return-1===n.indexOf(t)});return Zf.forEach(i,function(t){return e.delete(t.clientId)}).next(function(){return i})})}).catch(function(){return[]})]);case 1:if(t=i.sent(),this.Ke)for(e=0,n=t;e<n.length;e++)this.Ke.removeItem(this.on(n[e].clientId));i.label=2;case 2:return[2]}})})},t.prototype.ze=function(){var t=this;this.Oe=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return t.je().then(function(){return t.nn()}).then(function(){return t.ze()})})},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?Zf.resolve(!0):rg(t).get(If.key).next(function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new Xc(Jc.FAILED_PRECONDITION,eg);return!1}}return!(!e.networkEnabled||!e.inForeground)||ig(t).Nt().next(function(t){return void 0===e.rn(t,5e3).find(function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))})})}).next(function(t){return e.isPrimary!==t&&nl("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.shutdown=function(){return(0,Yc.mG)(this,void 0,void 0,function(){var t=this;return(0,Yc.Jh)(this,function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.Oe&&(this.Oe.cancel(),this.Oe=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[If.store,qf.store],function(e){var n=new np(e,$c.o);return t.Xe(n).next(function(){return t.en(n)})})];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}})})},t.prototype.rn=function(t,e){var n=this;return t.filter(function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)})},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(e){return ig(e).Nt().next(function(e){return t.rn(e,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return Ap.Kt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r,i=this;return nl("IndexedDbPersistence","Starting transaction:",t),this.Be.runTransaction(t,"readonly"===e?"readonly":"readwrite",Bf,function(o){return r=new np(o,i.Ne?i.Ne.next():$c.o),"readwrite-primary"===e?i.Je(r).next(function(t){return!!t||i.Ye(r)}).next(function(e){if(!e)throw rl("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Se.enqueueRetryable(function(){return i.Me(!1)}),new Xc(Jc.FAILED_PRECONDITION,Gf);return n(r)}).next(function(t){return i.Ze(r).next(function(){return t})}):i.dn(r).next(function(){return n(r)})}).then(function(t){return r.raiseOnCommittedEvent(),t})},t.prototype.dn=function(t){var e=this;return rg(t).get(If.key).next(function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Xc(Jc.FAILED_PRECONDITION,eg)})},t.prototype.Ze=function(t){var e=new If(this.clientId,this.allowTabSynchronization,Date.now());return rg(t).put(If.key,e)},t.yt=function(){return Kf.yt()},t.prototype.Xe=function(t){var e=this,n=rg(t);return n.get(If.key).next(function(t){return e.tn(t)?(nl("IndexedDbPersistence","Releasing primary lease."),n.delete(If.key)):Zf.resolve()})},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(rl("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.je()})},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.un(),e.Se.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener("unload",this.Fe))},t.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("unload",this.Fe),this.Fe=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Ke)||void 0===e?void 0:e.getItem(this.on(t)));return nl("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return rl("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Ke)try{this.Ke.setItem(this.on(this.clientId),String(Date.now()))}catch(t){rl("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Ke)try{this.Ke.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function rg(t){return rp(t,If.store)}function ig(t){return rp(t,qf.store)}function og(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var sg=function(t,e){this.progress=t,this.wn=e},ag=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next(function(r){return n.yn(t,e,r)})},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next(function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t})},t.prototype.gn=function(t,e){t.forEach(function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)})},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next(function(e){return n.En(t,e).next(function(){return e})})},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next(function(t){return n.gn(e,t)})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return Ll.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):Sh(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new Ll(e)).next(function(t){var e=xd();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e})},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=xd();return this.Ut.getCollectionParents(t,i).next(function(s){return Zf.forEach(s,function(s){var a=function(t,e){return new vh(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.An(t,a,n).next(function(t){t.forEach(function(t,e){o=o.insert(t,e)})})}).next(function(){return o})})},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next(function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)}).next(function(e){return o.Rn(t,i=e,r).next(function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=r.get(c);null==l&&(l=$l.newInvalidDocument(c),r=r.insert(c,l)),nd(u,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}})}).next(function(){return r.forEach(function(t,n){Oh(e,n)||(r=r.remove(t))}),r})},t.prototype.Rn=function(t,e,n){for(var r=Rd(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof ad&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next(function(t){return t.forEach(function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))}),c})},t}(),ug=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=Rd(),i=Rd(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),cg=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(gl.min())?this.Dn(t,e):this.Sn.pn(t,r).next(function(o){var s=i.Cn(e,o);return(bh(e)||Ch(e))&&i.Nn(e.limitType,s,r,n)?i.Dn(t,e):(el()<=Ko.in.DEBUG&&nl("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Ph(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next(function(t){return s.forEach(function(e){t=t.insert(e.key,e)}),t}))})},t.prototype.Cn=function(t,e){var n=new bd(Nh(t));return e.forEach(function(e,r){Oh(t,r)&&(n=n.add(r))}),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return el()<=Ko.in.DEBUG&&nl("QueryEngine","Using full collection scan to execute query:",Ph(e)),this.Sn.getDocumentsMatchingQuery(t,e,gl.min())},t}(),lg=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new vd(hl),this.kn=new Zp(function(t){return th(t)},eh),this.On=gl.min(),this._n=t.getMutationQueue(n),this.$n=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new ag(this.$n,this._n,this.persistence.getIndexManager()),this.Qe=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.collect(n,e.Fn)})},t}();function hg(t,e,n,r){return new lg(t,e,n,r)}function dg(t,e){return(0,Yc.mG)(this,void 0,void 0,function(){var n,r,i,o;return(0,Yc.Jh)(this,function(s){switch(s.label){case 0:return n=ul(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",function(t){var o;return n._n.getAllMutationBatches(t).next(function(s){return o=s,r=n.persistence.getMutationQueue(e),i=new ag(n.$n,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)}).next(function(e){for(var n=[],r=[],s=Rd(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)s=s.add(h[l].key)}for(var d=0,f=e;d<f.length;d++){var p=f[d];r.push(p.batchId);for(var g=0,m=p.mutations;g<m.length;g++)s=s.add(m[g].key)}return i.pn(t,s).next(function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}})})})];case 1:return o=s.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}})})}function fg(t,e){var n=ul(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var r=e.batch.keys(),i=n.$n.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=Zf.resolve();return o.forEach(function(t){s=s.next(function(){return r.getEntry(e,t)}).next(function(e){var o=n.docVersions.get(t);al(null!==o),e.version.compareTo(o)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))})}),s.next(function(){return t._n.removeMutationBatch(e,i)})}(n,t,e,i).next(function(){return i.apply(t)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}function pg(t){var e=ul(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.qe.getLastRemoteSnapshotVersion(t)})}function gg(t,e){var n=ul(t),r=e.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(t){var o=n.$n.newChangeBuffer({trackRemovals:!0});i=n.Fn;var s=[];e.targetChanges.forEach(function(e,o){var a=i.get(o);if(a){s.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next(function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)}));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=a.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return al(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,c,e)&&s.push(n.qe.updateTargetData(t,c))}}});var a=Ed();if(e.documentUpdates.forEach(function(r,i){e.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))}),s.push(mg(t,o,e.documentUpdates,r,void 0).next(function(t){a=t})),!r.isEqual(gl.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next(function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)});s.push(u)}return Zf.waitFor(s).next(function(){return o.apply(t)}).next(function(){return n.Mn.En(t,a)}).next(function(){return a})}).then(function(t){return n.Fn=i,t})}function mg(t,e,n,r,i){var o=Rd();return n.forEach(function(t){return o=o.add(t)}),e.getEntries(t,o).next(function(t){var o=Ed();return n.forEach(function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s.isNoDocument()&&s.version.isEqual(gl.min())?(e.removeEntry(n,u),o=o.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(s,u),o=o.insert(n,s)):nl("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)}),o})}function yg(t,e){var n=ul(t);return n.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)})}function vg(t,e){var n=ul(t);return n.persistence.runTransaction("Allocate target","readwrite",function(t){var r;return n.qe.getTargetData(t,e).next(function(i){return i?Zf.resolve(r=i):n.qe.allocateTargetId(t).next(function(i){return r=new sp(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next(function(){return r})})})}).then(function(t){var r=n.Fn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(t.targetId,t),n.kn.set(e,t.targetId)),t})}function _g(t,e,n){return(0,Yc.mG)(this,void 0,void 0,function(){var r,i,o,s;return(0,Yc.Jh)(this,function(a){switch(a.label){case 0:r=ul(t),i=r.Fn.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,function(t){return r.persistence.referenceDelegate.removeTarget(t,i)})];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!$f(s=a.sent()))throw s;return nl("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.Fn=r.Fn.remove(e),r.kn.delete(i.target),[2]}})})}function wg(t,e,n){var r=ul(t),i=gl.min(),o=Rd();return r.persistence.runTransaction("Execute query","readonly",function(t){return function(t,e,n){var r=ul(t),i=r.kn.get(n);return void 0!==i?Zf.resolve(r.Fn.get(i)):r.qe.getTargetData(e,n)}(r,t,Ih(e)).next(function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next(function(t){o=t})}).next(function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:gl.min(),n?o:Rd())}).next(function(t){return{documents:t,Bn:o}})})}function bg(t,e){var n=ul(t),r=ul(n.qe),i=n.Fn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.lt(t,e).next(function(t){return t?t.target:null})})}function Cg(t){var e=ul(t);return e.persistence.runTransaction("Get new document changes","readonly",function(t){return function(t,e,n){var r=ul(t),i=Ed(),o=lp(n),s=$p(e),a=IDBKeyRange.lowerBound(o,!0);return s.Ot({index:Nf.readTimeIndex,range:a},function(t,e){var n=up(r.R,e);i=i.insert(n.key,n),o=e.readTime}).next(function(){return{wn:i,readTime:hp(o)}})}(e.$n,t,e.On)}).then(function(t){var n=t.wn;return e.On=t.readTime,n})}function Tg(t){return(0,Yc.mG)(this,void 0,void 0,function(){var e;return(0,Yc.Jh)(this,function(n){return[2,(e=ul(t)).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return function(t){var e=$p(t),n=gl.min();return e.Ot({index:Nf.readTimeIndex,reverse:!0},function(t,e,r){e.readTime&&(n=hp(e.readTime)),r.done()}).next(function(){return n})}(t)}).then(function(t){e.On=t})]})})}function Eg(t,e,n,r){return(0,Yc.mG)(this,void 0,void 0,function(){var i,o,s,a,u,c,l,h,d,f;return(0,Yc.Jh)(this,function(p){switch(p.label){case 0:for(i=ul(t),o=Rd(),s=Ed(),a=kd(),u=0,c=n;u<c.length;u++)h=e.qn((l=c[u]).metadata.name),l.document&&(o=o.add(h)),s=s.insert(h,e.Un(l)),a=a.insert(h,e.Qn(l.metadata.readTime));return d=i.$n.newChangeBuffer({trackRemovals:!0}),[4,vg(i,function(t){return Ih(wh(wl.fromString("__bundle__/docs/"+t)))}(r))];case 1:return f=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",function(t){return mg(t,d,s,gl.min(),a).next(function(e){return d.apply(t),e}).next(function(e){return i.qe.removeMatchingKeysForTargetId(t,f.targetId).next(function(){return i.qe.addMatchingKeys(t,o,f.targetId)}).next(function(){return i.Mn.En(t,e)}).next(function(){return e})})})]}})})}function Sg(t,e,n){return void 0===n&&(n=Rd()),(0,Yc.mG)(this,void 0,void 0,function(){var r,i;return(0,Yc.Jh)(this,function(o){switch(o.label){case 0:return[4,vg(t,Ih(yp(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=ul(t)).persistence.runTransaction("Save named query","readwrite",function(t){var o=Kd(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Qe.saveNamedQuery(t,e);var s=r.withResumeToken(El.EMPTY_BYTE_STRING,o);return i.Fn=i.Fn.insert(s.targetId,s),i.qe.updateTargetData(t,s).next(function(){return i.qe.removeMatchingKeysForTargetId(t,r.targetId)}).next(function(){return i.qe.addMatchingKeys(t,n,r.targetId)}).next(function(){return i.Qe.saveNamedQuery(t,e)})})]}})})}var xg=function(){function t(t){this.R=t,this.Kn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return Zf.resolve(this.Kn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Kn.set(e.id,{id:(n=e).id,version:n.version,createTime:Kd(n.createTime)}),Zf.resolve()},t.prototype.getNamedQuery=function(t,e){return Zf.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:yp(t.bundledQuery),readTime:Kd(t.readTime)}}(e)),Zf.resolve()},t}(),Ig=function(){function t(){this.Wn=new bd(kg.Gn),this.zn=new bd(kg.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new kg(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},t.prototype.removeReference=function(t,e){this.Yn(new kg(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},t.prototype.Zn=function(t){var e=this,n=new Ll(new wl([])),r=new kg(n,t),i=new kg(n,t+1),o=[];return this.zn.forEachInRange([r,i],function(t){e.Yn(t),o.push(t.key)}),o},t.prototype.ts=function(){var t=this;this.Wn.forEach(function(e){return t.Yn(e)})},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new Ll(new wl([])),n=new kg(e,t),r=new kg(e,t+1),i=Rd();return this.zn.forEachInRange([n,r],function(t){i=i.add(t.key)}),i},t.prototype.containsKey=function(t){var e=new kg(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),kg=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return Ll.comparator(t.key,e.key)||hl(t.ns,e.ns)},t.Hn=function(t,e){return hl(t.ns,e.ns)||Ll.comparator(t.key,e.key)},t}(),Ag=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new bd(kg.Gn)}return t.prototype.checkEmpty=function(t){return Zf.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++;var o=new ip(i,e,n,r);this._n.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.rs=this.rs.add(new kg(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return Zf.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return Zf.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this.cs(e+1),r=n<0?0:n;return Zf.resolve(this._n.length>r?this._n[r]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return Zf.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return Zf.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new kg(e,0),i=new kg(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],function(t){var e=n.os(t.ns);o.push(e)}),Zf.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new bd(hl);return e.forEach(function(t){var e=new kg(t,0),i=new kg(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],function(t){r=r.add(t.ns)})}),Zf.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;Ll.isDocumentKey(i)||(i=i.child(""));var o=new kg(new Ll(i),0),s=new bd(hl);return this.rs.forEachWhile(function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(s=s.add(t.ns)),!0)},o),Zf.resolve(this.us(s))},t.prototype.us=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.os(t);null!==r&&n.push(r)}),n},t.prototype.removeMutationBatch=function(t,e){var n=this;al(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return Zf.forEach(e.mutations,function(i){var o=new kg(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(function(){n.rs=r})},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new kg(e,0),r=this.rs.firstAfterOrEqual(n);return Zf.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return Zf.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),Rg=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new vd(Ll.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:s,readTime:n}),this.size+=s-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return Zf.resolve(n?n.document.clone():$l.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=Ed();return e.forEach(function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():$l.newInvalidDocument(t))}),Zf.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=Ed(),i=new Ll(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var s=o.getNext(),a=s.value,u=a.document,c=a.readTime;if(!e.path.isPrefixOf(s.key.path))break;c.compareTo(n)<=0||Oh(e,u)&&(r=r.insert(u.key,u.clone()))}return Zf.resolve(r)},t.prototype.fs=function(t,e){return Zf.forEach(this.docs,function(t){return e(t)})},t.prototype.newChangeBuffer=function(t){return new Pg(this)},t.prototype.getSize=function(t){return Zf.resolve(this.size)},t}(),Pg=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return(0,Yc.ZT)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach(function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)}),Zf.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(Wp),Og=function(){function t(t){this.persistence=t,this.ds=new Zp(function(t){return th(t)},eh),this.lastRemoteSnapshotVersion=gl.min(),this.highestTargetId=0,this.ws=0,this._s=new Ig,this.targetCount=0,this.ys=Dp.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach(function(t,n){return e(n)}),Zf.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return Zf.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return Zf.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),Zf.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),Zf.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new Dp(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,Zf.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),Zf.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,Zf.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach(function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.ds.delete(s),o.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),Zf.waitFor(o).next(function(){return i})},t.prototype.getTargetCount=function(t){return Zf.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return Zf.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),Zf.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.markPotentiallyOrphaned(t,e))}),Zf.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),Zf.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return Zf.resolve(n)},t.prototype.containsKey=function(t,e){return Zf.resolve(this._s.containsKey(e))},t}(),Ng=function(){function t(t,e){var n=this;this.gs={},this.Ne=new $c(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new Og(this),this.Ut=new bp,this.Ue=function(t,e){return new Rg(t,function(t){return n.referenceDelegate.ps(t)})}(this.Ut),this.R=new ap(e),this.Qe=new xg(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new Ag(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r=this;nl("MemoryPersistence","Starting transaction:",t);var i=new Dg(this.Ne.next());return this.referenceDelegate.Es(),n(i).next(function(t){return r.referenceDelegate.Ts(i).next(function(){return t})}).toPromise().then(function(t){return i.raiseOnCommittedEvent(),t})},t.prototype.Is=function(t,e){return Zf.or(Object.values(this.gs).map(function(n){return function(){return n.containsKey(t,e)}}))},t}(),Dg=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return(0,Yc.ZT)(e,t),e}(zf),Lg=function(){function t(t){this.persistence=t,this.As=new Ig,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw sl()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),Zf.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),Zf.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),Zf.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach(function(t){return n.vs.add(t.toString())});var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(function(t){t.forEach(function(t){return n.vs.add(t.toString())})}).next(function(){return r.removeTargetData(t,e)})},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Zf.forEach(this.vs,function(r){var i=Ll.fromPath(r);return e.Ps(t,i).next(function(t){t||n.removeEntry(i)})}).next(function(){return e.Rs=null,n.apply(t)})},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next(function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())})},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return Zf.or([function(){return Zf.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),Fg=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function Ug(t,e){return"firestore_clients_"+t+"_"+e}function Mg(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function qg(t,e){return"firestore_targets_"+t+"_"+e}Fg.UNAUTHENTICATED=new Fg(null),Fg.GOOGLE_CREDENTIALS=new Fg("google-credentials-uid"),Fg.FIRST_PARTY=new Fg("first-party-uid");var Vg=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new Xc(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(rl("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),jg=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Xc(i.error.code,i.error.message)),o?new t(e,i.state,r):(rl("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Bg=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Od(),s=0;i&&s<r.activeTargetIds.length;++s)i=Dl(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(rl("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Gg=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(rl("SharedClientState","Failed to parse online state: "+e),null)},t}(),zg=function(){function t(){this.activeTargetIds=Od()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Hg=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new vd(hl),this.started=!1,this.Os=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.$s=Ug(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.ks=this.ks.insert(this.Ns,new zg),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Qs=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return(0,Yc.mG)(this,void 0,void 0,function(){var t,e,n,r,i,o,s,a,u,c,l=this;return(0,Yc.Jh)(this,function(h){switch(h.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(Ug(this.persistenceKey,r)))&&(o=Bg.Vs(r,i))&&(this.ks=this.ks.insert(o.clientId,o));for(this.Ks(),(s=this.storage.getItem(this.Us))&&(a=this.js(s))&&this.Ws(a),u=0,c=this.Os;u<c.length;u++)this.Fs(c[u]);return this.Os=[],this.window.addEventListener("unload",function(){return l.shutdown()}),this.started=!0,[2]}})})},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach(function(n,r){r.activeTargetIds.has(t)&&(e=!0)}),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(qg(this.persistenceKey,t));if(n){var r=jg.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Ks(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Ks()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(qg(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach(function(t){r.Hs(t)}),this.currentUser=t,n.forEach(function(t){r.addPendingMutation(t)})},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.$s),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return nl("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){nl("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){nl("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Fs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(nl("SharedClientState","EVENT",n.key,n.newValue),n.key===this.$s)return void rl("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable(function(){return(0,Yc.mG)(e,void 0,void 0,function(){var t,e,r,i,o,s;return(0,Yc.Jh)(this,function(a){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(s=function(t){var e=$c.o;if(null!=t)try{var n=JSON.parse(t);al("number"==typeof n),e=n}catch(t){rl("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==$c.o&&this.sequenceNumberHandler(s);else if(n.key===this.Qs)return[2,this.syncEngine.ci()]}else this.Os.push(n);return[2]})})})}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Ks=function(){this.setItem(this.$s,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new Vg(this.currentUser,t,e,n),i=Mg(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=Mg(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){this.storage.setItem(this.Us,JSON.stringify({clientId:this.Ns,onlineState:t}))},t.prototype.Ys=function(t,e,n){var r=qg(this.persistenceKey,t),i=new jg(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Qs,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return Bg.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]);return Vg.Vs(new Fg(void 0!==n[2]?n[2]:null),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return jg.Vs(r,e)},t.prototype.js=function(t){return Gg.Vs(t)},t.prototype.ii=function(t){return(0,Yc.mG)(this,void 0,void 0,function(){return(0,Yc.Jh)(this,function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(nl("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),o=this.Gs(r),s=[],a=[];return o.forEach(function(t){i.has(t)||s.push(t)}),i.forEach(function(t){o.has(t)||a.push(t)}),this.syncEngine.hi(s,a).then(function(){n.ks=r})},t.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=Od();return t.forEach(function(t,n){e=e.unionWith(n.activeTargetIds)}),e},t}(),Zg=function(){function t(){this.li=new zg,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new zg,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),Wg=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),Kg=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){nl("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){nl("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Qg={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Yg=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),$g=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n}return(0,Yc.ZT)(e,t),e.prototype.ki=function(t,e,n,r){return new Promise(function(i,o){var s=new Qc;s.listenOnce(Zc.COMPLETE,function(){try{switch(s.getLastErrorCode()){case Hc.NO_ERROR:var e=s.getResponseJson();nl("Connection","XHR received:",JSON.stringify(e)),i(e);break;case Hc.TIMEOUT:nl("Connection",'RPC "'+t+'" timed out'),o(new Xc(Jc.DEADLINE_EXCEEDED,"Request time out"));break;case Hc.HTTP_ERROR:var n=s.getStatus();if(nl("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(Jc).indexOf(e)>=0?e:Jc.UNKNOWN}(r.status);o(new Xc(a,r.message))}else o(new Xc(Jc.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new Xc(Jc.UNAVAILABLE,"Connection failed."));break;default:sl()}}finally{nl("Connection",'RPC "'+t+'" completed.')}});var a=JSON.stringify(r);s.send(e,"POST",a,n,15)})},e.prototype.$i=function(t,e){var n=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new Vc,i=Ga(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.Fi(o.initMessageHeaders,e),(0,Wo.uI)()||(0,Wo.b$)()||(0,Wo.d)()||(0,Wo.w1)()||(0,Wo.Mn)()||(0,Wo.ru)()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");nl("Connection","Creating WebChannel: "+s,o);var a=r.createWebChannel(s,o),u=!1,c=!1,l=new Yg({Ei:function(t){c?nl("Connection","Not sending because WebChannel is closed:",t):(u||(nl("Connection","Opening WebChannel transport."),a.open(),u=!0),nl("Connection","WebChannel sending:",t),a.send(t))},Ti:function(){return a.close()}}),h=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return h(a,Kc.EventType.OPEN,function(){c||nl("Connection","WebChannel transport opened.")}),h(a,Kc.EventType.CLOSE,function(){c||(c=!0,nl("Connection","WebChannel transport closed"),l.Vi())}),h(a,Kc.EventType.ERROR,function(t){c||(c=!0,il("Connection","WebChannel transport errored:",t),l.Vi(new Xc(Jc.UNAVAILABLE,"The operation could not be completed")))}),h(a,Kc.EventType.MESSAGE,function(t){var e;if(!c){var n=t.data[0];al(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){nl("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=hd[t];if(void 0!==e)return yd(e)}(i),s=r.message;void 0===o&&(o=Jc.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),c=!0,l.Vi(new Xc(o,s)),a.close()}else nl("Connection","WebChannel received:",n),l.Si(n)}}),h(i,Wc.STAT_EVENT,function(t){10===t.stat?nl("Connection","Detected buffering proxy"):11===t.stat&&nl("Connection","Detected no buffering proxy")}),setTimeout(function(){l.Pi()},0),l},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.Di=(t.ssl?"https":"http")+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);nl("RestConnection","Sending: ",i,n);var o={};return this.Fi(o,r),this.ki(t,i,o,n).then(function(t){return nl("RestConnection","Received: ",t),t},function(e){throw il("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e})},t.prototype.Oi=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.5.0",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){return this.Di+"/v1/"+e+":"+Qg[t]},t}());function Jg(){return"undefined"!=typeof window?window:null}function Xg(){return"undefined"!=typeof document?document:null}function tm(t){return new zd(t,!0)}var em=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Qi=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Ki=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Qi),i=Math.max(0,n-r);i>0&&nl("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,function(){return e.Qi=Date.now(),t()}),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),nm=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new em(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return(0,Yc.mG)(this,void 0,void 0,function(){return(0,Yc.Jh)(this,function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,function(){return t.rr()}))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return(0,Yc.mG)(this,void 0,void 0,function(){return(0,Yc.Jh)(this,function(t){return this.er()?[2,this.close(0)]:[2]})})},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return(0,Yc.mG)(this,void 0,void 0,function(){return(0,Yc.Jh)(this,function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===Jc.RESOURCE_EXHAUSTED?(rl(e.toString()),rl("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Ki()):e&&e.code===Jc.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}})})},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then(function(e){t.Yi===n&&t.lr(e)},function(n){e(function(){var e=new Xc(Jc.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)})})},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii(function(){n(function(){return e.state=2,e.listener.Ii()})}),this.stream.Ri(function(t){n(function(){return e.dr(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji(function(){return(0,Yc.mG)(t,void 0,void 0,function(){return(0,Yc.Jh)(this,function(t){return this.state=0,this.start(),[2]})})})},t.prototype.dr=function(t){return nl("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget(function(){return e.Yi===t?n():(nl("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),rm=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,s}return(0,Yc.ZT)(e,t),e.prototype.wr=function(t){return this.Hi.$i("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:sl()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.I?(al(void 0===e||"string"==typeof e),El.fromBase64String(e||"")):(al(void 0===e||e instanceof Uint8Array),El.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?Jc.UNKNOWN:yd(t.code);return new Xc(e,t.message||"")}(a);n=new Ud(r,i,o,s||null)}else if("documentChange"in e){i=Jd(t,(r=e.documentChange).document.name),o=Kd(r.document.updateTime);var a=new Ql({mapValue:{fields:r.document.fields}}),u=(s=$l.newFoundDocument(i,o,a),r.targetIds||[]);n=new Ld(u,r.removedTargetIds||[],s.key,s)}else if("documentDelete"in e)i=Jd(t,(r=e.documentDelete).document),o=r.readTime?Kd(r.readTime):gl.min(),a=$l.newNoDocument(i,o),n=new Ld([],s=r.removedTargetIds||[],a.key,a);else if("documentRemove"in e)i=Jd(t,(r=e.documentRemove).document),n=new Ld([],o=r.removedTargetIds||[],i,null);else{if(!("filter"in e))return sl();var c=e.filter;i=new gd(r=c.count||0),n=new Fd(o=c.targetId,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return gl.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?gl.min():e.readTime?Kd(e.readTime):gl.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=ef(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=nh(r)?{documents:uf(t,r)}:{query:cf(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=Zd(t,e.resumeToken):e.snapshotVersion.compareTo(gl.min())>0&&(n.readTime=Hd(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return sl()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=ef(this.R),e.removeTarget=t,this.cr(e)},e}(nm),im=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,s.gr=!1,s}return(0,Yc.ZT)(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.$i("Write",t)},e.prototype.onMessage=function(t){if(al(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(al(void 0!==e),t.map(function(t){return function(t,e){var n=Kd(t.updateTime?t.updateTime:e);return n.isEqual(gl.min())&&(n=Kd(e)),new $h(n,t.transformResults||[])}(t,e)})):[]}(t.writeResults,t.commitTime),n=Kd(t.commitTime);return this.listener.Tr(n,e)}return al(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=ef(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map(function(t){return sf(e.R,t)})};this.cr(n)},e}(nm),om=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return(0,Yc.ZT)(e,t),e.prototype.br=function(){if(this.Rr)throw new Xc(Jc.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.Ni(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===Jc.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new Xc(Jc.UNKNOWN,t.toString())})},e.prototype.Oi=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.Oi(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===Jc.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new Xc(Jc.UNKNOWN,t.toString())})},e.prototype.terminate=function(){this.Rr=!0},e}(function(){}),sm=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()}))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(rl(e),this.Vr=!1):nl("OnlineStateTracker",e)},t.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),am=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.Or=new Map,this.$r=new Set,this.Mr=[],this.Lr=i,this.Lr.di(function(t){n.enqueueAndForget(function(){return(0,Yc.mG)(o,void 0,void 0,function(){return(0,Yc.Jh)(this,function(t){switch(t.label){case 0:return mm(this)?(nl("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return(0,Yc.mG)(this,void 0,void 0,function(){var e;return(0,Yc.Jh)(this,function(n){switch(n.label){case 0:return(e=ul(t)).$r.add(4),[4,cm(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.$r.delete(4),[4,um(e)];case 2:return n.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.Br=new sm(n,r)};function um(t){return(0,Yc.mG)(this,void 0,void 0,function(){var e,n;return(0,Yc.Jh)(this,function(r){switch(r.label){case 0:if(!mm(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function cm(t){return(0,Yc.mG)(this,void 0,void 0,function(){var e,n;return(0,Yc.Jh)(this,function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function lm(t,e){var n=ul(t);n.Or.has(e.targetId)||(n.Or.set(e.targetId,e),gm(n)?pm(n):Pm(n).er()&&dm(n,e))}function hm(t,e){var n=ul(t),r=Pm(n);n.Or.delete(e),r.er()&&fm(n,e),0===n.Or.size&&(r.er()?r.ir():mm(n)&&n.Br.set("Unknown"))}function dm(t,e){t.qr.U(e.targetId),Pm(t).mr(e)}function fm(t,e){t.qr.U(e),Pm(t).yr(e)}function pm(t){t.qr=new qd({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.Or.get(e)||null}}),Pm(t).start(),t.Br.Sr()}function gm(t){return mm(t)&&!Pm(t).tr()&&t.Or.size>0}function mm(t){return 0===ul(t).$r.size}function ym(t){t.qr=void 0}function vm(t){return(0,Yc.mG)(this,void 0,void 0,function(){return(0,Yc.Jh)(this,function(e){return t.Or.forEach(function(e,n){dm(t,e)}),[2]})})}function _m(t,e){return(0,Yc.mG)(this,void 0,void 0,function(){return(0,Yc.Jh)(this,function(n){return ym(t),gm(t)?(t.Br.Nr(e),pm(t)):t.Br.set("Unknown"),[2]})})}function wm(t,e,n){return(0,Yc.mG)(this,void 0,void 0,function(){var r,i,o;return(0,Yc.Jh)(this,function(s){switch(s.label){case 0:if(t.Br.set("Online"),!(e instanceof Ud&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return(0,Yc.mG)(this,void 0,void 0,function(){var n,r,i,o;return(0,Yc.Jh)(this,function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?t.Or.has(o=i[r])?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]:[3,5];case 2:s.sent(),t.Or.delete(o),t.qr.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}})})}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),nl("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,bm(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof Ld?t.qr.X(e):e instanceof Fd?t.qr.rt(e):t.qr.et(e),n.isEqual(gl.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,pg(t.localStore)];case 8:return i=s.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach(function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.Or.get(r);i&&t.Or.set(r,i.withResumeToken(n.resumeToken,e))}}),n.targetMismatches.forEach(function(e){var n=t.Or.get(e);if(n){t.Or.set(e,n.withResumeToken(El.EMPTY_BYTE_STRING,n.snapshotVersion)),fm(t,e);var r=new sp(n.target,e,1,n.sequenceNumber);dm(t,r)}}),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return nl("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,bm(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}})})}function bm(t,e,n){return(0,Yc.mG)(this,void 0,void 0,function(){var r=this;return(0,Yc.Jh)(this,function(i){switch(i.label){case 0:if(!$f(e))throw e;return t.$r.add(1),[4,cm(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return pg(t.localStore)}),t.asyncQueue.enqueueRetryable(function(){return(0,Yc.mG)(r,void 0,void 0,function(){return(0,Yc.Jh)(this,function(e){switch(e.label){case 0:return nl("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.$r.delete(1),[4,um(t)];case 2:return e.sent(),[2]}})})}),[2]}})})}function Cm(t,e){return e().catch(function(n){return bm(t,n,e)})}function Tm(t){return(0,Yc.mG)(this,void 0,void 0,function(){var e,n,r,i,o;return(0,Yc.Jh)(this,function(s){switch(s.label){case 0:e=ul(t),n=Om(e),r=e.kr.length>0?e.kr[e.kr.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return mm(t)&&t.kr.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,yg(e.localStore,r)];case 3:return null===(i=s.sent())?(0===e.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.kr.push(e);var n=Om(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,bm(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return Em(e)&&Sm(e),[2]}})})}function Em(t){return mm(t)&&!Om(t).tr()&&t.kr.length>0}function Sm(t){Om(t).start()}function xm(t){return(0,Yc.mG)(this,void 0,void 0,function(){return(0,Yc.Jh)(this,function(e){return Om(t).Ar(),[2]})})}function Im(t){return(0,Yc.mG)(this,void 0,void 0,function(){var e,n,r;return(0,Yc.Jh)(this,function(i){for(e=Om(t),n=0,r=t.kr;n<r.length;n++)e.Er(r[n].mutations);return[2]})})}function km(t,e,n){return(0,Yc.mG)(this,void 0,void 0,function(){var r,i;return(0,Yc.Jh)(this,function(o){switch(o.label){case 0:return r=t.kr.shift(),i=op.from(r,e,n),[4,Cm(t,function(){return t.remoteSyncer.applySuccessfulWrite(i)})];case 1:return o.sent(),[4,Tm(t)];case 2:return o.sent(),[2]}})})}function Am(t,e){return(0,Yc.mG)(this,void 0,void 0,function(){return(0,Yc.Jh)(this,function(n){switch(n.label){case 0:return e&&Om(t).pr?[4,function(t,e){return(0,Yc.mG)(this,void 0,void 0,function(){var n,r;return(0,Yc.Jh)(this,function(i){switch(i.label){case 0:return md(r=e.code)&&r!==Jc.ABORTED?(n=t.kr.shift(),Om(t).sr(),[4,Cm(t,function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)})]):[3,3];case 1:return i.sent(),[4,Tm(t)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Em(t)&&Sm(t),[2]}})})}function Rm(t,e){return(0,Yc.mG)(this,void 0,void 0,function(){var n;return(0,Yc.Jh)(this,function(r){switch(r.label){case 0:return n=ul(t),e?(n.$r.delete(2),[4,um(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.$r.add(2),[4,cm(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function Pm(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=ul(t);return r.br(),new rm(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:vm.bind(null,t),Ri:_m.bind(null,t),_r:wm.bind(null,t)}),t.Mr.push(function(n){return(0,Yc.mG)(e,void 0,void 0,function(){return(0,Yc.Jh)(this,function(e){switch(e.label){case 0:return n?(t.Ur.sr(),gm(t)?pm(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),ym(t),e.label=3;case 3:return[2]}})})})),t.Ur}function Om(t){var e=this;return t.Qr||(t.Qr=function(t,e,n){var r=ul(t);return r.br(),new im(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:xm.bind(null,t),Ri:Am.bind(null,t),Ir:Im.bind(null,t),Tr:km.bind(null,t)}),t.Mr.push(function(n){return(0,Yc.mG)(e,void 0,void 0,function(){return(0,Yc.Jh)(this,function(e){switch(e.label){case 0:return n?(t.Qr.sr(),[4,Tm(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Qr.stop()];case 3:e.sent(),t.kr.length>0&&(nl("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),e.label=4;case 4:return[2]}})})})),t.Qr}var Nm=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Hf,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(t){})}return t.createAndSchedule=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Xc(Jc.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(e){return t.deferred.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function Dm(t,e){if(rl("AsyncQueue",e+": "+t),$f(t))return new Xc(Jc.UNAVAILABLE,e+": "+t);throw t}var Lm=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||Ll.comparator(e.key,n.key)}:function(t,e){return Ll.comparator(t.key,e.key)},this.keyedMap=xd(),this.sortedSet=new vd(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),Fm=function(){function t(){this.Kr=new vd(Ll.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Kr.get(e);n?0!==t.type&&3===n.type?this.Kr=this.Kr.insert(e,t):3===t.type&&1!==n.type?this.Kr=this.Kr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Kr=this.Kr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Kr=this.Kr.remove(e):1===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):sl():this.Kr=this.Kr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Kr.inorderTraversal(function(e,n){t.push(n)}),t},t}(),Um=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach(function(t){o.push({type:0,doc:t})}),new t(e,n,Lm.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Ah(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),Mm=function(){this.Wr=void 0,this.listeners=[]},qm=function(){this.queries=new Zp(function(t){return Rh(t)},Ah),this.onlineState="Unknown",this.Gr=new Set};function Vm(t,e){return(0,Yc.mG)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return(0,Yc.Jh)(this,function(c){switch(c.label){case 0:if(n=ul(t),i=!1,(o=n.queries.get(r=e.query))||(i=!0,o=new Mm),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.onListen(r)];case 2:return s.Wr=c.sent(),[3,4];case 3:return a=c.sent(),u=Dm(a,"Initialization of query '"+Ph(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&zm(n),[2]}})})}function jm(t,e){return(0,Yc.mG)(this,void 0,void 0,function(){var n,r,i,o,s;return(0,Yc.Jh)(this,function(a){return n=ul(t),i=!1,(o=n.queries.get(r=e.query))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]})})}function Bm(t,e){for(var n=ul(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=n.queries.get(s.query);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].Hr(s)&&(r=!0);a.Wr=s}}r&&zm(n)}function Gm(t,e,n){var r=ul(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function zm(t){t.Gr.forEach(function(t){t.next()})}var Hm=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Um(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){return!t.fromCache||!(this.options.so&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=Um.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),Zm=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),Wm=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return Jd(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?of(this.R,t.document,!1):$l.newNoDocument(this.qn(t.metadata.name),this.Qn(t.metadata.readTime))},t.prototype.Qn=function(t){return Kd(t)},t}();!function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(t)}t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new Wm(this.R),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.qn(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],l=(e.get(c)||Rd()).add(s);e.set(c,l)}}return e},t.prototype.complete=function(){return(0,Yc.mG)(this,void 0,void 0,function(){var t,e,n,r,i;return(0,Yc.Jh)(this,function(o){switch(o.label){case 0:return[4,Eg(this.localStore,new Wm(this.R),this.documents,this.ro.id)];case 1:t=o.sent(),e=this.co(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?[4,Sg(this.localStore,i=r[n],e.get(i.name))]:[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new sg(Object.assign({},this.progress),t))]}})})}}();var Km=function(t){this.key=t},Qm=function(t){this.key=t},Ym=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=Rd(),this.mutatedKeys=Rd(),this.lo=Nh(t),this.fo=new Lm(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new Fm,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=bh(this.query)&&i.size===this.query.limit?i.last():null,c=Ch(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(function(t,e){var l=i.get(t),h=Oh(n.query,e)?e:null,d=!!l&&n.mutatedKeys.has(l.key),f=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?d!==f&&(r.track({type:3,doc:h}),p=!0):n.yo(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.lo(h,u)>0||c&&n.lo(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(a=!0)),p&&(h?(s=s.add(h),o=f?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))}),bh(this.query)||Ch(this.query))for(;s.size>this.query.limit;){var l=bh(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fo:s,mo:r,Nn:a,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return sl()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)}),this.po(n);var s=e?this.Eo():[],a=0===this.ho.size&&this.current?1:0,u=a!==this.ao;return this.ao=a,0!==o.length||u?{snapshot:new Um(this.query,t.fo,i,o,t.mutatedKeys,0===a,u,!1),To:s}:{To:s}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new Fm,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach(function(t){return e.uo=e.uo.add(t)}),t.modifiedDocuments.forEach(function(t){}),t.removedDocuments.forEach(function(t){return e.uo=e.uo.delete(t)}),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=Rd(),this.fo.forEach(function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))});var n=[];return e.forEach(function(e){t.ho.has(e)||n.push(new Qm(e))}),this.ho.forEach(function(t){e.has(t)||n.push(new Km(t))}),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=Rd();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return Um.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),$m=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Jm=function(t){this.key=t,this.bo=!1},Xm=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new Zp(function(t){return Rh(t)},Ah),this.Vo=new Map,this.So=new Set,this.Do=new vd(Ll.comparator),this.Co=new Map,this.No=new Ig,this.xo={},this.Fo=new Map,this.ko=Dp.Yt(),this.onlineState="Unknown",this.Oo=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.Oo},enumerable:!1,configurable:!0}),t}();function ty(t,e){return(0,Yc.mG)(this,void 0,void 0,function(){var n,r,i,o,s;return(0,Yc.Jh)(this,function(a){switch(a.label){case 0:return n=Ay(t),(i=n.Po.get(e))?(n.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.Ro(),[3,4]):[3,1];case 1:return[4,vg(n.localStore,Ih(e))];case 2:return o=a.sent(),s=n.sharedClientState.addLocalQueryTarget(o.targetId),[4,ey(n,e,o.targetId,"current"===s)];case 3:r=a.sent(),n.isPrimaryClient&&lm(n.remoteStore,o),a.label=4;case 4:return[2,r]}})})}function ey(t,e,n,r){return(0,Yc.mG)(this,void 0,void 0,function(){var i,o,s,a,u,c;return(0,Yc.Jh)(this,function(l){switch(l.label){case 0:return t.$o=function(e,n,r){return function(t,e,n,r){return(0,Yc.mG)(this,void 0,void 0,function(){var i,o,s;return(0,Yc.Jh)(this,function(a){switch(a.label){case 0:return(i=e.view._o(n)).Nn?[4,wg(t.localStore,e.query,!1).then(function(t){return e.view._o(t.documents,i)})]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),s=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(py(t,e.targetId,s.To),s.snapshot)]}})})}(t,e,n,r)},[4,wg(t.localStore,e,!0)];case 1:return i=l.sent(),o=new Ym(e,i.Bn),s=o._o(i.documents),a=Dd.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=o.applyChanges(s,t.isPrimaryClient,a),py(t,n,u.To),c=new $m(e,n,o),[2,(t.Po.set(e,c),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),u.snapshot)]}})})}function ny(t,e){return(0,Yc.mG)(this,void 0,void 0,function(){var n,r,i;return(0,Yc.Jh)(this,function(o){switch(o.label){case 0:return n=ul(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter(function(t){return!Ah(t,e)})),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,_g(n.localStore,r.targetId,!1).then(function(){n.sharedClientState.clearQueryState(r.targetId),hm(n.remoteStore,r.targetId),dy(n,r.targetId)}).catch(qp)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return dy(n,r.targetId),[4,_g(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}})})}function ry(t,e,n){return(0,Yc.mG)(this,void 0,void 0,function(){var r,i,o,s;return(0,Yc.Jh)(this,function(a){switch(a.label){case 0:r=Ry(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=ul(t),i=pl.now(),o=e.reduce(function(t,e){return t.add(e.key)},Rd());return r.persistence.runTransaction("Locally write mutations","readwrite",function(t){return r.Mn.pn(t,o).next(function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],l=rd(c,n.get(c.key));null!=l&&s.push(new ad(c.key,l,Yl(l.toProto().mapValue),Jh.exists(!0)))}return r._n.addMutationBatch(t,i,s,e)})}).then(function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}})}(r.localStore,e)];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new vd(hl)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,yy(r,i.changes)];case 3:return a.sent(),[4,Tm(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=Dm(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}})})}function iy(t,e){return(0,Yc.mG)(this,void 0,void 0,function(){var n,r;return(0,Yc.Jh)(this,function(i){switch(i.label){case 0:n=ul(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,gg(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach(function(t,e){var r=n.Co.get(e);r&&(al(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?al(r.bo):t.removedDocuments.size>0&&(al(r.bo),r.bo=!1))}),[4,yy(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,qp(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function oy(t,e,n){var r=ul(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach(function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)}),function(t,e){var n=ul(t);n.onlineState=e;var r=!1;n.queries.forEach(function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)}),r&&zm(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function sy(t,e,n){return(0,Yc.mG)(this,void 0,void 0,function(){var r,i,o,s,a,u;return(0,Yc.Jh)(this,function(c){switch(c.label){case 0:return(r=ul(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(o=i&&i.key)?(s=(s=new vd(Ll.comparator)).insert(o,$l.newNoDocument(o,gl.min())),a=Rd().add(o),u=new Nd(gl.min(),new Map,new bd(hl),s,a),[4,iy(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),my(r),[3,4];case 2:return[4,_g(r.localStore,e,!1).then(function(){return dy(r,e,n)}).catch(qp)];case 3:c.sent(),c.label=4;case 4:return[2]}})})}function ay(t,e){return(0,Yc.mG)(this,void 0,void 0,function(){var n,r,i;return(0,Yc.Jh)(this,function(o){switch(o.label){case 0:n=ul(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,fg(n.localStore,e)];case 2:return i=o.sent(),hy(n,r,null),ly(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,yy(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,qp(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function uy(t,e,n){return(0,Yc.mG)(this,void 0,void 0,function(){var r,i;return(0,Yc.Jh)(this,function(o){switch(o.label){case 0:r=ul(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=ul(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(t){var r;return n._n.lookupMutationBatch(t,e).next(function(e){return al(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}(r.localStore,e)];case 2:return i=o.sent(),hy(r,e,n),ly(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,yy(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,qp(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function cy(t,e){return(0,Yc.mG)(this,void 0,void 0,function(){var n,r,i,o,s;return(0,Yc.Jh)(this,function(a){switch(a.label){case 0:mm((n=ul(t)).remoteStore)||nl("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=ul(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e._n.getHighestUnacknowledgedBatchId(t)})}(n.localStore)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Fo.get(r)||[]).push(e),n.Fo.set(r,i),[3,4]);case 3:return o=a.sent(),s=Dm(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}})})}function ly(t,e){(t.Fo.get(e)||[]).forEach(function(t){t.resolve()}),t.Fo.delete(e)}function hy(t,e,n){var r=ul(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function dy(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach(function(e){t.No.containsKey(e)||fy(t,e)})}function fy(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(hm(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),my(t))}function py(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof Km?(t.No.addReference(o.key,e),gy(t,o)):o instanceof Qm?(nl("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||fy(t,o.key)):sl()}}function gy(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(nl("SyncEngine","New document in limbo: "+n),t.So.add(r),my(t))}function my(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new Ll(wl.fromString(e)),r=t.ko.next();t.Co.set(r,new Jm(n)),t.Do=t.Do.insert(n,r),lm(t.remoteStore,new sp(Ih(wh(n.path)),r,2,$c.o))}}function yy(t,e,n){return(0,Yc.mG)(this,void 0,void 0,function(){var r,i,o,s;return(0,Yc.Jh)(this,function(a){switch(a.label){case 0:return r=ul(t),i=[],o=[],s=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach(function(t,a){s.push(r.$o(a,e,n).then(function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=ug.Pn(a.targetId,t);o.push(e)}}))}),[4,Promise.all(s)]);case 1:return a.sent(),r.vo._r(i),[4,function(t,e){return(0,Yc.mG)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c;return(0,Yc.Jh)(this,function(l){switch(l.label){case 0:n=ul(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(t){return Zf.forEach(e,function(e){return Zf.forEach(e.bn,function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)}).next(function(){return Zf.forEach(e.vn,function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)})})})})];case 2:return l.sent(),[3,4];case 3:if(!$f(r=l.sent()))throw r;return nl("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=(s=o[i]).targetId,s.fromCache||(u=n.Fn.get(a),c=u.withLastLimboFreeSnapshotVersion(u.snapshotVersion),n.Fn=n.Fn.insert(a,c));return[2]}})})}(r.localStore,o)];case 2:a.sent(),a.label=3;case 3:return[2]}})})}function vy(t,e){return(0,Yc.mG)(this,void 0,void 0,function(){var n,r;return(0,Yc.Jh)(this,function(i){switch(i.label){case 0:return(n=ul(t)).currentUser.isEqual(e)?[3,3]:(nl("SyncEngine","User change. New user:",e.toKey()),[4,dg(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Fo.forEach(function(t){t.forEach(function(t){t.reject(new Xc(Jc.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),t.Fo.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,yy(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function _y(t,e){var n=ul(t),r=n.Co.get(e);if(r&&r.bo)return Rd().add(r.key);var i=Rd(),o=n.Vo.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=n.Po.get(a[s]);i=i.unionWith(u.view.wo)}return i}function wy(t,e){return(0,Yc.mG)(this,void 0,void 0,function(){var n,r,i;return(0,Yc.Jh)(this,function(o){switch(o.label){case 0:return[4,wg((n=ul(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&py(n,e.targetId,i.To),i)]}})})}function by(t){return(0,Yc.mG)(this,void 0,void 0,function(){var e;return(0,Yc.Jh)(this,function(n){return[2,Cg((e=ul(t)).localStore).then(function(t){return yy(e,t)})]})})}function Cy(t,e,n,r){return(0,Yc.mG)(this,void 0,void 0,function(){var i,o;return(0,Yc.Jh)(this,function(s){switch(s.label){case 0:return[4,function(t,e){var n=ul(t),r=ul(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(t){return r.jt(t,e).next(function(e){return e?n.Mn.pn(t,e):Zf.resolve(null)})})}((i=ul(t)).localStore,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,Tm(i.remoteStore)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(hy(i,e,r||null),ly(i,e),function(t,e){ul(ul(t)._n).Gt(e)}(i.localStore,e)):sl(),s.label=4;case 4:return[4,yy(i,o)];case 5:return s.sent(),[3,7];case 6:nl("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}})})}function Ty(t,e){return(0,Yc.mG)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return(0,Yc.Jh)(this,function(c){switch(c.label){case 0:return Ay(n=ul(t)),Ry(n),!0!==e||!0===n.Oo?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,Ey(n,r.toArray())]);case 1:return i=c.sent(),n.Oo=!0,[4,Rm(n.remoteStore,!0)];case 2:for(c.sent(),o=0,s=i;o<s.length;o++)lm(n.remoteStore,s[o]);return[3,7];case 3:return!1!==e||!1===n.Oo?[3,7]:(a=[],u=Promise.resolve(),n.Vo.forEach(function(t,e){n.sharedClientState.isLocalQueryTarget(e)?a.push(e):u=u.then(function(){return dy(n,e),_g(n.localStore,e,!0)}),hm(n.remoteStore,e)}),[4,u]);case 4:return c.sent(),[4,Ey(n,a)];case 5:return c.sent(),function(t){var e=ul(t);e.Co.forEach(function(t,n){hm(e.remoteStore,n)}),e.No.ts(),e.Co=new Map,e.Do=new vd(Ll.comparator)}(n),n.Oo=!1,[4,Rm(n.remoteStore,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}})})}function Ey(t,e,n){return(0,Yc.mG)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,l,h,d,f,p;return(0,Yc.Jh)(this,function(g){switch(g.label){case 0:n=ul(t),r=[],i=[],o=0,s=e,g.label=1;case 1:return o<s.length?(u=void 0,(c=n.Vo.get(a=s[o]))&&0!==c.length?[4,vg(n.localStore,Ih(c[0]))]:[3,7]):[3,13];case 2:u=g.sent(),l=0,h=c,g.label=3;case 3:return l<h.length?(d=n.Po.get(h[l]),[4,wy(n,d)]):[3,6];case 4:(f=g.sent()).snapshot&&i.push(f.snapshot),g.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,bg(n.localStore,a)];case 8:return p=g.sent(),[4,vg(n.localStore,p)];case 9:return u=g.sent(),[4,ey(n,Sy(p),a,!1)];case 10:g.sent(),g.label=11;case 11:r.push(u),g.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}})})}function Sy(t){return _h(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function xy(t){var e=ul(t);return ul(ul(e.localStore).persistence).fn()}function Iy(t,e,n,r){return(0,Yc.mG)(this,void 0,void 0,function(){var i,o,s;return(0,Yc.Jh)(this,function(a){switch(a.label){case 0:return(i=ul(t)).Oo?(nl("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Cg(i.localStore)];case 3:return o=a.sent(),s=Nd.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,yy(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,_g(i.localStore,e,!0)];case 6:return a.sent(),dy(i,e,r),[3,8];case 7:sl(),a.label=8;case 8:return[2]}})})}function ky(t,e,n){return(0,Yc.mG)(this,void 0,void 0,function(){var r,i,o,s,a,u,c,l,h;return(0,Yc.Jh)(this,function(d){switch(d.label){case 0:if(!(r=Ay(t)).Oo)return[3,10];i=0,o=e,d.label=1;case 1:return i<o.length?r.Vo.has(s=o[i])?(nl("SyncEngine","Adding an already active target "+s),[3,5]):[4,bg(r.localStore,s)]:[3,6];case 2:return a=d.sent(),[4,vg(r.localStore,a)];case 3:return u=d.sent(),[4,ey(r,Sy(a),u.targetId,!1)];case 4:d.sent(),lm(r.remoteStore,u),d.label=5;case 5:return i++,[3,1];case 6:c=function(t){return(0,Yc.Jh)(this,function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,_g(r.localStore,t,!1).then(function(){hm(r.remoteStore,t),dy(r,t)}).catch(qp)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})},l=0,h=n,d.label=7;case 7:return l<h.length?[5,c(h[l])]:[3,10];case 8:d.sent(),d.label=9;case 9:return l++,[3,7];case 10:return[2]}})})}function Ay(t){var e=ul(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=iy.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=_y.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=sy.bind(null,e),e.vo._r=Bm.bind(null,e.eventManager),e.vo.Mo=Gm.bind(null,e.eventManager),e}function Ry(t){var e=ul(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ay.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=uy.bind(null,e),e}var Py=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return(0,Yc.mG)(this,void 0,void 0,function(){return(0,Yc.Jh)(this,function(e){switch(e.label){case 0:return this.R=tm(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Qo(t),[2]}})})},t.prototype.Uo=function(t){return null},t.prototype.Qo=function(t){return hg(this.persistence,new cg,t.initialUser,this.R)},t.prototype.qo=function(t){return new Ng(Lg.bs,this.R)},t.prototype.Bo=function(t){return new Zg},t.prototype.terminate=function(){return(0,Yc.mG)(this,void 0,void 0,function(){return(0,Yc.Jh)(this,function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}})})},t}(),Oy=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Ko=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return(0,Yc.ZT)(e,t),e.prototype.initialize=function(e){return(0,Yc.mG)(this,void 0,void 0,function(){return(0,Yc.Jh)(this,function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,Tg(this.localStore)];case 2:return n.sent(),[4,this.Ko.initialize(this,e)];case 3:return n.sent(),[4,Ry(this.Ko.syncEngine)];case 4:return n.sent(),[4,Tm(this.Ko.remoteStore)];case 5:return n.sent(),[2]}})})},e.prototype.Qo=function(t){return hg(this.persistence,new cg,t.initialUser,this.R)},e.prototype.Uo=function(t){return new Bp(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)},e.prototype.qo=function(t){var e=og(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?xp.withCacheSize(this.cacheSizeBytes):xp.DEFAULT;return new ng(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,Jg(),Xg(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new Zg},e}(Py),Ny=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Ko=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return(0,Yc.ZT)(e,t),e.prototype.initialize=function(e){return(0,Yc.mG)(this,void 0,void 0,function(){var n,r=this;return(0,Yc.Jh)(this,function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Ko.syncEngine,this.sharedClientState instanceof Hg?(this.sharedClientState.syncEngine={ui:Cy.bind(null,n),ai:Iy.bind(null,n),hi:ky.bind(null,n),fn:xy.bind(null,n),ci:by.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He(function(t){return(0,Yc.mG)(r,void 0,void 0,function(){return(0,Yc.Jh)(this,function(e){switch(e.label){case 0:return[4,Ty(this.Ko.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}})})})];case 4:return i.sent(),[2]}})})},e.prototype.Bo=function(t){var e=Jg();if(!Hg.yt(e))throw new Xc(Jc.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=og(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new Hg(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(Oy),Dy=function(){function t(){}return t.prototype.initialize=function(t,e){return(0,Yc.mG)(this,void 0,void 0,function(){var n=this;return(0,Yc.Jh)(this,function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return oy(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=vy.bind(null,this.syncEngine),[4,Rm(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.createEventManager=function(t){return new qm},t.prototype.createDatastore=function(t){var e=tm(t.databaseInfo.databaseId),n=new $g(t.databaseInfo);return function(t,e,n){return new om(t,e,n)}(t.credentials,n,e)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,s=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return oy(s.syncEngine,t,0)},o=Kg.yt()?new Kg:new Wg,new am(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,s){var a=new Xm(t,e,n,r,i,o);return s&&(a.Oo=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return(0,Yc.mG)(this,void 0,void 0,function(){var e;return(0,Yc.Jh)(this,function(n){switch(n.label){case 0:return e=ul(t),nl("RemoteStore","RemoteStore shutting down."),e.$r.add(5),[4,cm(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}})})}(this.remoteStore)},t}(),Ly=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),Fy=(function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new Hf,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then(function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))},function(t){return n.metadata.reject(t)})}t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return(0,Yc.mG)(this,void 0,void 0,function(){return(0,Yc.Jh)(this,function(t){return[2,this.metadata.promise]})})},t.prototype.Lo=function(){return(0,Yc.mG)(this,void 0,void 0,function(){return(0,Yc.Jh)(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}})})},t.prototype.Ho=function(){return(0,Yc.mG)(this,void 0,void 0,function(){var t,e,n,r;return(0,Yc.Jh)(this,function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(t=i.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new Zm(JSON.parse(r),t.length+n)]}})})},t.prototype.Zo=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},t.prototype.Jo=function(){return(0,Yc.mG)(this,void 0,void 0,function(){var t,e;return(0,Yc.Jh)(this,function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}})})},t.prototype.Xo=function(t){return(0,Yc.mG)(this,void 0,void 0,function(){var e;return(0,Yc.Jh)(this,function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}})})},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return(0,Yc.mG)(this,void 0,void 0,function(){var t,e;return(0,Yc.Jh)(this,function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}})})}}(),function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return(0,Yc.mG)(this,void 0,void 0,function(){var e,n=this;return(0,Yc.Jh)(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Xc(Jc.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return(0,Yc.mG)(this,void 0,void 0,function(){var n,r,i,o,s,a;return(0,Yc.Jh)(this,function(u){switch(u.label){case 0:return n=ul(t),r=ef(n.R)+"/documents",i={documents:e.map(function(t){return $d(n.R,t)})},[4,n.Oi("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach(function(t){var e=function(t,e){return"found"in e?function(t,e){al(!!e.found);var n=Jd(t,e.found.name),r=Kd(e.found.updateTime),i=new Ql({mapValue:{fields:e.found.fields}});return $l.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){al(!!e.missing),al(!!e.readTime);var n=Jd(t,e.missing),r=Kd(e.readTime);return $l.newNoDocument(n,r)}(t,e):sl()}(n.R,t);s.set(e.key.toString(),e)}),a=[],[2,(e.forEach(function(t){var e=s.get(t.toString());al(!!e),a.push(e)}),a)]}})})}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach(function(t){return n.recordVersion(t)}),e)]}})})},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new fd(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return(0,Yc.mG)(this,void 0,void 0,function(){var t,e=this;return(0,Yc.Jh)(this,function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach(function(e){t.delete(e.key.toString())}),t.forEach(function(t,n){var r=Ll.fromPath(n);e.mutations.push(new pd(r,e.precondition(r)))}),[4,function(t,e){return(0,Yc.mG)(this,void 0,void 0,function(){var n,r,i;return(0,Yc.Jh)(this,function(o){switch(o.label){case 0:return n=ul(t),r=ef(n.R)+"/documents",i={writes:e.map(function(t){return sf(n.R,t)})},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}})})},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw sl();e=gl.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Xc(Jc.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?Jh.updateTime(e):Jh.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(gl.min()))throw new Xc(Jc.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Jh.updateTime(e)}return Jh.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}()),Uy=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new em(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji(function(){return(0,Yc.mG)(t,void 0,void 0,function(){var t,e,n=this;return(0,Yc.Jh)(this,function(r){return t=new Fy(this.datastore),(e=this.sc(t))&&e.then(function(e){n.asyncQueue.enqueueAndForget(function(){return t.commit().then(function(){n.deferred.resolve(e)}).catch(function(t){n.ic(t)})})}).catch(function(t){n.ic(t)}),[2]})})})},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!Ol(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget(function(){return e.nc(),Promise.resolve()})):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!md(e)}return!1},t}(),My=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=Fg.UNAUTHENTICATED,this.clientId=ll.u(),this.credentialListener=function(){},this.receivedInitialUser=new Hf,this.credentials.setChangeListener(function(t){nl("FirestoreClient","Received user=",t.uid),r.user=t,r.credentialListener(t),r.receivedInitialUser.resolve()})}return t.prototype.getConfiguration=function(){return(0,Yc.mG)(this,void 0,void 0,function(){return(0,Yc.Jh)(this,function(t){switch(t.label){case 0:return[4,this.receivedInitialUser.promise];case 1:return[2,(t.sent(),{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100})]}})})},t.prototype.setCredentialChangeListener=function(t){var e=this;this.credentialListener=t,this.receivedInitialUser.promise.then(function(){return e.credentialListener(e.user)})},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new Xc(Jc.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new Hf;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return(0,Yc.mG)(t,void 0,void 0,function(){var t,n;return(0,Yc.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=Dm(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}})})}),e.promise},t}();function qy(t,e){return(0,Yc.mG)(this,void 0,void 0,function(){var n,r,i=this;return(0,Yc.Jh)(this,function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),nl("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener(function(n){r.isEqual(n)||(r=n,t.asyncQueue.enqueueRetryable(function(){return(0,Yc.mG)(i,void 0,void 0,function(){return(0,Yc.Jh)(this,function(t){switch(t.label){case 0:return[4,dg(e.localStore,n)];case 1:return t.sent(),[2]}})})}))}),e.persistence.setDatabaseDeletedListener(function(){return t.terminate()}),t.offlineComponents=e,[2]}})})}function Vy(t,e){return(0,Yc.mG)(this,void 0,void 0,function(){var n,r;return(0,Yc.Jh)(this,function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,jy(t)];case 1:return n=i.sent(),nl("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener(function(n){return t.asyncQueue.enqueueRetryable(function(){return function(t,e){return(0,Yc.mG)(this,void 0,void 0,function(){var n,r;return(0,Yc.Jh)(this,function(i){switch(i.label){case 0:return(n=ul(t)).asyncQueue.verifyOperationInProgress(),nl("RemoteStore","RemoteStore received new credentials"),r=mm(n),n.$r.add(3),[4,cm(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.$r.delete(3),[4,um(n)];case 3:return i.sent(),[2]}})})}(e.remoteStore,n)})}),t.onlineComponents=e,[2]}})})}function jy(t){return(0,Yc.mG)(this,void 0,void 0,function(){return(0,Yc.Jh)(this,function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(nl("FirestoreClient","Using default OfflineComponentProvider"),[4,qy(t,new Py)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}})})}function By(t){return(0,Yc.mG)(this,void 0,void 0,function(){return(0,Yc.Jh)(this,function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(nl("FirestoreClient","Using default OnlineComponentProvider"),[4,Vy(t,new Dy)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}})})}function Gy(t){return jy(t).then(function(t){return t.persistence})}function zy(t){return jy(t).then(function(t){return t.localStore})}function Hy(t){return By(t).then(function(t){return t.remoteStore})}function Zy(t){return By(t).then(function(t){return t.syncEngine})}function Wy(t){return(0,Yc.mG)(this,void 0,void 0,function(){var e,n;return(0,Yc.Jh)(this,function(r){switch(r.label){case 0:return[4,By(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=ty.bind(null,e.syncEngine),n.onUnlisten=ny.bind(null,e.syncEngine),n)]}})})}function Ky(t,e,n){var r=this;void 0===n&&(n={});var i=new Hf;return t.asyncQueue.enqueueAndForget(function(){return(0,Yc.mG)(r,void 0,void 0,function(){var r;return(0,Yc.Jh)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Ly({next:function(o){e.enqueueAndForget(function(){return jm(t,s)});var a=o.docs.has(n);!a&&o.fromCache?i.reject(new Xc(Jc.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new Xc(Jc.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new Hm(wh(n.path),o,{includeMetadataChanges:!0,so:!0});return Vm(t,s)},[4,Wy(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}function Qy(t,e,n){var r=this;void 0===n&&(n={});var i=new Hf;return t.asyncQueue.enqueueAndForget(function(){return(0,Yc.mG)(r,void 0,void 0,function(){var r;return(0,Yc.Jh)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Ly({next:function(n){e.enqueueAndForget(function(){return jm(t,s)}),n.fromCache&&"server"===r.source?i.reject(new Xc(Jc.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new Hm(n,o,{includeMetadataChanges:!0,so:!0});return Vm(t,s)},[4,Wy(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}var Yy=function(t,e,n,r,i,o,s){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s},$y=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),Jy=new Map,Xy=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},tv=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t){this.changeListener=t,t(Fg.UNAUTHENTICATED)},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),ev=function(){function t(t){this.token=t,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t){this.changeListener=t,t(this.token.user)},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),nv=function(){function t(t){var e=this;this.oc=null,this.currentUser=Fg.UNAUTHENTICATED,this.receivedInitialUser=!1,this.cc=0,this.changeListener=null,this.forceRefresh=!1,this.oc=function(){e.cc++,e.currentUser=e.uc(),e.receivedInitialUser=!0,e.changeListener&&e.changeListener(e.currentUser)},this.cc=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.oc):(this.oc(null),t.get().then(function(t){e.auth=t,e.oc&&e.auth.addAuthTokenListener(e.oc)},function(){}))}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return t.cc!==e?(nl("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(al("string"==typeof n.accessToken),new Xy(n.accessToken,t.currentUser)):null}):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t){this.changeListener=t,this.receivedInitialUser&&t(this.currentUser)},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.oc),this.oc=null,this.changeListener=null},t.prototype.uc=function(){var t=this.auth&&this.auth.getUid();return al(null===t||"string"==typeof t),new Fg(t)},t}(),rv=function(){function t(t,e,n){this.ac=t,this.hc=e,this.lc=n,this.type="FirstParty",this.user=Fg.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.hc},e=this.ac.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.lc&&(t["X-Goog-Iam-Authorization-Token"]=this.lc),t},enumerable:!1,configurable:!0}),t}(),iv=function(){function t(t,e,n){this.ac=t,this.hc=e,this.lc=n}return t.prototype.getToken=function(){return Promise.resolve(new rv(this.ac,this.hc,this.lc))},t.prototype.setChangeListener=function(t){t(Fg.FIRST_PARTY)},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function ov(t,e,n){if(!n)throw new Xc(Jc.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function sv(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Xc(Jc.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function av(t,e,n,r){if(!0===e&&!0===r)throw new Xc(Jc.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function uv(t){if(!Ll.isDocumentKey(t))throw new Xc(Jc.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function cv(t){if(Ll.isDocumentKey(t))throw new Xc(Jc.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function lv(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":sl()}function hv(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Xc(Jc.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=lv(t);throw new Xc(Jc.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function dv(t,e){if(e<=0)throw new Xc(Jc.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var fv=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Xc(Jc.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Xc(Jc.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,av("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),pv=function(){function t(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new fv({}),this._settingsFrozen=!1,t instanceof $y?(this._databaseId=t,this._credentials=new tv):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Xc(Jc.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $y(t.options.projectId)}(t),this._credentials=new nv(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new Xc(Jc.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new Xc(Jc.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new fv(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new tv;switch(t.type){case"gapi":var e=t.client;return al(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new iv(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Xc(Jc.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return(t=Jy.get(this))&&(nl("ComponentProvider","Removing Datastore"),Jy.delete(this),t.terminate()),Promise.resolve();var t},t}(),gv=function(){function t(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new yv(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),mv=function(){function t(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),yv=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,wh(r))||this)._path=r,i.type="collection",i}return(0,Yc.ZT)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new gv(this.firestore,null,new Ll(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(mv);function vv(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=(0,Wo.m9)(t),ov("collection","path",e),t instanceof pv)return cv(n=wl.fromString.apply(wl,(0,Yc.ev)([e],r))),new yv(t,null,n);if(!(t instanceof gv||t instanceof yv))throw new Xc(Jc.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return cv(n=wl.fromString.apply(wl,(0,Yc.ev)([t.path],r)).child(wl.fromString(e))),new yv(t.firestore,null,n)}function _v(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=(0,Wo.m9)(t),1===arguments.length&&(e=ll.u()),ov("doc","path",e),t instanceof pv)return uv(n=wl.fromString.apply(wl,(0,Yc.ev)([e],r))),new gv(t,null,new Ll(n));if(!(t instanceof gv||t instanceof yv))throw new Xc(Jc.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return uv(n=t._path.child(wl.fromString.apply(wl,(0,Yc.ev)([e],r)))),new gv(t.firestore,t instanceof yv?t.converter:null,new Ll(n))}function wv(t,e){return t=(0,Wo.m9)(t),e=(0,Wo.m9)(e),(t instanceof gv||t instanceof yv)&&(e instanceof gv||e instanceof yv)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function bv(t,e){return t=(0,Wo.m9)(t),e=(0,Wo.m9)(e),t instanceof mv&&e instanceof mv&&t.firestore===e.firestore&&Ah(t._query,e._query)&&t.converter===e.converter}var Cv=function(){function t(){var t=this;this.fc=Promise.resolve(),this.dc=[],this.wc=!1,this._c=[],this.mc=null,this.yc=!1,this.gc=[],this.Zi=new em(this,"async_queue_retry"),this.Ec=function(){var e=Xg();e&&nl("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=Xg();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ec)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this.wc},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Tc(),this.Ic(t)},t.prototype.enterRestrictedMode=function(){if(!this.wc){this.wc=!0;var t=Xg();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ec)}},t.prototype.enqueue=function(t){return this.Tc(),this.wc?new Promise(function(t){}):this.Ic(t)},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget(function(){return e.dc.push(t),e.Ac()})},t.prototype.Ac=function(){return(0,Yc.mG)(this,void 0,void 0,function(){var t,e=this;return(0,Yc.Jh)(this,function(n){switch(n.label){case 0:if(0===this.dc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.dc[0]()];case 2:return n.sent(),this.dc.shift(),this.Zi.reset(),[3,4];case 3:if(!$f(t=n.sent()))throw t;return nl("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.dc.length>0&&this.Zi.ji(function(){return e.Ac()}),n.label=5;case 5:return[2]}})})},t.prototype.Ic=function(t){var e=this,n=this.fc.then(function(){return e.yc=!0,t().catch(function(t){throw e.mc=t,e.yc=!1,rl("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t}).then(function(t){return e.yc=!1,t})});return this.fc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Tc(),this.gc.indexOf(t)>-1&&(e=0);var i=Nm.createAndSchedule(this,t,e,n,function(t){return r.Rc(t)});return this._c.push(i),i},t.prototype.Tc=function(){this.mc&&sl()},t.prototype.verifyOperationInProgress=function(){},t.prototype.bc=function(){return(0,Yc.mG)(this,void 0,void 0,function(){var t;return(0,Yc.Jh)(this,function(e){switch(e.label){case 0:return[4,t=this.fc];case 1:e.sent(),e.label=2;case 2:if(t!==this.fc)return[3,0];e.label=3;case 3:return[2]}})})},t.prototype.vc=function(t){for(var e=0,n=this._c;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Pc=function(t){var e=this;return this.bc().then(function(){e._c.sort(function(t,e){return t.targetTimeMs-e.targetTimeMs});for(var n=0,r=e._c;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.bc()})},t.prototype.Vc=function(t){this.gc.push(t)},t.prototype.Rc=function(t){var e=this._c.indexOf(t);this._c.splice(e,1)},t}();function Tv(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}!function(){function t(){this._progressObserver={},this._taskCompletionResolver=new Hf,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}();var Ev=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).type="firestore",r._queue=new Cv,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return(0,Yc.ZT)(e,t),e.prototype._terminate=function(){return this._firestoreClient||xv(this),this._firestoreClient.terminate()},e}(pv);function Sv(t){return t._firestoreClient||xv(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function xv(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new Yy(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new My(t._credentials,t._queue,r)}function Iv(t,e,n){var r=this,i=new Hf;return t.asyncQueue.enqueue(function(){return(0,Yc.mG)(r,void 0,void 0,function(){var r;return(0,Yc.Jh)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,qy(t,n)];case 1:return o.sent(),[4,Vy(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===Jc.FAILED_PRECONDITION||t.code===Jc.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function kv(t){if(t._initialized||t._terminated)throw new Xc(Jc.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Av=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new Xc(Jc.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Cl(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),Rv=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(El.fromBase64String(e))}catch(e){throw new Xc(Jc.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(El.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),Pv=function(t){this._methodName=t},Ov=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new Xc(Jc.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Xc(Jc.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return hl(this._lat,t._lat)||hl(this._long,t._long)},t}(),Nv=/^__.*__$/,Dv=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new ad(t,this.data,this.fieldMask,e,this.fieldTransforms):new sd(t,this.data,e,this.fieldTransforms)},t}(),Lv=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new ad(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function Fv(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw sl()}}var Uv=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Sc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dc",{get:function(){return this.settings.Dc},enumerable:!1,configurable:!0}),t.prototype.Cc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.Nc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Cc({path:n,xc:!1});return r.Fc(t),r},t.prototype.kc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Cc({path:n,xc:!1});return r.Sc(),r},t.prototype.Oc=function(t){return this.Cc({path:void 0,xc:!0})},t.prototype.$c=function(t){return r_(t,this.settings.methodName,this.settings.Mc||!1,this.path,this.settings.Lc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find(function(e){return t.isPrefixOf(e)})||void 0!==this.fieldTransforms.find(function(e){return t.isPrefixOf(e.field)})},t.prototype.Sc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.Fc(this.path.get(t))},t.prototype.Fc=function(t){if(0===t.length)throw this.$c("Document fields must not be empty");if(Fv(this.Dc)&&Nv.test(t))throw this.$c('Document fields cannot begin and end with "__"')},t}(),Mv=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||tm(t)}return t.prototype.Bc=function(t,e,n,r){return void 0===r&&(r=!1),new Uv({Dc:t,methodName:e,Lc:n,path:Cl.emptyPath(),xc:!1,Mc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function qv(t){var e=t._freezeSettings(),n=tm(t._databaseId);return new Mv(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Vv(t,e,n,r,i,o){void 0===o&&(o={});var s=t.Bc(o.merge||o.mergeFields?2:0,e,n,i);Xv("Data must be an object, but it was:",s,r);var a,u,c=$v(r,s);if(o.merge)a=new Tl(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,d=o.mergeFields;h<d.length;h++){var f=t_(e,d[h],n);if(!s.contains(f))throw new Xc(Jc.INVALID_ARGUMENT,"Field '"+f+"' is specified in your field mask but missing from your input data.");i_(l,f)||l.push(f)}a=new Tl(l),u=s.fieldTransforms.filter(function(t){return a.covers(t.field)})}else a=null,u=s.fieldTransforms;return new Dv(new Ql(c),a,u)}var jv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Yc.ZT)(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Dc)throw t.$c(1===t.Dc?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(Pv);function Bv(t,e,n){return new Uv({Dc:3,Lc:e.settings.Lc,methodName:t._methodName,xc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var Gv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Yc.ZT)(e,t),e.prototype._toFieldTransform=function(t){return new Yh(t.path,new Bh)},e.prototype.isEqual=function(t){return t instanceof e},e}(Pv),zv=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).qc=n,r}return(0,Yc.ZT)(e,t),e.prototype._toFieldTransform=function(t){var e=Bv(this,t,!0),n=this.qc.map(function(t){return Yv(t,e)}),r=new Gh(n);return new Yh(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Pv),Hv=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).qc=n,r}return(0,Yc.ZT)(e,t),e.prototype._toFieldTransform=function(t){var e=Bv(this,t,!0),n=this.qc.map(function(t){return Yv(t,e)}),r=new Hh(n);return new Yh(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Pv),Zv=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Uc=n,r}return(0,Yc.ZT)(e,t),e.prototype._toFieldTransform=function(t){var e=new Wh(t.R,Uh(t.R,this.Uc));return new Yh(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(Pv);function Wv(t,e,n,r){var i=t.Bc(1,e,n);Xv("Data must be an object, but it was:",i,r);var o=[],s=Ql.empty();yl(r,function(t,r){var a=n_(e,t,n);r=(0,Wo.m9)(r);var u=i.kc(a);if(r instanceof jv)o.push(a);else{var c=Yv(r,u);null!=c&&(o.push(a),s.set(a,c))}});var a=new Tl(o);return new Lv(s,a,i.fieldTransforms)}function Kv(t,e,n,r,i,o){var s=t.Bc(1,e,n),a=[t_(e,r,n)],u=[i];if(o.length%2!=0)throw new Xc(Jc.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(t_(e,o[c])),u.push(o[c+1]);for(var l=[],h=Ql.empty(),d=a.length-1;d>=0;--d)if(!i_(l,a[d])){var f=a[d],p=u[d];p=(0,Wo.m9)(p);var g=s.kc(f);if(p instanceof jv)l.push(f);else{var m=Yv(p,g);null!=m&&(l.push(f),h.set(f,m))}}var y=new Tl(l);return new Lv(h,y,s.fieldTransforms)}function Qv(t,e,n,r){return void 0===r&&(r=!1),Yv(n,t.Bc(r?4:3,e))}function Yv(t,e){if(Jv(t=(0,Wo.m9)(t)))return Xv("Unsupported field value:",e,t),$v(t,e);if(t instanceof Pv)return function(t,e){if(!Fv(e.Dc))throw e.$c(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.$c(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xc&&4!==e.Dc)throw e.$c("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=Yv(o[i],e.Oc(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=(0,Wo.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Uh(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=pl.fromDate(t);return{timestampValue:Hd(e.R,n)}}if(t instanceof pl)return n=new pl(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:Hd(e.R,n)};if(t instanceof Ov)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Rv)return{bytesValue:Zd(e.R,t._byteString)};if(t instanceof gv){var r=t.firestore._databaseId;if(!r.isEqual(n=e.databaseId))throw e.$c("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Qd(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.$c("Unsupported field value: "+lv(t))}(t,e)}function $v(t,e){var n={};return vl(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):yl(t,function(t,r){var i=Yv(r,e.Nc(t));null!=i&&(n[t]=i)}),{mapValue:{fields:n}}}function Jv(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof pl||t instanceof Ov||t instanceof Rv||t instanceof gv||t instanceof Pv)}function Xv(t,e,n){if(!Jv(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=lv(n);throw e.$c("an object"===r?t+" a custom object":t+" "+r)}}function t_(t,e,n){if((e=(0,Wo.m9)(e))instanceof Av)return e._internalPath;if("string"==typeof e)return n_(t,e);throw r_("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var e_=new RegExp("[~\\*/\\[\\]]");function n_(t,e,n){if(e.search(e_)>=0)throw r_("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(Av.bind.apply(Av,(0,Yc.ev)([void 0],e.split(".")))))._internalPath}catch(hs){throw r_("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function r_(t,e,n,r,i){var o=r&&!r.isEmpty(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new Xc(Jc.INVALID_ARGUMENT,(a+=". ")+t+u)}function i_(t,e){return t.some(function(t){return t.isEqual(e)})}var o_=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new gv(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new s_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.toProto())}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(a_("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),s_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Yc.ZT)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(o_);function a_(t,e){return"string"==typeof e?n_(t,e):e instanceof Av?e._internalPath:e._delegate._internalPath}var u_=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),c_=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this)._firestore=e,a._firestoreImpl=e,a.metadata=o,a}return(0,Yc.ZT)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new l_(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.toProto(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(a_("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(o_),l_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Yc.ZT)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(c_),h_=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new u_(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach(function(r){t.call(e,new l_(n._firestore,n._userDataWriter,r.key,r,new u_(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))})},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Xc(Jc.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map(function(e){return{type:"added",doc:new l_(t._firestore,t._userDataWriter,e.doc.key,e.doc,new u_(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:n++}})}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter(function(t){return e||3!==t.type}).map(function(e){var n=new l_(t._firestore,t._userDataWriter,e.doc.key,e.doc,new u_(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:d_(e.type),doc:n,oldIndex:i,newIndex:o}})}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function d_(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return sl()}}function f_(t,e){return t instanceof c_&&e instanceof c_?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof h_&&e instanceof h_&&t._firestore===e._firestore&&bv(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function p_(t){if(Ch(t)&&0===t.explicitOrderBy.length)throw new Xc(Jc.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var g_=function(){};function m_(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var y_=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qc=e,i.Kc=n,i.jc=r,i.type="where",i}return(0,Yc.ZT)(e,t),e.prototype._apply=function(t){var e=qv(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new Xc(Jc.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){E_(s,o);for(var u=[],c=0,l=s;c<l.length;c++)u.push(T_(r,t,l[c]));a={arrayValue:{values:u}}}else a=T_(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||E_(s,o),a=Qv(n,"where",s,"in"===o||"not-in"===o);var h=rh.create(i,o,a);return function(t,e){if(e.g()){var n=Eh(t);if(null!==n&&!n.isEqual(e.field))throw new Xc(Jc.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=Th(t);null!==r&&S_(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new Xc(Jc.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t._query,0,e,t.firestore._databaseId,this.Qc,this.Kc,this.jc);return new mv(t.firestore,t.converter,function(t,e){var n=t.filters.concat([e]);return new vh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(g_),v_=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Qc=e,r.Wc=n,r.type="orderBy",r}return(0,Yc.ZT)(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new Xc(Jc.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Xc(Jc.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new ph(e,n);return function(t,e){if(null===Th(t)){var n=Eh(t);null!==n&&S_(0,n,e.field)}}(t,r),r}(t._query,this.Qc,this.Wc);return new mv(t.firestore,t.converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new vh(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(g_),__=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Gc=n,i.zc=r,i}return(0,Yc.ZT)(e,t),e.prototype._apply=function(t){return new mv(t.firestore,t.converter,kh(t._query,this.Gc,this.zc))},e}(g_),w_=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return(0,Yc.ZT)(e,t),e.prototype._apply=function(t){var e=C_(t,this.type,this.Hc,this.Jc);return new mv(t.firestore,t.converter,function(t,e){return new vh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(g_),b_=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return(0,Yc.ZT)(e,t),e.prototype._apply=function(t){var e=C_(t,this.type,this.Hc,this.Jc);return new mv(t.firestore,t.converter,function(t,e){return new vh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(g_);function C_(t,e,n,r){if(n[0]=(0,Wo.m9)(n[0]),n[0]instanceof o_)return function(t,e,n,r,i){if(!r)throw new Xc(Jc.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=xh(t);s<a.length;s++){var u=a[s];if(u.field.isKeyField())o.push(Gl(e,r.key));else{var c=r.data.field(u.field);if(Al(c))throw new Xc(Jc.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new Xc(Jc.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new dh(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=qv(t.firestore);return function(t,e,n,r,i,o){var s=t.explicitOrderBy;if(i.length>s.length)throw new Xc(Jc.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.isKeyField()){if("string"!=typeof c)throw new Xc(Jc.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!Sh(t)&&-1!==c.indexOf("/"))throw new Xc(Jc.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(wl.fromString(c));if(!Ll.isDocumentKey(l))throw new Xc(Jc.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new Ll(l);a.push(Gl(e,h))}else{var d=Qv(n,r,c);a.push(d)}}return new dh(a,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function T_(t,e,n){if("string"==typeof(n=(0,Wo.m9)(n))){if(""===n)throw new Xc(Jc.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Sh(e)&&-1!==n.indexOf("/"))throw new Xc(Jc.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(wl.fromString(n));if(!Ll.isDocumentKey(r))throw new Xc(Jc.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Gl(t,new Ll(r))}if(n instanceof gv)return Gl(t,n._key);throw new Xc(Jc.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+lv(n)+".")}function E_(t,e){if(!Array.isArray(t)||0===t.length)throw new Xc(Jc.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new Xc(Jc.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function S_(t,e,n){if(!n.isEqual(e))throw new Xc(Jc.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var x_=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),Fl(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Il(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(kl(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw sl()}},t.prototype.convertObject=function(t,e){var n=this,r={};return yl(t.fields||{},function(t,i){r[t]=n.convertValue(i,e)}),r},t.prototype.convertGeoPoint=function(t){return new Ov(Il(t.latitude),Il(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.convertValue(t,e)})},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=Rl(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(Pl(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=xl(t);return new pl(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=wl.fromString(t);al(bf(n));var r=new $y(n.get(1),n.get(3)),i=new Ll(n.popFirst(5));return r.isEqual(e)||rl("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function I_(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var k_=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,Yc.ZT)(e,t),e.prototype.convertBytes=function(t){return new Rv(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new gv(this.firestore,null,e)},e}(x_),A_=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=qv(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=R_(t,this._firestore),i=I_(r.converter,e,n),o=Vv(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,Jh.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,s=R_(t,this._firestore);return o="string"==typeof(e=(0,Wo.m9)(e))||e instanceof Av?Kv(this._dataReader,"WriteBatch.update",s._key,e,n,r):Wv(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,Jh.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=R_(t,this._firestore);return this._mutations=this._mutations.concat(new fd(e._key,Jh.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new Xc(Jc.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function R_(t,e){if((t=(0,Wo.m9)(t)).firestore!==e)throw new Xc(Jc.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var P_=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,Yc.ZT)(e,t),e.prototype.convertBytes=function(t){return new Rv(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new gv(this.firestore,null,e)},e}(x_);function O_(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=hv(t,gv);var o=hv(t.firestore,Ev),s=qv(o);return D_(o,[("string"==typeof(e=(0,Wo.m9)(e))||e instanceof Av?Kv(s,"updateDoc",t._key,e,n,r):Wv(s,"updateDoc",t._key,e)).toMutation(t._key,Jh.exists(!0))])}function N_(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t=(0,Wo.m9)(t);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||Tv(i[a])||(s=i[a],a++);var u,c,l,h={includeMetadataChanges:s.includeMetadataChanges};if(Tv(i[a])){var d=i[a];i[a]=null===(e=d.next)||void 0===e?void 0:e.bind(d),i[a+1]=null===(n=d.error)||void 0===n?void 0:n.bind(d),i[a+2]=null===(r=d.complete)||void 0===r?void 0:r.bind(d)}if(t instanceof gv)c=hv(t.firestore,Ev),l=wh(t._key.path),u={next:function(e){i[a]&&i[a](L_(c,t,e))},error:i[a+1],complete:i[a+2]};else{var f=hv(t,mv);c=hv(f.firestore,Ev),l=f._query;var p=new P_(c);u={next:function(t){i[a]&&i[a](new h_(c,p,f,t))},error:i[a+1],complete:i[a+2]},p_(t._query)}return function(t,e,n,r){var i=this,o=new Ly(r),s=new Hm(e,o,n);return t.asyncQueue.enqueueAndForget(function(){return(0,Yc.mG)(i,void 0,void 0,function(){var e;return(0,Yc.Jh)(this,function(n){switch(n.label){case 0:return e=Vm,[4,Wy(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})}),function(){o.Wo(),t.asyncQueue.enqueueAndForget(function(){return(0,Yc.mG)(i,void 0,void 0,function(){var e;return(0,Yc.Jh)(this,function(n){switch(n.label){case 0:return e=jm,[4,Wy(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})})}}(Sv(c),l,h,u)}function D_(t,e){return function(t,e){var n=this,r=new Hf;return t.asyncQueue.enqueueAndForget(function(){return(0,Yc.mG)(n,void 0,void 0,function(){var n;return(0,Yc.Jh)(this,function(i){switch(i.label){case 0:return n=ry,[4,Zy(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(Sv(t),e)}function L_(t,e,n){var r=n.docs.get(e._key),i=new P_(t);return new c_(t,i,e._key,r,new u_(n.hasPendingWrites,n.fromCache),e.converter)}var F_=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return(0,Yc.ZT)(e,t),e.prototype.get=function(e){var n=this,r=R_(e,this._firestore),i=new P_(this._firestore);return t.prototype.get.call(this,e).then(function(t){return new c_(n._firestore,i,r._key,t._document,new u_(!1,!1),r.converter)})},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=qv(t)}return t.prototype.get=function(t){var e=this,n=R_(t,this._firestore),r=new k_(this._firestore);return this._transaction.lookup([n._key]).then(function(t){if(!t||1!==t.length)return sl();var i=t[0];if(i.isFoundDocument())return new o_(e._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new o_(e._firestore,r,n._key,null,n.converter);throw sl()})},t.prototype.set=function(t,e,n){var r=R_(t,this._firestore),i=I_(r.converter,e,n),o=Vv(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=R_(t,this._firestore);return o="string"==typeof(e=(0,Wo.m9)(e))||e instanceof Av?Kv(this._dataReader,"Transaction.update",s._key,e,n,r):Wv(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,o),this},t.prototype.delete=function(t){var e=R_(t,this._firestore);return this._transaction.delete(e._key),this},t}());function U_(){if("undefined"==typeof Uint8Array)throw new Xc(Jc.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function M_(){if("undefined"==typeof atob)throw new Xc(Jc.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var q_=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return M_(),new t(Rv.fromBase64String(e))},t.fromUint8Array=function(e){return U_(),new t(Rv.fromUint8Array(e))},t.prototype.toBase64=function(){return M_(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return U_(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),V_=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){kv(t=hv(t,Ev));var n=Sv(t),r=t._freezeSettings(),i=new Dy;return Iv(n,i,new Oy(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){kv(t=hv(t,Ev));var e=Sv(t),n=t._freezeSettings(),r=new Dy;return Iv(e,r,new Ny(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new Xc(Jc.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new Hf;return t._queue.enqueueAndForgetEvenWhileRestricted(function(){return(0,Yc.mG)(e,void 0,void 0,function(){var e;return(0,Yc.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return(0,Yc.mG)(this,void 0,void 0,function(){return(0,Yc.Jh)(this,function(e){switch(e.label){case 0:return Kf.yt()?[4,Kf.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}})})}(og(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise}(t._delegate)},t}(),j_=function(){function t(t,e,n){var r=this;this._delegate=e,this.Yc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof $y||(this.Xc=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this._delegate._getSettings()),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={});var i=(t=hv(t,pv))._getSettings();if("firestore.googleapis.com"!==i.host&&i.host!==e&&il("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},i),{host:e+":"+n,ssl:!1})),r.mockUserToken){var o=(0,Wo.Sg)(r.mockUserToken),s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Xc(Jc.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");t._credentials=new ev(new Xy(o,new Fg(s)))}}(this._delegate,t,e,n)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return(0,Yc.mG)(e,void 0,void 0,function(){var e,n;return(0,Yc.Jh)(this,function(r){switch(r.label){case 0:return[4,Gy(t)];case 1:return e=r.sent(),[4,Hy(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=ul(t);return e.$r.delete(0),um(e)}(n))]}})})})}(Sv(hv(this._delegate,Ev)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return(0,Yc.mG)(e,void 0,void 0,function(){var e,n;return(0,Yc.Jh)(this,function(r){switch(r.label){case 0:return[4,Gy(t)];case 1:return e=r.sent(),[4,Hy(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return(0,Yc.mG)(this,void 0,void 0,function(){var e;return(0,Yc.Jh)(this,function(n){switch(n.label){case 0:return(e=ul(t)).$r.add(0),[4,cm(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}})})}(n))]}})})})}(Sv(hv(this._delegate,Ev)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&av("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Yc.enableMultiTabIndexedDbPersistence(this):this.Yc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Yc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.Xc&&(this.Xc._removeServiceInstance("firestore"),this.Xc._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new Hf;return t.asyncQueue.enqueueAndForget(function(){return(0,Yc.mG)(e,void 0,void 0,function(){var e;return(0,Yc.Jh)(this,function(r){switch(r.label){case 0:return e=cy,[4,Zy(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}})})}),n.promise}(Sv(hv(this._delegate,Ev)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new Ly(e);return t.asyncQueue.enqueueAndForget(function(){return(0,Yc.mG)(n,void 0,void 0,function(){var e;return(0,Yc.Jh)(this,function(n){switch(n.label){case 0:return e=function(t,e){ul(t).Gr.add(e),e.next()},[4,Wy(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})}),function(){r.Wo(),t.asyncQueue.enqueueAndForget(function(){return(0,Yc.mG)(n,void 0,void 0,function(){var e;return(0,Yc.Jh)(this,function(n){switch(n.label){case 0:return e=function(t,e){ul(t).Gr.delete(e)},[4,Wy(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})})}}(Sv(t=hv(t,Ev)),Tv(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.Xc)throw new Xc(Jc.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Xc},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new ew(this,vv(this._delegate,t))}catch(t){throw W_(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new Z_(this,_v(this._delegate,t))}catch(t){throw W_(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new J_(this,function(t,e){if(t=hv(t,pv),ov("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Xc(Jc.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new mv(t,null,function(t){return new vh(wl.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw W_(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new Hf;return t.asyncQueue.enqueueAndForget(function(){return(0,Yc.mG)(n,void 0,void 0,function(){var n;return(0,Yc.Jh)(this,function(i){switch(i.label){case 0:return[4,function(t){return By(t).then(function(t){return t.datastore})}(t)];case 1:return n=i.sent(),new Uy(t.asyncQueue,n,e,r).run(),[2]}})})}),r.promise}(Sv(t),function(n){return e(new F_(t,n))})}(this._delegate,function(n){return t(new G_(e,n))})},t.prototype.batch=function(){var t=this;return Sv(this._delegate),new z_(new A_(this._delegate,function(e){return D_(t._delegate,e)}))},t.prototype.loadBundle=function(t){throw new Xc(Jc.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new Xc(Jc.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),B_=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,Yc.ZT)(e,t),e.prototype.convertBytes=function(t){return new q_(new Rv(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return Z_.Zc(e,this.firestore,null)},e}(x_),G_=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new B_(t)}return t.prototype.get=function(t){var e=this,n=nw(t);return this._delegate.get(n).then(function(t){return new Y_(e._firestore,new c_(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))})},t.prototype.set=function(t,e,n){var r=nw(t);return n?(sv("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=nw(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,(0,Yc.ev)([s,e,n],i)),this},t.prototype.delete=function(t){var e=nw(t);return this._delegate.delete(e),this},t}(),z_=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=nw(t);return n?(sv("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=nw(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,(0,Yc.ev)([s,e,n],i)),this},t.prototype.delete=function(t){var e=nw(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),H_=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new l_(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new $_(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.tu=function(e,n){var r=t.eu,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new B_(e),n),i.set(n,o)),o},t}();H_.eu=new WeakMap;var Z_=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new B_(t)}return t.nu=function(e,n,r){if(e.length%2!=0)throw new Xc(Jc.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new gv(n._delegate,r,new Ll(e)))},t.Zc=function(e,n,r){return new t(n,new gv(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new ew(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new ew(this.firestore,vv(this._delegate,t))}catch(t){throw W_(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=(0,Wo.m9)(t))instanceof gv&&wv(this._delegate,t)},t.prototype.set=function(t,e){e=sv("DocumentReference.set",e);try{return function(t,e,n){t=hv(t,gv);var r=hv(t.firestore,Ev),i=I_(t.converter,e,n);return D_(r,[Vv(qv(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,Jh.none())])}(this._delegate,t,e)}catch(t){throw W_(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?O_(this._delegate,t):O_.apply(void 0,(0,Yc.ev)([this._delegate,t,e],n))}catch(t){throw W_(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return D_(hv((t=this._delegate).firestore,Ev),[new fd(t._key,Jh.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=K_(e),i=Q_(e,function(e){return new Y_(t.firestore,new c_(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))});return N_(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=hv(t,gv);var e=hv(t.firestore,Ev),n=Sv(e),r=new P_(e);return function(t,e){var n=this,r=new Hf;return t.asyncQueue.enqueueAndForget(function(){return(0,Yc.mG)(n,void 0,void 0,function(){var n;return(0,Yc.Jh)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return(0,Yc.mG)(this,void 0,void 0,function(){var r,i;return(0,Yc.Jh)(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=ul(t);return n.persistence.runTransaction("read document","readonly",function(t){return n.Mn.mn(t,e)})}(t,e)];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new Xc(Jc.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=Dm(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}})})},[4,zy(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._key).then(function(n){return new c_(e,r,t._key,n,new u_(null!==n&&n.hasLocalMutations,!0),t.converter)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=hv(t,gv);var e=hv(t.firestore,Ev);return Ky(Sv(e),t._key,{source:"server"}).then(function(n){return L_(e,t,n)})}(this._delegate):function(t){t=hv(t,gv);var e=hv(t.firestore,Ev);return Ky(Sv(e),t._key).then(function(n){return L_(e,t,n)})}(this._delegate)).then(function(t){return new Y_(e.firestore,new c_(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))})},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?H_.tu(this.firestore,e):null))},t}();function W_(t,e,n){return t.message=t.message.replace(e,n),t}function K_(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!Tv(r))return r}return{}}function Q_(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=Tv(t[0])?t[0]:Tv(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Y_=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new Z_(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return f_(this._delegate,t._delegate)},t}(),$_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Yc.ZT)(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(Y_),J_=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new B_(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,m_(this._delegate,function(t,e,n){var r=e,i=a_("where",t);return new y_(i,r,n)}(e,n,r)))}catch(e){throw W_(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,m_(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=a_("orderBy",t);return new v_(r,n)}(e,n)))}catch(e){throw W_(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,m_(this._delegate,function(t){return dv("limit",t),new __("limit",t,"F")}(e)))}catch(e){throw W_(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,m_(this._delegate,function(t){return dv("limitToLast",t),new __("limitToLast",t,"L")}(e)))}catch(e){throw W_(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,m_(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new w_("startAt",t,!0)}).apply(void 0,e)))}catch(e){throw W_(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,m_(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new w_("startAfter",t,!1)}).apply(void 0,e)))}catch(e){throw W_(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,m_(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new b_("endBefore",t,!0)}).apply(void 0,e)))}catch(e){throw W_(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,m_(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new b_("endAt",t,!1)}).apply(void 0,e)))}catch(e){throw W_(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return bv(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=hv(t,mv);var e=hv(t.firestore,Ev),n=Sv(e),r=new P_(e);return function(t,e){var n=this,r=new Hf;return t.asyncQueue.enqueueAndForget(function(){return(0,Yc.mG)(n,void 0,void 0,function(){var n;return(0,Yc.Jh)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return(0,Yc.mG)(this,void 0,void 0,function(){var r,i,o,s,a;return(0,Yc.Jh)(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,wg(t,e,!0)];case 1:return a=u.sent(),r=new Ym(e,a.Bn),i=r._o(a.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=Dm(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}})})},[4,zy(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._query).then(function(n){return new h_(e,r,t,n)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=hv(t,mv);var e=hv(t.firestore,Ev),n=Sv(e),r=new P_(e);return Qy(n,t._query,{source:"server"}).then(function(n){return new h_(e,r,t,n)})}(this._delegate):function(t){t=hv(t,mv);var e=hv(t.firestore,Ev),n=Sv(e),r=new P_(e);return p_(t._query),Qy(n,t._query).then(function(n){return new h_(e,r,t,n)})}(this._delegate)).then(function(t){return new tw(e.firestore,new h_(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))})},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=K_(e),i=Q_(e,function(e){return new tw(t.firestore,new h_(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))});return N_(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?H_.tu(this.firestore,e):null))},t}(),X_=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new $_(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),tw=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new J_(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map(function(e){return new $_(t._firestore,e)})},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map(function(t){return new X_(e._firestore,t)})},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach(function(r){t.call(e,new $_(n._firestore,r))})},t.prototype.isEqual=function(t){return f_(this._delegate,t._delegate)},t}(),ew=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return(0,Yc.ZT)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new Z_(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new Z_(this.firestore,void 0===t?_v(this._delegate):_v(this._delegate,t))}catch(t){throw W_(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=hv(t.firestore,Ev),r=_v(t),i=I_(t.converter,e);return D_(n,[Vv(qv(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,Jh.exists(!1))]).then(function(){return r})}(this._delegate,t).then(function(t){return new Z_(e.firestore,t)})},e.prototype.isEqual=function(t){return wv(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?H_.tu(this.firestore,t):null))},e}(J_);function nw(t){return hv(t,gv)}var rw,iw=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(Av.bind.apply(Av,(0,Yc.ev)([void 0],t)))}return t.documentId=function(){return new t(Cl.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=(0,Wo.m9)(t))instanceof Av&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),ow=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new Gv("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new jv("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new zv("arrayUnion",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Hv("arrayRemove",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new Zv("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}(),sw=n(5119),aw={Firestore:j_,GeoPoint:Ov,Timestamp:pl,Blob:q_,Transaction:G_,WriteBatch:z_,DocumentReference:Z_,DocumentSnapshot:Y_,Query:J_,QueryDocumentSnapshot:$_,QuerySnapshot:tw,CollectionReference:ew,FieldPath:iw,FieldValue:ow,setLogLevel:function(t){tl.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new sw.wA("firestore",function(t){return function(t,e){return new j_(t,new Ev(t,e),new V_)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},aw)))})(rw=Zo.Z),rw.registerVersion("@firebase/firestore","2.3.0");var uw=n(1906),cw=n(8489),lw=n(9291);class hw extends yt.xQ{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new dw(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,n=e?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let o;if(this.closed)throw new vt.N;if(this.isStopped||this.hasError?o=_e.w.EMPTY:(this.observers.push(t),o=new lw.W(this,t)),r&&t.add(t=new Go.ht(t,r)),e)for(let s=0;s<i&&!t.closed;s++)t.next(n[s]);else for(let s=0;s<i&&!t.closed;s++)t.next(n[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),o}_getNow(){return(this.scheduler||cw.c).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let o=0;for(;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r}}class dw{constructor(t,e){this.time=t,this.value=e}}function fw(t,e,n){let r;return r=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},t=>t.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,o,s=0,a=!1,u=!1;return function(c){let l;s++,!i||a?(a=!1,i=new hw(t,e,r),l=i.subscribe(this),o=c.subscribe({next(t){i.next(t)},error(t){a=!0,i.error(t)},complete(){u=!0,o=void 0,i.complete()}}),u&&(o=void 0)):l=i.subscribe(this),this.add(()=>{s--,l.unsubscribe(),l=void 0,o&&!u&&n&&0===s&&(o.unsubscribe(),o=void 0,i=void 0)})}}(r))}function pw(t,e){return e?Vt(()=>t,e):Vt(()=>t)}var gw=n(4187);const mw=new r.OlP("angularfire2.auth.use-emulator"),yw=new r.OlP("angularfire2.auth.settings"),vw=new r.OlP("angularfire2.auth.tenant-id"),_w=new r.OlP("angularfire2.auth.langugage-code"),ww=new r.OlP("angularfire2.auth.use-device-language"),bw=new r.OlP("angularfire.auth.persistence");let Cw=(()=>{class t{constructor(t,e,r,i,o,s,a,u,c,l){const h=new zo.HU(i),d=(0,zo.ss)(h),f=new yt.xQ,p=(0,mt.of)(void 0).pipe((0,Go.QV)(h.outsideAngular),Vt(()=>i.runOutsideAngular(()=>n.e(420).then(n.bind(n,7420)))),(0,Mt.U)(()=>(0,zo.on)(t,i,e)),(0,Mt.U)(t=>i.runOutsideAngular(()=>{const e=o,n=s;return(0,zo.sI)(`${t.name}.auth`,"AngularFireAuth",t,()=>{const r=i.runOutsideAngular(()=>t.auth());return e&&r.useEmulator(`http://${e.join(":")}`),a&&(r.tenantId=a),r.languageCode=u,c&&r.useDeviceLanguage(),n&&(r.settings=n),l&&r.setPersistence(l),r},[e,a,u,c,n,l])})),fw({bufferSize:1,refCount:!1}));if(L(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,mt.of)(null);else{p.pipe(me()).subscribe();const t=p.pipe(Vt(t=>t.getRedirectResult().then(t=>t,()=>null)),d,fw({bufferSize:1,refCount:!1})),e=t=>new xt.y(e=>({unsubscribe:i.runOutsideAngular(()=>t(e))})),n=p.pipe(Vt(t=>e(t.onAuthStateChanged.bind(t)))),r=p.pipe(Vt(t=>e(t.onIdTokenChanged.bind(t))));this.authState=t.pipe(pw(n),(0,gw.R)(h.outsideAngular),(0,Go.QV)(h.insideAngular)),this.user=t.pipe(pw(r),(0,gw.R)(h.outsideAngular),(0,Go.QV)(h.insideAngular)),this.idToken=this.user.pipe(Vt(t=>t?(0,gt.D)(t.getIdToken()):(0,mt.of)(null))),this.idTokenResult=this.user.pipe(Vt(t=>t?(0,gt.D)(t.getIdTokenResult()):(0,mt.of)(null))),this.credential=(0,uw.T)(t,f,this.authState.pipe($t(t=>!t))).pipe((0,Mt.U)(t=>(null==t?void 0:t.user)?t:null),(0,gw.R)(h.outsideAngular),(0,Go.QV)(h.insideAngular))}return(0,zo.pX)(this,p,i,{spy:{apply:(t,e,n)=>{(t.startsWith("signIn")||t.startsWith("createUser"))&&n.then(t=>f.next(t))}}})}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(zo.Dh),r.LFG(zo.xv,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(mw,8),r.LFG(yw,8),r.LFG(vw,8),r.LFG(_w,8),r.LFG(ww,8),r.LFG(bw,8))},t.\u0275prov=(0,r.Yz7)({factory:function(){return new t((0,r.LFG)(zo.Dh),(0,r.LFG)(zo.xv,8),(0,r.LFG)(r.Lbi),(0,r.LFG)(r.R0b),(0,r.LFG)(mw,8),(0,r.LFG)(yw,8),(0,r.LFG)(vw,8),(0,r.LFG)(_w,8),(0,r.LFG)(ww,8),(0,r.LFG)(bw,8))},token:t,providedIn:"any"}),t})();function Tw(t,e){return function(t,e=Fo.z){return new xt.y(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(t,e)}function Ew(t,e){return Tw(t,e).pipe((0,Mt.U)(t=>({payload:t,type:"query"})))}function Sw(t,e){return Ew(t,e).pipe(Wt(void 0),Uo(),(0,Mt.U)(([t,e])=>{const n=e.payload.docChanges(),r=n.map(t=>({type:t.type,payload:t}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(e.payload.metadata)&&e.payload.docs.forEach((e,i)=>{const o=n.find(t=>t.doc.ref.isEqual(e.ref)),s=null==t?void 0:t.payload.docs.find(t=>t.ref.isEqual(e.ref));o&&JSON.stringify(o.doc.metadata)===JSON.stringify(e.metadata)||!o&&s&&JSON.stringify(s.metadata)===JSON.stringify(e.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:e}})}),r}))}function xw(t,e,n){return Sw(t,n).pipe(Kt((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return Iw(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return Iw(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Iw(t,e.oldIndex,1)}return t}(t,e))}),t}(t,n.map(t=>t.payload),e),[]),Vo(),(0,Mt.U)(t=>t.map(t=>({type:t.type,payload:t}))))}function Iw(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function kw(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}(0,zo.GT)(Cw,[{app:null,applyActionCode:null,checkActionCode:null,confirmPasswordReset:null,createUserWithEmailAndPassword:null,currentUser:null,fetchSignInMethodsForEmail:null,isSignInWithEmailLink:null,getRedirectResult:null,languageCode:null,settings:null,onAuthStateChanged:null,onIdTokenChanged:null,sendSignInLinkToEmail:null,sendPasswordResetEmail:null,setPersistence:null,signInAndRetrieveDataWithCredential:null,signInAnonymously:null,signInWithCredential:null,signInWithCustomToken:null,signInWithEmailAndPassword:null,signInWithPhoneNumber:null,signInWithEmailLink:null,signInWithPopup:null,signInWithRedirect:null,signOut:null,tenantId:null,updateCurrentUser:null,useDeviceLanguage:null,useEmulator:null,verifyPasswordResetCode:null}]);class Aw{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){let e=Sw(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe((0,Mt.U)(e=>e.filter(e=>t.indexOf(e.type)>-1)))),e.pipe(Wt(void 0),Uo(),$t(([t,e])=>e.length>0||!t),(0,Mt.U)(([t,e])=>e),this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Kt((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=kw(t);return xw(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return Ew(this.query,this.afs.schedulers.outsideAngular).pipe((0,Mt.U)(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return(0,gt.D)(this.query.get(t)).pipe((0,Go.QV)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new Rw(this.ref.doc(t),this.afs)}}class Rw{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=Fw(n,e);return new Aw(r,i,this.afs)}snapshotChanges(){return function(t,e){return Tw(t,e).pipe(Wt(void 0),Uo(),(0,Mt.U)(([t,e])=>e.exists?(null==t?void 0:t.exists)?{payload:e,type:"modified"}:{payload:e,type:"added"}:{payload:e,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return this.snapshotChanges().pipe((0,Mt.U)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return(0,gt.D)(this.ref.get(t)).pipe((0,Go.QV)(this.afs.schedulers.insideAngular))}}class Pw{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?Sw(this.query,this.afs.schedulers.outsideAngular).pipe((0,Mt.U)(e=>e.filter(e=>t.indexOf(e.type)>-1)),$t(t=>t.length>0),this.afs.keepUnstableUntilFirst):Sw(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Kt((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=kw(t);return xw(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return Ew(this.query,this.afs.schedulers.outsideAngular).pipe((0,Mt.U)(e=>e.payload.docs.map(e=>t.idField?Object.assign({[t.idField]:e.id},e.data()):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return(0,gt.D)(this.query.get(t)).pipe((0,Go.QV)(this.afs.schedulers.insideAngular))}}const Ow=new r.OlP("angularfire2.enableFirestorePersistence"),Nw=new r.OlP("angularfire2.firestore.persistenceSettings"),Dw=new r.OlP("angularfire2.firestore.settings"),Lw=new r.OlP("angularfire2.firestore.use-emulator");function Fw(t,e=(t=>t)){return{query:e(t),ref:t}}let Uw=(()=>{class t{constructor(t,e,n,r,i,o,s,a,u){this.schedulers=new zo.HU(o),this.keepUnstableUntilFirst=(0,zo.ss)(this.schedulers);const c=(0,zo.on)(t,o,e);!Ho.Z.auth&&u&&(0,zo.yq)();const l=a;[this.firestore,this.persistenceEnabled$]=(0,zo.sI)(`${c.name}.firestore`,"AngularFirestore",c,()=>{const t=o.runOutsideAngular(()=>c.firestore());if(r&&t.settings(r),l&&t.useEmulator(...l),n&&!L(i)){const e=()=>{try{return(0,gt.D)(t.enablePersistence(s||void 0).then(()=>!0,()=>!1))}catch(rw){return"undefined"!=typeof console&&console.warn(rw),(0,mt.of)(!1)}};return[t,o.runOutsideAngular(e)]}return[t,(0,mt.of)(!1)]},[r,l,n])}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=Fw(n,e),o=this.schedulers.ngZone.run(()=>r);return new Aw(o,i,this)}collectionGroup(t,e){const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new Pw(n(r),this)}doc(t){let e;e="string"==typeof t?this.firestore.doc(t):t;const n=this.schedulers.ngZone.run(()=>e);return new Rw(n,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(zo.Dh),r.LFG(zo.xv,8),r.LFG(Ow,8),r.LFG(Dw,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(Nw,8),r.LFG(Lw,8),r.LFG(mw,8))},t.\u0275prov=(0,r.Yz7)({factory:function(){return new t((0,r.LFG)(zo.Dh),(0,r.LFG)(zo.xv,8),(0,r.LFG)(Ow,8),(0,r.LFG)(Dw,8),(0,r.LFG)(r.Lbi),(0,r.LFG)(r.R0b),(0,r.LFG)(Nw,8),(0,r.LFG)(Lw,8),(0,r.LFG)(mw,8))},token:t,providedIn:"any"}),t})();function Mw(t,e,n,r,i,o,s){try{var a=t[o](s),u=a.value}catch(c){return void n(c)}a.done?e(u):Promise.resolve(u).then(r,i)}var qw=n(1055);class Vw{constructor(t,e){this.observables=t,this.project=e}call(t,e){return e.subscribe(new jw(t,this.observables,this.project))}}class jw extends Tt{constructor(t,e,n){super(t),this.observables=e,this.project=n,this.toRespond=[];const r=e.length;this.values=new Array(r);for(let i=0;i<r;i++)this.toRespond.push(i);for(let i=0;i<r;i++)this.add(It(this,e[i],void 0,i))}notifyNext(t,e,n){this.values[n]=e;const r=this.toRespond;if(r.length>0){const t=r.indexOf(n);-1!==t&&r.splice(t,1)}}notifyComplete(){}_next(t){if(0===this.toRespond.length){const e=[t,...this.values];this.project?this._tryProject(e):this.destination.next(e)}}_tryProject(t){let e;try{e=this.project.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}class Bw{constructor(t){this.predicate=t}call(t,e){return e.subscribe(new Gw(t,this.predicate))}}class Gw extends Ct.L{constructor(t,e){super(t),this.predicate=e,this.skipping=!0,this.index=0}_next(t){const e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)}tryCallPredicate(t){try{const e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(e){this.destination.error(e)}}}function zw(t){return null==t}function Hw(t){return"function"==typeof t.set}function Zw(t,e){return Hw(e)?e:t.ref(e)}function Ww(t,e){if("string"==typeof t)return e.stringCase();if(Hw(t))return e.firebaseCase();if("function"==typeof t.exportVal)return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof t)}function Kw(t,e,n="on",r=Fo.z){return new xt.y(i=>{let o=null;return o=t[n](e,(t,e)=>{r.schedule(()=>{i.next({snapshot:t,prevKey:e})}),"once"===n&&r.schedule(()=>i.complete())},t=>{r.schedule(()=>i.error(t))}),"on"===n?{unsubscribe(){null!=o&&t.off(e,o)}}:{unsubscribe(){}}}).pipe((0,Mt.U)(t=>{const{snapshot:n,prevKey:r}=t;let i=null;return n.exists()&&(i=n.key),{type:e,payload:n,prevKey:r,key:i}}),(0,qw.B)())}function Qw(t,e){const n=t.length;for(let r=0;r<n;r++)if(t[r].payload.key===e)return r;return-1}function Yw(t,e){const{payload:n,prevKey:r,key:i}=e,o=Qw(t,i),s=function(t,e){if(zw(e))return 0;{const n=Qw(t,e);return-1===n?t.length:n+1}}(t,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let n=null;e.payload.forEach(e=>{const r={payload:e,type:"value",prevKey:n,key:e.key};return n=e.key,t=[...t,r],!1})}return t;case"child_added":if(o>-1){const i=t[o-1];(i&&i.key||null)!==r&&(t=t.filter(t=>t.payload.key!==n.key)).splice(s,0,e)}else{if(null==r)return[e,...t];(t=t.slice()).splice(s,0,e)}return t;case"child_removed":return t.filter(t=>t.payload.key!==n.key);case"child_changed":return t.map(t=>t.payload.key===i?e:t);case"child_moved":if(o>-1){const e=t.splice(o,1)[0];return(t=t.slice()).splice(s,0,e),t}return t;default:return t}}function $w(t){return(zw(t)||0===t.length)&&(t=["child_added","child_removed","child_changed","child_moved"]),t}function Jw(t,e,n){return function(t,e,n){return Kw(t,"value","once",n).pipe(Vt(r=>{const i=[(0,mt.of)(r)];return e.forEach(e=>i.push(Kw(t,e,"on",n))),(0,uw.T)(...i).pipe(Kt(Yw,[]))}),Vo())}(t,e=$w(e),n)}function Xw(t,e,n){const r=(e=$w(e)).map(e=>Kw(t,e,"on",n));return(0,uw.T)(...r)}function tb(t,e){return function(n,r){return Ww(n,{stringCase:()=>t.child(n)[e](r),firebaseCase:()=>n[e](r),snapshotCase:()=>n.ref[e](r)})}}function eb(t){return function(e){return e?Ww(e,{stringCase:()=>t.child(e).remove(),firebaseCase:()=>e.remove(),snapshotCase:()=>e.ref.remove()}):t.remove()}}function nb(t,e){return function(){return Kw(t,"value","on",e)}}n(2107);const rb=new r.OlP("angularfire2.realtimeDatabaseURL"),ib=new r.OlP("angularfire2.database.use-emulator");let ob=(()=>{class t{constructor(t,e,n,r,i,o,s){this.schedulers=new zo.HU(i),this.keepUnstableUntilFirst=(0,zo.ss)(this.schedulers);const a=o,u=(0,zo.on)(t,i,e);!Ho.Z.auth&&s&&(0,zo.yq)(),this.database=(0,zo.sI)(`${u.name}.database.${n}`,"AngularFireDatabase",u,()=>{const t=i.runOutsideAngular(()=>u.database(n||void 0));return a&&t.useEmulator(...a),t},[a])}list(t,e){const n=this.schedulers.ngZone.runOutsideAngular(()=>Zw(this.database,t));let r=n;return e&&(r=e(n)),function(t,e){const n=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>t.ref);return{query:t,update:tb(r,"update"),set:tb(r,"set"),push:t=>r.push(t),remove:eb(r),snapshotChanges:r=>Jw(t,r,n).pipe(e.keepUnstableUntilFirst),stateChanges:r=>Xw(t,r,n).pipe(e.keepUnstableUntilFirst),auditTrail:r=>function(t,e,n){return function(t,e,n){return function(t,e){return Kw(t,"value","on",e).pipe((0,Mt.U)(t=>{let e;return t.payload.forEach(t=>(e=t.key,!1)),{data:t,lastKeyToLoad:e}}))}(t,n).pipe(function(...t){return e=>{let n;return"function"==typeof t[t.length-1]&&(n=t.pop()),e.lift(new Vw(t,n))}}(e),(0,Mt.U)(([t,e])=>{const n=t.lastKeyToLoad,r=e.map(t=>t.key);return{actions:e,lastKeyToLoad:n,loadedKeys:r}}),(r=t=>-1===t.loadedKeys.indexOf(t.lastKeyToLoad),t=>t.lift(new Bw(r))),(0,Mt.U)(t=>t.actions));var r}(t,Xw(t,e).pipe(Kt((t,e)=>[...t,e],[])),n)}(t,r,n).pipe(e.keepUnstableUntilFirst),valueChanges:(r,i)=>Jw(t,r,n).pipe((0,Mt.U)(t=>t.map(t=>i&&i.idField?Object.assign(Object.assign({},t.payload.val()),{[i.idField]:t.key}):t.payload.val())),e.keepUnstableUntilFirst)}}(r,this)}object(t){const e=this.schedulers.ngZone.runOutsideAngular(()=>Zw(this.database,t));return r=this,{query:n=e,snapshotChanges:()=>nb(n,r.schedulers.outsideAngular)().pipe(r.keepUnstableUntilFirst),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>nb(n,r.schedulers.outsideAngular)().pipe(r.keepUnstableUntilFirst,(0,Mt.U)(t=>t.payload.exists()?t.payload.val():null))};var n,r}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(zo.Dh),r.LFG(zo.xv,8),r.LFG(rb,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(ib,8),r.LFG(mw,8))},t.\u0275prov=(0,r.Yz7)({factory:function(){return new t((0,r.LFG)(zo.Dh),(0,r.LFG)(zo.xv,8),(0,r.LFG)(rb,8),(0,r.LFG)(r.Lbi),(0,r.LFG)(r.R0b),(0,r.LFG)(ib,8),(0,r.LFG)(mw,8))},token:t,providedIn:"any"}),t})(),sb=(()=>{class t{constructor(t,e,n){this.afAuth=t,this.router=e,this.context=n,this.emailSent=!1,this.user=this.afAuth.authState.pipe((0,Mt.U)(t=>t?t.email:null))}Login(t,e){return new Promise((n,r)=>{this.afAuth.signInWithEmailAndPassword(t,e).then(t=>{n(t)},t=>{switch(console.log(t),t.code){case"auth/user-not-found":r("El usuario no existe");break;case"auth/invalid-email":r("email invalido");break;case"auth/wrong-password":r("clave incorrecta");break;default:r("ERROR")}})})}Register(t,e){return new Promise((n,r)=>{this.afAuth.createUserWithEmailAndPassword(t,e).then(t=>{this.EnviarMailDeVerificacion(),n(t)},t=>{switch(t.code){case"auth/weak-password":r("clave muy corta,minimo 6 caracteres");break;case"auth/invalid-email":r("email invalido");break;case"auth/wrong-password":r("clave invalida");break;case"auth/email-already-in-use":r("El correo ya se encuentra tomado");break;default:r("ERROR")}})})}EnviarMailDeVerificacion(){var t=this;return function(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function s(t){Mw(o,r,i,s,a,"next",t)}function a(t){Mw(o,r,i,s,a,"throw",t)}s(void 0)})}}(function*(){return yield(yield t.afAuth.currentUser).sendEmailVerification()})()}GetCurrentUser(){return this.afAuth.currentUser}LogOutCurrentUser(){this.afAuth.signOut()}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Cw),r.LFG(Jr),r.LFG(ob))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),ab=(()=>{class t{constructor(t,e,n){this.bd=t,this.authSvc=e,this.context=n,this.ruteDeLaColeccionUsuarios="/usuarios",this.rutaDeLaColeccionPaciente="/pacientes",this.rutaDeLaColeccionEspecialista="/especialistas",this.referenciaBd=t,this.referenciaAlaColeccionPaciente=t.collection(this.rutaDeLaColeccionPaciente),this.referenciaAlaColeccionEspecialista=t.collection(this.rutaDeLaColeccionEspecialista),this.referenciaAlaColeccionUsuario=t.collection(this.ruteDeLaColeccionUsuarios)}CrearPaciente(t){let e=this.bd.createId();return t.id=e,this.referenciaAlaColeccionUsuario.add(Object.assign({},t))}RegistrarEspecialista(t){this.authSvc.GetCurrentUser().then(e=>{const n=this.bd.collection("usuarios").doc(e.uid);return console.log(t),n.set(Object.assign({},t)),!0})}RegistrarPaciente(t){this.authSvc.GetCurrentUser().then(e=>(t.id=e.uid,this.bd.collection("usuarios").doc(e.uid).set(Object.assign({},t)),!0))}ActualizarEstadoEspecialista(t){return console.log(t.id),this.referenciaAlaColeccionUsuario.doc(t.id).set({aprobado:!0})}CrearEspecialista(t){let e=this.bd.createId();return t.id=e,this.referenciaAlaColeccionEspecialista.add(Object.assign({},t))}TraerTodosPacientes(){return this.referenciaAlaColeccionPaciente}TraerTodosUsuarios(){return this.referenciaAlaColeccionUsuario}TraerTodosEspecialistas(){return this.referenciaAlaColeccionEspecialista}BuscarUsuarioEsp(t){return this.referenciaBd.collection(this.rutaDeLaColeccionEspecialista,e=>e.where("correo","==",t.correo).where("clave","==",t.clave))}BuscarUsuario(t,e){return this.referenciaBd.collection(this.rutaDeLaColeccionEspecialista,n=>n.where("correo","==",t).where("clave","==",e))}BuscarUsuarioPac(t){return this.referenciaBd.collection(this.rutaDeLaColeccionPaciente,e=>e.where("correo","==",t.correo).where("clave","==",t.clave))}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Uw),r.LFG(sb),r.LFG(ob))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),ub=(()=>{class t{constructor(t,e,n,r,i){this.fb=t,this.router=e,this.userSrvc=n,this.authSvc=r,this.db=i,this.listaUsuarios=[],this.flag=!0,this.isEmail=/\S+@\S+\.\S+/,this.authSvc.LogOutCurrentUser()}ngOnInit(){this.initForm(),this.usuarios=this.userSrvc.TraerTodosUsuarios().valueChanges(),this.usuarios.subscribe(t=>{this.listaUsuarios=t},t=>console.log(t))}initForm(){this.form=this.fb.group({email:["",[Di.required,Di.pattern(this.isEmail)]],clave:["",Di.required]})}isValidField(t){const e=this.form.get(t);return!e.valid&&e.touched?"is-invalid":e.touched?"is-valid":""}ValidarUsuario(t){let e=this.listaUsuarios.filter(e=>e.id==t.user.uid);console.log(e),"Especialista"==e[0].rol?0==e[0].aprobado?(Lo().fire({title:"Lo sentimos!",text:"Usted no podra ingresar hasta no ser aprobado por un administrador",icon:"warning"}),this.router.navigate(["/noHabilitado"])):(console.log("habilitado"),this.router.navigate([""])):this.router.navigate([""])}onLogin(){this.authSvc.Login(this.form.value.email,this.form.value.clave).then(t=>{t.user.emailVerified?this.ValidarUsuario(t):Lo().fire({title:"Lo sentimos!",text:"Usted no podra ingresar hasta no validar su correo electronico. Por favor revise su casilla de mail",icon:"warning"})}).catch(t=>{console.log("error",t)})}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(No),r.Y36(Jr),r.Y36(ab),r.Y36(sb),r.Y36(ob))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-login"]],decls:18,vars:6,consts:[[1,"form-signin","text-center"],["novalidate","",3,"formGroup","ngSubmit"],["src","../../../assets/logo.png","alt","",1,"mb-4","logo"],[1,"h3","mb-3","fw-normal"],[1,"form-floating"],["type","email","id","email","placeholder","Correo electr\xf3nico","formControlName","email",1,"form-control"],["for","email"],["type","password","id","clave","placeholder","Password","formControlName","clave",1,"form-control"],["for","clave"],["type","submit",1,"w-100","btn","btn-lg","btn-primary",3,"disabled"],[1,"mt-5","mb-3","text-muted"]],template:function(t,e){1&t&&(r.TgZ(0,"main",0),r.TgZ(1,"form",1),r.NdJ("ngSubmit",function(){return e.onLogin()}),r.TgZ(2,"fieldset"),r._UZ(3,"img",2),r.TgZ(4,"h1",3),r._uU(5,"Por favor, inicie sesion"),r.qZA(),r.TgZ(6,"div",4),r._UZ(7,"input",5),r.TgZ(8,"label",6),r._uU(9,"Correo electr\xf3nico"),r.qZA(),r.qZA(),r.TgZ(10,"div",4),r._UZ(11,"input",7),r.TgZ(12,"label",8),r._uU(13,"Contrase\xf1a"),r.qZA(),r.qZA(),r.TgZ(14,"button",9),r._uU(15,"Iniciar Sesi\xf3n"),r.qZA(),r.TgZ(16,"p",10),r._uU(17,"\xa92021"),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&t&&(r.xp6(1),r.Q6J("formGroup",e.form),r.xp6(6),r.Tol(e.isValidField("email")),r.xp6(4),r.Tol(e.isValidField("clave")),r.xp6(3),r.Q6J("disabled",e.form.invalid))},directives:[bo,Xi,Io,ki,Ji,Ao],styles:[".form-signin[_ngcontent-%COMP%]{width:100%;max-width:330px;padding:15px;margin:auto}.form-signin[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]{font-weight:400}.form-signin[_ngcontent-%COMP%]   .form-floating[_ngcontent-%COMP%]:focus-within{z-index:2}.form-signin[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]{margin-bottom:-1px;border-bottom-right-radius:0;border-bottom-left-radius:0}.form-signin[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{margin-bottom:10px;border-top-left-radius:0;border-top-right-radius:0}.logo[_ngcontent-%COMP%]{max-width:60px;max-height:60px}"]}),t})();class cb{constructor(t,e,n,r,i,o,s,a){this.id=a,this.correo=t,this.clave=e,this.nombre=n,this.apellido=r,this.edad=i,this.dni=o,this.rol=s}}class lb extends cb{constructor(t,e,n,r,i,o,s,a,u){super(n,r,t,e,i,o,"Especialista"),this.especialidad=s,this.imagen=a,this.aprobado=u||!1}}class hb extends cb{constructor(t,e,n,r,i,o,s,a,u){super(n,r,t,e,i,o,"Paciente"),this.imagen1=a,this.imagen2=u,this.obraSocial=s}}class db{constructor(t,e){this.dueTime=t,this.scheduler=e}call(t,e){return e.subscribe(new fb(t,this.dueTime,this.scheduler))}}class fb extends Ct.L{constructor(t,e,n){super(t),this.dueTime=e,this.scheduler=n,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(pb,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:t}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}}clearDebounce(){const t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)}}function pb(t){t.debouncedNext()}var gb="firebasestorage.googleapis.com",mb=function(t){function e(n,r){var i=t.call(this,yb(n),"Firebase Storage: "+r+" ("+yb(n)+")")||this;return i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(i,e.prototype),i}return(0,Yc.ZT)(e,t),e.prototype._codeEquals=function(t){return yb(t)===this.code},Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t,this.message=this.customData.serverResponse?this._baseMessage+"\n"+this.customData.serverResponse:this._baseMessage},enumerable:!1,configurable:!0}),e}(Wo.ZR);function yb(t){return"storage/"+t}function vb(){return new mb("unknown","An unknown error occurred, please check the error payload for server response.")}function _b(){return new mb("canceled","User canceled the upload/download.")}function wb(){return new mb("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function bb(t){return new mb("invalid-argument",t)}function Cb(){return new mb("app-deleted","The Firebase app was deleted.")}function Tb(t){return new mb("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Eb(t,e){return new mb("invalid-format","String does not match format '"+t+"': "+e)}function Sb(t){throw new mb("internal-error","Internal error: "+t)}var xb={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},Ib=function(){return function(t,e){this.data=t,this.contentType=e||null}}();function kb(t,e){switch(t){case xb.RAW:return new Ib(Ab(e));case xb.BASE64:case xb.BASE64URL:return new Ib(Rb(t,e));case xb.DATA_URL:return new Ib((n=new Pb(e)).base64?Rb(xb.BASE64,n.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(rw){throw Eb(xb.DATA_URL,"Malformed data URL.")}return Ab(e)}(n.rest),new Pb(e).contentType)}var n;throw vb()}function Ab(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(n<t.length-1&&56320==(64512&t.charCodeAt(n+1))){var i=r,o=t.charCodeAt(++n);e.push(240|(r=65536|(1023&i)<<10|1023&o)>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else e.push(239,191,189);else 56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function Rb(t,e){switch(t){case xb.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw Eb(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case xb.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw Eb(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var s;try{s=atob(e)}catch(rw){throw Eb(t,"Invalid character found")}for(var a=new Uint8Array(s.length),u=0;u<s.length;u++)a[u]=s.charCodeAt(u);return a}var Pb=function(){return function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw Eb(xb.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r,i=e[1]||null;null!=i&&(this.base64=(n=i).length>=(r=";base64").length&&n.substring(n.length-r.length)===r,this.contentType=this.base64?i.substring(0,i.length-";base64".length):i),this.rest=t.substring(t.indexOf(",")+1)}}(),Ob={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Nb(t){switch(t){case"running":case"pausing":case"canceling":return Ob.RUNNING;case"paused":return Ob.PAUSED;case"success":return Ob.SUCCESS;case"canceled":return Ob.CANCELED;case"error":default:return Ob.ERROR}}var Db=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}({}),Lb=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=Db.NO_ERROR,this.sendPromise_=new Promise(function(e){t.xhr_.addEventListener("abort",function(){t.errorCode_=Db.ABORT,e(t)}),t.xhr_.addEventListener("error",function(){t.errorCode_=Db.NETWORK_ERROR,e(t)}),t.xhr_.addEventListener("load",function(){e(t)})})}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw Sb("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw Sb("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw Sb("cannot .getStatus() before sending");try{return this.xhr_.status}catch(rw){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw Sb("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},t}(),Fb=function(){function t(){}return t.prototype.createXhrIo=function(){return new Lb},t}(),Ub=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e,n){var r;try{r=t.makeFromUrl(e,n)}catch(rw){return new t(e,"")}if(""===r.path)return r;throw new mb("invalid-default-bucket","Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e,n){var r=null,i="([A-Za-z0-9.\\-_]+)",o=new RegExp("^gs://"+i+"(/(.*))?$","i");function s(t){t.path_=decodeURIComponent(t.path)}for(var a=n.replace(/[.]/g,"\\."),u=[{regex:o,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+a+"/v[A-Za-z0-9_]+/b/"+i+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp("^https?://"+(n===gb?"(?:storage.googleapis.com|storage.cloud.google.com)":n)+"/"+i+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:s}],c=0;c<u.length;c++){var l=u[c],h=l.regex.exec(e);if(h){var d=h[l.indices.path];d||(d=""),r=new t(h[l.indices.bucket],d),l.postModify(r);break}}if(null==r)throw function(t){return new mb("invalid-url","Invalid URL '"+t+"'.")}(e);return r},t}(),Mb=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}();function qb(t){return"string"==typeof t||t instanceof String}function Vb(t){return jb()&&t instanceof Blob}function jb(){return"undefined"!=typeof Blob}function Bb(t,e,n,r){if(r<e)throw bb("Invalid value for '"+t+"'. Expected "+e+" or greater.");if(r>n)throw bb("Invalid value for '"+t+"'. Expected "+n+" or less.")}function Gb(t,e){var n=e.match(/^(\w+):\/\/.+/),r=e;return null==(null==n?void 0:n[1])&&(r="https://"+e),r+"/v0"+t}function zb(t){var e=encodeURIComponent,n="?";for(var r in t)t.hasOwnProperty(r)&&(n=n+(e(r)+"=")+e(t[r])+"&");return n.slice(0,-1)}var Hb=function(){function t(t,e,n,r,i,o,s,a,u,c,l){var h=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise(function(t,e){h.resolve_=t,h.reject_=e,h.start_()})}return t.prototype.start_=function(){var t=this;function e(e,n){var r,i=t.resolve_,o=t.reject_,s=n.xhr;if(n.wasSuccessCode)try{var a=t.callback_(s,s.getResponseText());!function(t){return void 0!==t}(a)?i():i(a)}catch(rw){o(rw)}else null!==s?((r=vb()).serverResponse=s.getResponseText(),o(t.errorCallback_?t.errorCallback_(s,r):r)):o(r=n.canceled?t.appDelete_?Cb():_b():new mb("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new Zb(!1,null,!0)):this.backoffId_=function(e,n,r){var i=1,o=null,s=!1,a=0;function u(){return 2===a}var c=!1;function l(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];c||(c=!0,n.apply(null,t))}function h(e){o=setTimeout(function(){o=null,function(e,n){if(n)e(!1,new Zb(!1,null,!0));else{var r=t.pool_.createXhrIo();t.pendingXhr_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then(function(n){null!==t.progressCallback_&&n.removeUploadProgressListener(i),t.pendingXhr_=null;var r=(n=n).getErrorCode()===Db.NO_ERROR,o=n.getStatus();if(r&&!t.isRetryStatusCode_(o)){var s=-1!==t.successCodes_.indexOf(o);e(!0,new Zb(s,n))}else{var a=n.getErrorCode()===Db.ABORT;e(!1,new Zb(!1,null,a))}})}function i(e){null!==t.progressCallback_&&t.progressCallback_(e.loaded,e.lengthComputable?e.total:-1)}}(d,u())},e)}function d(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!c)if(t)l.call.apply(l,(0,Yc.ev)([null,t],e));else{var r;u()||s?l.call.apply(l,(0,Yc.ev)([null,t],e)):(i<64&&(i*=2),1===a?(a=2,r=0):r=1e3*(i+Math.random()),h(r))}}var f=!1;function p(t){f||(f=!0,c||(null!==o?(t||(a=2),clearTimeout(o),h(0)):t||(a=1)))}return h(0),setTimeout(function(){s=!0,p(!0)},r),p}(0,e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&function(t){t(!1)}(this.backoffId_),null!==this.pendingXhr_&&this.pendingXhr_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},t}(),Zb=function(){return function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n}}();function Wb(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function Kb(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Wb();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(jb())return new Blob(t);throw new mb("unsupported-environment","This browser doesn't seem to support creating Blobs")}var Qb=function(){function t(t,e){var n=0,r="";Vb(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(Vb(this.data_)){var r=(o=e,s=n,(i=this.data_).webkitSlice?i.webkitSlice(o,s):i.mozSlice?i.mozSlice(o,s):i.slice?i.slice(o,s):null);return null===r?null:new t(r)}var i,o,s;return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(jb()){var r=e.map(function(e){return e instanceof t?e.data_:e});return new t(Kb.apply(null,r))}var i=e.map(function(t){return qb(t)?kb(xb.RAW,t).data:t.data_}),o=0;i.forEach(function(t){o+=t.byteLength});var s=new Uint8Array(o),a=0;return i.forEach(function(t){for(var e=0;e<t.length;e++)s[a++]=t[e]}),new t(s,!0)},t.prototype.uploadData=function(){return this.data_},t}();function Yb(t){var e;try{e=JSON.parse(t)}catch(rw){return null}return function(t){return"object"==typeof t&&!Array.isArray(t)}(e)?e:null}function $b(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function Jb(t,e){return e}var Xb=function(){return function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||Jb}}(),tC=null;function eC(){if(tC)return tC;var t=[];t.push(new Xb("bucket")),t.push(new Xb("generation")),t.push(new Xb("metageneration")),t.push(new Xb("name","fullPath",!0));var e=new Xb("name");e.xform=function(t,e){return function(t){return!qb(t)||t.length<2?t:$b(t)}(e)},t.push(e);var n=new Xb("size");return n.xform=function(t,e){return void 0!==e?Number(e):e},t.push(n),t.push(new Xb("timeCreated")),t.push(new Xb("updated")),t.push(new Xb("md5Hash",null,!0)),t.push(new Xb("cacheControl",null,!0)),t.push(new Xb("contentDisposition",null,!0)),t.push(new Xb("contentEncoding",null,!0)),t.push(new Xb("contentLanguage",null,!0)),t.push(new Xb("contentType",null,!0)),t.push(new Xb("metadata","customMetadata",!0)),tC=t}function nC(t,e,n){var r=Yb(e);return null===r?null:function(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var s=n[o];r[s.local]=s.xform(r,e[s.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=new Ub(t.bucket,t.fullPath);return e._makeStorageReference(n)}})}(r,t),r}(t,r,n)}function rC(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}var iC=function(){return function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}();function oC(t){if(!t)throw vb()}function sC(t,e){return function(n,r){var i=nC(t,r,e);return oC(null!==i),i}}function aC(t){return function(e,n){var r;return(r=401===e.getStatus()?e.getResponseText().includes("Firebase App Check token is invalid")?new mb("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new mb("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?new mb("quota-exceeded","Quota for bucket '"+t.bucket+"' exceeded, please view quota on https://firebase.google.com/pricing/."):403===e.getStatus()?new mb("unauthorized","User does not have permission to access '"+t.path+"'."):n).serverResponse=n.serverResponse,r}}function uC(t){var e=aC(t);return function(n,r){var i=e(n,r);return 404===n.getStatus()&&(i=new mb("object-not-found","Object '"+t.path+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function cC(t,e,n){var r=Gb(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new iC(r,"GET",sC(t,n),i);return o.errorHandler=uC(e),o}function lC(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return e&&e.type()||"application/octet-stream"}(0,e)),r}var hC=function(){return function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null}}();function dC(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(rw){oC(!1)}return oC(!!n&&-1!==(e||["active"]).indexOf(n)),n}var fC=262144,pC=function(){return function(t,e,n){if(function(t){return"function"==typeof t}(t)||null!=e||null!=n)this.next=t,this.error=e,this.complete=n;else{var r=t;this.next=r.next,this.error=r.error,this.complete=r.complete}}}();function gC(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then(function(){return t.apply(void 0,e)})}}var mC=function(){function t(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=eC(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition("error"))},this._metadataErrorHandler=function(t){r._request=void 0,t._codeEquals("canceled")?r.completeTransitions_():(r._error=t,r._transition("error"))},this._promise=new Promise(function(t,e){r._resolve=t,r._reject=e,r._start()}),this._promise.then(null,function(){})}return t.prototype._makeProgressCallback=function(){var t=this,e=this._transferred;return function(n){return t._updateProgress(e+n)}},t.prototype._shouldDoResumable=function(t){return t.size()>262144},t.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},t.prototype._resolveToken=function(t){var e=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(function(n){var r=n[0],i=n[1];switch(e._state){case"running":t(r,i);break;case"canceling":e._transition("canceled");break;case"pausing":e._transition("paused")}})},t.prototype._createResumable=function(){var t=this;this._resolveToken(function(e,n){var r=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s=lC(e,r,i),a={name:s.fullPath},u=Gb(o,t.host),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},l=rC(s,n),h=new iC(u,"POST",function(t){var e;dC(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(rw){oC(!1)}return oC(qb(e)),e},t.maxUploadRetryTime);return h.urlParams=a,h.headers=c,h.body=l,h.errorHandler=aC(e),h}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then(function(e){t._request=void 0,t._uploadUrl=e,t._needToFetchStatus=!1,t.completeTransitions_()},t._errorHandler)})},t.prototype._fetchStatus=function(){var t=this,e=this._uploadUrl;this._resolveToken(function(n,r){var i=function(t,e,n,r){var i=new iC(n,"POST",function(t){var e=dC(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(rw){oC(!1)}n||oC(!1);var i=Number(n);return oC(!isNaN(i)),new hC(i,r.size(),"final"===e)},t.maxUploadRetryTime);return i.headers={"X-Goog-Upload-Command":"query"},i.errorHandler=aC(e),i}(t._ref.storage,t._ref._location,e,t._blob),o=t._ref.storage._makeRequest(i,n,r);t._request=o,o.getPromise().then(function(e){e=e,t._request=void 0,t._updateProgress(e.current),t._needToFetchStatus=!1,e.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()},t._errorHandler)})},t.prototype._continueUpload=function(){var t=this,e=fC*this._chunkMultiplier,n=new hC(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken(function(i,o){var s;try{s=function(t,e,n,r,i,o,s,a){var u=new hC(0,0);if(s?(u.current=s.current,u.total=s.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new mb("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;i>0&&(l=Math.min(l,i));var h=u.current,d={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":u.current},f=r.slice(h,h+l);if(null===f)throw wb();var p=new iC(n,"POST",function(t,n){var i,s=dC(t,["active","final"]),a=u.current+l,c=r.size();return i="final"===s?sC(e,o)(t,n):null,new hC(a,c,"final"===s,i)},e.maxUploadRetryTime);return p.headers=d,p.body=f.uploadData(),p.progressCallback=a||null,p.errorHandler=aC(t),p}(t._ref._location,t._ref.storage,r,t._blob,e,t._mappings,n,t._makeProgressCallback())}catch(rw){return t._error=rw,void t._transition("error")}var a=t._ref.storage._makeRequest(s,i,o);t._request=a,a.getPromise().then(function(e){t._increaseMultiplier(),t._request=void 0,t._updateProgress(e.current),e.finalized?(t._metadata=e.metadata,t._transition("success")):t.completeTransitions_()},t._errorHandler)})},t.prototype._increaseMultiplier=function(){fC*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},t.prototype._fetchMetadata=function(){var t=this;this._resolveToken(function(e,n){var r=cC(t._ref.storage,t._ref._location,t._mappings),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then(function(e){t._request=void 0,t._metadata=e,t._transition("success")},t._metadataErrorHandler)})},t.prototype._oneShotUpload=function(){var t=this;this._resolveToken(function(e,n){var r=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"},a=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();s["Content-Type"]="multipart/related; boundary="+a;var u=lC(e,r,i),c=rC(u,n),l=Qb.getBlob("--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+c+"\r\n--"+a+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",r,"\r\n--"+a+"--");if(null===l)throw wb();var h={name:u.fullPath},d=Gb(o,t.host),f=t.maxUploadRetryTime,p=new iC(d,"POST",sC(t,n),f);return p.urlParams=h,p.headers=s,p.body=l.uploadData(),p.errorHandler=aC(e),p}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then(function(e){t._request=void 0,t._metadata=e,t._updateProgress(t._blob.size()),t._transition("success")},t._errorHandler)})},t.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},t.prototype._transition=function(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":var e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=_b(),this._state=t,this._notifyObservers();break;case"error":case"success":this._state=t,this._notifyObservers()}},t.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=Nb(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),t.prototype.on=function(t,e,n,r){var i=this,o=new pC(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},t.prototype.then=function(t,e){return this._promise.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},t.prototype._removeObserver=function(t){var e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)},t.prototype._notifyObservers=function(){var t=this;this._finishPromise(),this._observers.slice().forEach(function(e){t._notifyObserver(e)})},t.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(Nb(this._state)){case Ob.SUCCESS:gC(this._resolve.bind(null,this.snapshot))();break;case Ob.CANCELED:case Ob.ERROR:gC(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},t.prototype._notifyObserver=function(t){switch(Nb(this._state)){case Ob.RUNNING:case Ob.PAUSED:t.next&&gC(t.next.bind(t,this.snapshot))();break;case Ob.SUCCESS:t.complete&&gC(t.complete.bind(t))();break;case Ob.CANCELED:case Ob.ERROR:t.error&&gC(t.error.bind(t,this._error))();break;default:t.error&&gC(t.error.bind(t,this._error))()}},t.prototype.resume=function(){var t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t},t.prototype.pause=function(){var t="running"===this._state;return t&&this._transition("pausing"),t},t.prototype.cancel=function(){var t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t},t}(),yC=function(){function t(t,e){this._service=t,this._location=e instanceof Ub?e:Ub.makeFromUrl(e,t.host)}return t.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},t.prototype._newRef=function(e,n){return new t(e,n)},Object.defineProperty(t.prototype,"root",{get:function(){var t=new Ub(this._location.bucket,"");return this._newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return $b(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===e)return null;var n=new Ub(this._location.bucket,e);return new t(this._service,n)},enumerable:!1,configurable:!0}),t.prototype._throwIfRoot=function(t){if(""===this._location.path)throw Tb(t)},t}();function vC(t){var e={prefixes:[],items:[]};return _C(t,e).then(function(){return e})}function _C(t,e,n){return(0,Yc.mG)(this,void 0,void 0,function(){var r,i,o;return(0,Yc.Jh)(this,function(s){switch(s.label){case 0:return[4,wC(t,{pageToken:n})];case 1:return r=s.sent(),(i=e.prefixes).push.apply(i,r.prefixes),(o=e.items).push.apply(o,r.items),null==r.nextPageToken?[3,3]:[4,_C(t,e,r.nextPageToken)];case 2:s.sent(),s.label=3;case 3:return[2]}})})}function wC(t,e){return(0,Yc.mG)(this,void 0,void 0,function(){var n,r;return(0,Yc.Jh)(this,function(i){switch(i.label){case 0:return null!=e&&"number"==typeof e.maxResults&&Bb("options.maxResults",1,1e3,e.maxResults),r=function(t,e,n,r,i){var o={};o.prefix=e.isRoot?"":e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var s=Gb(e.bucketOnlyServerUrl(),t.host),a=t.maxOperationRetryTime,u=new iC(s,"GET",function(t,e){return function(n,r){var i=function(t,e,n){var r=Yb(n);return null===r?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var i=0,o=n.prefixes;i<o.length;i++){var s=o[i].replace(/\/$/,""),a=t._makeStorageReference(new Ub(e,s));r.prefixes.push(a)}if(n.items)for(var u=0,c=n.items;u<c.length;u++)a=t._makeStorageReference(new Ub(e,c[u].name)),r.items.push(a);return r}(t,e,r)}(t,e,r);return oC(null!==i),i}}(t,e.bucket),a);return u.urlParams=o,u.errorHandler=aC(e),u}(t.storage,t._location,"/",(n=e||{}).pageToken,n.maxResults),[4,t.storage.makeRequestWithTokens(r)];case 1:return[2,i.sent().getPromise()]}})})}function bC(t,e){var n=function(t,e){var n=e.split("/").filter(function(t){return t.length>0}).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),r=new Ub(t._location.bucket,n);return new yC(t.storage,r)}function CC(t){return/^[A-Za-z]+:\/\//.test(t)}function TC(t,e){if(t instanceof xC){var n=t;if(null==n._bucket)throw new mb("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new yC(n,n._bucket);return null!=e?TC(r,e):r}if(void 0!==e){if(e.includes(".."))throw bb('`path` param cannot contain ".."');return bC(t,e)}return t}function EC(t,e){if(e&&CC(e)){if(t instanceof xC)return new yC(t,e);throw bb("To use ref(service, url), the first argument must be a Storage instance.")}return TC(t,e)}function SC(t,e){var n=null==e?void 0:e.storageBucket;return null==n?null:Ub.makeFromBucketSpec(n,t)}var xC=function(){function t(t,e,n,r,i,o){this.app=t,this._authProvider=e,this._appCheckProvider=n,this._pool=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=gb,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Ub.makeFromBucketSpec(i,this._host):SC(this._host,this.app.options)}return Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){this._host=t,this._bucket=null!=this._url?Ub.makeFromBucketSpec(this._url,t):SC(t,this.app.options)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){Bb("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){Bb("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),t.prototype._getAuthToken=function(){return(0,Yc.mG)(this,void 0,void 0,function(){var t,e;return(0,Yc.Jh)(this,function(n){switch(n.label){case 0:return(t=this._authProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:if(null!==(e=n.sent()))return[2,e.accessToken];n.label=2;case 2:return[2,null]}})})},t.prototype._getAppCheckToken=function(){return(0,Yc.mG)(this,void 0,void 0,function(){var t;return(0,Yc.Jh)(this,function(e){switch(e.label){case 0:return(t=this._appCheckProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:return[2,e.sent().token];case 2:return[2,null]}})})},t.prototype._delete=function(){return this._deleted=!0,this._requests.forEach(function(t){return t.cancel()}),this._requests.clear(),Promise.resolve()},t.prototype._makeStorageReference=function(t){return new yC(this,t)},t.prototype._makeRequest=function(t,e,n){var r=this;if(this._deleted)return new Mb(Cb());var i=function(t,e,n,r,i,o){var s=zb(t.urlParams),a=t.url+s,u=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(u,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(u,n),function(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(u,o),function(t,e){null!==e&&(t["X-Firebase-AppCheck"]=e)}(u,r),new Hb(a,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i)}(t,this._appId,e,n,this._pool,this._firebaseVersion);return this._requests.add(i),i.getPromise().then(function(){return r._requests.delete(i)},function(){return r._requests.delete(i)}),i},t.prototype.makeRequestWithTokens=function(t){return(0,Yc.mG)(this,void 0,void 0,function(){var e;return(0,Yc.Jh)(this,function(n){switch(n.label){case 0:return[4,Promise.all([this._getAuthToken(),this._getAppCheckToken()])];case 1:return e=n.sent(),[2,this._makeRequest(t,e[0],e[1])]}})})},t}();function IC(t,e){return EC(t=(0,Wo.m9)(t),e)}var kC,AC,RC=function(){function t(t,e,n){this._delegate=t,this.task=e,this.ref=n}return Object.defineProperty(t.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),t}(),PC=function(){function t(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(t.prototype,"snapshot",{get:function(){return new RC(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),t.prototype.then=function(t,e){var n=this;return this._delegate.then(function(e){if(t)return t(new RC(e,n,n._ref))},e)},t.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"==typeof e?function(t){return e(new RC(t,i,i._ref))}:{next:e.next?function(t){return e.next(new RC(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},t}(),OC=function(){function t(t,e){this._delegate=t,this._service=e}return Object.defineProperty(t.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map(function(e){return new NC(e,t._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){var t=this;return this._delegate.items.map(function(e){return new NC(e,t._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),t}(),NC=function(){function t(t,e){this._delegate=t,this.storage=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this._delegate.toString()},t.prototype.child=function(e){return new t(function(t,e){return bC(t,e)}(this._delegate,e),this.storage)},Object.defineProperty(t.prototype,"root",{get:function(){return new t(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return null==e?null:new t(e,this.storage)},enumerable:!1,configurable:!0}),t.prototype.put=function(t,e){return this._throwIfRoot("put"),new PC(function(t,e,n){return function(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new mC(t,new Qb(e),n)}(t=(0,Wo.m9)(t),e,n)}(this._delegate,t,e),this)},t.prototype.putString=function(t,e,n){void 0===e&&(e=xb.RAW),this._throwIfRoot("putString");var r=kb(e,t),i=(0,Yc.pi)({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new PC(new mC(this._delegate,new Qb(r.data,!0),i),this)},t.prototype.listAll=function(){var t=this;return function(t){return vC(t=(0,Wo.m9)(t))}(this._delegate).then(function(e){return new OC(e,t.storage)})},t.prototype.list=function(t){var e=this;return function(t,e){return wC(t=(0,Wo.m9)(t),e)}(this._delegate,t||void 0).then(function(t){return new OC(t,e.storage)})},t.prototype.getMetadata=function(){return function(t){return function(t){return(0,Yc.mG)(this,void 0,void 0,function(){var e;return(0,Yc.Jh)(this,function(n){switch(n.label){case 0:return t._throwIfRoot("getMetadata"),e=cC(t.storage,t._location,eC()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}})})}(t=(0,Wo.m9)(t))}(this._delegate)},t.prototype.updateMetadata=function(t){return function(t,e){return function(t,e){return(0,Yc.mG)(this,void 0,void 0,function(){var n;return(0,Yc.Jh)(this,function(r){switch(r.label){case 0:return t._throwIfRoot("updateMetadata"),n=function(t,e,n,r){var i=Gb(e.fullServerUrl(),t.host),o=rC(n,r),s=t.maxOperationRetryTime,a=new iC(i,"PATCH",sC(t,r),s);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=o,a.errorHandler=uC(e),a}(t.storage,t._location,e,eC()),[4,t.storage.makeRequestWithTokens(n)];case 1:return[2,r.sent().getPromise()]}})})}(t=(0,Wo.m9)(t),e)}(this._delegate,t)},t.prototype.getDownloadURL=function(){return function(t){return function(t){return(0,Yc.mG)(this,void 0,void 0,function(){var e;return(0,Yc.Jh)(this,function(n){switch(n.label){case 0:return t._throwIfRoot("getDownloadURL"),e=function(t,e,n){var r=Gb(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new iC(r,"GET",function(t,e){return function(n,r){var i=nC(t,r,e);return oC(null!==i),function(t,e,n){var r=Yb(e);if(null===r)return null;if(!qb(r.downloadTokens))return null;var i=r.downloadTokens;if(0===i.length)return null;var o=encodeURIComponent;return i.split(",").map(function(e){var r=t.fullPath;return Gb("/b/"+o(t.bucket)+"/o/"+o(r),n)+zb({alt:"media",token:e})})[0]}(i,r,t.host)}}(t,n),i);return o.errorHandler=uC(e),o}(t.storage,t._location,eC()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise().then(function(t){if(null===t)throw new mb("no-download-url","The given file does not have any download URLs.");return t})]}})})}(t=(0,Wo.m9)(t))}(this._delegate)},t.prototype.delete=function(){return this._throwIfRoot("delete"),function(t){return function(t){return(0,Yc.mG)(this,void 0,void 0,function(){var e;return(0,Yc.Jh)(this,function(n){switch(n.label){case 0:return t._throwIfRoot("deleteObject"),e=function(t,e){var n=Gb(e.fullServerUrl(),t.host),r=new iC(n,"DELETE",function(t,e){},t.maxOperationRetryTime);return r.successCodes=[200,204],r.errorHandler=uC(e),r}(t.storage,t._location),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}})})}(t=(0,Wo.m9)(t))}(this._delegate)},t.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw Tb(t)},t}(),DC=function(){function t(t,e){var n=this;this.app=t,this._delegate=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),t.prototype.ref=function(t){if(CC(t))throw bb("ref() expected a child path but got a URL, use refFromURL instead.");return new NC(IC(this._delegate,t),this)},t.prototype.refFromURL=function(t){if(!CC(t))throw bb("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Ub.makeFromUrl(t,this._delegate.host)}catch(rw){throw bb("refFromUrl() expected a valid full URL but got an invalid one.")}return new NC(IC(this._delegate,t),this)},t.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},t.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},t.prototype.useEmulator=function(t,e){!function(t,e,n){t.host="http://"+e+":"+n}(this._delegate,t,e)},t}();function LC(t){const e=function(t){return new xt.y(e=>{const n=t=>e.next(t);n(t.snapshot);const r=t.on("state_changed",n);return t.then(t=>{n(t),e.complete()},r=>{n(t.snapshot),(t=>{e.error(t)})(r)}),function(){r()}}).pipe(function(t,e=Fo.P){return n=>n.lift(new db(t,e))}(0))}(t);return{task:t,then:t.then.bind(t),catch:t.catch.bind(t),pause:t.pause.bind(t),cancel:t.cancel.bind(t),resume:t.resume.bind(t),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,Mt.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function FC(t,e,n){return{getDownloadURL:()=>(0,mt.of)(void 0).pipe((0,Go.QV)(e.outsideAngular),Vt(()=>t.getDownloadURL()),n),getMetadata:()=>(0,mt.of)(void 0).pipe((0,Go.QV)(e.outsideAngular),Vt(()=>t.getMetadata()),n),delete:()=>(0,gt.D)(t.delete()),child:r=>FC(t.child(r),e,n),updateMetadata:e=>(0,gt.D)(t.updateMetadata(e)),put:(e,n)=>LC(t.put(e,n)),putString:(e,n,r)=>LC(t.putString(e,n,r)),listAll:()=>(0,gt.D)(t.listAll())}}AC={TaskState:Ob,TaskEvent:{STATE_CHANGED:"state_changed"},StringFormat:xb,Storage:xC,Reference:NC},(kC=Zo.Z).INTERNAL.registerComponent(new sw.wA("storage",function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return new DC(r,new xC(r,i,o,new Fb,n,Zo.Z.SDK_VERSION))},"PUBLIC").setServiceProps(AC).setMultipleInstances(!0)),kC.registerVersion("@firebase/storage","0.5.2");const UC=new r.OlP("angularfire2.storageBucket"),MC=new r.OlP("angularfire2.storage.maxUploadRetryTime"),qC=new r.OlP("angularfire2.storage.maxOperationRetryTime");let VC=(()=>{class t{constructor(t,e,n,r,i,o,s){this.schedulers=new zo.HU(i),this.keepUnstableUntilFirst=(0,zo.ss)(this.schedulers);const a=(0,zo.on)(t,i,e);this.storage=(0,zo.sI)(`${a.name}.storage.${n}`,"AngularFireStorage",a,()=>{const t=i.runOutsideAngular(()=>a.storage(n||void 0));return o&&t.setMaxUploadRetryTime(o),s&&t.setMaxOperationRetryTime(s),t},[o,s])}ref(t){return FC(this.storage.ref(t),this.schedulers,this.keepUnstableUntilFirst)}refFromURL(t){return FC(this.storage.refFromURL(t),this.schedulers,this.keepUnstableUntilFirst)}upload(t,e,n){return FC(this.storage.ref(t),this.schedulers,this.keepUnstableUntilFirst).put(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(zo.Dh),r.LFG(zo.xv,8),r.LFG(UC,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(MC,8),r.LFG(qC,8))},t.\u0275prov=(0,r.Yz7)({factory:function(){return new t((0,r.LFG)(zo.Dh),(0,r.LFG)(zo.xv,8),(0,r.LFG)(UC,8),(0,r.LFG)(r.Lbi),(0,r.LFG)(r.R0b),(0,r.LFG)(MC,8),(0,r.LFG)(qC,8))},token:t,providedIn:"any"}),t})();function jC(t,e){1&t&&(r.TgZ(0,"h2"),r._uU(1,"Nuevo Paciente"),r.qZA())}function BC(t,e){1&t&&(r.TgZ(0,"h2"),r._uU(1,"Nuevo Especialista"),r.qZA())}function GC(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"button",7),r.NdJ("click",function(){return r.CHM(t),r.oxw().tipo="Paciente"}),r._uU(1,"Registrar Paciente"),r.qZA()}}function zC(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"button",7),r.NdJ("click",function(){return r.CHM(t),r.oxw().tipo="Especialista"}),r._uU(1,"Registrar Especialista"),r.qZA()}}function HC(t,e){1&t&&(r.TgZ(0,"span"),r._uU(1," Por favor ingrese su nombre "),r.qZA())}function ZC(t,e){1&t&&(r.TgZ(0,"span",28),r._uU(1,"El apellido es requerido "),r.qZA())}function WC(t,e){1&t&&(r.TgZ(0,"span"),r._uU(1," Por favor ingrese su edad "),r.qZA())}function KC(t,e){1&t&&(r.TgZ(0,"span"),r._uU(1," Por favor ingrese su documento "),r.qZA())}function QC(t,e){1&t&&(r.TgZ(0,"span"),r._uU(1," Por favor ingrese su Obra Social "),r.qZA())}function YC(t,e){1&t&&(r.TgZ(0,"span"),r._uU(1," Por favor ingrese su correo "),r.qZA())}function $C(t,e){1&t&&(r.TgZ(0,"span"),r._uU(1," Debe ser una direccion valida "),r.qZA())}function JC(t,e){1&t&&(r.TgZ(0,"span"),r._uU(1," Por favor ingrese su clave "),r.qZA())}function XC(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"form",8),r.NdJ("ngSubmit",function(){return r.CHM(t),r.oxw().onRegisterPaciente()}),r.TgZ(1,"fieldset"),r.TgZ(2,"div",9),r.TgZ(3,"div",2),r.TgZ(4,"label"),r._uU(5,"Nombre"),r.qZA(),r._UZ(6,"input",10),r.TgZ(7,"div",11),r.YNc(8,HC,2,0,"span",3),r.qZA(),r.qZA(),r.TgZ(9,"div",2),r.TgZ(10,"label"),r._uU(11,"Apellido"),r.qZA(),r._UZ(12,"input",12),r.TgZ(13,"div",11),r.YNc(14,ZC,2,0,"span",13),r.qZA(),r.qZA(),r.qZA(),r.TgZ(15,"div",9),r.TgZ(16,"div",14),r.TgZ(17,"label"),r._uU(18,"Edad"),r.qZA(),r._UZ(19,"input",15),r.TgZ(20,"div",11),r.YNc(21,WC,2,0,"span",3),r.qZA(),r.qZA(),r.TgZ(22,"div",16),r.TgZ(23,"label"),r._uU(24,"DNI"),r.qZA(),r._UZ(25,"input",17),r.TgZ(26,"div",11),r.YNc(27,KC,2,0,"span",3),r.qZA(),r.qZA(),r.TgZ(28,"div",16),r.TgZ(29,"label"),r._uU(30,"Obra Social"),r.qZA(),r._UZ(31,"input",18),r.TgZ(32,"div",11),r.YNc(33,QC,2,0,"span",3),r.qZA(),r.qZA(),r.qZA(),r.TgZ(34,"div",19),r.TgZ(35,"div",2),r.TgZ(36,"label"),r._uU(37,"Correo electr\xf3nico"),r.qZA(),r._UZ(38,"input",20),r.TgZ(39,"div",11),r.YNc(40,YC,2,0,"span",3),r.YNc(41,$C,2,0,"span",3),r.qZA(),r.qZA(),r.TgZ(42,"div",2),r.TgZ(43,"label"),r._uU(44,"Contrase\xf1a"),r.qZA(),r._UZ(45,"input",21),r.TgZ(46,"div",11),r.YNc(47,JC,2,0,"span",3),r.qZA(),r.qZA(),r.qZA(),r.TgZ(48,"div",9),r.TgZ(49,"div",2),r.TgZ(50,"label"),r._uU(51,"Imagen 1"),r.qZA(),r.TgZ(52,"div",22),r._UZ(53,"div",23),r.TgZ(54,"div",24),r.TgZ(55,"input",25),r.NdJ("change",function(e){return r.CHM(t),r.oxw().CambioFotos(e,1)}),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(56,"div",2),r.TgZ(57,"label"),r._uU(58,"Imagen 2"),r.qZA(),r.TgZ(59,"div",22),r._UZ(60,"div",23),r.TgZ(61,"div",24),r.TgZ(62,"input",26),r.NdJ("change",function(e){return r.CHM(t),r.oxw().CambioFotos(e,2)}),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(63,"button",27),r._uU(64," Registrarse "),r.qZA(),r._UZ(65,"br"),r.qZA(),r.qZA()}if(2&t){const t=r.oxw();r.Q6J("formGroup",t.pacienteRegForm),r.xp6(6),r.Tol(t.isValidPaciente("nombre")),r.xp6(2),r.Q6J("ngIf",(null==t.pacienteRegForm.controls.nombre.errors?null:t.pacienteRegForm.controls.nombre.errors.required)&&t.pacienteRegForm.controls.nombre.touched),r.xp6(4),r.Tol(t.isValidPaciente("apellido")),r.xp6(2),r.Q6J("ngIf",(null==t.pacienteRegForm.controls.apellido.errors?null:t.pacienteRegForm.controls.apellido.errors.required)&&t.pacienteRegForm.controls.apellido.touched),r.xp6(5),r.Tol(t.isValidPaciente("edad")),r.xp6(2),r.Q6J("ngIf",null==t.pacienteRegForm.get("edad").errors?null:t.pacienteRegForm.get("edad").errors.required),r.xp6(4),r.Tol(t.isValidPaciente("dni")),r.xp6(2),r.Q6J("ngIf",null==t.pacienteRegForm.get("dni").errors?null:t.pacienteRegForm.get("dni").errors.required),r.xp6(4),r.Tol(t.isValidPaciente("obraSocial")),r.xp6(2),r.Q6J("ngIf",null==t.pacienteRegForm.get("obraSocial").errors?null:t.pacienteRegForm.get("obraSocial").errors.required),r.xp6(5),r.Tol(t.isValidPaciente("correo")),r.xp6(2),r.Q6J("ngIf",null==t.pacienteRegForm.get("correo").errors?null:t.pacienteRegForm.get("correo").errors.required),r.xp6(1),r.Q6J("ngIf",null==t.pacienteRegForm.get("correo").errors?null:t.pacienteRegForm.get("correo").errors.pattern),r.xp6(4),r.Tol(t.isValidPaciente("clave")),r.xp6(2),r.Q6J("ngIf",null==t.pacienteRegForm.get("clave").errors?null:t.pacienteRegForm.get("clave").errors.required),r.xp6(16),r.Q6J("disabled",t.pacienteRegForm.invalid)}}function tT(t,e){1&t&&(r.TgZ(0,"span"),r._uU(1," Por favor ingrese su nombre "),r.qZA())}function eT(t,e){1&t&&(r.TgZ(0,"span",28),r._uU(1,"El apellido es requerido "),r.qZA())}function nT(t,e){1&t&&(r.TgZ(0,"span"),r._uU(1," Por favor ingrese su edad "),r.qZA())}function rT(t,e){1&t&&(r.TgZ(0,"span"),r._uU(1," Por favor ingrese su documento "),r.qZA())}function iT(t,e){1&t&&(r.TgZ(0,"span"),r._uU(1," Por favor ingrese su correo "),r.qZA())}function oT(t,e){1&t&&(r.TgZ(0,"span"),r._uU(1," Debe ser una direccion valida "),r.qZA())}function sT(t,e){1&t&&(r.TgZ(0,"span"),r._uU(1," Por favor ingrese su clave "),r.qZA())}function aT(t,e){1&t&&(r.TgZ(0,"span"),r._uU(1," Por favor ingrese su especialidad "),r.qZA())}function uT(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"form",8),r.NdJ("ngSubmit",function(){return r.CHM(t),r.oxw().onRegisterEspecialista()}),r.TgZ(1,"fieldset"),r.TgZ(2,"div",9),r.TgZ(3,"div",2),r._UZ(4,"input",10),r.TgZ(5,"div",11),r.YNc(6,tT,2,0,"span",3),r.qZA(),r.qZA(),r.TgZ(7,"div",2),r._UZ(8,"input",12),r.TgZ(9,"div",11),r.YNc(10,eT,2,0,"span",13),r.qZA(),r.qZA(),r.qZA(),r.TgZ(11,"div",9),r.TgZ(12,"div",2),r._UZ(13,"input",15),r.TgZ(14,"div",11),r.YNc(15,nT,2,0,"span",3),r.qZA(),r.qZA(),r.TgZ(16,"div",2),r._UZ(17,"input",17),r.TgZ(18,"div",11),r.YNc(19,rT,2,0,"span",3),r.qZA(),r.qZA(),r.qZA(),r.TgZ(20,"div",19),r.TgZ(21,"div",2),r._UZ(22,"input",29),r.TgZ(23,"div",11),r.YNc(24,iT,2,0,"span",3),r.YNc(25,oT,2,0,"span",3),r.qZA(),r.qZA(),r.TgZ(26,"div",2),r._UZ(27,"input",30),r.TgZ(28,"div",11),r.YNc(29,sT,2,0,"span",3),r.qZA(),r.qZA(),r.qZA(),r.TgZ(30,"div",19),r.TgZ(31,"div",2),r._UZ(32,"input",31),r.TgZ(33,"div",11),r.YNc(34,aT,2,0,"span",3),r.qZA(),r.qZA(),r.TgZ(35,"div",2),r.TgZ(36,"div",22),r._UZ(37,"div",23),r.TgZ(38,"div"),r.TgZ(39,"input",25),r.NdJ("change",function(e){return r.CHM(t),r.oxw().CambioFotos(e,1)}),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(40,"button",27),r._uU(41," Registrarse "),r.qZA(),r._UZ(42,"br"),r.qZA(),r.qZA()}if(2&t){const t=r.oxw();r.Q6J("formGroup",t.especialistaRegForm),r.xp6(4),r.Tol(t.isValidEspecialista("nombre")),r.xp6(2),r.Q6J("ngIf",(null==t.especialistaRegForm.controls.nombre.errors?null:t.especialistaRegForm.controls.nombre.errors.required)&&t.especialistaRegForm.controls.nombre.touched),r.xp6(2),r.Tol(t.isValidEspecialista("apellido")),r.xp6(2),r.Q6J("ngIf",(null==t.especialistaRegForm.controls.apellido.errors?null:t.especialistaRegForm.controls.apellido.errors.required)&&t.especialistaRegForm.controls.apellido.touched),r.xp6(3),r.Tol(t.isValidEspecialista("edad")),r.xp6(2),r.Q6J("ngIf",null==t.especialistaRegForm.get("edad").errors?null:t.especialistaRegForm.get("edad").errors.required),r.xp6(2),r.Tol(t.isValidEspecialista("dni")),r.xp6(2),r.Q6J("ngIf",null==t.especialistaRegForm.get("dni").errors?null:t.especialistaRegForm.get("dni").errors.required),r.xp6(3),r.Tol(t.isValidEspecialista("correo")),r.xp6(2),r.Q6J("ngIf",null==t.especialistaRegForm.get("correo").errors?null:t.especialistaRegForm.get("correo").errors.required),r.xp6(1),r.Q6J("ngIf",null==t.especialistaRegForm.get("correo").errors?null:t.especialistaRegForm.get("correo").errors.pattern),r.xp6(2),r.Tol(t.isValidEspecialista("clave")),r.xp6(2),r.Q6J("ngIf",null==t.especialistaRegForm.get("clave").errors?null:t.especialistaRegForm.get("clave").errors.required),r.xp6(3),r.Tol(t.isValidEspecialista("especialidades")),r.xp6(2),r.Q6J("ngIf",null==t.especialistaRegForm.get("especialidades").errors?null:t.especialistaRegForm.get("especialidades").errors.required),r.xp6(6),r.Q6J("disabled",t.especialistaRegForm.invalid)}}let cT=(()=>{class t{constructor(t,e,n,i,o){this.fb=t,this.router=e,this.usuarioSrv=n,this.storage=i,this.authSVC=o,this.isEmail=/\S+@\S+\.\S+/,this.emitRegister=new r.vpe,this.tipo="Paciente"}ngOnInit(){this.initForm()}CambioFotos(t,e){1==e?(this.foto1=t.target.files[0],console.log(this.foto1)):(this.foto2=t.target.files[0],console.log(this.foto2))}SubirFotos(t){console.log("Subir Fotos: Foto1: ",this.foto1," Foto2: ",this.foto2),this.foto1?(this.fotoCargada1=`/usuarios/${t}/1`,this.storage.upload(this.fotoCargada1,this.foto1)):this.fotoCargada1="/usuarios/default.png",this.foto2?(this.fotoCargada2=`/usuarios/${t}/2`,this.storage.upload(this.fotoCargada2,this.foto2)):this.fotoCargada2="/usuarios/default.png"}onRegisterPaciente(){this.pacienteRegForm.valid&&(this.nombre=this.pacienteRegForm.value.nombre,this.apellido=this.pacienteRegForm.value.apellido,this.correo=this.pacienteRegForm.value.correo,this.clave=this.pacienteRegForm.value.clave,this.dni=this.pacienteRegForm.value.dni,this.edad=this.pacienteRegForm.value.edad,this.obraSocial=this.pacienteRegForm.value.obraSocial,console.log(this.foto1,"y",this.foto2),this.registrarPaciente())}onRegisterEspecialista(){this.especialistaRegForm.valid&&(this.nombre=this.especialistaRegForm.value.nombre,this.apellido=this.especialistaRegForm.value.apellido,this.correo=this.especialistaRegForm.value.correo,this.clave=this.especialistaRegForm.value.clave,this.edad=this.especialistaRegForm.value.edad,this.dni=this.especialistaRegForm.value.dni,this.especialidades=this.especialistaRegForm.value.especialidades,this.foto1=this.fotoCargada1,this.registrarEspecialista())}registrarPaciente(){this.authSVC.Register(this.correo,this.clave).then(t=>{this.SubirFotos(t.user.uid),this.id=t.user.uid;let e=new hb(this.nombre,this.apellido,this.correo,this.clave,this.edad,this.dni,this.obraSocial,this.fotoCargada1,this.fotoCargada2);this.usuarioSrv.RegistrarPaciente(e),Lo().fire({title:"Registro exitoso!",text:"Se le ha enviado un mail de confirmacion, por favor, revise su casilla para poder ingresar",icon:"success",didDestroy:()=>{this.router.navigateByUrl("")}})}).catch(t=>{console.log(t)})}registrarEspecialista(){this.authSVC.Register(this.correo,this.clave).then(t=>{this.SubirFotos(t.user.uid),this.id=t.user.uid;let e=new lb(this.nombre,this.apellido,this.correo,this.clave,this.edad,this.dni,this.especialidades,this.fotoCargada1);this.usuarioSrv.RegistrarEspecialista(e),Lo().fire({title:"Registro exitoso!",text:"Se le ha enviado un mail de confirmacion, por favor, revise su casilla para poder ingresar. Ademas como especialista debe aguardar que un administrador lo valide.",icon:"success",didDestroy:()=>{this.router.navigateByUrl("")}})}).catch(t=>{console.log(t)})}isValidPaciente(t){const e=this.pacienteRegForm.get(t);return!e.valid&&e.touched?"is-invalid":e.touched?"is-valid":""}isValidEspecialista(t){const e=this.especialistaRegForm.get(t);return!e.valid&&e.touched?"is-invalid":e.touched?"is-valid":""}initForm(){this.pacienteRegForm=this.fb.group({correo:["",[Di.required,Di.pattern(this.isEmail)]],clave:["",[Di.required,Di.minLength(8)]],nombre:["",[Di.required]],apellido:["",[Di.required]],obraSocial:["",[Di.required]],edad:["",[Di.required]],dni:["",[Di.required]]}),this.especialistaRegForm=this.fb.group({correo:["",[Di.required,Di.pattern(this.isEmail)]],clave:["",[Di.required,Di.minLength(8)]],nombre:["",[Di.required]],apellido:["",[Di.required]],edad:["",[Di.required]],dni:["",[Di.required]],especialidades:["",[Di.required]]})}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(No),r.Y36(Jr),r.Y36(ab),r.Y36(VC),r.Y36(sb))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-registro"]],outputs:{emitRegister:"emitRegister"},decls:10,vars:6,consts:[[1,"container"],[1,"row"],[1,"col-6"],[4,"ngIf"],[1,"col-6",2,"text-align","end"],["class","btn btn-primary",3,"click",4,"ngIf"],["class","animate__animated animate__backInDown","novalidate","",3,"formGroup","ngSubmit",4,"ngIf"],[1,"btn","btn-primary",3,"click"],["novalidate","",1,"animate__animated","animate__backInDown",3,"formGroup","ngSubmit"],[1,"row","row-form","form-group"],["type","text","id","nombre","placeholder","Nombre","formControlName","nombre",1,"form-control"],[1,"invalid-feedback",2,"font-family","sans-serif"],["type","text","id","apellido","placeholder","Apellido","formControlName","apellido",1,"form-control"],["class","invalid",4,"ngIf"],[1,"col-2"],["type","number","id","edad","placeholder","Edad","formControlName","edad",1,"form-control"],[1,"col-5"],["type","number","id","dni","placeholder","DNI","formControlName","dni",1,"form-control"],["type","text","id","obraSocial","placeholder","Obra Social","formControlName","obraSocial",1,"form-control"],[1,"form-group","row","row-form"],["type","correo","id","correo","placeholder","Correo electr\xf3nico","formControlName","correo",1,"form-control"],["type","password","id","clave","placeholder","Contrase\xf1a","formControlName","clave",1,"form-control"],[1,"input-group","mb-3"],[1,"input-group-prepend"],[1,"custom-file"],["type","file","id","foto1",1,"sinError",3,"change"],["type","file","id","foto2",1,"sinError",3,"change"],["type","submit",1,"btn","btn-primary","botonesLanding","animate__animated","animate__backInLeft",3,"disabled"],[1,"invalid"],["type","correo","id","correo","placeholder","Correo","formControlName","correo",1,"form-control"],["type","password","id","clave","placeholder","Clave","formControlName","clave",1,"form-control"],["type","text","id","especialidades","placeholder","Especialidades","formControlName","especialidades",1,"form-control"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r.TgZ(1,"div",1),r.TgZ(2,"div",2),r.YNc(3,jC,2,0,"h2",3),r.YNc(4,BC,2,0,"h2",3),r.qZA(),r.TgZ(5,"div",4),r.YNc(6,GC,2,0,"button",5),r.YNc(7,zC,2,0,"button",5),r.qZA(),r.qZA(),r.YNc(8,XC,66,24,"form",6),r.YNc(9,uT,43,24,"form",6),r.qZA()),2&t&&(r.xp6(3),r.Q6J("ngIf","Paciente"==e.tipo),r.xp6(1),r.Q6J("ngIf","Especialista"==e.tipo),r.xp6(2),r.Q6J("ngIf","Especialista"==e.tipo),r.xp6(1),r.Q6J("ngIf","Paciente"==e.tipo),r.xp6(1),r.Q6J("ngIf","Paciente"==e.tipo),r.xp6(1),r.Q6J("ngIf","Especialista"==e.tipo))},directives:[P,bo,Xi,Io,ki,Ji,Ao,To],styles:[".row-form[_ngcontent-%COMP%]{margin-top:20px}"]}),t})();function lT(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"button",1),r.NdJ("click",function(){r.CHM(t);const e=r.oxw();return e.validarEspecialista(e.unUsuario)}),r._uU(1,"Validar"),r.qZA()}}let hT=(()=>{class t{constructor(t){this.userSvc=t,this.especialistaSeleccionado=new r.vpe}ngOnInit(){}validarEspecialista(t){this.userSvc.ActualizarEstadoEspecialista(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(ab))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-fila-usuario"]],inputs:{unUsuario:"unUsuario"},outputs:{especialistaSeleccionado:"especialistaSeleccionado"},decls:8,vars:4,consts:[["type","button","class","btn btn-info btn-circle",3,"click",4,"ngIf"],["type","button",1,"btn","btn-info","btn-circle",3,"click"]],template:function(t,e){1&t&&(r.TgZ(0,"td"),r._uU(1),r.qZA(),r.TgZ(2,"td"),r._uU(3),r.qZA(),r.TgZ(4,"td"),r._uU(5),r.qZA(),r.TgZ(6,"td"),r.YNc(7,lT,2,0,"button",0),r.qZA()),2&t&&(r.xp6(1),r.Oqu(e.unUsuario.nombre),r.xp6(2),r.hij(" ",e.unUsuario.apellido," "),r.xp6(2),r.hij(" ",e.unUsuario.rol," "),r.xp6(2),r.Q6J("ngIf","Especialista"==e.unUsuario.rol))},directives:[P],styles:[""]}),t})();function dT(t,e){if(1&t&&(r.TgZ(0,"tr"),r._UZ(1,"app-fila-usuario",1),r.qZA()),2&t){const t=e.$implicit;r.xp6(1),r.Q6J("unUsuario",t)}}let fT=(()=>{class t{constructor(){this.especialistaSeleccionado=new r.vpe}ngOnInit(){}validarEspecialista(t){this.especialistaSeleccionado.emit(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-tabla-usuarios"]],inputs:{listaUsuarios:"listaUsuarios"},outputs:{especialistaSeleccionado:"especialistaSeleccionado"},decls:10,vars:1,consts:[[4,"ngFor","ngForOf"],[3,"unUsuario"]],template:function(t,e){1&t&&(r.TgZ(0,"table"),r.TgZ(1,"thead"),r.TgZ(2,"th"),r._uU(3,"Nombre"),r.qZA(),r.TgZ(4,"th"),r._uU(5,"Apellido"),r.qZA(),r.TgZ(6,"th"),r._uU(7,"Rol"),r.qZA(),r.qZA(),r.TgZ(8,"tbody"),r.YNc(9,dT,2,1,"tr",0),r.qZA(),r.qZA()),2&t&&(r.xp6(9),r.Q6J("ngForOf",e.listaUsuarios))},directives:[A,hT],styles:[""]}),t})();const pT=[{path:"login",component:ub},{path:"",component:wi},{path:"registro",component:cT},{path:"usuarios",component:(()=>{class t{constructor(t){this.userSvc=t,this.listaUsuarios=[]}ngOnInit(){this.usuarios=this.userSvc.TraerTodosUsuarios().valueChanges(),this.usuarios.subscribe(t=>{this.listaUsuarios=t,console.log(this.listaUsuarios)},t=>console.log(t))}tomarEspecialistaParaValidar(t){}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(ab))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-usuarios"]],decls:2,vars:1,consts:[[1,"container"],[3,"listaUsuarios"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r._UZ(1,"app-tabla-usuarios",1),r.qZA()),2&t&&(r.xp6(1),r.Q6J("listaUsuarios",e.listaUsuarios))},directives:[fT],styles:[""]}),t})()}];let gT=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[hi.forRoot(pT)],hi]}),t})(),mT=(()=>{class t{constructor(){this.title="TPClinica"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-root"]],decls:27,vars:0,consts:[[1,"container"],[1,"d-flex","flex-wrap","align-items-center","justify-content-center","justify-content-md-between","py-3","mb-4","border-bottom"],["href","/",1,"d-flex","align-items-center","col-md-3","mb-2","mb-md-0","text-dark","text-decoration-none"],["src","../assets/logo.png",1,"logo"],[1,"nav","col-12","col-md-auto","mb-2","justify-content-center","mb-md-0"],["href","#",1,"nav-link","px-2","link-secondary"],["href","#",1,"nav-link","px-2","link-dark"],[1,"col-md-3","text-end"],["routerLink","login","type","button",1,"btn","btn-outline-primary","me-2"],["routerLink","registro","type","button",1,"btn","btn-primary"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r.TgZ(1,"header",1),r.TgZ(2,"a",2),r._UZ(3,"img",3),r.qZA(),r.TgZ(4,"ul",4),r.TgZ(5,"li"),r.TgZ(6,"a",5),r._uU(7,"Home"),r.qZA(),r.qZA(),r.TgZ(8,"li"),r.TgZ(9,"a",6),r._uU(10,"Features"),r.qZA(),r.qZA(),r.TgZ(11,"li"),r.TgZ(12,"a",6),r._uU(13,"Pricing"),r.qZA(),r.qZA(),r.TgZ(14,"li"),r.TgZ(15,"a",6),r._uU(16,"FAQs"),r.qZA(),r.qZA(),r.TgZ(17,"li"),r.TgZ(18,"a",6),r._uU(19,"About"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(20,"div",7),r.TgZ(21,"button",8),r._uU(22,"Iniciar Sesion"),r.qZA(),r.TgZ(23,"button",9),r._uU(24,"Registro"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(25,"div"),r._UZ(26,"router-outlet"),r.qZA())},directives:[Xr,ei],styles:[".b-example-divider[_ngcontent-%COMP%]{height:3rem;background-color:rgba(0,0,0,.1);border:solid rgba(0,0,0,.15);border-width:1px 0;box-shadow:inset 0 .5em 1.5em rgba(0,0,0,.1),inset 0 .125em .5em rgba(0,0,0,.15)}.form-control-dark[_ngcontent-%COMP%]{color:#fff;background-color:var(--bs-dark);border-color:var(--bs-gray)}.form-control-dark[_ngcontent-%COMP%]:focus{color:#fff;background-color:var(--bs-dark);border-color:#fff;box-shadow:0 0 0 .25rem hsla(0,0%,100%,.25)}.bi[_ngcontent-%COMP%]{vertical-align:-.125em;fill:currentColor}.text-small[_ngcontent-%COMP%]{font-size:85%}.dropdown-toggle[_ngcontent-%COMP%]{outline:0}.logo[_ngcontent-%COMP%]{max-width:60px;max-height:60px}"]}),t})();const yT={apiKey:"AIzaSyBsv5h3PczvIxinvKDo65IsjEIhDFDUU9I",authDomain:"tpclinica-6668b.firebaseapp.com",projectId:"tpclinica-6668b",storageBucket:"tpclinica-6668b.appspot.com",messagingSenderId:"891648176626",appId:"1:891648176626:web:2b94a52fd8ffde3a013b6b"};let vT=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t,bootstrap:[mT]}),t.\u0275inj=r.cJS({providers:[],imports:[[pt,gT,zo.hO.initializeApp(yT),Oo,Po]]}),t})();(0,r.G48)(),dt().bootstrapModule(vT).catch(t=>console.error(t))},4762:(t,e,n)=>{"use strict";n.d(e,{ZT:()=>i,pi:()=>o,mG:()=>s,Jh:()=>a,XA:()=>u,CR:()=>c,ev:()=>l});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((r=r.apply(t,e||[])).next())})}function a(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function l(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}}},t=>{"use strict";t(t.s=9603)}]);