(self.webpackChunktpclinica=self.webpackChunktpclinica||[]).push([[179],{8255:t=>{function e(t){return Promise.resolve().then(()=>{var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}e.keys=()=>[],e.resolve=e,e.id=8255,t.exports=e},5366:(t,e,n)=>{"use strict";n.d(e,{deG:()=>Je,tb:()=>$a,AFp:()=>Za,ip1:()=>za,CZH:()=>Ga,hGG:()=>zu,z2F:()=>Du,sBO:()=>ta,Sil:()=>uu,_Vd:()=>Es,EJc:()=>tu,SBq:()=>As,qLn:()=>fr,vpe:()=>Aa,gxx:()=>Ki,tBr:()=>yn,XFs:()=>x,OlP:()=>$e,zs3:()=>uo,ZZ4:()=>Ks,aQg:()=>Ys,soG:()=>Xa,YKP:()=>la,v3s:()=>Fu,h0i:()=>ca,PXZ:()=>xu,R0b:()=>hu,FiY:()=>_n,Lbi:()=>Qa,g9A:()=>Ya,Qsj:()=>Ps,FYo:()=>Ns,JOm:()=>mr,Tiy:()=>Rs,q3G:()=>sr,tp0:()=>wn,EAV:()=>qu,Rgc:()=>oa,dDg:()=>yu,DyG:()=>Xe,q4F:()=>Ls,GfV:()=>Ds,s_b:()=>da,ifc:()=>L,eFA:()=>Nu,G48:()=>ku,Gpc:()=>f,X6Q:()=>Su,_c5:()=>Bu,VLi:()=>bu,c2e:()=>Ja,zSh:()=>Yi,wAp:()=>ls,vHH:()=>m,EiD:()=>ir,mCW:()=>Vn,qzn:()=>Nn,JVY:()=>On,pB0:()=>Fn,eBb:()=>Dn,L6k:()=>Rn,LAX:()=>Ln,cg1:()=>as,Tjo:()=>Vu,kL8:()=>us,yhl:()=>Pn,dqk:()=>j,sIi:()=>yo,CqO:()=>Oo,QGY:()=>No,F4k:()=>Po,RDi:()=>Et,AaK:()=>l,z3N:()=>xn,qOj:()=>lo,TTD:()=>yt,_Bn:()=>bs,xp6:()=>Xr,uIk:()=>bo,Tol:()=>zo,ekj:()=>Ho,Suo:()=>Va,Xpm:()=>$,lG2:()=>it,Yz7:()=>w,cJS:()=>b,oAB:()=>et,Yjl:()=>ot,Y36:()=>Co,_UZ:()=>Ao,qZA:()=>ko,TgZ:()=>So,EpF:()=>xo,n5z:()=>Ze,Ikx:()=>rs,LFG:()=>gn,$8M:()=>We,NdJ:()=>Ro,CRH:()=>Ba,oxw:()=>Fo,Q6J:()=>Eo,iGM:()=>ja,CHM:()=>Vt,LSH:()=>ar,kYT:()=>nt,YNc:()=>To,_uU:()=>ts,Oqu:()=>es});var r=n(5959),i=n(7570),o=n(8318),s=n(1906),a=n(1055);function u(t){for(let e in t)if(t[e]===u)return e;throw Error("Could not find renamed property on target object.")}function c(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function l(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(l).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function h(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const d=u({__forward_ref__:u});function f(t){return t.__forward_ref__=f,t.toString=function(){return l(this())},t}function p(t){return g(t)?t():t}function g(t){return"function"==typeof t&&t.hasOwnProperty(d)&&t.__forward_ref__===f}class m extends Error{constructor(t,e){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(t,e)),this.code=t}}function v(t){return"string"==typeof t?t:null==t?"":String(t)}function y(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():v(t)}function _(t,e){const n=e?` in ${e}`:"";throw new m("201",`No provider for ${y(t)} found${n}`)}function w(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function b(t){return{providers:t.providers||[],imports:t.imports||[]}}function T(t){return C(t,I)||C(t,k)}function C(t,e){return t.hasOwnProperty(e)?t[e]:null}function E(t){return t&&(t.hasOwnProperty(S)||t.hasOwnProperty(A))?t[S]:null}const I=u({"\u0275prov":u}),S=u({"\u0275inj":u}),k=u({ngInjectableDef:u}),A=u({ngInjectorDef:u});var x=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});let N;function P(t){const e=N;return N=t,e}function O(t,e,n){const r=T(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&x.Optional?null:void 0!==e?e:void _(l(t),"Injector")}function R(t){return{toString:t}.toString()}var D=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),L=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const F="undefined"!=typeof globalThis&&globalThis,M="undefined"!=typeof window&&window,U="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,q="undefined"!=typeof global&&global,j=F||q||M||U,V={},B=[],H=u({"\u0275cmp":u}),z=u({"\u0275dir":u}),G=u({"\u0275pipe":u}),Z=u({"\u0275mod":u}),K=u({"\u0275loc":u}),W=u({"\u0275fac":u}),Y=u({__NG_ELEMENT_ID__:u});let Q=0;function $(t){return R(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===D.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||B,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||L.Emulated,id:"c",styles:t.styles||B,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,o=t.pipes;return n.id+=Q++,n.inputs=rt(t.inputs,e),n.outputs=rt(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(J):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map(X):null,n})}function J(t){return st(t)||function(t){return t[z]||null}(t)}function X(t){return function(t){return t[G]||null}(t)}const tt={};function et(t){const e={type:t.type,bootstrap:t.bootstrap||B,declarations:t.declarations||B,imports:t.imports||B,exports:t.exports||B,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&R(()=>{tt[t.id]=t.type}),e}function nt(t,e){return R(()=>{const n=at(t,!0);n.declarations=e.declarations||B,n.imports=e.imports||B,n.exports=e.exports||B})}function rt(t,e){if(null==t)return V;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const it=$;function ot(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function st(t){return t[H]||null}function at(t,e){const n=t[Z]||null;if(!n&&!0===e)throw new Error(`Type ${l(t)} does not have '\u0275mod' property.`);return n}const ut=20,ct=10;function lt(t){return Array.isArray(t)&&"object"==typeof t[1]}function ht(t){return Array.isArray(t)&&!0===t[1]}function dt(t){return 0!=(8&t.flags)}function ft(t){return 2==(2&t.flags)}function pt(t){return 1==(1&t.flags)}function gt(t){return null!==t.template}function mt(t,e){return t.hasOwnProperty(W)?t[W]:null}class vt{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function yt(){return _t}function _t(t){return t.type.prototype.ngOnChanges&&(t.setInput=bt),wt}function wt(){const t=Tt(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===V)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function bt(t,e,n,r){const i=Tt(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:V,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],u=s[a];o[a]=new vt(u&&u.currentValue,e,s===V),t[r]=e}function Tt(t){return t.__ngSimpleChanges__||null}let Ct;function Et(t){Ct=t}function It(t){return!!t.listen}yt.ngInherit=!0;const St={createRenderer:(t,e)=>void 0!==Ct?Ct:"undefined"!=typeof document?document:void 0};function kt(t){for(;Array.isArray(t);)t=t[0];return t}function At(t,e){return kt(e[t])}function xt(t,e){return kt(e[t.index])}function Nt(t,e){return t.data[e]}function Pt(t,e){const n=e[t];return lt(n)?n:n[0]}function Ot(t){return 4==(4&t[2])}function Rt(t){return 128==(128&t[2])}function Dt(t,e){return null==e?null:t[e]}function Lt(t){t[18]=0}function Ft(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const Mt={lFrame:ie(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Ut(){return Mt.bindingsEnabled}function qt(){return Mt.lFrame.lView}function jt(){return Mt.lFrame.tView}function Vt(t){return Mt.lFrame.contextLView=t,t[8]}function Bt(){let t=Ht();for(;null!==t&&64===t.type;)t=t.parent;return t}function Ht(){return Mt.lFrame.currentTNode}function zt(t,e){const n=Mt.lFrame;n.currentTNode=t,n.isParent=e}function Gt(){return Mt.lFrame.isParent}function Zt(){return Mt.isInCheckNoChangesMode}function Kt(t){Mt.isInCheckNoChangesMode=t}function Wt(){return Mt.lFrame.bindingIndex++}function Yt(t){const e=Mt.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function Qt(t,e){const n=Mt.lFrame;n.bindingIndex=n.bindingRootIndex=t,$t(e)}function $t(t){Mt.lFrame.currentDirectiveIndex=t}function Jt(){return Mt.lFrame.currentQueryIndex}function Xt(t){Mt.lFrame.currentQueryIndex=t}function te(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function ee(t,e,n){if(n&x.SkipSelf){let r=e,i=t;for(;r=r.parent,!(null!==r||n&x.Host||(r=te(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;e=r,t=i}const r=Mt.lFrame=re();return r.currentTNode=e,r.lView=t,!0}function ne(t){const e=re(),n=t[1];Mt.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function re(){const t=Mt.lFrame,e=null===t?null:t.child;return null===e?ie(t):e}function ie(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function oe(){const t=Mt.lFrame;return Mt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const se=oe;function ae(){const t=oe();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function ue(){return Mt.lFrame.selectedIndex}function ce(t){Mt.lFrame.selectedIndex=t}function le(){const t=Mt.lFrame;return Nt(t.tView,t.selectedIndex)}function he(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:o,ngAfterViewChecked:s,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),o&&(t.viewHooks||(t.viewHooks=[])).push(-n,o),s&&((t.viewHooks||(t.viewHooks=[])).push(n,s),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,s)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function de(t,e,n){ge(t,e,3,n)}function fe(t,e,n,r){(3&t[2])===n&&ge(t,e,n,r)}function pe(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function ge(t,e,n,r){const i=null!=r?r:-1,o=e.length-1;let s=0;for(let a=void 0!==r?65535&t[18]:0;a<o;a++)if("number"==typeof e[a+1]){if(s=e[a],null!=r&&s>=r)break}else e[a]<0&&(t[18]+=65536),(s<i||-1==i)&&(me(t,n,e,a),t[18]=(4294901760&t[18])+a+2),a++}function me(t,e,n,r){const i=n[r]<0,o=n[r+1],s=t[i?-n[r]:n[r]];if(i){if(t[2]>>11<t[18]>>16&&(3&t[2])===e){t[2]+=2048;try{o.call(s)}finally{}}}else try{o.call(s)}finally{}}const ve=-1;class ye{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function _e(t,e,n){const r=It(t);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,s):e.setAttributeNS(s,a,u)}else{const s=o,a=n[++i];be(s)?r&&t.setProperty(e,s,a):r?t.setAttribute(e,s,a):e.setAttribute(s,a),i++}}return i}function we(t){return 3===t||4===t||6===t}function be(t){return 64===t.charCodeAt(0)}function Te(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Ce(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Ce(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const n=t[o++];if("number"==typeof n){if(n===e){s=-1;break}if(n>e){s=o-1;break}}}for(;o<t.length;){const e=t[o];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function Ee(t){return t!==ve}function Ie(t){return 32767&t}function Se(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}let ke=!0;function Ae(t){const e=ke;return ke=t,e}let xe=0;function Ne(t,e){const n=Oe(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,Pe(r.data,t),Pe(e,null),Pe(r.blueprint,null));const i=Re(t,e),o=t.injectorIndex;if(Ee(i)){const t=Ie(i),n=Se(i,e),r=n[1].data;for(let i=0;i<8;i++)e[o+i]=n[t+i]|r[t+i]}return e[o+8]=i,o}function Pe(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Oe(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Re(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(r=2===e?t.declTNode:1===e?i[6]:null,null===r)return ve;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return ve}function De(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Y)&&(r=n[Y]),null==r&&(r=n[Y]=xe++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function Le(t,e,n){if(n&x.Optional)return t;_(e,"NodeInjector")}function Fe(t,e,n,r){if(n&x.Optional&&void 0===r&&(r=null),0==(n&(x.Self|x.Host))){const i=t[9],o=P(void 0);try{return i?i.get(e,r,n&x.Optional):O(e,r,n&x.Optional)}finally{P(o)}}return Le(r,e,n)}function Me(t,e,n,r=x.Default,i){if(null!==t){const o=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Y)?t[Y]:void 0;return"number"==typeof e?e>=0?255&e:qe:e}(n);if("function"==typeof o){if(!ee(e,t,r))return r&x.Host?Le(i,n,r):Fe(e,n,r,i);try{const t=o(r);if(null!=t||r&x.Optional)return t;_(n)}finally{se()}}else if("number"==typeof o){let i=null,s=Oe(t,e),a=ve,u=r&x.Host?e[16][6]:null;for((-1===s||r&x.SkipSelf)&&(a=-1===s?Re(t,e):e[s+8],a!==ve&&ze(r,!1)?(i=e[1],s=Ie(a),e=Se(a,e)):s=-1);-1!==s;){const t=e[1];if(He(o,s,t.data)){const t=je(s,e,n,i,r,u);if(t!==Ue)return t}a=e[s+8],a!==ve&&ze(r,e[1].data[s+8]===u)&&He(o,s,e)?(i=t,s=Ie(a),e=Se(a,e)):s=-1}}}return Fe(e,n,r,i)}const Ue={};function qe(){return new Ge(Bt(),qt())}function je(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],u=Ve(a,s,n,null==r?ft(a)&&ke:r!=s&&0!=(3&a.type),i&x.Host&&o===a);return null!==u?Be(e,s,u,a):Ue}function Ve(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,u=t.directiveStart,c=o>>20,l=i?a+c:t.directiveEnd;for(let h=r?a:a+c;h<l;h++){const t=s[h];if(h<u&&n===t||h>=u&&t.type===n)return h}if(i){const t=s[u];if(t&&gt(t)&&t.type===n)return u}return null}function Be(t,e,n,r){let i=t[n];const o=e.data;if(i instanceof ye){const s=i;s.resolving&&function(t,e){throw new m("200",`Circular dependency in DI detected for ${t}`)}(y(o[n]));const a=Ae(s.canSeeViewProviders);s.resolving=!0;const u=s.injectImpl?P(s.injectImpl):null;ee(t,r,x.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const r=_t(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{null!==u&&P(u),Ae(a),s.resolving=!1,se()}}return i}function He(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function ze(t,e){return!(t&x.Self||t&x.Host&&e)}class Ge{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return Me(this._tNode,this._lView,t,void 0,e)}}function Ze(t){return R(()=>{const e=t.prototype.constructor,n=e[W]||Ke(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const t=i[W]||Ke(i);if(t&&t!==n)return t;i=Object.getPrototypeOf(i)}return t=>new t})}function Ke(t){return g(t)?()=>{const e=Ke(p(t));return e&&e()}:mt(t)}function We(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(we(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(Bt(),t)}const Ye="__parameters__";function Qe(t,e,n){return R(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty(Ye)?t[Ye]:Object.defineProperty(t,Ye,{value:[]})[Ye];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class $e{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=w({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Je=new $e("AnalyzeForEntryComponents"),Xe=Function;function tn(t,e){void 0===e&&(e=t);for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)?(e===t&&(e=t.slice(0,n)),tn(r,e)):e!==t&&e.push(r)}return e}function en(t,e){t.forEach(t=>Array.isArray(t)?en(t,e):e(t))}function nn(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function rn(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function on(t,e,n){let r=an(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function sn(t,e){const n=an(t,e);if(n>=0)return t[1|n]}function an(t,e){return function(t,e,n){let r=0,i=t.length>>1;for(;i!==r;){const n=r+(i-r>>1),o=t[n<<1];if(e===o)return n<<1;o>e?i=n:r=n+1}return~(i<<1)}(t,e)}const un={},cn=/\n/gm,ln="__source",hn=u({provide:String,useValue:u});let dn;function fn(t){const e=dn;return dn=t,e}function pn(t,e=x.Default){if(void 0===dn)throw new Error("inject() must be called from an injection context");return null===dn?O(t,void 0,e):dn.get(t,e&x.Optional?null:void 0,e)}function gn(t,e=x.Default){return(N||pn)(p(t),e)}function mn(t){const e=[];for(let n=0;n<t.length;n++){const r=p(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t,n=x.Default;for(let e=0;e<r.length;e++){const i=r[e],o=i.__NG_DI_FLAG__;"number"==typeof o?-1===o?t=i.token:n|=o:t=i}e.push(gn(t,n))}else e.push(gn(r))}return e}function vn(t,e){return t.__NG_DI_FLAG__=e,t.prototype.__NG_DI_FLAG__=e,t}const yn=vn(Qe("Inject",t=>({token:t})),-1),_n=vn(Qe("Optional"),8),wn=vn(Qe("SkipSelf"),4);let bn;function Tn(t){var e;return(null===(e=function(){if(void 0===bn&&(bn=null,j.trustedTypes))try{bn=j.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(e){}return bn}())||void 0===e?void 0:e.createHTML(t))||t}class Cn{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class En extends Cn{getTypeName(){return"HTML"}}class In extends Cn{getTypeName(){return"Style"}}class Sn extends Cn{getTypeName(){return"Script"}}class kn extends Cn{getTypeName(){return"URL"}}class An extends Cn{getTypeName(){return"ResourceURL"}}function xn(t){return t instanceof Cn?t.changingThisBreaksApplicationSecurity:t}function Nn(t,e){const n=Pn(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===e}function Pn(t){return t instanceof Cn&&t.getTypeName()||null}function On(t){return new En(t)}function Rn(t){return new In(t)}function Dn(t){return new Sn(t)}function Ln(t){return new kn(t)}function Fn(t){return new An(t)}class Mn{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(Tn(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class Un{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=Tn(t),e;const n=this.inertDocument.createElement("body");return n.innerHTML=Tn(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const qn=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,jn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Vn(t){return(t=String(t)).match(qn)||t.match(jn)?t:"unsafe:"+t}function Bn(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function Hn(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const zn=Bn("area,br,col,hr,img,wbr"),Gn=Bn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Zn=Bn("rp,rt"),Kn=Hn(Zn,Gn),Wn=Hn(zn,Hn(Gn,Bn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Hn(Zn,Bn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Kn),Yn=Bn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Qn=Bn("srcset"),$n=Hn(Yn,Qn,Bn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Bn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Jn=Bn("script,style,template");class Xn{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!Wn.hasOwnProperty(e))return this.sanitizedSomething=!0,!Jn.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let i=0;i<n.length;i++){const t=n.item(i),e=t.name,o=e.toLowerCase();if(!$n.hasOwnProperty(o)){this.sanitizedSomething=!0;continue}let s=t.value;Yn[o]&&(s=Vn(s)),Qn[o]&&(r=s,s=(r=String(r)).split(",").map(t=>Vn(t.trim())).join(", ")),this.buf.push(" ",e,'="',nr(s),'"')}var r;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();Wn.hasOwnProperty(e)&&!zn.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(nr(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const tr=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,er=/([^\#-~ |!])/g;function nr(t){return t.replace(/&/g,"&amp;").replace(tr,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(er,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let rr;function ir(t,e){let n=null;try{rr=rr||function(t){const e=new Un(t);return function(){try{return!!(new window.DOMParser).parseFromString(Tn(""),"text/html")}catch(t){return!1}}()?new Mn(e):e}(t);let r=e?String(e):"";n=rr.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=rr.getInertBodyElement(r)}while(r!==o);return Tn((new Xn).sanitizeChildren(or(n)||n))}finally{if(n){const t=or(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function or(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var sr=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function ar(t){const e=function(){const t=qt();return t&&t[12]}();return e?e.sanitize(sr.URL,t)||"":Nn(t,"URL")?xn(t):Vn(v(t))}function ur(t,e){t.__ngContext__=e}function cr(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function lr(t){return t.ngDebugContext}function hr(t){return t.ngOriginalError}function dr(t,...e){t.error(...e)}class fr{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||dr}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?lr(t)?lr(t):this._findContext(hr(t)):null}_findOriginalError(t){let e=hr(t);for(;e&&hr(e);)e=hr(e);return e}}const pr=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(j))();function gr(t){return t instanceof Function?t():t}var mr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});function vr(t,e){return(void 0)(t,e)}function yr(t){const e=t[3];return ht(e)?e[3]:e}function _r(t){return br(t[13])}function wr(t){return br(t[4])}function br(t){for(;null!==t&&!ht(t);)t=t[4];return t}function Tr(t,e,n,r,i){if(null!=r){let o,s=!1;ht(r)?o=r:lt(r)&&(s=!0,r=r[0]);const a=kt(r);0===t&&null!==n?null==i?xr(e,n,a):Ar(e,n,a,i||null,!0):1===t&&null!==n?Ar(e,n,a,i||null,!0):2===t?function(t,e,n){const r=Pr(t,e);r&&function(t,e,n,r){It(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,r,i){const o=n[7];o!==kt(n)&&Tr(e,t,r,o,i);for(let s=ct;s<n.length;s++){const i=n[s];Mr(i[1],i,t,e,r,o)}}(e,t,o,n,i)}}function Cr(t,e,n){return It(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function Er(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,Ft(i,-1)),n.splice(r,1)}function Ir(t,e){if(t.length<=ct)return;const n=ct+e,r=t[n];if(r){const o=r[17];null!==o&&o!==t&&Er(o,r),e>0&&(t[n-1][4]=r[4]);const s=rn(t,ct+e);Mr(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=s[19];null!==a&&a.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function Sr(t,e){if(!(256&e[2])){const n=e[11];It(n)&&n.destroyNode&&Mr(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return kr(t[1],t);for(;e;){let n=null;if(lt(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)lt(e)&&kr(e[1],e),e=e[3];null===e&&(e=t),lt(e)&&kr(e[1],e),n=e&&e[4]}e=n}}(e)}}function kr(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof ye)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2){const r=t[e[n]],i=e[n+1];try{i.call(r)}finally{}}else try{e.call(t)}finally{}}}}(t,e),function(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const t=n[o+1],s="function"==typeof t?t(e):kt(e[t]),a=r[i=n[o+2]],u=n[o+3];"boolean"==typeof u?s.removeEventListener(n[o],a,u):u>=0?r[i=u]():r[i=-u].unsubscribe(),o+=2}else{const t=r[i=n[o+1]];n[o].call(t)}if(null!==r){for(let t=i+1;t<r.length;t++)(0,r[t])();e[7]=null}}(t,e),1===e[1].type&&It(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&ht(e[3])){n!==e[3]&&Er(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function Ar(t,e,n,r,i){It(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function xr(t,e,n){It(t)?t.appendChild(e,n):e.appendChild(n)}function Nr(t,e,n,r,i){null!==r?Ar(t,e,n,r,i):xr(t,e,n)}function Pr(t,e){return It(t)?t.parentNode(e):e.parentNode}function Or(t,e,n,r){const i=function(t,e,n){return function(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const e=t.data[r.directiveStart].encapsulation;if(e===L.None||e===L.Emulated)return null}return xt(r,n)}(t,e.parent,n)}(t,r,e),o=e[11],s=function(t,e,n){return function(t,e,n){return 40&t.type?xt(t,n):null}(t,0,n)}(r.parent||e[6],0,e);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)Nr(o,i,n[a],s,!1);else Nr(o,i,n,s,!1)}function Rr(t,e){if(null!==e){const n=e.type;if(3&n)return xt(e,t);if(4&n)return Lr(-1,t[e.index]);if(8&n){const n=e.child;if(null!==n)return Rr(t,n);{const n=t[e.index];return ht(n)?Lr(-1,n):kt(n)}}if(32&n)return vr(e,t)()||kt(t[e.index]);{const n=Dr(t,e);return null!==n?Array.isArray(n)?n[0]:Rr(yr(t[16]),n):Rr(t,e.next)}}return null}function Dr(t,e){return null!==e?t[16][6].projection[e.projection]:null}function Lr(t,e){const n=ct+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return Rr(t,r)}return e[7]}function Fr(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],u=n.type;if(s&&0===e&&(a&&ur(kt(a),r),n.flags|=4),64!=(64&n.flags))if(8&u)Fr(t,e,n.child,r,i,o,!1),Tr(e,t,i,a,o);else if(32&u){const s=vr(n,r);let u;for(;u=s();)Tr(e,t,i,u,o);Tr(e,t,i,a,o)}else 16&u?Ur(t,e,r,n,i,o):Tr(e,t,i,a,o);n=s?n.projectionNext:n.next}}function Mr(t,e,n,r,i,o){Fr(n,r,t.firstChild,e,i,o,!1)}function Ur(t,e,n,r,i,o){const s=n[16],a=s[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)Tr(e,t,i,a[u],o);else Fr(t,e,a,s[3],i,o,!0)}function qr(t,e,n){It(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function jr(t,e,n){It(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function Vr(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}const Br="ng-template";function Hr(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==Vr(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function zr(t){return 4===t.type&&t.value!==Br}function Gr(t,e,n){return e===(4!==t.type||n?t.value:Br)}function Zr(t,e,n){let r=4;const i=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(we(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!Gr(t,u,n)||""===u&&1===e.length){if(Kr(r))return!1;s=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!Hr(t.attrs,c,n)){if(Kr(r))return!1;s=!0}continue}const l=Wr(8&r?"class":u,i,zr(t),n);if(-1===l){if(Kr(r))return!1;s=!0;continue}if(""!==c){let t;t=l>o?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==Vr(e,c,0)||2&r&&c!==t){if(Kr(r))return!1;s=!0}}}}else{if(!s&&!Kr(r)&&!Kr(u))return!1;if(s&&Kr(u))continue;s=!1,r=u|1&r}}return Kr(r)||s}function Kr(t){return 0==(1&t)}function Wr(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function Yr(t,e,n=!1){for(let r=0;r<e.length;r++)if(Zr(t,e[r],n))return!0;return!1}function Qr(t,e){return t?":not("+e.trim()+")":e}function $r(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const e=t[++n];i+="["+s+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||Kr(s)||(e+=Qr(o,i),i=""),r=s,o=o||!Kr(r);n++}return""!==i&&(e+=Qr(o,i)),e}const Jr={};function Xr(t){ti(jt(),qt(),ue()+t,Zt())}function ti(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&de(e,r,n)}else{const r=t.preOrderHooks;null!==r&&fe(e,r,0,n)}ce(n)}function ei(t,e){return t<<17|e<<2}function ni(t){return t>>17&32767}function ri(t){return 2|t}function ii(t){return(131068&t)>>2}function oi(t,e){return-131069&t|e<<2}function si(t){return 1|t}function ai(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const n=t.data[o];Xt(i),n.contentQueries(2,e[o],o)}}}function ui(t,e,n,r,i,o,s,a,u,c){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,Lt(l),l[3]=l[15]=t,l[8]=n,l[10]=s||t&&t[10],l[11]=a||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=o,l[16]=2==e.type?t[16]:l,l}function ci(t,e,n,r,i){let o=t.data[e];if(null===o)o=function(t,e,n,r,i){const o=Ht(),s=Gt(),a=t.data[e]=function(t,e,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==o&&(s?null==o.child&&null!==a.parent&&(o.child=a):null===o.next&&(o.next=a)),a}(t,e,n,r,i),Mt.lFrame.inI18n&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const t=function(){const t=Mt.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===t?-1:t.injectorIndex}return zt(o,!0),o}function li(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function hi(t,e,n){ne(e);try{const r=t.viewQuery;null!==r&&ji(1,r,n);const i=t.template;null!==i&&pi(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&ai(t,e),t.staticViewQueries&&ji(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)Li(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,ae()}}function di(t,e,n,r){const i=e[2];if(256==(256&i))return;ne(e);const o=Zt();try{Lt(e),Mt.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&pi(t,e,n,2,r);const s=3==(3&i);if(!o)if(s){const n=t.preOrderCheckHooks;null!==n&&de(e,n,null)}else{const n=t.preOrderHooks;null!==n&&fe(e,n,0,null),pe(e,0)}if(function(t){for(let e=_r(t);null!==e;e=wr(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&Ft(r,1),n[2]|=1024}}}(e),function(t){for(let e=_r(t);null!==e;e=wr(e))for(let t=ct;t<e.length;t++){const n=e[t],r=n[1];Rt(n)&&di(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&ai(t,e),!o)if(s){const n=t.contentCheckHooks;null!==n&&de(e,n)}else{const n=t.contentHooks;null!==n&&fe(e,n,1),pe(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let t=0;t<n.length;t++){const r=n[t];if(r<0)ce(~r);else{const i=r,o=n[++t],s=n[++t];Qt(o,i),s(2,e[i])}}}finally{ce(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)Ri(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&ji(2,u,r),!o)if(s){const n=t.viewCheckHooks;null!==n&&de(e,n)}else{const n=t.viewHooks;null!==n&&fe(e,n,2),pe(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Ft(e[3],-1))}finally{ae()}}function fi(t,e,n,r){const i=e[10],o=!Zt(),s=Ot(e);try{o&&!s&&i.begin&&i.begin(),s&&hi(t,e,r),di(t,e,n,r)}finally{o&&!s&&i.end&&i.end()}}function pi(t,e,n,r,i){const o=ue(),s=2&r;try{ce(-1),s&&e.length>ut&&ti(t,e,ut,Zt()),n(r,i)}finally{ce(o)}}function gi(t,e,n){Ut()&&(function(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||Ne(n,e),ur(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const r=t.data[a],o=gt(r);o&&xi(e,n,r);const u=Be(e,t,a,n);ur(u,e),null!==s&&Ni(0,a-i,u,r,0,s),o&&(Pt(n.index,e)[8]=u)}}(t,e,n,xt(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=Mt.lFrame.currentDirectiveIndex;try{ce(o);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];$t(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||Ei(r,i)}}finally{ce(-1),$t(s)}}(t,e,n))}function mi(t,e,n=xt){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function vi(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=yi(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function yi(t,e,n,r,i,o,s,a,u,c){const l=ut+r,h=l+i,d=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:Jr);return n}(l,h),f="function"==typeof c?c():c;return d[1]={type:t,blueprint:d,template:n,queries:null,viewQuery:a,declTNode:e,data:d.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:f,incompleteFirstPass:!1}}function _i(t,e,n,r){const i=Bi(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&Hi(t).push(r,i.length-1))}function wi(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function bi(t,e,n,r,i,o,s,a){const u=xt(e,n);let c,l=e.inputs;var h;!a&&null!=l&&(c=l[r])?(Gi(t,n,c,r,i),ft(e)&&function(t,e){const n=Pt(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=s?s(i,e.value||"",r):i,It(o)?o.setProperty(u,r,i):be(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}function Ti(t,e,n,r){let i=!1;if(Ut()){const o=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];Yr(n,s.selectors,!1)&&(i||(i=[]),De(Ne(n,e),t,s.type),gt(s)?(Ii(t,n),i.unshift(s)):i.push(s))}return i}(t,e,n),s=null===r?null:{"":-1};if(null!==o){i=!0,ki(n,t.data.length,o.length);for(let t=0;t<o.length;t++){const e=o[t];e.providersResolver&&e.providersResolver(e)}let r=!1,a=!1,u=li(t,e,o.length,null);for(let i=0;i<o.length;i++){const c=o[i];n.mergedAttrs=Te(n.mergedAttrs,c.hostAttrs),Ai(t,n,e,u,c),Si(u,c,s),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const l=c.type.prototype;!r&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),r=!0),a||!l.ngOnChanges&&!l.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),u++}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,o=[];let s=null,a=null;for(let u=e.directiveStart;u<n;u++){const t=r[u],n=t.inputs,c=null===i||zr(e)?null:Pi(n,i);o.push(c),s=wi(n,u,s),a=wi(t.outputs,u,a)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=s,e.outputs=a}(t,n)}s&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new m("301",`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,s)}return n.mergedAttrs=Te(n.mergedAttrs,n.attrs),i}function Ci(t,e,n,r,i,o){const s=o.hostBindings;if(s){let n=t.hostBindingOpCodes;null===n&&(n=t.hostBindingOpCodes=[]);const o=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(n)!=o&&n.push(o),n.push(r,i,s)}}function Ei(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Ii(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function Si(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;gt(e)&&(n[""]=t)}}function ki(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Ai(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=mt(i.type)),s=new ye(o,gt(i),null);t.blueprint[r]=s,n[r]=s,Ci(t,e,0,r,li(t,n,i.hostVars,Jr),i)}function xi(t,e,n){const r=xt(e,t),i=vi(n),o=t[10],s=Fi(t,ui(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n),null,null));t[e.index]=s}function Ni(t,e,n,r,i,o){const s=o[e];if(null!==s){const t=r.setInput;for(let e=0;e<s.length;){const i=s[e++],o=s[e++],a=s[e++];null!==t?r.setInput(n,a,i,o):n[o]=a}}}function Pi(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function Oi(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function Ri(t,e){const n=Pt(e,t);if(Rt(n)){const t=n[1];80&n[2]?di(t,n,t.template,n[8]):n[5]>0&&Di(n)}}function Di(t){for(let n=_r(t);null!==n;n=wr(n))for(let t=ct;t<n.length;t++){const e=n[t];if(1024&e[2]){const t=e[1];di(t,e,t.template,e[8])}else e[5]>0&&Di(e)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=Pt(e[n],t);Rt(r)&&r[5]>0&&Di(r)}}function Li(t,e){const n=Pt(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),hi(r,n,n[8])}function Fi(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Mi(t){for(;t;){t[2]|=64;const e=yr(t);if(0!=(512&t[2])&&!e)return t;t=e}return null}function Ui(t,e,n){const r=e[10];r.begin&&r.begin();try{di(t,e,t.template,n)}catch(i){throw zi(e,i),i}finally{r.end&&r.end()}}function qi(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=cr(n),i=r[1];fi(i,r,i.template,n)}}(t[8])}function ji(t,e,n){Xt(0),e(t,n)}const Vi=(()=>Promise.resolve(null))();function Bi(t){return t[7]||(t[7]=[])}function Hi(t){return t.cleanup||(t.cleanup=[])}function zi(t,e){const n=t[9],r=n?n.get(fr,null):null;r&&r.handleError(e)}function Gi(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],u=e[s],c=t.data[s];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function Zi(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const t=e[s];"number"==typeof t?o=t:1==o?i=h(i,t):2==o&&(r=h(r,t+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}const Ki=new $e("INJECTOR",-1);class Wi{get(t,e=un){if(e===un){const e=new Error(`NullInjectorError: No provider for ${l(t)}!`);throw e.name="NullInjectorError",e}return e}}const Yi=new $e("Set Injector scope."),Qi={},$i={};let Ji;function Xi(){return void 0===Ji&&(Ji=new Wi),Ji}function to(t,e=null,n=null,r){return new eo(t,n,e||Xi(),r)}class eo{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&en(e,n=>this.processProvider(n,t,e)),en([t],t=>this.processInjectorType(t,[],i)),this.records.set(Ki,io(void 0,this));const o=this.records.get(Yi);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof t?null:l(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=un,n=x.Default){this.assertNotDestroyed();const r=fn(this);try{if(!(n&x.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof $e)&&T(t);e=n&&this.injectableDefInScope(n)?io(no(t),Qi):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&x.Self?Xi():this.parent).get(t,e=n&x.Optional&&e===un?null:e)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(l(t)),r)throw o;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e[ln]&&i.unshift(e[ln]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=l(e);if(Array.isArray(e))i=e.map(l).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):l(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(cn,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(o,t,"R3InjectorError",this.source)}throw o}finally{fn(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(l(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=p(t)))return!1;let r=E(t);const i=null==r&&t.ngModule||void 0,o=void 0===i?t:i,s=-1!==n.indexOf(o);if(void 0!==i&&(r=E(i)),null==r)return!1;if(null!=r.imports&&!s){let t;n.push(o);try{en(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];en(r,t=>this.processProvider(t,n,r||B))}}this.injectorDefTypes.add(o);const a=mt(o)||(()=>new o);this.records.set(o,io(a,Qi));const u=r.providers;if(null!=u&&!s){const e=t;en(u,t=>this.processProvider(t,e,u))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=so(t=p(t))?t:p(t&&t.provide);const i=function(t,e,n){return oo(t)?io(void 0,t.useValue):io(ro(t),Qi)}(t);if(so(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=io(void 0,Qi,!0),e.factory=()=>mn(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===Qi&&(e.value=$i,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){if(!t.providedIn)return!1;const e=p(t.providedIn);return"string"==typeof e?"any"===e||e===this.scope:this.injectorDefTypes.has(e)}}function no(t){const e=T(t),n=null!==e?e.factory:mt(t);if(null!==n)return n;if(t instanceof $e)throw new Error(`Token ${l(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=function(t,e){const n=[];for(let r=0;r<t;r++)n.push("?");return n}(e);throw new Error(`Can't resolve all parameters for ${l(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[I]||t[k]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function ro(t,e,n){let r;if(so(t)){const e=p(t);return mt(e)||no(e)}if(oo(t))r=()=>p(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...mn(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>gn(p(t.useExisting));else{const e=p(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return mt(e)||no(e);r=()=>new e(...mn(t.deps))}var i;return r}function io(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function oo(t){return null!==t&&"object"==typeof t&&hn in t}function so(t){return"function"==typeof t}const ao=function(t,e,n){return function(t,e=null,n=null,r){const i=to(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let uo=(()=>{class t{static create(t,e){return Array.isArray(t)?ao(t,e,""):ao(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=un,t.NULL=new Wi,t.\u0275prov=w({token:t,providedIn:"any",factory:()=>gn(Ki)}),t.__NG_ELEMENT_ID__=-1,t})();function co(t,e){he(cr(t)[1],Bt())}function lo(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const r=[t];for(;e;){let i;if(gt(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);const e=t;e.inputs=ho(t.inputs),e.declaredInputs=ho(t.declaredInputs),e.outputs=ho(t.outputs);const n=i.hostBindings;n&&go(t,n);const o=i.viewQuery,s=i.contentQueries;if(o&&fo(t,o),s&&po(t,s),c(t.inputs,i.inputs),c(t.declaredInputs,i.declaredInputs),c(t.outputs,i.outputs),gt(i)&&i.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(i.data.animation)}}const e=i.features;if(e)for(let r=0;r<e.length;r++){const i=e[r];i&&i.ngInherit&&i(t),i===lo&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Te(i.hostAttrs,n=Te(n,i.hostAttrs))}}(r)}function ho(t){return t===V?{}:t===B?[]:t}function fo(t,e){const n=t.viewQuery;t.viewQuery=n?(t,r)=>{e(t,r),n(t,r)}:e}function po(t,e){const n=t.contentQueries;t.contentQueries=n?(t,r,i)=>{e(t,r,i),n(t,r,i)}:e}function go(t,e){const n=t.hostBindings;t.hostBindings=n?(t,r)=>{e(t,r),n(t,r)}:e}let mo=null;function vo(){if(!mo){const t=j.Symbol;if(t&&t.iterator)mo=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(mo=n)}}}return mo}function yo(t){return!!_o(t)&&(Array.isArray(t)||!(t instanceof Map)&&vo()in t)}function _o(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function wo(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function bo(t,e,n,r){const i=qt();return wo(i,Wt(),e)&&(jt(),function(t,e,n,r,i,o){const s=xt(t,e);!function(t,e,n,r,i,o,s){if(null==o)It(t)?t.removeAttribute(e,i,n):e.removeAttribute(i);else{const a=null==s?v(o):s(o,r||"",i);It(t)?t.setAttribute(e,i,a,n):n?e.setAttributeNS(n,i,a):e.setAttribute(i,a)}}(e[11],s,o,t.value,n,r,i)}(le(),i,t,e,n,r)),bo}function To(t,e,n,r,i,o,s,a){const u=qt(),c=jt(),l=t+ut,h=c.firstCreatePass?function(t,e,n,r,i,o,s,a,u){const c=e.consts,l=ci(e,t,4,s||null,Dt(c,a));Ti(e,n,l,Dt(c,u)),he(e,l);const h=l.tViews=yi(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(l,c,u,e,n,r,i,o,s):c.data[l];zt(h,!1);const d=u[11].createComment("");Or(c,u,d,h),ur(d,u),Fi(u,u[l]=Oi(d,u,d,h)),pt(h)&&gi(c,u,h),null!=s&&mi(u,h,a)}function Co(t,e=x.Default){const n=qt();return null===n?gn(t,e):Me(Bt(),n,p(t),e)}function Eo(t,e,n){const r=qt();return wo(r,Wt(),e)&&bi(jt(),le(),r,t,e,r[11],n,!1),Eo}function Io(t,e,n,r,i){const o=i?"class":"style";Gi(t,n,e.inputs[o],o,r)}function So(t,e,n,r){const i=qt(),o=jt(),s=ut+t,a=i[11],u=i[s]=Cr(a,e,Mt.lFrame.currentNamespace),c=o.firstCreatePass?function(t,e,n,r,i,o,s){const a=e.consts,u=ci(e,t,2,i,Dt(a,o));return Ti(e,n,u,Dt(a,s)),null!==u.attrs&&Zi(u,u.attrs,!1),null!==u.mergedAttrs&&Zi(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(s,o,i,0,e,n,r):o.data[s];zt(c,!0);const l=c.mergedAttrs;null!==l&&_e(a,u,l);const h=c.classes;null!==h&&jr(a,u,h);const d=c.styles;null!==d&&qr(a,u,d),64!=(64&c.flags)&&Or(o,i,u,c),0===Mt.lFrame.elementDepthCount&&ur(u,i),Mt.lFrame.elementDepthCount++,pt(c)&&(gi(o,i,c),function(t,e,n){if(dt(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}(o,c,i)),null!==r&&mi(i,c)}function ko(){let t=Bt();Gt()?Mt.lFrame.isParent=!1:(t=t.parent,zt(t,!1));const e=t;Mt.lFrame.elementDepthCount--;const n=jt();n.firstCreatePass&&(he(n,t),dt(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&Io(n,e,qt(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&Io(n,e,qt(),e.stylesWithoutHost,!1)}function Ao(t,e,n,r){So(t,e,n,r),ko()}function xo(){return qt()}function No(t){return!!t&&"function"==typeof t.then}function Po(t){return!!t&&"function"==typeof t.subscribe}const Oo=Po;function Ro(t,e,n,r){const i=qt(),o=jt(),s=Bt();return function(t,e,n,r,i,o,s,a){const u=pt(r),c=t.firstCreatePass&&Hi(t),l=Bi(e);let h=!0;if(3&r.type){const d=xt(r,e),f=a?a(d):d,p=l.length,g=a?t=>a(kt(t[r.index])):r.index;if(It(n)){let s=null;if(!a&&u&&(s=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const t=i[o];if(t===n&&i[o+1]===r){const t=e[7],n=i[o+2];return t.length>n?t[n]:null}"string"==typeof t&&(o+=2)}return null}(t,e,i,r.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=o,s.__ngLastListenerFn__=o,h=!1;else{o=Lo(r,e,0,o,!1);const t=n.listen(f,i,o);l.push(o,t),c&&c.push(i,g,p,p+1)}}else o=Lo(r,e,0,o,!0),f.addEventListener(i,o,s),l.push(o),c&&c.push(i,g,p,s)}else o=Lo(r,e,0,o,!1);const d=r.outputs;let f;if(h&&null!==d&&(f=d[i])){const t=f.length;if(t)for(let n=0;n<t;n+=2){const t=e[f[n]][f[n+1]].subscribe(o),s=l.length;l.push(o,t),c&&c.push(i,r.index,s,-(s+1))}}}(o,i,i[11],s,t,e,!!n,r),Ro}function Do(t,e,n,r){try{return!1!==n(r)}catch(i){return zi(t,i),!1}}function Lo(t,e,n,r,i){return function n(o){if(o===Function)return r;const s=2&t.flags?Pt(t.index,e):e;0==(32&e[2])&&Mi(s);let a=Do(e,0,r,o),u=n.__ngNextListenerFn__;for(;u;)a=Do(e,0,u,o)&&a,u=u.__ngNextListenerFn__;return i&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function Fo(t=1){return function(t){return(Mt.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,Mt.lFrame.contextLView))[8]}(t)}function Mo(t,e,n,r,i){const o=t[n+1],s=null===e;let a=r?ni(o):ii(o),u=!1;for(;0!==a&&(!1===u||s);){const n=t[a+1];Uo(t[a],e)&&(u=!0,t[a+1]=r?si(n):ri(n)),a=r?ni(n):ii(n)}u&&(t[n+1]=r?ri(o):si(o))}function Uo(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&an(t,e)>=0}const qo={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function jo(t){return t.substring(qo.key,qo.keyEnd)}function Vo(t,e){const n=qo.textEnd;return n===e?-1:(e=qo.keyEnd=function(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}(t,qo.key=e,n),Bo(t,e,n))}function Bo(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function Ho(t,e){return function(t,e,n,r){const i=qt(),o=jt(),s=Yt(2);o.firstUpdatePass&&Ko(o,t,s,true),e!==Jr&&wo(i,s,e)&&Qo(o,o.data[ue()],i,i[11],t,i[s+1]=function(t,e){return null==t||"object"==typeof t&&(t=l(xn(t))),t}(e),true,s)}(t,e),Ho}function zo(t){!function(t,e,n,r){const i=jt(),o=Yt(2);i.firstUpdatePass&&Ko(i,null,o,r);const s=qt();if(n!==Jr&&wo(s,o,n)){const a=i.data[ue()];if(Xo(a,r)&&!Zo(i,o)){let t=a.classesWithoutHost;null!==t&&(n=h(t,n||"")),Io(i,a,s,n,r)}else!function(t,e,n,r,i,o,s,a){i===Jr&&(i=B);let u=0,c=0,l=0<i.length?i[0]:null,h=0<o.length?o[0]:null;for(;null!==l||null!==h;){const s=u<i.length?i[u+1]:void 0,d=c<o.length?o[c+1]:void 0;let f,p=null;l===h?(u+=2,c+=2,s!==d&&(p=h,f=d)):null===h||null!==l&&l<h?(u+=2,p=l):(c+=2,p=h,f=d),null!==p&&Qo(t,e,n,r,p,f,true,a),l=u<i.length?i[u]:null,h=c<o.length?o[c]:null}}(i,a,s,s[11],s[o+1],s[o+1]=function(t,e,n){if(null==n||""===n)return B;const r=[],i=xn(n);if(Array.isArray(i))for(let o=0;o<i.length;o++)t(r,i[o],!0);else if("object"==typeof i)for(const o in i)i.hasOwnProperty(o)&&t(r,o,i[o]);else"string"==typeof i&&e(r,i);return r}(t,e,n),0,o)}}(on,Go,t,!0)}function Go(t,e){for(let n=function(t){return function(t){qo.key=0,qo.keyEnd=0,qo.value=0,qo.valueEnd=0,qo.textEnd=t.length}(t),Vo(t,Bo(t,0,qo.textEnd))}(e);n>=0;n=Vo(e,n))on(t,jo(e),!0)}function Zo(t,e){return e>=t.expandoStartIndex}function Ko(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[ue()],s=Zo(t,n);Xo(o,r)&&null===e&&!s&&(e=!1),e=function(t,e,n,r){const i=function(t){const e=Mt.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=Yo(n=Wo(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=Wo(i,t,e,n,r),null===o){let n=function(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==ii(r))return t[ni(r)]}(t,e,r);void 0!==n&&Array.isArray(n)&&(n=Wo(null,t,e,n[1],r),n=Yo(n,e.attrs,r),function(t,e,n,r){t[ni(n?e.classBindings:e.styleBindings)]=r}(t,e,r,n))}else o=function(t,e,n){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=Yo(r,t[o].hostAttrs,n);return Yo(r,e.attrs,n)}(t,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),n}(i,o,e,r),function(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=ni(s),u=ii(s);t[r]=n;let c,l=!1;if(Array.isArray(n)){const t=n;c=t[1],(null===c||an(t,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){const e=ni(t[a+1]);t[r+1]=ei(e,a),0!==e&&(t[e+1]=oi(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=ei(a,0),0!==a&&(t[a+1]=oi(t[a+1],r)),a=r;else t[r+1]=ei(u,0),0===a?a=r:t[u+1]=oi(t[u+1],r),u=r;l&&(t[r+1]=ri(t[r+1])),Mo(t,c,r,!0),Mo(t,c,r,!1),function(t,e,n,r,i){const o=i?t.residualClasses:t.residualStyles;null!=o&&"string"==typeof e&&an(o,e)>=0&&(n[r+1]=si(n[r+1]))}(e,c,t,r,o),s=ei(a,u),o?e.classBindings=s:e.styleBindings=s}(i,o,e,n,s,r)}}function Wo(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=Yo(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function Yo(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),on(t,s,!!n||e[++o]))}return void 0===t?null:t}function Qo(t,e,n,r,i,o,s,a){if(!(3&e.type))return;const u=t.data,c=u[a+1];Jo(1==(1&c)?$o(u,e,n,i,ii(c),s):void 0)||(Jo(o)||2==(2&c)&&(o=$o(u,null,n,i,a,s)),function(t,e,n,r,i){const o=It(t);if(e)i?o?t.addClass(n,r):n.classList.add(r):o?t.removeClass(n,r):n.classList.remove(r);else{let e=-1===r.indexOf("-")?void 0:mr.DashCase;if(null==i)o?t.removeStyle(n,r,e):n.style.removeProperty(r);else{const s="string"==typeof i&&i.endsWith("!important");s&&(i=i.slice(0,-10),e|=mr.Important),o?t.setStyle(n,r,i,e):n.style.setProperty(r,i,s?"important":"")}}}(r,s,At(ue(),n),i,o))}function $o(t,e,n,r,i,o){const s=null===e;let a;for(;i>0;){const e=t[i],o=Array.isArray(e),u=o?e[1]:e,c=null===u;let l=n[i+1];l===Jr&&(l=c?B:void 0);let h=c?sn(l,r):u===r?l:void 0;if(o&&!Jo(h)&&(h=sn(e,r)),Jo(h)&&(a=h,s))return a;const d=t[i+1];i=s?ni(d):ii(d)}if(null!==e){let t=o?e.residualClasses:e.residualStyles;null!=t&&(a=sn(t,r))}return a}function Jo(t){return void 0!==t}function Xo(t,e){return 0!=(t.flags&(e?16:32))}function ts(t,e=""){const n=qt(),r=jt(),i=t+ut,o=r.firstCreatePass?ci(r,i,1,e,null):r.data[i],s=n[i]=function(t,e){return It(t)?t.createText(e):t.createTextNode(e)}(n[11],e);Or(r,n,s,o),zt(o,!1)}function es(t){return ns("",t,""),es}function ns(t,e,n){const r=qt(),i=function(t,e,n,r){return wo(t,Wt(),n)?e+v(n)+r:Jr}(r,t,e,n);return i!==Jr&&function(t,e,n){const r=At(e,t);!function(t,e,n){It(t)?t.setValue(e,n):e.textContent=n}(t[11],r,n)}(r,ue(),i),ns}function rs(t,e,n){const r=qt();return wo(r,Wt(),e)&&bi(jt(),le(),r,t,e,r[11],n,!0),rs}const is=void 0;var os=["en",[["a","p"],["AM","PM"],is],[["AM","PM"],is,is],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],is,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],is,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",is,"{1} 'at' {0}",is],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let ss={};function as(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=cs(e);if(n)return n;const r=e.split("-")[0];if(n=cs(r),n)return n;if("en"===r)return os;throw new Error(`Missing locale data for the locale "${t}".`)}function us(t){return as(t)[ls.PluralCase]}function cs(t){return t in ss||(ss[t]=j.ng&&j.ng.common&&j.ng.common.locales&&j.ng.common.locales[t]),ss[t]}var ls=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});const hs="en-US";let ds=hs;function fs(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t} [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(ds=t.toLowerCase().replace(/_/g,"-"))}function ps(t,e,n,r,i){if(t=p(t),Array.isArray(t))for(let o=0;o<t.length;o++)ps(t[o],e,n,r,i);else{const o=jt(),s=qt();let a=so(t)?t:p(t.provide),u=ro(t);const c=Bt(),l=1048575&c.providerIndexes,h=c.directiveStart,d=c.providerIndexes>>20;if(so(t)||!t.multi){const r=new ye(u,i,Co),f=vs(a,e,i?l:l+d,h);-1===f?(De(Ne(c,s),o,a),gs(o,t,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(r),s.push(r)):(n[f]=r,s[f]=r)}else{const f=vs(a,e,l+d,h),p=vs(a,e,l,l+d),g=f>=0&&n[f],m=p>=0&&n[p];if(i&&!m||!i&&!g){De(Ne(c,s),o,a);const l=function(t,e,n,r,i){const o=new ye(t,n,Co);return o.multi=[],o.index=e,o.componentProviders=0,ms(o,i,r&&!n),o}(i?_s:ys,n.length,i,r,u);!i&&m&&(n[p].providerFactory=l),gs(o,t,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(l),s.push(l)}else gs(o,t,f>-1?f:p,ms(n[i?p:f],u,!i&&r));!i&&r&&m&&n[p].componentProviders++}}}function gs(t,e,n,r){const i=so(e);if(i||e.useClass){const o=(e.useClass||e).prototype.ngOnDestroy;if(o){const s=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const t=s.indexOf(n);-1===t?s.push(n,[r,o]):s[t+1].push(r,o)}else s.push(n,o)}}}function ms(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function vs(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function ys(t,e,n,r){return ws(this.multi,[])}function _s(t,e,n,r){const i=this.multi;let o;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=Be(n,n[1],this.providerFactory.index,r);o=e.slice(0,t),ws(i,o);for(let n=t;n<e.length;n++)o.push(e[n])}else o=[],ws(i,o);return o}function ws(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function bs(t,e=[]){return n=>{n.providersResolver=(n,r)=>function(t,e,n){const r=jt();if(r.firstCreatePass){const i=gt(t);ps(n,r.data,r.blueprint,i,!0),ps(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}class Ts{}class Cs{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${l(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let Es=(()=>{class t{}return t.NULL=new Cs,t})();function Is(...t){}function Ss(t,e){return new As(xt(t,e))}const ks=function(){return Ss(Bt(),qt())};let As=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=ks,t})();function xs(t){return t instanceof As?t.nativeElement:t}class Ns{}let Ps=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Os(),t})();const Os=function(){const t=qt(),e=Pt(Bt().index,t);return function(t){return t[11]}(lt(e)?e:t)};let Rs=(()=>{class t{}return t.\u0275prov=w({token:t,providedIn:"root",factory:()=>null}),t})();class Ds{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const Ls=new Ds("12.0.0");class Fs{constructor(){}supports(t){return yo(t)}create(t){return new Us(t)}}const Ms=(t,e)=>e;class Us{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Ms}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const o=!n||e&&e.currentIndex<Bs(n,r,i)?e:n,s=Bs(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);const t=s-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;e<=o&&o<t&&(i[n]=r+1)}i[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!yo(t))throw new Error(`Error trying to diff '${l(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),o=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[vo()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),o=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):t=this._addAfter(new qs(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new Vs),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Vs),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class qs{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class js{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class Vs{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new js,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Bs(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class Hs{constructor(){}supports(t){return t instanceof Map||_o(t)}create(){return new zs}}class zs{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||_o(t)))throw new Error(`Error trying to diff '${l(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new Gs(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class Gs{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Zs(){return new Ks([new Fs])}let Ks=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||Zs()),deps:[[t,new wn,new _n]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=w({token:t,providedIn:"root",factory:Zs}),t})();function Ws(){return new Ys([new Hs])}let Ys=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||Ws()),deps:[[t,new wn,new _n]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=w({token:t,providedIn:"root",factory:Ws}),t})();function Qs(t,e,n,r,i=!1){for(;null!==n;){const o=e[n.index];if(null!==o&&r.push(kt(o)),ht(o))for(let t=ct;t<o.length;t++){const e=o[t],n=e[1].firstChild;null!==n&&Qs(e[1],e,n,r)}const s=n.type;if(8&s)Qs(t,e,n.child,r);else if(32&s){const t=vr(n,e);let i;for(;i=t();)r.push(i)}else if(16&s){const t=Dr(e,n);if(Array.isArray(t))r.push(...t);else{const n=yr(e[16]);Qs(n[1],n,t,r,!0)}}n=i?n.projectionNext:n.next}return r}class $s{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return Qs(e,t,e.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(ht(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(Ir(t,n),rn(e,n))}this._attachedToViewContainer=!1}Sr(this._lView[1],this._lView)}onDestroy(t){_i(this._lView[1],this._lView,null,t)}markForCheck(){Mi(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Ui(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){Kt(!0);try{Ui(t,e,n)}finally{Kt(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var t;this._appRef=null,Mr(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class Js extends $s{constructor(t){super(t),this._view=t}detectChanges(){qi(this._view)}checkNoChanges(){!function(t){Kt(!0);try{qi(t)}finally{Kt(!1)}}(this._view)}get context(){return null}}const Xs=function(t){return function(t,e,n){if(ft(t)&&!n){const n=Pt(t.index,e);return new $s(n,n)}return 47&t.type?new $s(e[16],e):null}(Bt(),qt(),16==(16&t))};let ta=(()=>{class t{}return t.__NG_ELEMENT_ID__=Xs,t})();const ea=[new Hs],na=new Ks([new Fs]),ra=new Ys(ea),ia=function(){return ua(Bt(),qt())};let oa=(()=>{class t{}return t.__NG_ELEMENT_ID__=ia,t})();const sa=oa,aa=class extends sa{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=ui(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),hi(e,n,t),new $s(n)}};function ua(t,e){return 4&t.type?new aa(e,t,Ss(t,e)):null}class ca{}class la{}const ha=function(){return va(Bt(),qt())};let da=(()=>{class t{}return t.__NG_ELEMENT_ID__=ha,t})();const fa=da,pa=class extends fa{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return Ss(this._hostTNode,this._hostLView)}get injector(){return new Ge(this._hostTNode,this._hostLView)}get parentInjector(){const t=Re(this._hostTNode,this._hostLView);if(Ee(t)){const e=Se(t,this._hostLView),n=Ie(t);return new Ge(e[1].data[n+8],e)}return new Ge(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=ga(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-ct}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){const t=o.get(ca,null);t&&(i=t)}const s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}insert(t,e){const n=t._lView,r=n[1];if(ht(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new pa(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e),o=this._lContainer;!function(t,e,n,r){const i=ct+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-ct?(e[4]=n[i],nn(n,ct+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,o,i);const s=Lr(i,o),a=n[11],u=Pr(a,o[7]);return null!==u&&function(t,e,n,r,i,o){r[0]=i,r[6]=e,Mr(t,r,n,1,i,o)}(r,o[6],a,n,u,s),t.attachToViewContainerRef(),nn(ma(o),i,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=ga(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=Ir(this._lContainer,e);n&&(rn(ma(this._lContainer),e),Sr(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=Ir(this._lContainer,e);return n&&null!=rn(ma(this._lContainer),e)?new $s(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function ga(t){return t[8]}function ma(t){return t[8]||(t[8]=[])}function va(t,e){let n;const r=e[t.index];if(ht(r))n=r;else{let i;if(8&t.type)i=kt(r);else{const n=e[11];i=n.createComment("");const r=xt(t,e);Ar(n,Pr(n,r),i,function(t,e){return It(t)?t.nextSibling(e):e.nextSibling}(n,r),!1)}e[t.index]=n=Oi(r,e,i,t),Fi(e,n)}return new pa(n,t,e)}const ya={};class _a extends Es{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=st(t);return new Ta(e,this.ngModule)}}function wa(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const ba=new $e("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>pr});class Ta extends Ts{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map($r).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return wa(this.componentDef.inputs)}get outputs(){return wa(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const o=t.get(n,ya,i);return o!==ya||r===ya?o:e.get(n,r,i)}}}(t,r.injector):t,o=i.get(Ns,St),s=i.get(Rs,null),a=o.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(It(t))return t.selectRootElement(e,n===L.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):Cr(o.createRenderer(null,this.componentDef),u,function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:pr,clean:Vi,playerHandler:null,flags:0},d=yi(0,null,null,1,0,null,null,null,null,null),f=ui(null,d,h,l,null,null,o,a,s,i);let p,g;ne(f);try{const t=function(t,e,n,r,i,o){const s=n[1];n[20]=t;const a=ci(s,20,2,"#host",null),u=a.mergedAttrs=e.hostAttrs;null!==u&&(Zi(a,u,!0),null!==t&&(_e(i,t,u),null!==a.classes&&jr(i,t,a.classes),null!==a.styles&&qr(i,t,a.styles)));const c=r.createRenderer(t,e),l=ui(n,vi(e),null,e.onPush?64:16,n[20],a,r,c,null,null);return s.firstCreatePass&&(De(Ne(a,n),s,e.type),Ii(s,a),ki(a,n.length,1)),Fi(n,l),n[20]=l}(c,this.componentDef,f,o,a);if(c)if(n)_e(a,c,["ng-version",Ls.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!Kr(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&_e(a,c,t),e&&e.length>0&&jr(a,c,e.join(" "))}if(g=Nt(d,ut),void 0!==e){const t=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}p=function(t,e,n,r,i){const o=n[1],s=function(t,e,n){const r=Bt();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Ai(t,r,e,li(t,e,1,null),n));const i=Be(e,t,r.directiveStart,r);ur(i,e);const o=xt(r,e);return o&&ur(o,e),i}(o,n,e);if(r.components.push(s),t[8]=s,i&&i.forEach(t=>t(s,e)),e.contentQueries){const t=Bt();e.contentQueries(1,s,t.directiveStart)}const a=Bt();return!o.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(ce(a.index),Ci(n[1],a,0,a.directiveStart,a.directiveEnd,e),Ei(e,s)),s}(t,this.componentDef,f,h,[co]),hi(d,f,null)}finally{ae()}return new Ca(this.componentType,p,Ss(g,f),f,g)}}class Ca extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=e,this.hostView=this.changeDetectorRef=new Js(r),this.componentType=t}get injector(){return new Ge(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const Ea=new Map;class Ia extends ca{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new _a(this);const n=at(t),r=t[K]||null;r&&fs(r),this._bootstrapComponents=gr(n.bootstrap),this._r3Injector=to(t,e,[{provide:ca,useValue:this},{provide:Es,useValue:this.componentFactoryResolver}],l(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=uo.THROW_IF_NOT_FOUND,n=x.Default){return t===uo||t===ca||t===Ki?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Sa extends la{constructor(t){super(),this.moduleType=t,null!==at(t)&&function(t){const e=new Set;!function t(n){const r=at(n,!0),i=r.id;null!==i&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${l(e)} vs ${l(e.name)}`)}(i,Ea.get(i),n),Ea.set(i,n));const o=gr(r.imports);for(const s of o)e.has(s)||(e.add(s),t(s))}(t)}(t)}create(t){return new Ia(this.moduleType,t)}}function ka(t){return e=>{setTimeout(t,void 0,e)}}const Aa=class extends r.xQ{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){var r,o,s;let a=t,u=e||(()=>null),c=n;if(t&&"object"==typeof t){const e=t;a=null===(r=e.next)||void 0===r?void 0:r.bind(e),u=null===(o=e.error)||void 0===o?void 0:o.bind(e),c=null===(s=e.complete)||void 0===s?void 0:s.bind(e)}this.__isAsync&&(u=ka(u),a&&(a=ka(a)),c&&(c=ka(c)));const l=super.subscribe({next:a,error:u,complete:c});return t instanceof i.w&&t.add(l),l}};function xa(){return this._results[vo()]()}class Na{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=vo(),n=Na.prototype;n[e]||(n[e]=xa)}get changes(){return this._changes||(this._changes=new Aa)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const n=this;n.dirty=!1;const r=tn(t);(this._changesDetected=!function(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}(n._results,r,e))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class Pa{constructor(t){this.queryList=t,this.matches=null}clone(){return new Pa(this.queryList)}setDirty(){this.queryList.setDirty()}}class Oa{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new Oa(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==Ha(t,e).matches&&this.queries[e].setDirty()}}class Ra{constructor(t,e,n=null){this.predicate=t,this.flags=e,this.read=n}}class Da{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new Da(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class La{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new La(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(t,e,Fa(e,i)),this.matchTNodeWithReadOption(t,e,Ve(e,t,i,!1,!1))}else n===oa?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,Ve(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===As||r===da||r===oa&&4&e.type)this.addMatch(e.index,-2);else{const n=Ve(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function Fa(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function Ma(t,e,n,r){return-1===n?function(t,e){return 11&t.type?Ss(t,e):4&t.type?ua(t,e):null}(e,t):-2===n?function(t,e,n){return n===As?Ss(e,t):n===oa?ua(e,t):n===da?va(e,t):void 0}(t,e,r):Be(t,t[1],n,e)}function Ua(t,e,n,r){const i=e[19].queries[r];if(null===i.matches){const r=t.data,o=n.matches,s=[];for(let t=0;t<o.length;t+=2){const i=o[t];s.push(i<0?null:Ma(e,r[i],o[t+1],n.metadata.read))}i.matches=s}return i.matches}function qa(t,e,n,r){const i=t.queries.getByIndex(n),o=i.matches;if(null!==o){const s=Ua(t,e,i,n);for(let t=0;t<o.length;t+=2){const n=o[t];if(n>0)r.push(s[t/2]);else{const i=o[t+1],s=e[-n];for(let t=ct;t<s.length;t++){const e=s[t];e[17]===e[3]&&qa(e[1],e,i,r)}if(null!==s[9]){const t=s[9];for(let e=0;e<t.length;e++){const n=t[e];qa(n[1],n,i,r)}}}}}return r}function ja(t){const e=qt(),n=jt(),r=Jt();Xt(r+1);const i=Ha(n,r);if(t.dirty&&Ot(e)===(2==(2&i.metadata.flags))){if(null===i.matches)t.reset([]);else{const o=i.crossesNgTemplate?qa(n,e,r,[]):Ua(n,e,i,r);t.reset(o,xs),t.notifyOnChanges()}return!0}return!1}function Va(t,e,n,r){const i=jt();if(i.firstCreatePass){const o=Bt();(function(t,e,n){null===t.queries&&(t.queries=new Da),t.queries.track(new La(e,n))})(i,new Ra(e,n,r),o.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(i,t),2==(2&n)&&(i.staticContentQueries=!0)}!function(t,e,n){const r=new Na(4==(4&n));_i(t,e,r,r.destroy),null===e[19]&&(e[19]=new Oa),e[19].queries.push(new Pa(r))}(i,qt(),n)}function Ba(){return t=qt(),e=Jt(),t[19].queries[e].queryList;var t,e}function Ha(t,e){return t.queries.getByIndex(e)}const za=new $e("Application Initializer");let Ga=(()=>{class t{constructor(t){this.appInits=t,this.resolve=Is,this.reject=Is,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();if(No(e))t.push(e);else if(Oo(e)){const n=new Promise((t,n)=>{e.subscribe({complete:t,error:n})});t.push(n)}}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(gn(za,8))},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();const Za=new $e("AppId"),Ka={provide:Za,useFactory:function(){return`${Wa()}${Wa()}${Wa()}`},deps:[]};function Wa(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Ya=new $e("Platform Initializer"),Qa=new $e("Platform ID"),$a=new $e("appBootstrapListener");let Ja=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();const Xa=new $e("LocaleId"),tu=new $e("DefaultCurrencyCode");class eu{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const nu=function(t){return new Sa(t)},ru=nu,iu=function(t){return Promise.resolve(nu(t))},ou=function(t){const e=nu(t),n=gr(at(t).declarations).reduce((t,e)=>{const n=st(e);return n&&t.push(new Ta(n)),t},[]);return new eu(e,n)},su=ou,au=function(t){return Promise.resolve(ou(t))};let uu=(()=>{class t{constructor(){this.compileModuleSync=ru,this.compileModuleAsync=iu,this.compileModuleAndAllComponentsSync=su,this.compileModuleAndAllComponentsAsync=au}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();const cu=(()=>Promise.resolve(0))();function lu(t){"undefined"==typeof Zone?cu.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class hu{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Aa(!1),this.onMicrotaskEmpty=new Aa(!1),this.onStable=new Aa(!1),this.onError=new Aa(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&e,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let t=j.requestAnimationFrame,e=j.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=()=>{!function(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(j,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,pu(t),t.isCheckStableRunning=!0,fu(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),pu(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{try{return gu(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||t.shouldCoalesceRunChangeDetection)&&e(),mu(t)}},onInvoke:(n,r,i,o,s,a,u)=>{try{return gu(t),n.invoke(i,o,s,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),mu(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,pu(t),fu(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!hu.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(hu.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,du,Is,Is);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const du={};function fu(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function pu(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function gu(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function mu(t){t._nesting--,fu(t)}class vu{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Aa,this.onMicrotaskEmpty=new Aa,this.onStable=new Aa,this.onError=new Aa}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let yu=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{hu.assertNotInAngularZone(),lu(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())lu(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(gn(hu))},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})(),_u=(()=>{class t{constructor(){this._applications=new Map,Cu.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return Cu.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();class wu{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}function bu(t){Cu=t}let Tu,Cu=new wu,Eu=!0,Iu=!1;function Su(){return Iu=!0,Eu}function ku(){if(Iu)throw new Error("Cannot enable prod mode after platform setup.");Eu=!1}const Au=new $e("AllowMultipleToken");class xu{constructor(t,e){this.name=t,this.token=e}}function Nu(t,e,n=[]){const r=`Platform: ${e}`,i=new $e(r);return(e=[])=>{let o=Pu();if(!o||o.injector.get(Au,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:Yi,useValue:"platform"});!function(t){if(Tu&&!Tu.destroyed&&!Tu.injector.get(Au,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Tu=t.get(Ou);const e=t.get(Ya,null);e&&e.forEach(t=>t())}(uo.create({providers:t,name:r}))}return function(t){const e=Pu();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function Pu(){return Tu&&!Tu.destroyed?Tu:null}let Ou=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new vu:("zone.js"===t?void 0:t)||new hu({enableLongStackTrace:Su(),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(e?e.ngZone:void 0,{ngZoneEventCoalescing:e&&e.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:e&&e.ngZoneRunCoalescing||!1}),r=[{provide:hu,useValue:n}];return n.run(()=>{const e=uo.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),o=i.injector.get(fr,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const t=n.onError.subscribe({next:t=>{o.handleError(t)}});i.onDestroy(()=>{Lu(this._modules,i),t.unsubscribe()})}),function(t,e,n){try{const r=n();return No(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,n,()=>{const t=i.injector.get(Ga);return t.runInitializers(),t.donePromise.then(()=>(fs(i.injector.get(Xa,hs)||hs),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=Ru({},e);return function(t,e,n){const r=new Sa(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(Du);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${l(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(gn(uo))},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();function Ru(t,e){return Array.isArray(e)?e.reduce(Ru,t):Object.assign(Object.assign({},t),e)}let Du=(()=>{class t{constructor(t,e,n,r,i){this._zone=t,this._injector=e,this._exceptionHandler=n,this._componentFactoryResolver=r,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const u=new o.y(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),c=new o.y(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{hu.assertNotInAngularZone(),lu(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{hu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=(0,s.T)(u,c.pipe((0,a.B)()))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof Ts?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(ca),i=n.create(uo.NULL,[],e||n.selector,r),o=i.location.nativeElement,s=i.injector.get(yu,null),a=s&&i.injector.get(_u);return s&&a&&a.registerApplication(o,s),i.onDestroy(()=>{this.detachView(i.hostView),Lu(this.components,i),a&&a.unregisterApplication(o)}),this._loadComponent(i),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;Lu(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get($a,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(gn(hu),gn(uo),gn(fr),gn(Es),gn(Ga))},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();function Lu(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Fu{}class Mu{}const Uu={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let qu=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||Uu}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n(8255)(e).then(t=>t[r]).then(t=>ju(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n(8255)(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>ju(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(gn(uu),gn(Mu,8))},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();function ju(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const Vu=function(t){return null},Bu=Nu(null,"core",[{provide:Qa,useValue:"unknown"},{provide:Ou,deps:[uo]},{provide:_u,deps:[]},{provide:Ja,deps:[]}]),Hu=[{provide:Du,useClass:Du,deps:[hu,uo,fr,Es,Ga]},{provide:ba,deps:[hu],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:Ga,useClass:Ga,deps:[[new _n,za]]},{provide:uu,useClass:uu,deps:[]},Ka,{provide:Ks,useFactory:function(){return na},deps:[]},{provide:Ys,useFactory:function(){return ra},deps:[]},{provide:Xa,useFactory:function(t){return fs(t=t||"undefined"!=typeof $localize&&$localize.locale||hs),t},deps:[[new yn(Xa),new _n,new wn]]},{provide:tu,useValue:"USD"}];let zu=(()=>{class t{constructor(t){}}return t.\u0275fac=function(e){return new(e||t)(gn(Du))},t.\u0275mod=et({type:t}),t.\u0275inj=b({providers:Hu}),t})()},2346:(t,e,n)=>{"use strict";n.d(e,{hO:()=>S,xv:()=>_,Dh:()=>y,HU:()=>f,GT:()=>v,sI:()=>E,on:()=>b,ss:()=>p,pX:()=>m,yq:()=>T});var r=n(8489),i=n(8569),o=n(6599),s=n(4187),a=n(9098),u=n(5366),c=n(1858);function l(){}t=n.hmd(t);class h{constructor(t,e=r.N){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const r=this.zone;return this.delegate.schedule(function(e){r.runGuarded(()=>{t.apply(this,[e])})},e,n)}}class d{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",l,{},l,l)),e.pipe((0,o.b)({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class f{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new h(Zone.current)),this.insideAngular=t.run(()=>new h(Zone.current,i.z))}}function p(t){return function(e){return(e=e.lift(new d(t.ngZone))).pipe((0,s.R)(t.outsideAngular),(0,a.QV)(t.insideAngular))}}const g=["ngOnDestroy"],m=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{var i;if(t[o])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(o,t[o]),t[o];if(g.indexOf(o)>-1)return()=>{};const s=e.toPromise().then(t=>{const e=t&&t[o];return"function"==typeof e?e.bind(t):e&&e.then?e.then(t=>n.run(()=>t)):n.run(()=>e)});return new Proxy(()=>{},{get:(t,e)=>s[e],apply:(t,e,n)=>s.then(t=>{var e;const i=t&&t(...n);return(null===(e=null==r?void 0:r.spy)||void 0===e?void 0:e.apply)&&r.spy.apply(o,n,i),i})})})}),v=(t,e)=>{e.forEach(e=>{Object.getOwnPropertyNames(e.prototype||e).forEach(n=>{Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype||e,n))})})},y=new u.OlP("angularfire2.app.options"),_=new u.OlP("angularfire2.app.nameOrConfig"),w=new u.GfV("6.1.4");function b(e,n,r){const i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";const o=c.Z.apps.filter(t=>t&&t.name===i.name)[0]||n.runOutsideAngular(()=>c.Z.initializeApp(e,i));try{JSON.stringify(e)!==JSON.stringify(o.options)&&C("error",`${o.name} Firebase App already initialized with different options${t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(s){}return o}const T=()=>{C("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},C=(t,...e)=>{(0,u.X6Q)()&&"undefined"!=typeof console&&console[t](...e)};function E(e,n,r,i,o){const[s,...a]=globalThis.\u0275AngularfireInstanceCache.get(e)||[];if(s){try{o.some((t,e)=>{const n=a[e];return t&&"object"==typeof t?JSON.stringify(t)!==JSON.stringify(n):t!==n})&&C("error",`${n} was already initialized on the ${r.name} Firebase App instance with different settings.${t.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(u){}return s}{const t=i();return globalThis.\u0275AngularfireInstanceCache.set(e,[t,...o]),t}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const I={provide:class{},useFactory:b,deps:[y,u.R0b,[new u.FiY,_]]};let S=(()=>{class t{constructor(t){c.Z.registerVersion("angularfire",w.full,t.toString()),c.Z.registerVersion("angular",u.q4F.full)}static initializeApp(e,n){return{ngModule:t,providers:[{provide:y,useValue:e},{provide:_,useValue:n}]}}}return t.\u0275fac=function(e){return new(e||t)(u.LFG(u.Lbi))},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({providers:[I]}),t})()},6934:(t,e,n)=>{"use strict";var r=n(1062),i=n(5119),o=n(4762),s=n(250),a=n(308);function u(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var c,l=u(r),h=((c={})["already-activated"]="You are trying to activate AppCheck for FirebaseApp {$appName}, while it is already activated. AppCheck can only be activated once.",c["use-before-activation"]="AppCheck is being used before activate() is called for FirebaseApp {$appName}. Please make sure you call activate() before instantiating other Firebase services.",c["fetch-network-error"]="Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",c["fetch-parse-error"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",c["fetch-status-error"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",c["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",c["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",c["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",c["recaptcha-error"]="ReCAPTCHA error.",c),d=new s.ErrorFactory("appCheck","AppCheck",h),f=new Map,p={activated:!1,tokenListeners:[]},g={enabled:!1};function m(t){return f.get(t)||p}function v(t,e){f.set(t,e)}function y(){return g}function _(){return self.grecaptcha}function w(t){if(!m(t).activated)throw d.create("use-before-activation",{appName:t.name})}function b(t){return o.__awaiter(this,void 0,void 0,function(){var e;return o.__generator(this,function(n){switch(n.label){case 0:return w(t),[4,m(t).reCAPTCHAState.initialized.promise];case 1:return e=n.sent(),[2,new Promise(function(n,r){var i=m(t).reCAPTCHAState;e.ready(function(){n(e.execute(i.widgetId,{action:"fire_app_check"}))})})]}})})}function T(t,e,n,r){var i=n.render(r,{sitekey:e,size:"invisible"}),s=m(t);v(t,o.__assign(o.__assign({},s),{reCAPTCHAState:o.__assign(o.__assign({},s.reCAPTCHAState),{widgetId:i})}))}var C="https://content-firebaseappcheck.googleapis.com/v1beta",E=function(){function t(t,e,n,r,i){if(this.operation=t,this.retryPolicy=e,this.getWaitDuration=n,this.lowerBound=r,this.upperBound=i,this.pending=null,this.nextErrorWaitInterval=r,r>i)throw new Error("Proactive refresh lower bound greater than upper bound!")}return t.prototype.start=function(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(function(){})},t.prototype.stop=function(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)},t.prototype.isRunning=function(){return!!this.pending},t.prototype.process=function(t){return o.__awaiter(this,void 0,void 0,function(){var e;return o.__generator(this,function(n){switch(n.label){case 0:this.stop(),n.label=1;case 1:return n.trys.push([1,6,,7]),this.pending=new s.Deferred,[4,(r=this.getNextRun(t),new Promise(function(t){setTimeout(t,r)}))];case 2:return n.sent(),this.pending.resolve(),[4,this.pending.promise];case 3:return n.sent(),this.pending=new s.Deferred,[4,this.operation()];case 4:return n.sent(),this.pending.resolve(),[4,this.pending.promise];case 5:return n.sent(),this.process(!0).catch(function(){}),[3,7];case 6:return e=n.sent(),this.retryPolicy(e)?this.process(!1).catch(function(){}):this.stop(),[3,7];case 7:return[2]}var r})})},t.prototype.getNextRun=function(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();var e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e},t}();function I(t,e){var n=t.url,r=t.body;return o.__awaiter(this,void 0,void 0,function(){var t,i,s,a,u,c,l,h,f,p;return o.__generator(this,function(o){switch(o.label){case 0:t={"Content-Type":"application/json"},(i=e.getImmediate({optional:!0}))&&(t["X-Firebase-Client"]=i.getPlatformInfoString()),s={method:"POST",body:JSON.stringify(r),headers:t},o.label=1;case 1:return o.trys.push([1,3,,4]),[4,fetch(n,s)];case 2:return a=o.sent(),[3,4];case 3:throw u=o.sent(),d.create("fetch-network-error",{originalErrorMessage:u.message});case 4:if(200!==a.status)throw d.create("fetch-status-error",{httpStatus:a.status});o.label=5;case 5:return o.trys.push([5,7,,8]),[4,a.json()];case 6:return c=o.sent(),[3,8];case 7:throw l=o.sent(),d.create("fetch-parse-error",{originalErrorMessage:l.message});case 8:if(!(h=c.ttl.match(/^([\d.]+)(s)$/))||!h[2]||isNaN(Number(h[1])))throw d.create("fetch-parse-error",{originalErrorMessage:"ttl field (timeToLive) is not in standard Protobuf Duration format: "+c.ttl});return f=1e3*Number(h[1]),p=Date.now(),[2,{token:c.attestationToken,expireTimeMillis:p+f,issuedAtTimeMillis:p}]}})})}function S(t,e){var n=t.options;return{url:C+"/projects/"+n.projectId+"/apps/"+n.appId+":exchangeRecaptchaToken?key="+n.apiKey,body:{recaptcha_token:e}}}function k(t,e){var n=t.options;return{url:C+"/projects/"+n.projectId+"/apps/"+n.appId+":exchangeDebugToken?key="+n.apiKey,body:{debug_token:e}}}var A="firebase-app-check-store",x="debug-token",N=null;function P(){return N||(N=new Promise(function(t,e){try{var n=indexedDB.open("firebase-app-check-database",1);n.onsuccess=function(e){t(e.target.result)},n.onerror=function(t){var n;e(d.create("storage-open",{originalErrorMessage:null===(n=t.target.error)||void 0===n?void 0:n.message}))},n.onupgradeneeded=function(t){var e=t.target.result;switch(t.oldVersion){case 0:e.createObjectStore(A,{keyPath:"compositeKey"})}}}catch(r){e(d.create("storage-open",{originalErrorMessage:r.message}))}}))}function O(t){return D(L(t))}function R(t,e){return o.__awaiter(this,void 0,void 0,function(){var n,r,i,s;return o.__generator(this,function(o){switch(o.label){case 0:return[4,P()];case 1:return n=o.sent(),r=n.transaction(A,"readwrite"),i=r.objectStore(A),s=i.put({compositeKey:t,value:e}),[2,new Promise(function(t,e){s.onsuccess=function(e){t()},r.onerror=function(t){var n;e(d.create("storage-set",{originalErrorMessage:null===(n=t.target.error)||void 0===n?void 0:n.message}))}})]}})})}function D(t){return o.__awaiter(this,void 0,void 0,function(){var e,n,r,i;return o.__generator(this,function(o){switch(o.label){case 0:return[4,P()];case 1:return e=o.sent(),n=e.transaction(A,"readonly"),r=n.objectStore(A),i=r.get(t),[2,new Promise(function(t,e){i.onsuccess=function(e){var n=e.target.result;t(n?n.value:void 0)},n.onerror=function(t){var n;e(d.create("storage-get",{originalErrorMessage:null===(n=t.target.error)||void 0===n?void 0:n.message}))}})]}})})}function L(t){return t.options.appId+"-"+t.name}var F=new a.Logger("@firebase/app-check");function M(t){return o.__awaiter(this,void 0,void 0,function(){var e,n;return o.__generator(this,function(r){switch(r.label){case 0:if(!s.isIndexedDBAvailable())return[3,5];e=void 0,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,O(t)];case 2:return e=r.sent(),[3,4];case 3:return n=r.sent(),F.warn("Failed to read token from indexeddb. Error: "+n),[3,4];case 4:return[2,e];case 5:return[2,void 0]}})})}function U(t,e){return s.isIndexedDBAvailable()?function(t,e){return R(L(t),e)}(t,e).catch(function(t){F.warn("Failed to write token to indexeddb. Error: "+t)}):Promise.resolve()}function q(){return y().enabled}function j(){return o.__awaiter(this,void 0,void 0,function(){var t;return o.__generator(this,function(e){if((t=y()).enabled&&t.token)return[2,t.token.promise];throw Error("\n            Can't get debug token in production mode.\n        ")})})}var V={error:"UNKNOWN_ERROR"};function B(t,e,n){return void 0===n&&(n=!1),o.__awaiter(this,void 0,void 0,function(){var r,i,a,u,c,l,h,f,p,g,y,_,T;return o.__generator(this,function(C){switch(C.label){case 0:return w(t),q()?(r=I,i=k,a=[t],[4,j()]):[3,3];case 1:return[4,r.apply(void 0,[i.apply(void 0,a.concat([C.sent()])),e])];case 2:return[2,{token:C.sent().token}];case 3:return u=m(t),l=void 0,(c=u.token)?[3,5]:[4,M(t)];case 4:(h=C.sent())&&z(h)&&(c=h,v(t,o.__assign(o.__assign({},u),{token:c})),H(t,{token:c.token})),C.label=5;case 5:if(!n&&c&&z(c))return[2,{token:c.token}];C.label=6;case 6:return C.trys.push([6,12,,13]),u.customProvider?[4,u.customProvider.getToken()]:[3,8];case 7:return f=C.sent(),p=s.issuedAtTime(f.token),g=null!==p&&p<Date.now()&&p>0?1e3*p:Date.now(),c=o.__assign(o.__assign({},f),{issuedAtTimeMillis:g}),[3,11];case 8:return[4,b(t).catch(function(t){throw d.create("recaptcha-error")})];case 9:return y=C.sent(),[4,I(S(t,y),e)];case 10:c=C.sent(),C.label=11;case 11:return[3,13];case 12:return _=C.sent(),F.error(_),l=_,[3,13];case 13:return c?[3,14]:(T=function(t){return{token:(e=V,s.base64.encodeString(JSON.stringify(e),!1)),error:t};var e}(l),[3,16]);case 14:return T={token:c.token},v(t,o.__assign(o.__assign({},u),{token:c})),[4,U(t,c)];case 15:C.sent(),C.label=16;case 16:return H(t,T),[2,T]}})})}function H(t,e){for(var n=0,r=m(t).tokenListeners;n<r.length;n++){var i=r[n];try{i(e)}catch(o){}}}function z(t){return t.expireTimeMillis-Date.now()>0}var G="app-check-internal";!function(t){t.INTERNAL.registerComponent(new i.Component("appCheck",function(t){return e=t.getProvider("app").getImmediate(),{activate:function(t,n){return function(t,e,n){var r=m(t);if(r.activated)throw d.create("already-activated",{appName:t.name});var i=o.__assign(o.__assign({},r),{activated:!0});"string"==typeof e?i.siteKey=e:i.customProvider=e,i.isTokenAutoRefreshEnabled=void 0===n?t.automaticDataCollectionEnabled:n,v(t,i),i.siteKey&&function(t,e){var n=m(t),r=new s.Deferred;v(t,o.__assign(o.__assign({},n),{reCAPTCHAState:{initialized:r}}));var i="fire_app_check_"+t.name,a=document.createElement("div");a.id=i,a.style.display="none",document.body.appendChild(a);var u,c,l=_();return l?l.ready(function(){T(t,e,l,i),r.resolve(l)}):(u=function(){var n=_();if(!n)throw new Error("no recaptcha");n.ready(function(){T(t,e,n,i),r.resolve(n)})},(c=document.createElement("script")).src="https://www.google.com/recaptcha/api.js",c.onload=u,document.head.appendChild(c)),r.promise}(t,i.siteKey).catch(function(){})}(e,t,n)},setTokenAutoRefreshEnabled:function(t){return function(t,e){var n=m(t);n.tokenRefresher&&(!0===e?n.tokenRefresher.start():n.tokenRefresher.stop()),v(t,o.__assign(o.__assign({},n),{isTokenAutoRefreshEnabled:e}))}(e,t)}};var e},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(function(t,e,n){t.getProvider(G).initialize()})),t.INTERNAL.registerComponent(new i.Component(G,function(t){return e=t.getProvider("app").getImmediate(),n=t.getProvider("platform-logger"),{getToken:function(t){return B(e,n,t)},addTokenListener:function(t){return function(t,e,n){var r=m(t),i=o.__assign(o.__assign({},r),{tokenListeners:o.__spreadArray(o.__spreadArray([],r.tokenListeners),[n])});if(q()){var s=y();s.enabled&&s.token&&s.token.promise.then(function(t){return n({token:t})}).catch(function(){})}else{if(!i.tokenRefresher){var a=function(t,e){var n=this;return new E(function(){return o.__awaiter(n,void 0,void 0,function(){var n;return o.__generator(this,function(r){switch(r.label){case 0:return m(t).token?[3,2]:[4,B(t,e)];case 1:return n=r.sent(),[3,4];case 2:return[4,B(t,e,!0)];case 3:n=r.sent(),r.label=4;case 4:if(n.error)throw n.error;return[2]}})})},function(){return!0},function(){var e=m(t);if(e.token){var n=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5;return n=Math.min(n,e.token.expireTimeMillis-3e5),Math.max(0,n-Date.now())}return 0},3e4,96e4)}(t,e);i.tokenRefresher=a}if(i.tokenRefresher.isRunning()||!0!==r.isTokenAutoRefreshEnabled||i.tokenRefresher.start(),r.token&&z(r.token)){var u=r.token;Promise.resolve().then(function(){return n({token:u.token})}).catch(function(){})}}v(t,i)}(e,n,t)},removeTokenListener:function(t){return function(t,e){var n=m(t),r=n.tokenListeners.filter(function(t){return t!==e});0===r.length&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),v(t,o.__assign(o.__assign({},n),{tokenListeners:r}))}(e,t)}};var e,n},"PUBLIC").setInstantiationMode("EXPLICIT")),t.registerVersion("@firebase/app-check","0.1.1")}(l.default),function(){var t=s.getGlobal();if("string"==typeof t.FIREBASE_APPCHECK_DEBUG_TOKEN||!0===t.FIREBASE_APPCHECK_DEBUG_TOKEN){var e=y();e.enabled=!0;var n=new s.Deferred;e.token=n,n.resolve("string"==typeof t.FIREBASE_APPCHECK_DEBUG_TOKEN?t.FIREBASE_APPCHECK_DEBUG_TOKEN:function(){return o.__awaiter(this,void 0,void 0,function(){var t,e;return o.__generator(this,function(n){switch(n.label){case 0:t=void 0,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,D(x)];case 2:return t=n.sent(),[3,4];case 3:return n.sent(),[3,4];case 4:return t?[2,t]:((r=e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}),R(x,r)).catch(function(t){return F.warn("Failed to persist debug token to indexeddb. Error: "+t)}),console.log("AppCheck debug token: "+e+". You will need to whitelist it in the Firebase console for it to work"),[2,e])}var r})})}())}}()},1062:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>b,firebase:()=>w});var r,i,o=n(4762),s=n(250),a=n(5119),u=n(308),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new s.ErrorFactory("app","Firebase",c),h="@firebase/app",d="[DEFAULT]",f=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/app-check"]="fire-app-check",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),p=new u.Logger("@firebase/app"),g=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=(0,s.deepCopy)(t),this.container=new a.ComponentContainer(e.name),this._addComponent(new a.Component("app",function(){return r},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(t){return r._addComponent(t)})}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(t){return t.delete()}))}).then(function(){t.isDeleted_=!0})},t.prototype._getService=function(t,e){var n;void 0===e&&(e=d),this.checkDestroyed_();var r=this.container.getProvider(t);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=d),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){p.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();g.prototype.name&&g.prototype.options||g.prototype.delete||console.log("dc");var m=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=d);var a=o.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if((0,s.contains)(e,a))throw l.create("duplicate-app",{appName:a});var u=new t(n,o,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=f[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),u=e.match(/\s|\//);if(s||u){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&u&&c.push("and"),u&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void p.warn(c.join(" "))}o(new a.Component(i+"-version",function(){return{library:i,version:e}},"VERSION"))},setLogLevel:u.setLogLevel,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument");(0,u.setUserLogHandler)(t,e)},apps:null,SDK_VERSION:"8.6.1",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(!(0,s.contains)(e,t=t||d))throw l.create("no-app",{appName:t});return e[t]}function o(o){var a=o.name;if(n.has(a))return p.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var u=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw l.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==o.serviceProps&&(0,s.deepExtend)(u,o.serviceProps),r[a]=u,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,a).apply(this,o.multipleInstances?t:[])}}for(var c=0,h=Object.keys(e);c<h.length;c++)e[h[c]]._addComponent(o);return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map(function(t){return e[t]})}}),i.App=t,r}(g);return e.INTERNAL=(0,o.__assign)((0,o.__assign)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){(0,s.deepExtend)(e,t)},createSubscribe:s.createSubscribe,ErrorFactory:s.ErrorFactory,deepExtend:s.deepExtend}),e}(),v=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null}).filter(function(t){return t}).join(" ")},t}();if((0,s.isBrowser)()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var y=self.firebase.SDK_VERSION;y&&y.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var _=m.initializeApp;m.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,s.isNode)()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),_.apply(void 0,t)};var w=m;!function(t,e){t.INTERNAL.registerComponent(new a.Component("platform-logger",function(t){return new v(t)},"PRIVATE")),t.registerVersion(h,"0.6.22",void 0),t.registerVersion("fire-js","")}(w);const b=w},9738:(t,e,n)=>{"use strict";var r=n(1062);(function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},n=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,t];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}return globalThis}(this);function i(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function o(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:i(t)}}!function(t,r){if(r){var i=n;t=t.split(".");for(var o=0;o<t.length-1;o++){var s=t[o];s in i||(i[s]={}),i=i[s]}(r=r(o=i[t=t[t.length-1]]))!=o&&null!=r&&e(i,t,{configurable:!0,writable:!0,value:r})}}("Promise",function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(n){e.reject(n)}}function r(){this.a=null}function i(t){return t instanceof e?t:new e(function(e){e(t)})}if(t)return t;r.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c(function(){e.g()})}this.a.push(t)};var s=n.setTimeout;r.prototype.c=function(t){s(t,0)},r.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(r){this.f(r)}}}this.a=null},r.prototype.f=function(t){this.c(function(){throw t})},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.m),reject:t(this.g)}},e.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.s(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.v(t):this.h(t)}},e.prototype.v=function(t){var e=void 0;try{e=t.then}catch(n){return void this.g(n)}"function"==typeof e?this.u(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)a.b(this.a[t]);this.a=null}};var a=new r;return e.prototype.s=function(t){var e=this.f();t.Qa(e.resolve,e.reject)},e.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(r){n.reject(r)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(n){o(n)}}:e}var i,o,s=new e(function(t,e){i=t,o=e});return this.Qa(r(t,i),r(n,o)),s},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Qa=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?a.b(n):this.a.push(n)},e.resolve=i,e.reject=function(t){return new e(function(e,n){n(t)})},e.race=function(t){return new e(function(e,n){for(var r=o(t),s=r.next();!s.done;s=r.next())i(s.value).Qa(e,n)})},e.all=function(t){var n=o(t),r=n.next();return r.done?i([]):new e(function(t,e){function o(e){return function(n){s[e]=n,0==--a&&t(s)}}var s=[],a=0;do{s.push(void 0),a++,i(r.value).Qa(o(s.length-1),e),r=n.next()}while(!r.done)})},e});var s=s||{},a=this||self,u=/^[\w+/_-]+[=]{0,2}$/,c=null;function l(t){return(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&u.test(t)?t:""}function h(){}function d(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function f(t){var e=d(t);return"array"==e||"object"==e&&"number"==typeof t.length}function p(t){return"function"==d(t)}function g(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function m(t){return Object.prototype.hasOwnProperty.call(t,v)&&t[v]||(t[v]=++y)}var v="closure_uid_"+(1e9*Math.random()>>>0),y=0;function _(t,e,n){return t.call.apply(t.bind,arguments)}function w(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function b(t,e,n){return(b=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?_:w).apply(null,arguments)}function T(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var C=Date.now;function E(t,e){function n(){}n.prototype=e.prototype,t.ab=e.prototype,t.prototype=new n,t.prototype.constructor=t}function I(t){return t}function S(t,e,n){this.code=x+t,this.message=e||N[t]||"",this.a=n||null}function k(t){var e=t&&t.code;return e?new S(e.substring(x.length),t.message,t.serverResponse):null}E(S,Error),S.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},S.prototype.toJSON=function(){return this.w()};var A,x="auth/",N={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},P={ld:{Ta:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ta:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://securetoken.googleapis.com/v1/token",Wa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ta:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ta:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Za:"https://test-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function O(t){for(var e in P)if(P[e].id===t)return{firebaseEndpoint:(t=P[e]).Ta,secureTokenEndpoint:t.Za,identityPlatformEndpoint:t.Wa};return null}function R(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(e){return!1}}function D(t){if(Error.captureStackTrace)Error.captureStackTrace(this,D);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function L(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");D.call(this,n+t[r])}function F(t,e){throw new L("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function M(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function U(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function q(){this.b=this.a=null}A=O("__EID__")?"__EID__":void 0,E(D,Error),D.prototype.name="CustomError",E(L,D),L.prototype.name="AssertionError",M.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var j=new M(function(){return new B},function(t){t.reset()});function V(){var t=ye,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function B(){this.next=this.b=this.a=null}q.prototype.add=function(t,e){var n=j.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},B.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},B.prototype.reset=function(){this.next=this.b=this.a=null};var H=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},z=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)},G=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=[],i=0,o="string"==typeof t?t.split(""):t,s=0;s<n;s++)if(s in o){var a=o[s];e.call(void 0,a,s,t)&&(r[i++]=a)}return r},Z=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},K=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function W(t,e){return 0<=H(t,e)}function Y(t,e){var n;return(n=0<=(e=H(t,e)))&&Array.prototype.splice.call(t,e,1),n}function Q(t,e){!function(t,e){for(var n="string"==typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(t,function(n,r){e.call(void 0,n,r,t)&&Array.prototype.splice.call(t,r,1)})}function $(t){return Array.prototype.concat.apply([],arguments)}function J(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var X,tt=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},et=/&/g,nt=/</g,rt=/>/g,it=/"/g,ot=/'/g,st=/\x00/g,at=/[\x00&<>"']/;function ut(t,e){return-1!=t.indexOf(e)}function ct(t,e){return t<e?-1:t>e?1:0}t:{var lt=a.navigator;if(lt){var ht=lt.userAgent;if(ht){X=ht;break t}}X=""}function dt(t){return ut(X,t)}function ft(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function pt(t){for(var e in t)return!1;return!0}function gt(t){var e,n={};for(e in t)n[e]=t[e];return n}var mt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function vt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<mt.length;o++)n=mt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function yt(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||a).Element&&r.Location){var i=r;break t}}catch(s){}i=null}if(i&&void 0!==i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(g(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(s){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;F("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function _t(t,e){this.a=t===Ct&&e||"",this.b=Tt}function wt(t){return t instanceof _t&&t.constructor===_t&&t.b===Tt?t.a:(F("expected object of type Const, got '"+t+"'"),"type_error:Const")}_t.prototype.sa=!0,_t.prototype.ra=function(){return this.a},_t.prototype.toString=function(){return"Const{"+this.a+"}"};var bt,Tt={},Ct={};function Et(){if(void 0===bt){var t=null,e=a.trustedTypes;if(e&&e.createPolicy){try{t=e.createPolicy("goog#html",{createHTML:I,createScript:I,createScriptURL:I})}catch(n){a.console&&a.console.error(n.message)}bt=t}else bt=t}return bt}function It(t,e){this.a=e===Nt?t:""}function St(t){return t instanceof It&&t.constructor===It?t.a:(F("expected object of type TrustedResourceUrl, got '"+t+"' of type "+d(t)),"type_error:TrustedResourceUrl")}function kt(t,e){var n=wt(t);if(!xt.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return function(t){var e=Et();return new It(t=e?e.createScriptURL(t):t,Nt)}(t=n.replace(At,function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof _t?wt(t):encodeURIComponent(String(t))}))}It.prototype.sa=!0,It.prototype.ra=function(){return this.a.toString()},It.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var At=/%{(\w+)}/g,xt=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,Nt={};function Pt(t,e){this.a=e===Ut?t:""}function Ot(t){return t instanceof Pt&&t.constructor===Pt?t.a:(F("expected object of type SafeUrl, got '"+t+"' of type "+d(t)),"type_error:SafeUrl")}Pt.prototype.sa=!0,Pt.prototype.ra=function(){return this.a.toString()},Pt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Rt=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,Dt=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,Lt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Ft(t){if(t instanceof Pt)return t;if(t="object"==typeof t&&t.sa?t.ra():String(t),Lt.test(t))t=new Pt(t,Ut);else{var e=(t=(t=String(t)).replace(/(%0A|%0D)/g,"")).match(Dt);t=e&&Rt.test(e[1])?new Pt(t,Ut):null}return t}function Mt(t){return t instanceof Pt?t:(t="object"==typeof t&&t.sa?t.ra():String(t),Lt.test(t)||(t="about:invalid#zClosurez"),new Pt(t,Ut))}var Ut={},qt=new Pt("about:invalid#zClosurez",Ut);function jt(t,e,n){this.a=n===Vt?t:""}jt.prototype.sa=!0,jt.prototype.ra=function(){return this.a.toString()},jt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Vt={};function Bt(t,e,n,r){return t=t instanceof Pt?t:Mt(t),e=e||a,n=n instanceof _t?wt(n):n||"",e.open(Ot(t),n,r,void 0)}function Ht(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function zt(t){return at.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(et,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(nt,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(rt,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(it,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(ot,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(st,"&#0;"))),t}function Gt(t){return Gt[" "](t),t}Gt[" "]=h;var Zt,Kt,Wt=dt("Opera"),Yt=dt("Trident")||dt("MSIE"),Qt=dt("Edge"),$t=Qt||Yt,Jt=dt("Gecko")&&!(ut(X.toLowerCase(),"webkit")&&!dt("Edge"))&&!(dt("Trident")||dt("MSIE"))&&!dt("Edge"),Xt=ut(X.toLowerCase(),"webkit")&&!dt("Edge");function te(){var t=a.document;return t?t.documentMode:void 0}t:{var ee="",ne=(Kt=X,Jt?/rv:([^\);]+)(\)|;)/.exec(Kt):Qt?/Edge\/([\d\.]+)/.exec(Kt):Yt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Kt):Xt?/WebKit\/(\S+)/.exec(Kt):Wt?/(?:Version)[ \/]?(\S+)/.exec(Kt):void 0);if(ne&&(ee=ne?ne[1]:""),Yt){var re=te();if(null!=re&&re>parseFloat(ee)){Zt=String(re);break t}}Zt=ee}var ie={};function oe(t){return function(t,e){var n=ie;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=tt(String(Zt)).split("."),r=tt(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=ct(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||ct(0==s[2].length,0==a[2].length)||ct(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e})}var se=a.document&&Yt&&(te()||parseInt(Zt,10))||void 0;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(Kt){}var ae=!Yt||9<=Number(se);function ue(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function ce(t,e){ft(e,function(e,n){e&&"object"==typeof e&&e.sa&&(e=e.ra()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:de.hasOwnProperty(n)?t.setAttribute(de[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e})}var le,he,de={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function fe(t,e,n){function r(n){n&&e.appendChild("string"==typeof n?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];if(!f(o)||g(o)&&0<o.nodeType)r(o);else{t:{if(o&&"number"==typeof o.length){if(g(o)){var s="function"==typeof o.item||"string"==typeof o.item;break t}if(p(o)){s="function"==typeof o.item;break t}}s=!1}z(s?J(o):o,r)}}}function pe(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function ge(t){a.setTimeout(function(){throw t},0)}function me(t,e){he||function(){if(a.Promise&&a.Promise.resolve){var t=a.Promise.resolve(void 0);he=function(){t.then(_e)}}else he=function(){var t=_e;!p(a.setImmediate)||a.Window&&a.Window.prototype&&!dt("Edge")&&a.Window.prototype.setImmediate==a.setImmediate?(le||(le=function(){var t=a.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!dt("Presto")&&(t=function(){var t=pe(document,"IFRAME");t.style.display="none",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=b(function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()},this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0!==t&&!dt("Trident")&&!dt("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).Gb;n.Gb=null,t()}},function(t){r.next={Gb:t},r=r.next,e.port2.postMessage(0)}}return function(t){a.setTimeout(t,0)}}()),le(t)):a.setImmediate(t)}}(),ve||(he(),ve=!0),ye.add(t,e)}var ve=!1,ye=new q;function _e(){for(var t;t=V();){try{t.a.call(t.b)}catch(e){ge(e)}U(j,t)}ve=!1}function we(t,e){if(this.a=be,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=h)try{var n=this;t.call(e,function(t){De(n,Te,t)},function(t){if(!(t instanceof Ve))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(e){}De(n,Ce,t)})}catch(r){De(this,Ce,r)}}var be=0,Te=2,Ce=3;function Ee(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Ee.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Ie=new M(function(){return new Ee},function(t){t.reset()});function Se(t,e,n){var r=Ie.get();return r.g=t,r.b=e,r.f=n,r}function ke(t){if(t instanceof we)return t;var e=new we(h);return De(e,Te,t),e}function Ae(t){return new we(function(e,n){n(t)})}function xe(t,e,n){Le(t,e,n,null)||me(T(e,t))}function Ne(t){return new we(function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Pb:!0,value:o}:{Pb:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)xe(t[o],T(i,o,!0),T(i,o,!1));else e(r)})}function Pe(t,e){if(t.a==be)if(t.c){var n=t.c;if(n.b){for(var r=0,i=null,o=null,s=n.b;s&&(s.c||(r++,s.a==t&&(i=s),!(i&&1<r)));s=s.next)i||(o=s);i&&(n.a==be&&1==r?Pe(n,e):(o?((r=o).next==n.f&&(n.f=r),r.next=r.next.next):Me(n),Ue(n,i,Ce,e)))}t.c=null}else De(t,Ce,e)}function Oe(t,e){t.b||t.a!=Te&&t.a!=Ce||Fe(t),t.f?t.f.next=e:t.b=e,t.f=e}function Re(t,e,n,r){var i=Se(null,null,null);return i.a=new we(function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(s){o(s)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof Ve?o(e):t(i)}catch(s){o(s)}}:o}),i.a.c=t,Oe(t,i),i.a}function De(t,e,n){t.a==be&&(t===n&&(e=Ce,n=new TypeError("Promise cannot resolve to itself")),t.a=1,Le(n,t.$c,t.ad,t)||(t.i=n,t.a=e,t.c=null,Fe(t),e!=Ce||n instanceof Ve||function(t,e){t.g=!0,me(function(){t.g&&je.call(null,e)})}(t,n)))}function Le(t,e,n,r){if(t instanceof we)return Oe(t,Se(e||h,n||null,r)),!0;if(R(t))return t.then(e,n,r),!0;if(g(t))try{var i=t.then;if(p(i))return function(t,e,n,r,i){function o(t){s||(s=!0,r.call(i,t))}var s=!1;try{e.call(t,function(t){s||(s=!0,n.call(i,t))},o)}catch(a){o(a)}}(t,i,e,n,r),!0}catch(o){return n.call(r,o),!0}return!1}function Fe(t){t.h||(t.h=!0,me(t.gc,t))}function Me(t){var e=null;return t.b&&(t.b=(e=t.b).next,e.next=null),t.b||(t.f=null),e}function Ue(t,e,n,r){if(n==Ce&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,qe(e,n,r);else try{e.c?e.g.call(e.f):qe(e,n,r)}catch(i){je.call(null,i)}U(Ie,e)}function qe(t,e,n){e==Te?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}we.prototype.then=function(t,e,n){return Re(this,p(t)?t:null,p(e)?e:null,n)},we.prototype.$goog_Thenable=!0,(t=we.prototype).oa=function(t,e){return(t=Se(t,t,e)).c=!0,Oe(this,t),this},t.o=function(t,e){return Re(this,null,t,e)},t.cancel=function(t){if(this.a==be){var e=new Ve(t);me(function(){Pe(this,e)},this)}},t.$c=function(t){this.a=be,De(this,Te,t)},t.ad=function(t){this.a=be,De(this,Ce,t)},t.gc=function(){for(var t;t=Me(this);)Ue(this,t,this.a,this.i);this.h=!1};var je=ge;function Ve(t){D.call(this,t)}function Be(){0!=He&&(ze[m(this)]=this),this.xa=this.xa,this.pa=this.pa}E(Ve,D),Ve.prototype.name="cancel";var He=0,ze={};function Ge(t){if(!t.xa&&(t.xa=!0,t.Da(),0!=He)){var e=m(t);if(0!=He&&t.pa&&0<t.pa.length)throw Error(t+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete ze[e]}}Be.prototype.xa=!1,Be.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var Ze=Object.freeze||function(t){return t},Ke=!Yt||9<=Number(se),We=Yt&&!oe("9"),Ye=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{a.addEventListener("test",h,e),a.removeEventListener("test",h,e)}catch(n){}return t}();function Qe(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function $e(t,e){if(Qe.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Jt){t:{try{Gt(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Je[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}Qe.prototype.preventDefault=function(){this.defaultPrevented=!0},E($e,Qe);var Je=Ze({2:"touch",3:"pen",4:"mouse"});$e.prototype.preventDefault=function(){$e.ab.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,We)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}},$e.prototype.g=function(){return this.a};var Xe="closure_listenable_"+(1e6*Math.random()|0),tn=0;function en(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Va=i,this.key=++tn,this.va=this.Pa=!1}function nn(t){t.va=!0,t.listener=null,t.proxy=null,t.src=null,t.Va=null}function rn(t){this.src=t,this.a={},this.b=0}function on(t,e){var n=e.type;n in t.a&&Y(t.a[n],e)&&(nn(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function sn(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.va&&o.listener==e&&o.capture==!!n&&o.Va==r)return i}return-1}rn.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=sn(t,e,r,i);return-1<s?(e=t[s],n||(e.Pa=!1)):((e=new en(e,this.src,o,!!r,i)).Pa=n,t.push(e)),e};var an="closure_lm_"+(1e6*Math.random()|0),un={};function cn(t,e,n,r,i){if(r&&r.once)hn(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)cn(t,e[o],n,r,i);else n=wn(n),t&&t[Xe]?Tn(t,e,n,g(r)?!!r.capture:!!r,i):ln(t,e,n,!1,r,i)}function ln(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=g(i)?!!i.capture:!!i,a=yn(t);if(a||(t[an]=a=new rn(t)),!(n=a.add(e,n,r,s,o)).proxy)if(r=function(){var t=vn,e=Ke?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Ye||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(pn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function hn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)hn(t,e[o],n,r,i);else n=wn(n),t&&t[Xe]?Cn(t,e,n,g(r)?!!r.capture:!!r,i):ln(t,e,n,!0,r,i)}function dn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)dn(t,e[o],n,r,i);else r=g(r)?!!r.capture:!!r,n=wn(n),t&&t[Xe]?(t=t.v,(e=String(e).toString())in t.a&&-1<(n=sn(o=t.a[e],n,r,i))&&(nn(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=yn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=sn(e,n,r,i)),(n=-1<t?e[t]:null)&&fn(n))}function fn(t){if("number"!=typeof t&&t&&!t.va){var e=t.src;if(e&&e[Xe])on(e.v,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(pn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=yn(e))?(on(n,t),0==n.b&&(n.src=null,e[an]=null)):nn(t)}}}function pn(t){return t in un?un[t]:un[t]="on"+t}function gn(t,e,n,r){var i=!0;if((t=yn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.va&&(o=mn(o,r),i=i&&!1!==o)}return i}function mn(t,e){var n=t.listener,r=t.Va||t.src;return t.Pa&&fn(t),n.call(r,e)}function vn(t,e){if(t.va)return!0;if(!Ke){if(!e)t:{e=["window","event"];for(var n=a,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new $e(r=e,this),n=!0,!(0>r.keyCode||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(s){i=!0}(i||null==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=gn(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=gn(r[i],t,!1,e),n=n&&o}return n}return mn(t,new $e(e,this))}function yn(t){return(t=t[an])instanceof rn?t:null}var _n="__closure_events_fn_"+(1e9*Math.random()>>>0);function wn(t){return p(t)?t:(t[_n]||(t[_n]=function(e){return t.handleEvent(e)}),t[_n])}function bn(){Be.call(this),this.v=new rn(this),this.ac=this,this.gb=null}function Tn(t,e,n,r,i){t.v.add(String(e),n,!1,r,i)}function Cn(t,e,n,r,i){t.v.add(String(e),n,!0,r,i)}function En(t,e,n,r){if(!(e=t.v.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.va&&s.capture==n){var a=s.listener,u=s.Va||s.src;s.Pa&&on(t.v,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}function In(t,e,n){if(p(t))n&&(t=b(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=b(t.handleEvent,t)}return 2147483647<Number(e)?-1:a.setTimeout(t,e||0)}function Sn(t){var e=null;return new we(function(n,r){-1==(e=In(function(){n(void 0)},t))&&r(Error("Failed to schedule timer."))}).o(function(t){throw a.clearTimeout(e),t})}function kn(t){if(t.W&&"function"==typeof t.W)return t.W();if("string"==typeof t)return t.split("");if(f(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function An(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.W||"function"!=typeof t.W){if(f(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function xn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof xn)for(n=t.Y(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Nn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Pn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Pn(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Pn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}E(bn,Be),bn.prototype[Xe]=!0,bn.prototype.addEventListener=function(t,e,n,r){cn(this,t,e,n,r)},bn.prototype.removeEventListener=function(t,e,n,r){dn(this,t,e,n,r)},bn.prototype.dispatchEvent=function(t){var e,n=this.gb;if(n)for(e=[];n;n=n.gb)e.push(n);n=this.ac;var r=t.type||t;if("string"==typeof t)t=new Qe(t,n);else if(t instanceof Qe)t.target=t.target||n;else{var i=t;vt(t=new Qe(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.b=e[o];i=En(s,r,!0,t)&&i}if(i=En(s=t.b=n,r,!0,t)&&i,i=En(s,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=En(s=t.b=e[o],r,!1,t)&&i;return i},bn.prototype.Da=function(){if(bn.ab.Da.call(this),this.v){var t,e=this.v;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)nn(n[r]);delete e.a[t],e.b--}}this.gb=null},(t=xn.prototype).W=function(){Nn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.Y=function(){return Nn(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return Pn(this.b,t)?this.b[t]:e},t.set=function(t,e){Pn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var On=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Rn(t,e){var n;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,t instanceof Rn?(this.i=void 0!==e?e:t.i,Dn(this,t.c),this.l=t.l,this.a=t.a,Ln(this,t.g),this.f=t.f,Fn(this,er(t.b)),this.h=t.h):t&&(n=String(t).match(On))?(this.i=!!e,Dn(this,n[1]||"",!0),this.l=Vn(n[2]||""),this.a=Vn(n[3]||"",!0),Ln(this,n[4]),this.f=Vn(n[5]||"",!0),Fn(this,n[6]||"",!0),this.h=Vn(n[7]||"")):(this.i=!!e,this.b=new Yn(null,this.i))}function Dn(t,e,n){t.c=n?Vn(e,!0):e,t.c&&(t.c=t.c.replace(/:$/,""))}function Ln(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.g=e}else t.g=null}function Fn(t,e,n){e instanceof Yn?(t.b=e,function(t,e){e&&!t.f&&(Qn(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Jn(this,e),tr(this,n,t))},t)),t.f=e}(t.b,t.i)):(n||(e=Bn(e,Kn)),t.b=new Yn(e,t.i))}function Mn(t,e,n){t.b.set(e,n)}function Un(t,e){return t.b.get(e)}function qn(t){return t instanceof Rn?new Rn(t):new Rn(t,void 0)}function jn(t,e,n,r){var i=new Rn(null,void 0);return t&&Dn(i,t),e&&(i.a=e),n&&Ln(i,n),r&&(i.f=r),i}function Vn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Bn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Hn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Hn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Rn.prototype.toString=function(){var t=[],e=this.c;e&&t.push(Bn(e,zn,!0),":");var n=this.a;return(n||"file"==e)&&(t.push("//"),(e=this.l)&&t.push(Bn(e,zn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&t.push(":",String(n))),(n=this.f)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push(Bn(n,"/"==n.charAt(0)?Zn:Gn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.h)&&t.push("#",Bn(n,Wn)),t.join("")},Rn.prototype.resolve=function(t){var e=new Rn(this),n=!!t.c;n?Dn(e,t.c):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var r=t.f;if(n)Ln(e,t.g);else if(n=!!t.f){if("/"!=r.charAt(0))if(this.a&&!this.f)r="/"+r;else{var i=e.f.lastIndexOf("/");-1!=i&&(r=e.f.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(ut(i,"./")||ut(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],s=0;s<i.length;){var a=i[s++];"."==a?r&&s==i.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&s==i.length&&o.push("")):(o.push(a),r=!0)}r=o.join("/")}else r=i}return n?e.f=r:n=""!==t.b.toString(),n?Fn(e,er(t.b)):n=!!t.h,n&&(e.h=t.h),e};var zn=/[#\/\?@]/g,Gn=/[#\?:]/g,Zn=/[#\?]/g,Kn=/[#\?@]/g,Wn=/#/g;function Yn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Qn(t){t.a||(t.a=new xn,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function $n(t){var e=An(t);if(void 0===e)throw Error("Keys are undefined");var n=new Yn(null,void 0);t=kn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?tr(n,i,o):n.add(i,o)}return n}function Jn(t,e){Qn(t),e=nr(t,e),Pn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Pn((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Nn(t)))}function Xn(t,e){return Qn(t),e=nr(t,e),Pn(t.a.b,e)}function tr(t,e,n){Jn(t,e),0<n.length&&(t.c=null,t.a.set(nr(t,e),J(n)),t.b+=n.length)}function er(t){var e=new Yn;return e.c=t.c,t.a&&(e.a=new xn(t.a),e.b=t.b),e}function nr(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function rr(t){var e=[];return or(new ir,t,e),e.join("")}function ir(){}function or(t,e,n){if(null==e)n.push("null");else{if("object"==typeof e){if(Array.isArray(e)){var r=e;e=r.length,n.push("[");for(var i="",o=0;o<e;o++)n.push(i),or(t,r[o],n),i=",";return void n.push("]")}if(!(e instanceof String||e instanceof Number||e instanceof Boolean)){for(r in n.push("{"),i="",e)Object.prototype.hasOwnProperty.call(e,r)&&"function"!=typeof(o=e[r])&&(n.push(i),ur(r,n),n.push(":"),or(t,o,n),i=",");return void n.push("}")}e=e.valueOf()}switch(typeof e){case"string":ur(e,n);break;case"number":n.push(isFinite(e)&&!isNaN(e)?String(e):"null");break;case"boolean":n.push(String(e));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof e)}}}(t=Yn.prototype).add=function(t,e){Qn(this),this.c=null,t=nr(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){Qn(this),this.a.forEach(function(n,r){z(n,function(n){t.call(e,n,r,this)},this)},this)},t.Y=function(){Qn(this);for(var t=this.a.W(),e=this.a.Y(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.W=function(t){Qn(this);var e=[];if("string"==typeof t)Xn(this,t)&&(e=$(e,this.a.get(nr(this,t))));else{t=this.a.W();for(var n=0;n<t.length;n++)e=$(e,t[n])}return e},t.set=function(t,e){return Qn(this),this.c=null,Xn(this,t=nr(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.W(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.W(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var sr={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},ar=/\uffff/.test("\uffff")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function ur(t,e){e.push('"',t.replace(ar,function(t){var e=sr[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),sr[t]=e),e}),'"')}function cr(){var t=xr();return Yt&&!!se&&11==se||/Edge\/\d+/.test(t)}function lr(){return a.window&&a.window.location.href||self&&self.location&&self.location.href||""}function hr(t,e){e=e||a.window;var n="about:blank";t&&(n=Ot(Ft(t)||qt)),e.location.href=n}function dr(t,e){var n,r=[];for(n in t)n in e?typeof t[n]!=typeof e[n]?r.push(n):"object"==typeof t[n]&&null!=t[n]&&null!=e[n]?0<dr(t[n],e[n]).length&&r.push(n):t[n]!==e[n]&&r.push(n):r.push(n);for(n in e)n in t||r.push(n);return r}function fr(t){return!!((t=(t||xr()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function pr(t){t=t||a.window;try{t.close()}catch(e){}}function gr(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(s in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=xr().toLowerCase(),r&&(e.target=r,ut(n,"crios/")&&(e.target="_blank")),Sr(xr())==Er&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof Pt?n:Ft(void 0!==n.href?n.href:String(n))||qt,n=t.target||n.target,i=[],t)switch(s){case"width":case"height":case"top":case"left":i.push(s+"="+t[s]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(s+"="+(t[s]?1:0))}var s=i.join(",");if((dt("iPhone")&&!dt("iPod")&&!dt("iPad")||dt("iPad")||dt("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(yt(s=pe(document,"A"),"HTMLAnchorElement"),e=e instanceof Pt?e:Mt(e),s.href=Ot(e),s.setAttribute("target",n),t.noreferrer&&s.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),s.dispatchEvent(t),s={}):t.noreferrer?(s=Bt("",r,n,s),t=Ot(e),s&&($t&&ut(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),s.opener=null,t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+zt(t)+'">',t=new jt(t=(r=Et())?r.createHTML(t):t,null,Vt),r=s.document)&&(r.write(function(t){return t instanceof jt&&t.constructor===jt?t.a:(F("expected object of type SafeHtml, got '"+t+"' of type "+d(t)),"type_error:SafeHtml")}(t)),r.close())):(s=Bt(e,r,n,s))&&t.noopener&&(s.opener=null),s)try{s.focus()}catch(a){}return s}var mr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,vr=/^[^@]+@[^@]+$/;function yr(){var t=null;return new we(function(e){"complete"==a.document.readyState?e():(t=function(){e()},hn(window,"load",t))}).o(function(e){throw dn(window,"load",t),e})}function _r(t){return t=t||xr(),!("file:"!==Dr()&&"ionic:"!==Dr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function wr(){var t=a.window;try{return!(!t||t==t.top)}catch(e){return!1}}function br(){return void 0!==a.WorkerGlobalScope&&"function"==typeof a.importScripts}function Tr(){return r.default.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":r.default.INTERNAL.hasOwnProperty("node")?"Node":br()?"Worker":"Browser"}function Cr(){var t=Tr();return"ReactNative"===t||"Node"===t}var Er="Firefox",Ir="Chrome";function Sr(t){var e=t.toLowerCase();return ut(e,"opera/")||ut(e,"opr/")||ut(e,"opios/")?"Opera":ut(e,"iemobile")?"IEMobile":ut(e,"msie")||ut(e,"trident/")?"IE":ut(e,"edge/")?"Edge":ut(e,"firefox/")?Er:ut(e,"silk/")?"Silk":ut(e,"blackberry")?"Blackberry":ut(e,"webos")?"Webos":!ut(e,"safari/")||ut(e,"chrome/")||ut(e,"crios/")||ut(e,"android")?!ut(e,"chrome/")&&!ut(e,"crios/")||ut(e,"edge/")?ut(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":Ir:"Safari"}var kr={md:"FirebaseCore-web",od:"FirebaseUI-web"};function Ar(t,e){e=e||[];var n,r=[],i={};for(n in kr)i[kr[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=Tr())?r=Sr(i=xr()):"Worker"===r&&(r=Sr(i=xr())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function xr(){return a.navigator&&a.navigator.userAgent||""}function Nr(t,e){t=t.split("."),e=e||a;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function Pr(){try{var t=a.localStorage,e=qr();if(t)return t.setItem(e,"1"),t.removeItem(e),!cr()||!!a.indexedDB}catch(n){return br()&&!!a.indexedDB}return!1}function Or(){return(Rr()||"chrome-extension:"===Dr()||_r())&&!Cr()&&Pr()&&!br()}function Rr(){return"http:"===Dr()||"https:"===Dr()}function Dr(){return a.location&&a.location.protocol||null}function Lr(t){return!fr(t=t||xr())&&Sr(t)!=Er}function Fr(t){return void 0===t?null:rr(t)}function Mr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!=t[e]&&(n[e]=t[e]);return n}function Ur(t){if(null!==t)return JSON.parse(t)}function qr(t){return t||Math.floor(1e9*Math.random()).toString()}function jr(t){return"Safari"!=Sr(t=t||xr())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Vr(){var t=a.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function Br(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=xr(),e=Tr(),this.b=fr(t)||"ReactNative"===e}function Hr(){var t=a.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function zr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(n){}return null}function Gr(){return!(!Nr("fireauth.oauthhelper",a)&&!Nr("fireauth.iframe",a))}Br.prototype.get=function(){var t=a.navigator;return!t||"boolean"!=typeof t.onLine||!Rr()&&"chrome-extension:"!==Dr()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Zr,Kr={};function Wr(t){Kr[t]||(Kr[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var Yr={};Object.defineProperty(Yr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Yr,"abcd",{configurable:!0,enumerable:!0,value:2}),Zr=2==Yr.abcd}catch(Kt){Zr=!1}function Qr(t,e,n){Zr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function $r(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Qr(t,n,e[n])}function Jr(t){var e={};return $r(e,t),e}function Xr(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Qr(e,n,Xr(t[n]));return e}function ti(t){var e=t&&(t[oi]?"phone":null);if(!(e&&t&&t[ii]))throw new S("internal-error","Internal assert: invalid MultiFactorInfo object");Qr(this,"uid",t[ii]),Qr(this,"displayName",t[ni]||null);var n=null;t[ri]&&(n=new Date(t[ri]).toUTCString()),Qr(this,"enrollmentTime",n),Qr(this,"factorId",e)}function ei(t){try{var e=new si(t)}catch(n){e=null}return e}ti.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var ni="displayName",ri="enrolledAt",ii="mfaEnrollmentId",oi="phoneInfo";function si(t){ti.call(this,t),Qr(this,"phoneNumber",t[oi])}function ai(t){var e={},n=t[hi],r=t[fi],i=t[pi];if(t=ei(t[di]),!i||i!=ci&&i!=li&&!n||i==li&&!r||i==ui&&!t)throw Error("Invalid checkActionCode response!");i==li?(e[mi]=n||null,e[yi]=n||null,e[gi]=r):(e[mi]=r||null,e[yi]=r||null,e[gi]=n||null),e[vi]=t||null,Qr(this,wi,i),Qr(this,_i,Xr(e))}E(si,ti),si.prototype.w=function(){var t=si.ab.w.call(this);return t.phoneNumber=this.phoneNumber,t};var ui="REVERT_SECOND_FACTOR_ADDITION",ci="EMAIL_SIGNIN",li="VERIFY_AND_CHANGE_EMAIL",hi="email",di="mfaInfo",fi="newEmail",pi="requestType",gi="email",mi="fromEmail",vi="multiFactorInfo",yi="previousEmail",_i="data",wi="operation";function bi(t){var e=Un(t=qn(t),Ti)||null,n=Un(t,Ci)||null,r=Un(t,Si)||null;if(r=r&&Ai[r]||null,!e||!n||!r)throw new S("argument-error",Ti+", "+Ci+"and "+Si+" are required in a valid action code URL.");$r(this,{apiKey:e,operation:r,code:n,continueUrl:Un(t,Ei)||null,languageCode:Un(t,Ii)||null,tenantId:Un(t,ki)||null})}var Ti="apiKey",Ci="oobCode",Ei="continueUrl",Ii="languageCode",Si="mode",ki="tenantId",Ai={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:ui,signIn:ci,verifyAndChangeEmail:li,verifyEmail:"VERIFY_EMAIL"};function xi(t){try{return new bi(t)}catch(e){return null}}function Ni(t){var e=t[Li];if(void 0===e)throw new S("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new S("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[Pi];if(n&&"object"==typeof n){e=n[Ui];var r=n[Fi];if(n=n[Mi],"string"==typeof e&&e.length){if(this.a=e,void 0!==r&&"boolean"!=typeof r)throw new S("argument-error",Fi+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new S("argument-error",Mi+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new S("argument-error",Ui+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new S("missing-android-pkg-name")}}else if(void 0!==n)throw new S("argument-error",Pi+" property must be a non null object when specified.");if(this.f=null,(e=t[Di])&&"object"==typeof e){if("string"==typeof(e=e[qi])&&e.length)this.f=e;else if(void 0!==e)throw new S("argument-error",qi+" property must be a non empty string when specified.")}else if(void 0!==e)throw new S("argument-error",Di+" property must be a non null object when specified.");if(void 0!==(e=t[Ri])&&"boolean"!=typeof e)throw new S("argument-error",Ri+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[Oi])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new S("argument-error",Oi+" property must be a non empty string when specified.");this.i=t||null}var Pi="android",Oi="dynamicLinkDomain",Ri="handleCodeInApp",Di="iOS",Li="url",Fi="installApp",Mi="minimumVersion",Ui="packageName",qi="bundleId";function ji(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var Vi=null;function Bi(t){var e=zi(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.h=t,this.a=e.exp,this.i=e.sub,t=Date.now()/1e3,this.g=e.iat||(t>this.a?this.a:t),this.b=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.c=!!e.is_anonymous||"anonymous"==this.b}function Hi(t){try{return new Bi(t)}catch(e){return null}}function zi(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{var r=function(t){var e=[];return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=Vi[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!Vi){Vi={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===Vi[o]&&(Vi[o]=i)}}}();for(var r=0;;){var i=n(-1),o=n(0),s=n(64),a=n(64);if(64===a&&-1===i)break;e(i<<2|o>>4),64!=s&&(e(o<<4&240|s>>2),64!=a&&e(s<<6&192|a))}}(t,function(t){e.push(t)}),e}(t);for(t=[],n=e=0;e<r.length;){var i=r[e++];if(128>i)t[n++]=String.fromCharCode(i);else if(191<i&&224>i){var o=r[e++];t[n++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&365>i){o=r[e++];var s=r[e++],a=((7&i)<<18|(63&o)<<12|(63&s)<<6|63&r[e++])-65536;t[n++]=String.fromCharCode(55296+(a>>10)),t[n++]=String.fromCharCode(56320+(1023&a))}else o=r[e++],s=r[e++],t[n++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}return JSON.parse(t.join(""))}catch(u){}return null}Bi.prototype.T=function(){return this.f},Bi.prototype.l=function(){return this.c},Bi.prototype.toString=function(){return this.h};var Gi="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Zi=["client_id","response_type","scope","redirect_uri","state"],Ki={nd:{Ja:"locale",ua:700,ta:600,fa:"facebook.com",Xa:Zi},pd:{Ja:null,ua:500,ta:750,fa:"github.com",Xa:Zi},qd:{Ja:"hl",ua:515,ta:680,fa:"google.com",Xa:Zi},wd:{Ja:"lang",ua:485,ta:705,fa:"twitter.com",Xa:Gi},kd:{Ja:"locale",ua:640,ta:600,fa:"apple.com",Xa:[]}};function Wi(t){for(var e in Ki)if(Ki[e].fa==t)return Ki[e];return null}function Yi(t){var e={};e["facebook.com"]=to,e["google.com"]=no,e["github.com"]=eo,e["twitter.com"]=ro;var n=t&&t[$i];try{if(n)return e[n]?new e[n](t):new Xi(t);if(void 0!==t[Qi])return new Ji(t)}catch(r){}return null}var Qi="idToken",$i="providerId";function Ji(t){var e=t[$i];if(!e&&t[Qi]){var n=Hi(t[Qi]);n&&n.b&&(e=n.b)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),Qr(this,"providerId",e),Qr(this,"isNewUser",n)}function Xi(t){Ji.call(this,t),Qr(this,"profile",Xr((t=Ur(t.rawUserInfo||"{}"))||{}))}function to(t){if(Xi.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function eo(t){if(Xi.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Qr(this,"username",this.profile&&this.profile.login||null)}function no(t){if(Xi.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function ro(t){if(Xi.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Qr(this,"username",t.screenName||null)}function io(t){var e=qn(t),n=Un(e,"link"),r=Un(qn(n),"link");return e=Un(e,"deep_link_id"),Un(qn(e),"link")||e||r||n||t}function oo(t,e){if(!t&&!e)throw new S("internal-error","Internal assert: no raw session string available");if(t&&e)throw new S("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?so:ao}E(Xi,Ji),E(to,Xi),E(eo,Xi),E(no,Xi),E(ro,Xi);var so="enroll",ao="signin";function uo(){}function co(t,e){return t.then(function(t){if(t[Qs]){var n=Hi(t[Qs]);if(!n||e!=n.i)throw new S("user-mismatch");return t}throw new S("user-mismatch")}).o(function(t){throw t&&t.code&&t.code==x+"user-not-found"?new S("user-mismatch"):t})}function lo(t,e){if(!e)throw new S("internal-error","failed to construct a credential");this.a=e,Qr(this,"providerId",t),Qr(this,"signInMethod",t)}function ho(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function fo(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new lo(t.providerId,t.pendingToken)}catch(e){}return null}function po(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Qr(this,"idToken",e.idToken),e.accessToken&&Qr(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Qr(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new S("internal-error","failed to construct a credential");Qr(this,"accessToken",e.oauthToken),Qr(this,"secret",e.oauthTokenSecret)}Qr(this,"providerId",t),Qr(this,"signInMethod",n)}function go(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:$n(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function mo(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new po(t.providerId,e,t.signInMethod)}catch(n){}}return null}function vo(t,e){this.Qc=e||[],$r(this,{providerId:t,isOAuthProvider:!0}),this.Ib={},this.pb=(Wi(t)||{}).Ja||null,this.ob=null}function yo(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new S("argument-error",'SAML provider IDs must be prefixed with "saml."');vo.call(this,t,[])}function _o(t){vo.call(this,t,Zi),this.a=[]}function wo(){_o.call(this,"facebook.com")}function bo(t){if(!t)throw new S("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return g(t)&&(e=t.accessToken),(new wo).credential({accessToken:e})}function To(){_o.call(this,"github.com")}function Co(t){if(!t)throw new S("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return g(t)&&(e=t.accessToken),(new To).credential({accessToken:e})}function Eo(){_o.call(this,"google.com"),this.Ca("profile")}function Io(t,e){var n=t;return g(t)&&(n=t.idToken,e=t.accessToken),(new Eo).credential({idToken:n,accessToken:e})}function So(){vo.call(this,"twitter.com",Gi)}function ko(t,e){var n=t;if(g(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new S("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new po("twitter.com",n,"twitter.com")}function Ao(t,e,n){this.a=t,this.f=e,Qr(this,"providerId","password"),Qr(this,"signInMethod",n===No.EMAIL_LINK_SIGN_IN_METHOD?No.EMAIL_LINK_SIGN_IN_METHOD:No.EMAIL_PASSWORD_SIGN_IN_METHOD)}function xo(t){return t&&t.email&&t.password?new Ao(t.email,t.password,t.signInMethod):null}function No(){$r(this,{providerId:"password",isOAuthProvider:!1})}function Po(t,e){if(!(e=Oo(e)))throw new S("argument-error","Invalid email link!");return new Ao(t,e.code,No.EMAIL_LINK_SIGN_IN_METHOD)}function Oo(t){return(t=xi(t=io(t)))&&t.operation===ci?t:null}function Ro(t){if(!(t.eb&&t.cb||t.La&&t.ea))throw new S("internal-error");this.a=t,Qr(this,"providerId","phone"),this.fa="phone",Qr(this,"signInMethod","phone")}function Do(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return z(["verificationId","verificationCode","temporaryProof","phoneNumber"],function(n){t[n]&&(e[n]=t[n])}),new Ro(e)}return null}function Lo(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.eb,code:t.a.cb}}function Fo(t){try{this.a=t||r.default.auth()}catch(e){throw new S("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}$r(this,{providerId:"phone",isOAuthProvider:!1})}function Mo(t,e){if(!t)throw new S("missing-verification-id");if(!e)throw new S("missing-verification-code");return new Ro({eb:t,cb:e})}function Uo(t){if(t.temporaryProof&&t.phoneNumber)return new Ro({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,s=t&&t.pendingToken;try{switch(e){case"google.com":return Io(o,n);case"facebook.com":return bo(n);case"github.com":return Co(n);case"twitter.com":return ko(n,r);default:return n||r||o||s?s?0==e.indexOf("saml.")?new lo(e,s):new po(e,{pendingToken:s,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new _o(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(a){return null}}function qo(t){if(!t.isOAuthProvider)throw new S("invalid-oauth-provider")}function jo(t,e,n,r,i,o,s){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=s||null,this.a=i||null,!this.g&&!this.a)throw new S("invalid-auth-event");if(this.g&&this.a)throw new S("invalid-auth-event");if(this.g&&!this.f)throw new S("invalid-auth-event")}function Vo(t){return(t=t||{}).type?new jo(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&k(t.error),t.postBody,t.tenantId):null}function Bo(){this.b=null,this.a=[]}oo.prototype.Ha=function(){return ke(this.a?this.a:this.b)},oo.prototype.w=function(){return this.type==so?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},uo.prototype.ka=function(){},uo.prototype.b=function(){},uo.prototype.c=function(){},uo.prototype.w=function(){},lo.prototype.ka=function(t){return va(t,ho(this))},lo.prototype.b=function(t,e){var n=ho(this);return n.idToken=e,ya(t,n)},lo.prototype.c=function(t,e){return co(_a(t,ho(this)),e)},lo.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},po.prototype.ka=function(t){return va(t,go(this))},po.prototype.b=function(t,e){var n=go(this);return n.idToken=e,ya(t,n)},po.prototype.c=function(t,e){return co(_a(t,go(this)),e)},po.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},vo.prototype.Ka=function(t){return this.Ib=gt(t),this},E(yo,vo),E(_o,vo),_o.prototype.Ca=function(t){return W(this.a,t)||this.a.push(t),this},_o.prototype.Qb=function(){return J(this.a)},_o.prototype.credential=function(t,e){var n;if(!(n=g(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new S("argument-error","credential failed: must provide the ID token and/or the access token.");return new po(this.providerId,n,this.providerId)},E(wo,_o),Qr(wo,"PROVIDER_ID","facebook.com"),Qr(wo,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),E(To,_o),Qr(To,"PROVIDER_ID","github.com"),Qr(To,"GITHUB_SIGN_IN_METHOD","github.com"),E(Eo,_o),Qr(Eo,"PROVIDER_ID","google.com"),Qr(Eo,"GOOGLE_SIGN_IN_METHOD","google.com"),E(So,vo),Qr(So,"PROVIDER_ID","twitter.com"),Qr(So,"TWITTER_SIGN_IN_METHOD","twitter.com"),Ao.prototype.ka=function(t){return this.signInMethod==No.EMAIL_LINK_SIGN_IN_METHOD?tu(t,ka,{email:this.a,oobCode:this.f}):tu(t,Ya,{email:this.a,password:this.f})},Ao.prototype.b=function(t,e){return this.signInMethod==No.EMAIL_LINK_SIGN_IN_METHOD?tu(t,Aa,{idToken:e,email:this.a,oobCode:this.f}):tu(t,Va,{idToken:e,email:this.a,password:this.f})},Ao.prototype.c=function(t,e){return co(this.ka(t),e)},Ao.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},$r(No,{PROVIDER_ID:"password"}),$r(No,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),$r(No,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Ro.prototype.ka=function(t){return t.fb(Lo(this))},Ro.prototype.b=function(t,e){var n=Lo(this);return n.idToken=e,tu(t,$a,n)},Ro.prototype.c=function(t,e){var n=Lo(this);return n.operation="REAUTH",co(t=tu(t,Ja,n),e)},Ro.prototype.w=function(){var t={providerId:"phone"};return this.a.eb&&(t.verificationId=this.a.eb),this.a.cb&&(t.verificationCode=this.a.cb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},Fo.prototype.fb=function(t,e){var n=this.a.a;return ke(e.verify()).then(function(r){if("string"!=typeof r)throw new S("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":var i=g(t)?t.session:null,o=g(t)?t.phoneNumber:t;return(i&&i.type==so?i.Ha().then(function(t){return function(t,e){return tu(t,Ha,e).then(function(t){return t.phoneSessionInfo.sessionInfo})}(n,{idToken:t,phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:r}})}):i&&i.type==ao?i.Ha().then(function(e){return function(t,e){return tu(t,za,e).then(function(t){return t.phoneResponseInfo.sessionInfo})}(n,{mfaPendingCredential:e,mfaEnrollmentId:t.multiFactorHint&&t.multiFactorHint.uid||t.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})}):function(t,e){return tu(t,qa,e)}(n,{phoneNumber:o,recaptchaToken:r})).then(function(t){return"function"==typeof e.reset&&e.reset(),t},function(t){throw"function"==typeof e.reset&&e.reset(),t});default:throw new S("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}})},$r(Fo,{PROVIDER_ID:"phone"}),$r(Fo,{PHONE_SIGN_IN_METHOD:"phone"}),jo.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},jo.prototype.T=function(){return this.h},jo.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var Ho,zo=null;function Go(t){var e="unauthorized-domain",n=void 0,r=qn(t);t=r.a,"chrome-extension"==(r=r.c)?n=Ht("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=Ht("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",S.call(this,e,n)}function Zo(t,e,n){S.call(this,t,n),(t=e||{}).Jb&&Qr(this,"email",t.Jb),t.ea&&Qr(this,"phoneNumber",t.ea),t.credential&&Qr(this,"credential",t.credential),t.Zb&&Qr(this,"tenantId",t.Zb)}function Ko(t){if(t.code){var e=t.code||"";0==e.indexOf(x)&&(e=e.substring(x.length));var n={credential:Uo(t),Zb:t.tenantId};if(t.email)n.Jb=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new S(e,t.message||void 0);return new Zo(e,n,t.message)}return null}function Wo(){}function Yo(){}function Qo(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(i){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function $o(){}function Jo(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=b(this.qc,this),this.a.onerror=b(this.Sb,this),this.a.onprogress=b(this.rc,this),this.a.ontimeout=b(this.vc,this)}function Xo(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function ts(t,e,n){this.reset(t,e,n,void 0,void 0)}function es(t){this.f=t,this.b=this.c=this.a=null}function ns(t,e){this.name=t,this.value=e}E(Go,S),E(Zo,S),Zo.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&vt(t,e),t},Zo.prototype.toJSON=function(){return this.w()},Wo.prototype.c=null,E(Yo,Wo),Yo.prototype.a=function(){var t=Qo(this);return t?new ActiveXObject(t):new XMLHttpRequest},Yo.prototype.b=function(){var t={};return Qo(this)&&(t[0]=!0,t[1]=!0),t},Ho=new Yo,E($o,Wo),$o.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new Jo;throw Error("Unsupported browser")},$o.prototype.b=function(){return{}},(t=Jo.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Xo(this,4)},t.Sb=function(){this.status=500,this.response=this.responseText="",Xo(this,4)},t.vc=function(){this.Sb()},t.rc=function(){this.status=200,Xo(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},ts.prototype.a=null,ts.prototype.reset=function(t,e,n,r,i){r||C(),delete this.a},ns.prototype.toString=function(){return this.name};var rs=new ns("SEVERE",1e3),is=new ns("WARNING",900),os=new ns("CONFIG",700),ss=new ns("FINE",500);function as(t){return t.c?t.c:t.a?as(t.a):(F("Root logger has no level set."),null)}es.prototype.log=function(t,e,n){if(t.value>=as(this).value)for(p(e)&&(e=e()),t=new ts(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var us={},cs=null;function ls(t){var e;if(cs||(cs=new es(""),us[""]=cs,cs.c=os),!(e=us[t])){e=new es(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=ls(t.substr(0,n))).b||(n.b={}),n.b[r]=e,e.a=n,us[t]=e}return e}function hs(t,e){t&&t.log(ss,e,void 0)}function ds(t){this.f=t}function fs(t){bn.call(this),this.u=t,this.h=void 0,this.readyState=ps,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=ls("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}E(ds,Wo),ds.prototype.a=function(){return new fs(this.f)},ds.prototype.b=function(t){return function(){return t}}({}),E(fs,bn);var ps=0;function gs(t){t.c.read().then(t.pc.bind(t)).catch(t.Ua.bind(t))}function ms(t){t.readyState=4,t.g=null,t.c=null,t.m=null,vs(t)}function vs(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function ys(t){bn.call(this),this.headers=new xn,this.D=t||null,this.c=!1,this.C=this.a=null,this.h=this.R=this.l="",this.f=this.O=this.i=this.J=!1,this.g=0,this.s=null,this.m=_s,this.u=this.S=!1}(t=fs.prototype).open=function(t,e){if(this.readyState!=ps)throw this.abort(),Error("Error reopening a connection");this.s=t,this.f=e,this.readyState=1,vs(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.s,credentials:this.h,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.f,e)).then(this.uc.bind(this),this.Ua.bind(this))},t.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,ms(this)),this.readyState=ps},t.uc=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,vs(this)),this.a&&(this.readyState=3,vs(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.sc.bind(this),this.Ua.bind(this)):void 0!==a.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.m=new TextDecoder,gs(this)):t.text().then(this.tc.bind(this),this.Ua.bind(this)))))},t.pc=function(t){if(this.a){var e=this.m.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?ms(this):vs(this),3==this.readyState&&gs(this)}},t.tc=function(t){this.a&&(this.response=this.responseText=t,ms(this))},t.sc=function(t){this.a&&(this.response=t,ms(this))},t.Ua=function(t){var e=this.i;e&&e.log(is,"Failed to fetch url "+this.f,t instanceof Error?t:Error(t)),this.a&&ms(this)},t.setRequestHeader=function(t,e){this.l.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.i)&&t.log(is,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.i;return t&&t.log(is,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(fs.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(t){this.h=t?"include":"same-origin"}}),E(ys,bn);var _s="";ys.prototype.b=ls("goog.net.XhrIo");var ws=/^https?$/i,bs=["POST","PUT"];function Ts(t){return"content-type"==t.toLowerCase()}function Cs(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,Es(t),Ss(t)}function Es(t){t.J||(t.J=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Is(t){if(t.c&&void 0!==s)if(t.C[1]&&4==As(t)&&2==xs(t))hs(t.b,Ns(t,"Local request error detected and ignored"));else if(t.i&&4==As(t))In(t.Vb,0,t);else if(t.dispatchEvent("readystatechange"),4==As(t)){hs(t.b,Ns(t,"Request complete")),t.c=!1;try{var e,n=xs(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.l).match(On)[1]||null;if(!o&&a.self&&a.self.location){var u=a.self.location.protocol;o=u.substr(0,u.length-1)}i=!ws.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var c=2<As(t)?t.a.statusText:""}catch(l){hs(t.b,"Can not get status: "+l.message),c=""}t.h=c+" ["+xs(t)+"]",Es(t)}}finally{Ss(t)}}}function Ss(t,e){if(t.a){ks(t);var n=t.a,r=t.C[0]?h:null;t.a=null,t.C=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(i){(t=t.b)&&t.log(rs,"Problem encountered resetting onreadystatechange: "+i.message,void 0)}}}function ks(t){t.a&&t.u&&(t.a.ontimeout=null),t.s&&(a.clearTimeout(t.s),t.s=null)}function As(t){return t.a?t.a.readyState:0}function xs(t){try{return 2<As(t)?t.a.status:-1}catch(e){return-1}}function Ns(t,e){return e+" ["+t.R+" "+t.l+" "+xs(t)+"]"}function Ps(t){var e=Bs;this.g=[],this.u=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function Os(t,e,n){t.a=!0,t.c=n,t.f=!e,Fs(t)}function Rs(t){if(t.a){if(!t.v)throw new Ms(t);t.v=!1}}function Ds(t,e,n,r){t.g.push([e,n,r]),t.a&&Fs(t)}function Ls(t){return K(t.g,function(t){return p(t[1])})}function Fs(t){if(t.h&&t.a&&Ls(t)){var e=t.h,n=js[e];n&&(a.clearTimeout(n.a),delete js[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=t.g.shift(),o=i[0],s=i[1];if(i=i[2],o=t.f?s:o)try{var u=o.call(i||t.s,e);void 0!==u&&(t.f=t.f&&(u==e||u instanceof Error),t.c=e=u),(R(e)||"function"==typeof a.Promise&&e instanceof a.Promise)&&(r=!0,t.i=!0)}catch(c){e=c,t.f=!0,Ls(t)||(n=!0)}}t.c=e,r&&(u=b(t.m,t,!0),r=b(t.m,t,!1),e instanceof Ps?(Ds(e,u,r),e.C=!0):e.then(u,r)),n&&(e=new qs(e),js[e.a]=e,t.h=e.a)}function Ms(){D.call(this)}function Us(){D.call(this)}function qs(t){this.a=a.setTimeout(b(this.c,this),0),this.b=t}(t=ys.prototype).Ma=function(){void 0!==s&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",hs(this.b,Ns(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(hs(this.b,Ns(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Ss(this))},t.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),Ss(this,!0)),ys.ab.Da.call(this)},t.Vb=function(){this.xa||(this.O||this.i||this.f?Is(this):this.Jc())},t.Jc=function(){Is(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case _s:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(rs,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(e){return hs(this.b,"Can not get response: "+e.message),null}},Ps.prototype.cancel=function(t){if(this.a)this.c instanceof Ps&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(t=new Us(this),Rs(this),Os(this,!1,t))}},Ps.prototype.m=function(t,e){this.i=!1,Os(this,t,e)},Ps.prototype.then=function(t,e,n){var r,i,o=new we(function(t,e){r=t,i=e});return Ds(this,r,function(t){t instanceof Us?o.cancel():i(t)}),o.then(t,e,n)},Ps.prototype.$goog_Thenable=!0,E(Ms,D),Ms.prototype.message="Deferred has already fired",Ms.prototype.name="AlreadyCalledError",E(Us,D),Us.prototype.message="Deferred was canceled",Us.prototype.name="CanceledError",qs.prototype.c=function(){throw delete js[this.a],this.b};var js={};function Vs(t){var e={},n=e.document||document,r=St(t).toString(),i=pe(document,"SCRIPT"),o={Wb:i,Ma:void 0},s=new Ps(o),u=null,h=null!=e.timeout?e.timeout:5e3;return 0<h&&(u=window.setTimeout(function(){Hs(i,!0);var t=new Zs(Gs,"Timeout reached for loading script "+r);Rs(s),Os(s,!1,t)},h),o.Ma=u),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Hs(i,e.xd||!1,u),Rs(s),Os(s,!0,null))},i.onerror=function(){Hs(i,!0,u);var t=new Zs(zs,"Error while loading script "+r);Rs(s),Os(s,!1,t)},vt(o=e.attributes||{},{type:"text/javascript",charset:"UTF-8"}),ce(i,o),function(t,e){yt(t,"HTMLScriptElement"),t.src=St(e),(e=t.ownerDocument&&t.ownerDocument.defaultView)&&e!=a?e=l(e.document):(null===c&&(c=l(a.document)),e=c),e&&t.setAttribute("nonce",e)}(i,t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),s}function Bs(){if(this&&this.Wb){var t=this.Wb;t&&"SCRIPT"==t.tagName&&Hs(t,!0,this.Ma)}}function Hs(t,e,n){null!=n&&a.clearTimeout(n),t.onload=h,t.onerror=h,t.onreadystatechange=h,e&&window.setTimeout(function(){t&&t.parentNode&&t.parentNode.removeChild(t)},0)}var zs=0,Gs=1;function Zs(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),D.call(this,n),this.code=t}function Ks(t){this.f=t}function Ws(t,e,n){if(this.c=t,this.l=(t=e||{}).secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||$s,this.g=gt(t.secureTokenHeaders||Js),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=t.firebaseTimeout||Xs,this.a=gt(t.firebaseHeaders||ta),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==Tr(),!(n=a.XMLHttpRequest||n&&r.default.INTERNAL.node&&r.default.INTERNAL.node.XMLHttpRequest)&&!br())throw new S("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,this.f=br()?new ds(self):Cr()?new Ks(n):new $o,this.b=null}E(Zs,D),E(Ks,Wo),Ks.prototype.a=function(){return new this.f},Ks.prototype.b=function(){return{}};var Ys,Qs="idToken",$s=new Br(3e4,6e4),Js={"Content-Type":"application/x-www-form-urlencoded"},Xs=new Br(3e4,6e4),ta={"Content-Type":"application/json"};function ea(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function na(t,e){e&&(t.l=ra("https://securetoken.googleapis.com/v1/token",e),t.h=ra("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.i=ra("https://identitytoolkit.googleapis.com/v2/",e))}function ra(t,e){return t=qn(t),e=qn(e.url),t.f=t.a+t.f,Dn(t,e.c),t.a=e.a,Ln(t,e.g),t.toString()}function ia(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function oa(t,e,n,r,i,o,s){(function(){var t=xr();return!((t=Sr(t)!=Ir?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t||Yt&&se&&!(9<se))})()||br()?t=b(t.u,t):(Ys||(Ys=new we(function(t,e){!function(t,e){((window.gapi||{}).client||{}).request?t():(a[aa]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){Ds(t,null,e,void 0)}(Vs(kt(sa,{onload:aa})),function(){e(Error("CORS_UNSUPPORTED"))}))}(t,e)})),t=b(t.s,t)),t(e,n,r,i,o,s)}Ws.prototype.T=function(){return this.b},Ws.prototype.u=function(t,e,n,r,i,o){if(br()&&(void 0===a.fetch||void 0===a.Headers||void 0===a.Request))throw new S("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var s=new ys(this.f);if(o){s.g=Math.max(0,o);var u=setTimeout(function(){s.dispatchEvent("timeout")},o)}Tn(s,"complete",function(){u&&clearTimeout(u);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return hs(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(n){t=null}e&&e(t)}),Cn(s,"ready",function(){u&&clearTimeout(u),Ge(this)}),Cn(s,"timeout",function(){u&&clearTimeout(u),Ge(this),e&&e(null)}),function(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.R=n,t.J=!1,t.c=!0,t.a=t.D?t.D.a():Ho.a(),t.C=function(t){return t.c||(t.c=t.b())}(t.D?t.D:Ho),t.a.onreadystatechange=b(t.Vb,t);try{hs(t.b,Ns(t,"Opening Xhr")),t.O=!0,t.a.open(n,String(e),!0),t.O=!1}catch(s){return hs(t.b,Ns(t,"Error opening Xhr: "+s.message)),void Cs(t,s)}e=r||"";var o=new xn(t.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(f(t)||"string"==typeof t)z(t,e,void 0);else for(var n=An(t),r=kn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,function(t,e){o.set(e,t)}),i=function(t){t:{for(var e=Ts,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(o.Y()),r=a.FormData&&e instanceof a.FormData,!W(bs,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(t,e){this.a.setRequestHeader(e,t)},t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.S&&(t.a.withCredentials=t.S);try{ks(t),0<t.g&&(t.u=function(t){return Yt&&oe(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(t.a),hs(t.b,Ns(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.u)),t.u?(t.a.timeout=t.g,t.a.ontimeout=b(t.Ma,t)):t.s=In(t.Ma,t.g,t)),hs(t.b,Ns(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(s){hs(t.b,Ns(t,"Send error: "+s.message)),Cs(t,s)}}(s,t,n,r,i)};var sa=new _t(Ct,"https://apis.google.com/js/client.js?onload=%{onload}"),aa="__fcb"+Math.floor(1e6*Math.random()).toString();function ua(t){if("string"!=typeof(t=t.email)||!vr.test(t))throw new S("invalid-email")}function ca(t){"email"in t&&ua(t)}function la(t){if(!t[Qs]){if(t.mfaPendingCredential)throw new S("multi-factor-auth-required",null,gt(t));throw new S("internal-error")}}function ha(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new S("internal-error")}else{if(!t.sessionInfo)throw new S("missing-verification-id");if(!t.code)throw new S("missing-verification-code")}}Ws.prototype.s=function(t,e,n,r,i){var o=this;Ys.then(function(){window.gapi.client.setApiKey(o.c);var s=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(s),e&&e(t)}})}).o(function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})})},Ws.prototype.zb=function(){return tu(this,Ba,{})},Ws.prototype.Bb=function(t,e){return tu(this,ja,{idToken:t,email:e})},Ws.prototype.Cb=function(t,e){return tu(this,Va,{idToken:t,password:e})};var da={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function fa(t){if(!t.phoneVerificationInfo)throw new S("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new S("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new S("missing-verification-code")}function pa(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new S("internal-error")}function ga(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&Xn(t=new Yn(t.postBody),"nonce")&&(e.nonce=t.get("nonce"))),e}function ma(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Ko(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Ko(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Ko(t)):t.errorMessage&&(e=eu(t.errorMessage)),e)throw e;la(t)}function va(t,e){return e.returnIdpCredential=!0,tu(t,Ga,e)}function ya(t,e){return e.returnIdpCredential=!0,tu(t,Ka,e)}function _a(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,tu(t,Za,e)}function wa(t){if(!t.oobCode)throw new S("invalid-action-code")}(t=Ws.prototype).Db=function(t,e){var n={idToken:t},r=[];return ft(da,function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)}),r.length&&(n.deleteAttribute=r),tu(this,ja,n)},t.vb=function(t,e){return vt(t={requestType:"PASSWORD_RESET",email:t},e),tu(this,La,t)},t.wb=function(t,e){return vt(t={requestType:"EMAIL_SIGNIN",email:t},e),tu(this,Oa,t)},t.ub=function(t,e){return vt(t={requestType:"VERIFY_EMAIL",idToken:t},e),tu(this,Ra,t)},t.Eb=function(t,e,n){return vt(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),tu(this,Da,t)},t.fb=function(t){return tu(this,Qa,t)},t.nb=function(t,e){return tu(this,Ua,{oobCode:t,newPassword:e})},t.Ra=function(t){return tu(this,Ta,{oobCode:t})},t.jb=function(t){return tu(this,ba,{oobCode:t})};var ba={endpoint:"setAccountInfo",A:wa,Z:"email",B:!0},Ta={endpoint:"resetPassword",A:wa,G:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new S("internal-error")},B:!0},Ca={endpoint:"signupNewUser",A:function(t){if(ua(t),!t.password)throw new S("weak-password")},G:la,V:!0,B:!0},Ea={endpoint:"createAuthUri",B:!0},Ia={endpoint:"deleteAccount",N:["idToken"]},Sa={endpoint:"setAccountInfo",N:["idToken","deleteProvider"],A:function(t){if(!Array.isArray(t.deleteProvider))throw new S("internal-error")}},ka={endpoint:"emailLinkSignin",N:["email","oobCode"],A:ua,G:la,V:!0,B:!0},Aa={endpoint:"emailLinkSignin",N:["idToken","email","oobCode"],A:ua,G:la,V:!0},xa={endpoint:"accounts/mfaEnrollment:finalize",N:["idToken","phoneVerificationInfo"],A:fa,G:la,B:!0,Na:!0},Na={endpoint:"accounts/mfaSignIn:finalize",N:["mfaPendingCredential","phoneVerificationInfo"],A:fa,G:la,B:!0,Na:!0},Pa={endpoint:"getAccountInfo"},Oa={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new S("internal-error");ua(t)},Z:"email",B:!0},Ra={endpoint:"getOobConfirmationCode",N:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new S("internal-error")},Z:"email",B:!0},Da={endpoint:"getOobConfirmationCode",N:["idToken","newEmail","requestType"],A:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new S("internal-error")},Z:"email",B:!0},La={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new S("internal-error");ua(t)},Z:"email",B:!0},Fa={lb:!0,endpoint:"getProjectConfig",Ub:"GET"},Ma={lb:!0,endpoint:"getRecaptchaParam",Ub:"GET",G:function(t){if(!t.recaptchaSiteKey)throw new S("internal-error")}},Ua={endpoint:"resetPassword",A:wa,Z:"email",B:!0},qa={endpoint:"sendVerificationCode",N:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},ja={endpoint:"setAccountInfo",N:["idToken"],A:ca,V:!0},Va={endpoint:"setAccountInfo",N:["idToken"],A:function(t){if(ca(t),!t.password)throw new S("weak-password")},G:la,V:!0},Ba={endpoint:"signupNewUser",G:la,V:!0,B:!0},Ha={endpoint:"accounts/mfaEnrollment:start",N:["idToken","phoneEnrollmentInfo"],A:function(t){if(!t.phoneEnrollmentInfo)throw new S("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new S("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new S("missing-app-credential")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new S("internal-error")},B:!0,Na:!0},za={endpoint:"accounts/mfaSignIn:start",N:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new S("missing-app-credential")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new S("internal-error")},B:!0,Na:!0},Ga={endpoint:"verifyAssertion",A:pa,Ya:ga,G:ma,V:!0,B:!0},Za={endpoint:"verifyAssertion",A:pa,Ya:ga,G:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new S("user-not-found");if(t.errorMessage)throw eu(t.errorMessage);la(t)},V:!0,B:!0},Ka={endpoint:"verifyAssertion",A:function(t){if(pa(t),!t.idToken)throw new S("internal-error")},Ya:ga,G:ma,V:!0},Wa={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new S("invalid-custom-token")},G:la,V:!0,B:!0},Ya={endpoint:"verifyPassword",A:function(t){if(ua(t),!t.password)throw new S("wrong-password")},G:la,V:!0,B:!0},Qa={endpoint:"verifyPhoneNumber",A:ha,G:la,B:!0},$a={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new S("internal-error");ha(t)},G:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Ko(t);la(t)}},Ja={Hb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:ha,G:la,B:!0},Xa={endpoint:"accounts/mfaEnrollment:withdraw",N:["idToken","mfaEnrollmentId"],G:function(t){if(!!t[Qs]^!!t.refreshToken)throw new S("internal-error")},B:!0,Na:!0};function tu(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return!1}return!0}(n,e.N))return Ae(new S("internal-error"));var r,i=!!e.Na,o=e.Ub||"POST";return ke(n).then(e.A).then(function(){return e.V&&(n.returnSecureToken=!0),e.B&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),function(t,e,n,r,i,o,s){var a=qn(e+n);Mn(a,"key",t.c),s&&Mn(a,"cb",Date.now().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&Mn(a,c,i[c]);return new we(function(e,n){oa(t,a.toString(),function(t){t?t.error?n(nu(t,o||{})):e(t):n(new S("network-request-failed"))},r,u?void 0:rr(Mr(i)),t.a,t.v.get())})}(t,i?t.i:t.h,e.endpoint,o,n,e.Hb,e.lb||!1)}).then(function(t){return r=t,e.Ya?e.Ya(n,r):r}).then(e.G).then(function(){if(!e.Z)return r;if(!(e.Z in r))throw new S("internal-error");return r[e.Z]})}function eu(t){return nu({error:{errors:[{message:t}],code:400,message:t}})}function nu(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new S(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",vt(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new S(r[i],e);return!e&&t&&(e=Fr(t)),new S("internal-error",e)}function ru(t){this.b=t,this.a=null,this.rb=function(t){return(au||(au=new we(function(t,e){function n(){Vr(),Nr("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Vr(),e(Error("Network Error"))},timeout:ou.get()})}if(Nr("gapi.iframes.Iframe"))t();else if(Nr("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();a[r]=function(){Nr("gapi.load")?n():e(Error("Network Error"))},ke(Vs(r=kt(iu,{onload:r}))).o(function(){e(Error("Network Error"))})}}).o(function(t){throw au=null,t}))).then(function(){return new we(function(e,n){Nr("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:Nr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout(function(){n(Error("Network Error"))},su.get());r.ping(i).then(i,function(){n(Error("Network Error"))})})})})}(this)}var iu=new _t(Ct,"https://apis.google.com/js/api.js?onload=%{onload}"),ou=new Br(3e4,6e4),su=new Br(5e3,15e3),au=null;function uu(t,e,n,r){this.l=t,this.h=e,this.i=n,this.g=r,this.f=null,t=this.g?jn((t=qn(this.g.url)).c,t.a,t.g,"/emulator/auth/iframe"):jn("https",this.l,null,"/__/auth/iframe"),this.a=t,Mn(this.a,"apiKey",this.h),Mn(this.a,"appName",this.i),this.b=null,this.c=[]}function cu(t,e,n,r,i,o){this.u=t,this.s=e,this.c=n,this.m=r,this.v=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function lu(t){try{return r.default.app(t).auth().Ga()}catch(e){return[]}}function hu(t,e,n,r,i,o){this.s=t,this.g=e,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function du(t){var e=lr();return function(t){return tu(t,Fa,{}).then(function(t){return t.authorizedDomains||[]})}(t).then(function(t){t:{var n=qn(e),r=n.c;n=n.a;for(var i=0;i<t.length;i++){var o=t[i],s=n,a=r;if(0==o.indexOf("chrome-extension://")?s=qn(o).a==s&&"chrome-extension"==a:"http"!=a&&"https"!=a?s=!1:mr.test(o)?s=s==o:(o=o.split(".").join("\\."),s=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)),s){t=!0;break t}}t=!1}if(!t)throw new Go(lr())})}function fu(t){return t.m||(t.m=yr().then(function(){if(!t.u){var e=t.c,n=t.i,r=lu(t.b),i=new uu(t.s,t.g,t.b,t.f);i.f=e,i.b=n,i.c=J(r||[]),t.u=i.toString()}t.v=new ru(t.u),function(t){if(!t.v)throw Error("IfcHandler must be initialized!");!function(t,e){t.rb.then(function(){t.a.register("authEvent",e,Nr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}(t.v,function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=Vo(e.authEvent),n=0;n<t.h.length;n++)r=t.h[n](e)||r;return(n={}).status=r?"ACK":"ERROR",ke(n)}return n.status="ERROR",ke(n)})}(t)})),t.m}function pu(t){return t.l||(t.C=t.c?Ar(t.c,lu(t.b)):null,t.l=new Ws(t.g,O(t.i),t.C),t.f&&na(t.l,t.f)),t.l}function gu(t,e,n,r,i,o,s,a,u,c,l,h){return(t=new cu(t,e,n,r,i,h)).l=o,t.g=s,t.i=a,t.b=gt(u||null),t.f=c,t.yb(l).toString()}function mu(t){if(this.a=t||r.default.INTERNAL.reactNative&&r.default.INTERNAL.reactNative.AsyncStorage,!this.a)throw new S("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function vu(t){this.b=t,this.a={},this.f=b(this.c,this)}uu.prototype.toString=function(){return this.f?Mn(this.a,"v",this.f):Jn(this.a.b,"v"),this.b?Mn(this.a,"eid",this.b):Jn(this.a.b,"eid"),this.c.length?Mn(this.a,"fw",this.c.join(",")):Jn(this.a.b,"fw"),this.a.toString()},cu.prototype.yb=function(t){return this.h=t,this},cu.prototype.toString=function(){if(this.v){var t=qn(this.v.url);t=jn(t.c,t.a,t.g,"/emulator/auth/handler")}else t=jn("https",this.u,null,"/__/auth/handler");if(Mn(t,"apiKey",this.s),Mn(t,"appName",this.c),Mn(t,"authType",this.m),this.a.isOAuthProvider){var e=this.a;try{var n=r.default.app(this.c).auth().la()}catch(u){n=null}for(var i in e.ob=n,Mn(t,"providerId",this.a.providerId),e=Mr((n=this.a).Ib))e[i]=e[i].toString();i=n.Qc,e=gt(e);for(var o=0;o<i.length;o++){var s=i[o];s in e&&delete e[s]}n.pb&&n.ob&&!e[n.pb]&&(e[n.pb]=n.ob),pt(e)||Mn(t,"customParameters",Fr(e))}if("function"==typeof this.a.Qb&&(n=this.a.Qb()).length&&Mn(t,"scopes",n.join(",")),this.l?Mn(t,"redirectUrl",this.l):Jn(t.b,"redirectUrl"),this.g?Mn(t,"eventId",this.g):Jn(t.b,"eventId"),this.i?Mn(t,"v",this.i):Jn(t.b,"v"),this.b)for(var a in this.b)this.b.hasOwnProperty(a)&&!Un(t,a)&&Mn(t,a,this.b[a]);return this.h?Mn(t,"tid",this.h):Jn(t.b,"tid"),this.f?Mn(t,"eid",this.f):Jn(t.b,"eid"),(a=lu(this.c)).length&&Mn(t,"fw",a.join(",")),t.toString()},(t=hu.prototype).Ob=function(t,e,n){var r=new S("popup-closed-by-user"),i=new S("web-storage-unsupported"),o=this,s=!1;return this.ma().then(function(){(function(t){var e={type:"webStorageSupport"};return fu(t).then(function(){return function(t,e){return t.rb.then(function(){return new we(function(n){t.a.send(e.type,e,n,Nr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})})}(t.v,e)}).then(function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()})})(o).then(function(n){n||(t&&pr(t),e(i),s=!0)})}).o(function(){}).then(function(){if(!s)return function(t){return new we(function(e){return function n(){Sn(2e3).then(function(){if(t&&!t.closed)return n();e()})}()})}(t)}).then(function(){if(!s)return Sn(n).then(function(){e(r)})})},t.Xb=function(){var t=xr();return!Lr(t)&&!jr(t)},t.Tb=function(){return!1},t.Mb=function(t,e,n,r,i,o,s,a){if(!t)return Ae(new S("popup-blocked"));if(s&&!Lr())return this.ma().o(function(e){pr(t),i(e)}),r(),ke();this.a||(this.a=du(pu(this)));var u=this;return this.a.then(function(){var e=u.ma().o(function(e){throw pr(t),i(e),e});return r(),e}).then(function(){qo(n),s||hr(gu(u.s,u.g,u.b,e,n,null,o,u.c,void 0,u.i,a,u.f),t)}).o(function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t})},t.Nb=function(t,e,n,r){this.a||(this.a=du(pu(this)));var i=this;return this.a.then(function(){qo(e),hr(gu(i.s,i.g,i.b,t,e,lr(),n,i.c,void 0,i.i,r,i.f))}).o(function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t})},t.ma=function(){var t=this;return fu(this).then(function(){return t.v.rb}).o(function(){throw t.a=null,new S("network-request-failed")})},t.$b=function(){return!0},t.Ea=function(t){this.h.push(t)},t.Sa=function(t){Q(this.h,function(e){return e==t})},(t=mu.prototype).get=function(t){return ke(this.a.getItem(t)).then(function(t){return t&&Ur(t)})},t.set=function(t,e){return ke(this.a.setItem(t,Fr(e)))},t.U=function(t){return ke(this.a.removeItem(t))},t.ca=function(){},t.ia=function(){};var yu,_u=[];function wu(t,e,n){pt(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function bu(t){this.a=t}function Tu(t){this.c=t,this.b=!1,this.a=[]}function Cu(t,e,n,r){var i,o,s,a,u=n||{},c=null;if(t.b)return Ae(Error("connection_unavailable"));var l=r?800:50,h="undefined"!=typeof MessageChannel?new MessageChannel:null;return new we(function(n,r){h?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),h.port1.start(),s=setTimeout(function(){r(Error("unsupported_event"))},l),t.a.push(c={messageChannel:h,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(s),a=setTimeout(function(){r(Error("timeout"))},3e3)):"done"===t.data.status?(clearTimeout(a),void 0!==t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(s),clearTimeout(a),r(Error("invalid_response"))))}}),h.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[h.port2])):r(Error("connection_unavailable"))}).then(function(e){return Eu(t,c),e}).o(function(e){throw Eu(t,c),e})}function Eu(t,e){if(e){var n=e.messageChannel;n&&(n.port1.removeEventListener("message",e.onMessage),n.port1.close()),Q(t.a,function(t){return t==e})}}function Iu(){if(!xu())throw new S("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=a.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var t=this;br()&&self?(this.v=function(){var t=br()?self:null;if(z(_u,function(n){n.b==t&&(e=n)}),!e){var e=new vu(t);_u.push(e)}return e}(),wu(this.v,"keyChanged",function(e,n){return Du(t).then(function(e){return 0<e.length&&z(t.a,function(t){t(e)}),{keyProcessed:W(e,n.key)}})}),wu(this.v,"ping",function(){return ke(["keyChanged"])})):function(){var t=a.navigator;return t&&t.serviceWorker?ke().then(function(){return t.serviceWorker.ready}).then(function(t){return t.active||null}).o(function(){return null}):ke(null)}().then(function(e){(t.h=e)&&(t.g=new Tu(new bu(e)),Cu(t.g,"ping",null,!0).then(function(e){e[0].fulfilled&&W(e[0].value,"keyChanged")&&(t.s=!0)}).o(function(){}))})}function Su(t){return new we(function(e,n){var r=t.m.open("firebaseLocalStorageDb",1);r.onerror=function(t){try{t.preventDefault()}catch(e){}n(Error(t.target.error))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(e){n(e)}},r.onsuccess=function(r){(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(r):function(t){return new we(function(e,n){var r=t.m.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}})}(t).then(function(){return Su(t)}).then(function(t){e(t)}).o(function(t){n(t)})}})}function ku(t){return t.i||(t.i=Su(t)),t.i}function Au(t,e){var n=0;return new we(function r(i,o){ku(t).then(e).then(i).o(function(e){if(!(3<++n))return ku(t).then(function(e){return e.close(),t.i=void 0,r(i,o)}).o(function(t){o(t)});o(e)})})}function xu(){try{return!!a.indexedDB}catch(Kt){return!1}}function Nu(t){return t.objectStore("firebaseLocalStorage")}function Pu(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function Ou(t){return new we(function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}})}function Ru(t,e){return t.g&&t.h&&function(){var t=a.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.h?Cu(t.g,"keyChanged",{key:e},t.s).then(function(){}).o(function(){}):ke()}function Du(t){return ku(t).then(function(t){var e=Nu(Pu(t,!1));return e.getAll?Ou(e.getAll()):new we(function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}})}).then(function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=dr(t.c,n),t.c=n}return r})}function Lu(t){t.l&&t.l.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Fu(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=ke().then(function(){if(xu()){var t=qr(),r="__sak"+t;return yu||(yu=new Iu),(n=yu).set(r,t).then(function(){return n.get(r)}).then(function(e){if(e!==t)throw Error("indexedDB not supported!");return n.U(r)}).then(function(){return n}).o(function(){return e.c})}return e.c}).then(function(t){return e.type=t.type,t.ca(function(t){z(e.a,function(e){e(t)})}),t})}function Mu(){this.a={},this.type="inMemory"}function Uu(){if(!function(){var t="Node"==Tr();if(!(t=qu()||t&&r.default.INTERNAL.node&&r.default.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==Tr())throw new S("internal-error","The LocalStorage compatibility library was not found.");throw new S("web-storage-unsupported")}this.a=qu()||r.default.INTERNAL.node.localStorage,this.type="localStorage"}function qu(){try{var t=a.localStorage,e=qr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function ju(){this.type="nullStorage"}function Vu(){if(!function(){var t="Node"==Tr();if(!(t=Bu()||t&&r.default.INTERNAL.node&&r.default.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==Tr())throw new S("internal-error","The SessionStorage compatibility library was not found.");throw new S("web-storage-unsupported")}this.a=Bu()||r.default.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Bu(){try{var t=a.sessionStorage,e=qr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function Hu(){var t={};t.Browser=Zu,t.Node=Ku,t.ReactNative=Wu,t.Worker=Yu,this.a=t[Tr()]}vu.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];z(r,function(e){i.push(ke().then(function(){return e(t.origin,t.data.data)}))}),Ne(i).then(function(r){var i=[];z(r,function(t){i.push({fulfilled:t.Pb,value:t.value,reason:t.reason?t.reason.message:void 0})}),z(i,function(t){for(var e in t)void 0===t[e]&&delete t[e]}),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})})}},bu.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},Tu.prototype.close=function(){for(;0<this.a.length;)Eu(this,this.a[0]);this.b=!0},(t=Iu.prototype).set=function(t,e){var n=this,r=!1;return Au(this,function(e){return Ou((e=Nu(Pu(e,!0))).get(t))}).then(function(i){return Au(n,function(o){if(o=Nu(Pu(o,!0)),i)return i.value=e,Ou(o.put(i));n.b++,r=!0;var s={};return s.fbase_key=t,s.value=e,Ou(o.add(s))})}).then(function(){return n.c[t]=e,Ru(n,t)}).oa(function(){r&&n.b--})},t.get=function(t){return Au(this,function(e){return Ou(Nu(Pu(e,!1)).get(t))}).then(function(t){return t&&t.value})},t.U=function(t){var e=this,n=!1;return Au(this,function(r){return n=!0,e.b++,Ou(Nu(Pu(r,!0)).delete(t))}).then(function(){return delete e.c[t],Ru(e,t)}).oa(function(){n&&e.b--})},t.ca=function(t){0==this.a.length&&function(t){Lu(t),function e(){t.f=setTimeout(function(){t.l=Du(t).then(function(e){0<e.length&&z(t.a,function(t){t(e)})}).then(function(){e()}).o(function(t){"STOP_EVENT"!=t.message&&e()})},800)}()}(this),this.a.push(t)},t.ia=function(t){Q(this.a,function(e){return e==t}),0==this.a.length&&Lu(this)},(t=Fu.prototype).get=function(t){return this.b.then(function(e){return e.get(t)})},t.set=function(t,e){return this.b.then(function(n){return n.set(t,e)})},t.U=function(t){return this.b.then(function(e){return e.U(t)})},t.ca=function(t){this.a.push(t)},t.ia=function(t){Q(this.a,function(e){return e==t})},(t=Mu.prototype).get=function(t){return ke(this.a[t])},t.set=function(t,e){return this.a[t]=e,ke()},t.U=function(t){return delete this.a[t],ke()},t.ca=function(){},t.ia=function(){},(t=Uu.prototype).get=function(t){var e=this;return ke().then(function(){return Ur(e.a.getItem(t))})},t.set=function(t,e){var n=this;return ke().then(function(){var r=Fr(e);null===r?n.U(t):n.a.setItem(t,r)})},t.U=function(t){var e=this;return ke().then(function(){e.a.removeItem(t)})},t.ca=function(t){a.window&&cn(a.window,"storage",t)},t.ia=function(t){a.window&&dn(a.window,"storage",t)},(t=ju.prototype).get=function(){return ke(null)},t.set=function(){return ke()},t.U=function(){return ke()},t.ca=function(){},t.ia=function(){},(t=Vu.prototype).get=function(t){var e=this;return ke().then(function(){return Ur(e.a.getItem(t))})},t.set=function(t,e){var n=this;return ke().then(function(){var r=Fr(e);null===r?n.U(t):n.a.setItem(t,r)})},t.U=function(t){var e=this;return ke().then(function(){e.a.removeItem(t)})},t.ca=function(){},t.ia=function(){};var zu,Gu,Zu={F:Uu,bb:Vu},Ku={F:Uu,bb:Vu},Wu={F:mu,bb:ju},Yu={F:Uu,bb:ju},Qu={rd:"local",NONE:"none",td:"session"};function $u(){var t=!(jr(xr())||!wr()),e=Lr(),n=Pr();this.m=t,this.h=e,this.l=n,this.a={},zu||(zu=new Hu),t=zu;try{this.g=!cr()&&Gr()||!a.indexedDB?new t.a.F:new Fu(br()?new Mu:new t.a.F)}catch(r){this.g=new Mu,this.h=!0}try{this.i=new t.a.bb}catch(r){this.i=new Mu}this.v=new Mu,this.f=b(this.Yb,this),this.b={}}function Ju(){return Gu||(Gu=new $u),Gu}function Xu(t,e){switch(e){case"session":return t.i;case"none":return t.v;default:return t.g}}function tc(t,e){return"firebase:"+t.name+(e?":"+e:"")}function ec(t,e,n){return n=tc(e,n),"local"==e.F&&(t.b[n]=null),Xu(t,e.F).U(n)}function nc(t){t.c&&(clearInterval(t.c),t.c=null)}function rc(t){this.a=t,this.b=Ju()}(t=$u.prototype).get=function(t,e){return Xu(this,t.F).get(tc(t,e))},t.set=function(t,e,n){var r=tc(t,n),i=this,o=Xu(this,t.F);return o.set(r,e).then(function(){return o.get(r)}).then(function(e){"local"==t.F&&(i.b[r]=e)})},t.addListener=function(t,e,n){t=tc(t,e),this.l&&(this.b[t]=a.localStorage.getItem(t)),pt(this.a)&&(Xu(this,"local").ca(this.f),this.h||(cr()||!Gr())&&a.indexedDB||!this.l||function(t){nc(t),t.c=setInterval(function(){for(var e in t.a){var n=a.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new $e({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Yb(n))}},1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=tc(t,e),this.a[t]&&(Q(this.a[t],function(t){return t==n}),0==this.a[t].length&&delete this.a[t]),pt(this.a)&&(Xu(this,"local").ia(this.f),nc(this))},t.Yb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=a.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.mb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?Xu(this,"local").ia(this.f):nc(this),this.m)if(n=a.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?a.localStorage.setItem(e,r):a.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===a.localStorage.getItem(e)||(o.b[e]=a.localStorage.getItem(e),o.mb(e))},Yt&&se&&10==se&&a.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else z(t,b(this.mb,this))},t.mb=function(t){this.a[t]&&z(this.a[t],function(t){t()})};var ic,oc={name:"authEvent",F:"local"};function sc(){this.a=Ju()}function ac(t,e){this.b=uc,this.f=a.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=a.Int32Array?new Int32Array(64):Array(64),void 0===ic&&(ic=a.Int32Array?new Int32Array(gc):gc),this.reset()}E(ac,function(){this.b=-1});for(var uc=64,cc=uc-1,lc=[],hc=0;hc<cc;hc++)lc[hc]=0;var dc=$(128,lc);function fc(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){var o=(0|n[e-16])+(((i=0|n[e-15])>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,s=(0|n[e-7])+(((r=0|n[e-2])>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+s|0}r=0|t.a[0],i=0|t.a[1];var a=0|t.a[2],u=0|t.a[3],c=0|t.a[4],l=0|t.a[5],h=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var d=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&a^i&a)|0;s=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((s=(s=c&l^~c&h)+(0|ic[e])|0)+(0|n[e])|0)|0,o=h,h=l,l=c,c=u+s|0,u=a,a=i,i=r,r=s+d|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+a|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+l|0,t.a[6]=t.a[6]+h|0,t.a[7]=t.a[7]+o|0}function pc(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"==typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(fc(t),i=0);else{if(!f(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(fc(t),i=0)}}t.c=i,t.g+=n}ac.prototype.reset=function(){this.g=this.c=0,this.a=a.Int32Array?new Int32Array(this.h):J(this.h)};var gc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function mc(){ac.call(this,8,vc)}E(mc,ac);var vc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function yc(t,e,n,r,i,o){this.v=t,this.i=e,this.l=n,this.m=r||null,this.u=i||null,this.s=o,this.h=e+":"+n,this.C=new sc,this.g=new rc(this.h),this.f=null,this.b=[],this.a=this.c=null}function _c(t){return new S("invalid-cordova-configuration",t)}function wc(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(r){}}function bc(t){return t.f||(t.f=t.ma().then(function(){return new we(function(e){t.Ea(function n(r){return e(r),t.Sa(n),!1}),function(t){function e(e){r=!0,i&&i.cancel(),Tc(t).then(function(r){var i=n;if(r&&e&&e.url){var o=null;-1!=(i=io(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=Ur(Un(o=qn(i),"firebaseError")||null))?k(o):null)?new jo(r.c,r.b,null,null,o,null,r.T()):new jo(r.c,r.b,i,r.f,null,null,r.T())),i=o||n}wc(t,i)})}var n=new jo("unknown",null,null,null,new S("no-auth-event")),r=!1,i=Sn(500).then(function(){return Tc(t).then(function(){r||wc(t,n)})}),o=a.handleOpenURL;a.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(Nr("BuildInfo.packageName",a).toLowerCase()+"://")&&e({url:t}),"function"==typeof o)try{o(t)}catch(n){console.error(n)}},zo||(zo=new Bo),function(t){var e=zo;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"==typeof(t=Nr("universalLinks.subscribe",a))&&t(null,e.b))}(e)}(t)})})),t.f}function Tc(t){var e=null;return function(t){return t.b.get(oc,t.a).then(function(t){return Vo(t)})}(t.g).then(function(n){return e=n,ec((n=t.g).b,oc,n.a)}).then(function(){return e})}function Cc(t){this.a=t,this.b=Ju()}(t=yc.prototype).ma=function(){return this.Ia?this.Ia:this.Ia=(_r(void 0)?yr().then(function(){return new we(function(t,e){var n=a.document,r=setTimeout(function(){e(Error("Cordova framework is not ready."))},1e3);n.addEventListener("deviceready",function(){clearTimeout(r),t()},!1)})}):Ae(Error("Cordova must run in an Android or iOS file scheme."))).then(function(){if("function"!=typeof Nr("universalLinks.subscribe",a))throw _c("cordova-universal-links-plugin-fix is not installed");if(void 0===Nr("BuildInfo.packageName",a))throw _c("cordova-plugin-buildinfo is not installed");if("function"!=typeof Nr("cordova.plugins.browsertab.openUrl",a))throw _c("cordova-plugin-browsertab is not installed");if("function"!=typeof Nr("cordova.InAppBrowser.open",a))throw _c("cordova-plugin-inappbrowser is not installed")},function(){throw new S("cordova-not-ready")})},t.Ob=function(t,e){return e(new S("operation-not-supported-in-this-environment")),ke()},t.Mb=function(){return Ae(new S("operation-not-supported-in-this-environment"))},t.$b=function(){return!1},t.Xb=function(){return!0},t.Tb=function(){return!0},t.Nb=function(t,e,n,r){if(this.c)return Ae(new S("redirect-operation-pending"));var i=this,o=a.document,s=null,u=null,c=null,l=null;return this.c=ke().then(function(){return qo(e),bc(i)}).then(function(){return function(t,e,n,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),s=new jo(e,r,null,o,new S("no-auth-event"),null,i),u=Nr("BuildInfo.packageName",a);if("string"!=typeof u)throw new S("invalid-cordova-configuration");var c=Nr("BuildInfo.displayName",a),l={};if(xr().toLowerCase().match(/iphone|ipad|ipod/))l.ibi=u;else{if(!xr().toLowerCase().match(/android/))return Ae(new S("operation-not-supported-in-this-environment"));l.apn=u}c&&(l.appDisplayName=c),o=function(t){var e=new mc;pc(e,t),t=[];var n=8*e.g;pc(e,dc,56>e.c?56-e.c:e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(fc(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return Z(t,function(t){return 1<(t=t.toString(16)).length?t:"0"+t}).join("")}(t)}(o),l.sessionId=o;var h=gu(t.v,t.i,t.l,e,n,null,r,t.m,l,t.u,i,t.s);return t.ma().then(function(){var e=t.h;return t.C.a.set(oc,s.w(),e)}).then(function(){var e=Nr("cordova.plugins.browsertab.isAvailable",a);if("function"!=typeof e)throw new S("invalid-cordova-configuration");var n=null;e(function(e){if(e){if("function"!=typeof(n=Nr("cordova.plugins.browsertab.openUrl",a)))throw new S("invalid-cordova-configuration");n(h)}else{if("function"!=typeof(n=Nr("cordova.InAppBrowser.open",a)))throw new S("invalid-cordova-configuration");e=xr(),t.a=n(h,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}})})}(i,t,e,n,r)}).then(function(){return new we(function(t,e){u=function(){var e=Nr("cordova.plugins.browsertab.close",a);return t(),"function"==typeof e&&e(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(u),l=function(){Hr()&&c()},o.addEventListener("resume",c=function(){s||(s=Sn(2e3).then(function(){e(new S("redirect-cancelled-by-user"))}))},!1),xr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",l,!1)}).o(function(t){return Tc(i).then(function(){throw t})})}).oa(function(){c&&o.removeEventListener("resume",c,!1),l&&o.removeEventListener("visibilitychange",l,!1),s&&s.cancel(),u&&i.Sa(u),i.c=null})},t.Ea=function(t){this.b.push(t),bc(this).o(function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new jo("unknown",null,null,null,new S("no-auth-event")),t(e))})},t.Sa=function(t){Q(this.b,function(e){return e==t})};var Ec={name:"pendingRedirect",F:"session"};function Ic(t){return ec(t.b,Ec,t.a)}function Sc(t,e,n,r){this.i={},this.u=0,this.D=t,this.v=e,this.m=n,this.J=r,this.h=[],this.f=!1,this.l=b(this.s,this),this.b=new Vc,this.C=new Zc,this.g=new Cc(qc(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=kc(this.D,this.v,this.m,A,this.J)}function kc(t,e,n,i,o){var s=r.default.SDK_VERSION||null;return _r()?new yc(t,e,n,s,i,o):new hu(t,e,n,s,i,o)}function Ac(t){t.f||(t.f=!0,t.a.Ea(t.l));var e=t.a;return t.a.ma().o(function(n){throw t.a==e&&t.reset(),n})}function xc(t){t.a.Xb()&&Ac(t).o(function(e){var n=new jo("unknown",null,null,null,new S("operation-not-supported-in-this-environment"));Lc(e)&&t.s(n)}),t.a.Tb()||Bc(t.b)}function Nc(t,e){W(t.h,e)||t.h.push(e),t.f||function(t){return t.b.get(Ec,t.a).then(function(t){return"pending"==t})}(t.g).then(function(e){e?Ic(t.g).then(function(){Ac(t).o(function(e){var n=new jo("unknown",null,null,null,new S("operation-not-supported-in-this-environment"));Lc(e)&&t.s(n)})}):xc(t)}).o(function(){xc(t)})}function Pc(t,e){Q(t.h,function(t){return t==e})}Sc.prototype.reset=function(){this.f=!1,this.a.Sa(this.l),this.a=kc(this.D,this.v,this.m,null,this.J),this.i={}},Sc.prototype.s=function(t){if(!t)throw new S("invalid-auth-event");if(6e5<=Date.now()-this.u&&(this.i={},this.u=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Fb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.u=Date.now())),e=!0;break}}return Bc(this.b),e};var Oc=new Br(2e3,1e4),Rc=new Br(3e4,6e4);function Dc(t,e,n,r,i,o,s){return t.a.Mb(e,n,r,function(){t.f||(t.f=!0,t.a.Ea(t.l))},function(){t.reset()},i,o,s)}function Lc(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function Fc(t,e,n,r,i){var o;return function(t){return t.b.set(Ec,"pending",t.a)}(t.g).then(function(){return t.a.Nb(e,n,r,i).o(function(e){if(Lc(e))throw new S("operation-not-supported-in-this-environment");return o=e,Ic(t.g).then(function(){throw o})}).then(function(){return t.a.$b()?new we(function(){}):Ic(t.g).then(function(){return t.qa()}).then(function(){}).o(function(){})})})}function Mc(t,e,n,r,i){return t.a.Ob(r,function(t){e.na(n,null,t,i)},Oc.get())}Sc.prototype.qa=function(){return this.b.qa()};var Uc={};function qc(t,e,n){return t=t+":"+e,n&&(t=t+":"+n.url),t}function jc(t,e,n,r){var i=qc(e,n,r);return Uc[i]||(Uc[i]=new Sc(t,e,n,r)),Uc[i]}function Vc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Bc(t){t.g||(t.g=!0,Gc(t,!1,null,null))}function Hc(t){t.g&&!t.i&&Gc(t,!1,null,null)}function zc(t,e){if(t.b=function(){return ke(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function Gc(t,e,n,r){e?r?function(t,e){if(t.b=function(){return Ae(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):zc(t,n):zc(t,{user:null}),t.f=[],t.c=[]}function Zc(){}function Kc(){this.ib=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.ib},set:function(t){this.ib=t},enumerable:!1})}function Wc(t,e){this.a=e,Qr(this,"verificationId",t)}function Yc(t,e,n,r){return new Fo(t).fb(e,n).then(function(t){return new Wc(t,r)})}function Qc(t){var e=zi(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new S("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");$r(this,{token:t,expirationTime:zr(1e3*e.exp),authTime:zr(1e3*e.auth_time),issuedAtTime:zr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function $c(t,e,n){var r=e&&e[Xc];if(!r)throw new S("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=gt(e),this.g=n,this.c=new oo(null,r),this.b=[];var i=this;z(e[Jc]||[],function(t){(t=ei(t))&&i.b.push(t)}),Qr(this,"auth",this.a),Qr(this,"session",this.c),Qr(this,"hints",this.b)}Vc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Vc.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(Gc(this,!0,null,t.a),ke()):e.Fa(n,r)?function(t,e,n){n=n.Fa(e.c,e.b);var r=e.g,i=e.f,o=e.i,s=e.T(),a=!!e.c.match(/Redirect$/);n(r,i,s,o).then(function(e){Gc(t,a,e,null)}).o(function(e){Gc(t,a,null,e)})}(this,t,e):Ae(new S("invalid-auth-event")):(Gc(this,!1,null,null),ke())}else Ae(new S("invalid-auth-event"))},Vc.prototype.qa=function(){var t=this;return new we(function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new S("timeout");t.a&&t.a.cancel(),t.a=Sn(Rc.get()).then(function(){t.b||(t.g=!0,Gc(t,!0,null,e))})}(t))})},Zc.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.na(t.c,null,t.a,t.b),ke()):e.Fa(n,r)?function(t,e){var n=t.b,r=t.c;e.Fa(r,n)(t.g,t.f,t.T(),t.i).then(function(t){e.na(r,t,null,n)}).o(function(t){e.na(r,null,t,n)})}(t,e):Ae(new S("invalid-auth-event"))}else Ae(new S("invalid-auth-event"))},Wc.prototype.confirm=function(t){return t=Mo(this.verificationId,t),this.a(t)};var Jc="mfaInfo",Xc="mfaPendingCredential";function tl(t,e,n,r){S.call(this,"multi-factor-auth-required",r,e),this.b=new $c(t,e,n),Qr(this,"resolver",this.b)}function el(t,e,n){if(t&&g(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new tl(e,t.serverResponse,n,t.message)}catch(r){}return null}function nl(){}function rl(t){Qr(this,"factorId",t.fa),this.a=t}function il(t){if(rl.call(this,t),this.a.fa!=Fo.PROVIDER_ID)throw new S("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function ol(t,e){for(var n in Qe.call(this,t),e)this[n]=e[n]}function sl(t,e){this.a=t,this.b=[],this.c=b(this.yc,this),cn(this.a,"userReloaded",this.c);var n=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&z(e.multiFactor.enrolledFactors,function(t){var e=null,r={};if(t){t.uid&&(r[ii]=t.uid),t.displayName&&(r[ni]=t.displayName),t.enrollmentTime&&(r[ri]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(r[oi]=t.phoneNumber);try{e=new si(r)}catch(i){}t=e}else t=null;t&&n.push(t)}),al(this,n)}function al(t,e){t.b=e,Qr(t,"enrolledFactors",e)}function ul(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function cl(t,e){t.stop(),t.b=Sn(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(t,e)).then(function(){return function(){var t=a.document,e=null;return Hr()||!t?ke():new we(function(n){e=function(){Hr()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)}).o(function(n){throw t.removeEventListener("visibilitychange",e,!1),n})}()}).then(function(){return t.h()}).then(function(){cl(t,!0)}).o(function(e){t.i(e)&&cl(t,!1)})}function ll(t){this.f=t,this.b=this.a=null,this.c=Date.now()}function hl(t,e){void 0===e&&(e=t.b?(e=t.b).a-e.g:0),t.c=Date.now()+1e3*e}function dl(t,e){t.b=Hi(e[Qs]||""),t.a=e.refreshToken,hl(t,void 0!==(e=e.expiresIn)?Number(e):void 0)}function fl(t,e){this.a=t||null,this.b=e||null,$r(this,{lastSignInTime:zr(e||null),creationTime:zr(t||null)})}function pl(t,e,n,r,i,o){$r(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function gl(t,e,n){this.J=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null;var i=r.default.SDK_VERSION?Ar(r.default.SDK_VERSION):null;this.a=new Ws(this.l,O(A),i),t.emulatorConfig&&na(this.a,t.emulatorConfig),this.b=new ll(this.a),Cl(this,e[Qs]),dl(this.b,e),Qr(this,"refreshToken",this.b.a),Sl(this,n||{}),bn.call(this),this.R=!1,this.s&&Or()&&(this.i=jc(this.s,this.l,this.m)),this.S=[],this.h=null,this.u=function(t){return new ul(function(){return t.I(!0)},function(t){return!(!t||"auth/network-request-failed"!=t.code)},function(){var e=t.b.c-Date.now()-3e5;return 0<e?e:0})}(this),this.aa=b(this.hb,this);var o=this;this.ya=null,this.Oa=function(t){o.wa(t.h)},this.ja=null,this.Aa=function(t){na(o.a,t.c)},this.X=null,this.$=[],this.Ba=function(t){yl(o,t.f)},this.ba=null,this.O=new sl(this,n),Qr(this,"multiFactor",this.O)}function ml(t,e){t.ja&&dn(t.ja,"languageCodeChanged",t.Oa),(t.ja=e)&&cn(e,"languageCodeChanged",t.Oa)}function vl(t,e){t.X&&dn(t.X,"emulatorConfigChanged",t.Aa),(t.X=e)&&cn(e,"emulatorConfigChanged",t.Aa)}function yl(t,e){t.$=e,ia(t.a,r.default.SDK_VERSION?Ar(r.default.SDK_VERSION,t.$):null)}function _l(t,e){t.ba&&dn(t.ba,"frameworkChanged",t.Ba),(t.ba=e)&&cn(e,"frameworkChanged",t.Ba)}function wl(t){try{return r.default.app(t.m).auth()}catch(e){throw new S("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function bl(t){t.D||t.u.b||(t.u.start(),dn(t,"tokenChanged",t.aa),cn(t,"tokenChanged",t.aa))}function Tl(t){dn(t,"tokenChanged",t.aa),t.u.stop()}function Cl(t,e){t.za=e,Qr(t,"_lat",e)}function El(t){for(var e=[],n=0;n<t.S.length;n++)e.push(t.S[n](t));return Ne(e).then(function(){return t})}function Il(t){t.i&&!t.R&&(t.R=!0,Nc(t.i,t))}function Sl(t,e){$r(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new fl(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function kl(){}function Al(t){return ke().then(function(){if(t.D)throw new S("app-deleted")})}function xl(t){return Z(t.providerData,function(t){return t.providerId})}function Nl(t,e){e&&(Pl(t,e.providerId),t.providerData.push(e))}function Pl(t,e){Q(t.providerData,function(t){return t.providerId==e})}function Ol(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Qr(t,e,n)}function Rl(t,e){t!=e&&($r(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),Qr(t,"metadata",e.metadata?function(t){return new fl(t.a,t.b)}(e.metadata):new fl),z(e.providerData,function(e){Nl(t,e)}),function(t,e){t.b=e.b,t.a=e.a,t.c=e.c}(t.b,e.b),Qr(t,"refreshToken",t.b.a),al(t.O,e.O.b))}function Dl(t){return t.I().then(function(e){var n=t.isAnonymous;return function(t,e){return tu(t.a,Pa,{idToken:e}).then(b(t.Kc,t))}(t,e).then(function(){return n||Ol(t,"isAnonymous",!1),e})})}function Ll(t,e){e[Qs]&&t.za!=e[Qs]&&(dl(t.b,e),t.dispatchEvent(new ol("tokenChanged")),Cl(t,e[Qs]),Ol(t,"refreshToken",t.b.a))}function Fl(t,e){return Dl(t).then(function(){if(W(xl(t),e))return El(t).then(function(){throw new S("provider-already-linked")})})}function Ml(t,e,n){return Jr({user:t,credential:Uo(e),additionalUserInfo:e=Yi(e),operationType:n})}function Ul(t,e){return Ll(t,e),t.reload().then(function(){return t})}function ql(t,e,n,i,o){if(!Or())return Ae(new S("operation-not-supported-in-this-environment"));if(t.h&&!o)return Ae(t.h);var s=Wi(n.providerId),a=qr(t.uid+":::"),u=null;(!Lr()||wr())&&t.s&&n.isOAuthProvider&&(u=gu(t.s,t.l,t.m,e,n,null,a,r.default.SDK_VERSION||null,null,null,t.tenantId));var c=gr(u,s&&s.ua,s&&s.ta);return i=i().then(function(){if(Vl(t),!o)return t.I().then(function(){})}).then(function(){return Dc(t.i,c,e,n,a,!!u,t.tenantId)}).then(function(){return new we(function(n,r){t.na(e,null,new S("cancelled-popup-request"),t.g||null),t.f=n,t.C=r,t.g=a,t.c=Mc(t.i,t,e,c,a)})}).then(function(t){return c&&pr(c),t?Jr(t):null}).o(function(t){throw c&&pr(c),t}),Bl(t,i,o)}function jl(t,e,n,r,i){if(!Or())return Ae(new S("operation-not-supported-in-this-environment"));if(t.h&&!i)return Ae(t.h);var o=null,s=qr(t.uid+":::");return r=r().then(function(){if(Vl(t),!i)return t.I().then(function(){})}).then(function(){return t.ga=s,El(t)}).then(function(e){return t.ha&&(e=(e=t.ha).b.set(Gl,t.w(),e.a)),e}).then(function(){return Fc(t.i,e,n,s,t.tenantId)}).o(function(e){if(o=e,t.ha)return Zl(t.ha);throw o}).then(function(){if(o)throw o}),Bl(t,r,i)}function Vl(t){if(!t.i||!t.R){if(t.i&&!t.R)throw new S("internal-error");throw new S("auth-domain-config-required")}}function Bl(t,e,n){var r=function(t,e,n){return t.h&&!n?(e.cancel(),Ae(t.h)):e.o(function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.h||t.dispatchEvent(new ol("userInvalidated")),t.h=e),e})}(t,e,n);return t.J.push(r),r.oa(function(){Y(t.J,r)}),r.o(function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=el(e.w(),wl(t),b(t.jc,t))),n||e})}function Hl(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[Qs]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=t.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var i=new gl(e,n,t);return t.providerData&&z(t.providerData,function(t){t&&Nl(i,Jr(t))}),t.redirectEventId&&(i.ga=t.redirectEventId),i}function zl(t){this.a=t,this.b=Ju()}$c.prototype.Rc=function(t){var e=this;return t.sb(this.a.a,this.c).then(function(t){var n=gt(e.f);return delete n[Jc],delete n[Xc],vt(n,t),e.g(n)})},E(tl,S),nl.prototype.sb=function(t,e,n){return e.type==so?function(t,e,n,r){return n.Ha().then(function(n){return n={idToken:n},void 0!==r&&(n.displayName=r),vt(n,{phoneVerificationInfo:Lo(t.a)}),tu(e,xa,n)})}(this,t,e,n):function(t,e,n){return n.Ha().then(function(n){return vt(n={mfaPendingCredential:n},{phoneVerificationInfo:Lo(t.a)}),tu(e,Na,n)})}(this,t,e)},E(rl,nl),E(il,rl),E(ol,Qe),(t=sl.prototype).yc=function(t){al(this,function(t){var e=[];return z(t.mfaInfo||[],function(t){(t=ei(t))&&e.push(t)}),e}(t.hd))},t.Rb=function(){return this.a.I().then(function(t){return new oo(t,null)})},t.fc=function(t,e){var n=this,r=this.a.a;return this.Rb().then(function(n){return t.sb(r,n,e)}).then(function(t){return Ll(n.a,t),n.a.reload()})},t.bd=function(t){var e=this,n="string"==typeof t?t:t.uid,r=this.a.a;return this.a.I().then(function(t){return tu(r,Xa,{idToken:t,mfaEnrollmentId:n})}).then(function(t){var r=G(e.b,function(t){return t.uid!=n});return al(e,r),Ll(e.a,t),e.a.reload().o(function(t){if("auth/user-token-expired"!=t.code)throw t})})},t.w=function(){return{multiFactor:{enrolledFactors:Z(this.b,function(t){return t.w()})}}},ul.prototype.start=function(){this.a=this.c,cl(this,!0)},ul.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},ll.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},ll.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?Ae(new S("user-token-expired")):t||!this.b||Date.now()>this.c-3e4?this.a?function(t,e){return function(t,e){return new we(function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?oa(t,t.l+"?key="+encodeURIComponent(t.c),function(t){t?t.error?r(nu(t)):t.access_token&&t.refresh_token?n(t):r(new S("internal-error")):r(new S("network-request-failed"))},"POST",$n(e).toString(),t.g,t.m.get()):r(new S("internal-error"))})}(t.f,e).then(function(e){return t.b=Hi(e.access_token),t.a=e.refresh_token,hl(t,e.expires_in),{accessToken:t.b.toString(),refreshToken:t.a}}).o(function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e})}(this,{grant_type:"refresh_token",refresh_token:this.a}):ke(null):ke({accessToken:this.b.toString(),refreshToken:this.a})},fl.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},E(gl,bn),gl.prototype.wa=function(t){this.ya=t,ea(this.a,t)},gl.prototype.la=function(){return this.ya},gl.prototype.Ga=function(){return J(this.$)},gl.prototype.hb=function(){this.u.b&&(this.u.stop(),this.u.start())},Qr(gl.prototype,"providerId","firebase"),(t=gl.prototype).reload=function(){var t=this;return Bl(this,Al(this).then(function(){return Dl(t).then(function(){return El(t)}).then(kl)}))},t.oc=function(t){return this.I(t).then(function(t){return new Qc(t)})},t.I=function(t){var e=this;return Bl(this,Al(this).then(function(){return e.b.getToken(t)}).then(function(t){if(!t)throw new S("internal-error");return t.accessToken!=e.za&&(Cl(e,t.accessToken),e.dispatchEvent(new ol("tokenChanged"))),Ol(e,"refreshToken",t.refreshToken),t.accessToken}))},t.Kc=function(t){if(!(t=t.users)||!t.length)throw new S("internal-error");Sl(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?Z(t,function(t){return new pl(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)}):[]}(t),n=0;n<e.length;n++)Nl(this,e[n]);Ol(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new ol("userReloaded",{hd:t}))},t.Lc=function(t){return Wr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.tb(t)},t.tb=function(t){var e=this,n=null;return Bl(this,t.c(this.a,this.uid).then(function(t){return Ll(e,t),n=Ml(e,t,"reauthenticate"),e.h=null,e.reload()}).then(function(){return n}),!0)},t.Cc=function(t){return Wr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.qb(t)},t.qb=function(t){var e=this,n=null;return Bl(this,Fl(this,t.providerId).then(function(){return e.I()}).then(function(n){return t.b(e.a,n)}).then(function(t){return n=Ml(e,t,"link"),Ul(e,t)}).then(function(){return n}))},t.Dc=function(t,e){var n=this;return Bl(this,Fl(this,"phone").then(function(){return Yc(wl(n),t,e,b(n.qb,n))}))},t.Mc=function(t,e){var n=this;return Bl(this,ke().then(function(){return Yc(wl(n),t,e,b(n.tb,n))}),!0)},t.Bb=function(t){var e=this;return Bl(this,this.I().then(function(n){return e.a.Bb(n,t)}).then(function(t){return Ll(e,t),e.reload()}))},t.ed=function(t){var e=this;return Bl(this,this.I().then(function(n){return t.b(e.a,n)}).then(function(t){return Ll(e,t),e.reload()}))},t.Cb=function(t){var e=this;return Bl(this,this.I().then(function(n){return e.a.Cb(n,t)}).then(function(t){return Ll(e,t),e.reload()}))},t.Db=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return Al(this);var e=this;return Bl(this,this.I().then(function(n){return e.a.Db(n,{displayName:t.displayName,photoUrl:t.photoURL})}).then(function(t){return Ll(e,t),Ol(e,"displayName",t.displayName||null),Ol(e,"photoURL",t.photoUrl||null),z(e.providerData,function(t){"password"===t.providerId&&(Qr(t,"displayName",e.displayName),Qr(t,"photoURL",e.photoURL))}),El(e)}).then(kl))},t.cd=function(t){var e=this;return Bl(this,Dl(this).then(function(n){return W(xl(e),t)?function(t,e,n){return tu(t,Sa,{idToken:e,deleteProvider:n})}(e.a,n,[t]).then(function(t){var n={};return z(t.providerUserInfo||[],function(t){n[t.providerId]=!0}),z(xl(e),function(t){n[t]||Pl(e,t)}),n[Fo.PROVIDER_ID]||Qr(e,"phoneNumber",null),El(e)}):El(e).then(function(){throw new S("no-such-provider")})}))},t.delete=function(){var t=this;return Bl(this,this.I().then(function(e){return tu(t.a,Ia,{idToken:e})}).then(function(){t.dispatchEvent(new ol("userDeleted"))})).then(function(){for(var e=0;e<t.J.length;e++)t.J[e].cancel("app-deleted");ml(t,null),vl(t,null),_l(t,null),t.J=[],t.D=!0,Tl(t),Qr(t,"refreshToken",null),t.i&&Pc(t.i,t)})},t.Fb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e)},t.na=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?b(this.Kb,this):"reauthViaPopup"==t&&e==(this.g||null)?b(this.Lb,this):"linkViaRedirect"==t&&(this.ga||null)==e?b(this.Kb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?b(this.Lb,this):null},t.Ec=function(t){var e=this;return ql(this,"linkViaPopup",t,function(){return Fl(e,t.providerId).then(function(){return El(e)})},!1)},t.Nc=function(t){return ql(this,"reauthViaPopup",t,function(){return ke()},!0)},t.Fc=function(t){var e=this;return jl(this,"linkViaRedirect",t,function(){return Fl(e,t.providerId)},!1)},t.Oc=function(t){return jl(this,"reauthViaRedirect",t,function(){return ke()},!0)},t.Kb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Bl(this,this.I().then(function(n){return ya(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})}).then(function(t){return o=Ml(i,t,"link"),Ul(i,t)}).then(function(){return o}))},t.Lb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Bl(this,ke().then(function(){return co(_a(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)}).then(function(t){return o=Ml(i,t,"reauthenticate"),Ll(i,t),i.h=null,i.reload()}).then(function(){return o}),!0)},t.ub=function(t){var e=this,n=null;return Bl(this,this.I().then(function(e){return n=e,void 0===t||pt(t)?{}:ji(new Ni(t))}).then(function(t){return e.a.ub(n,t)}).then(function(t){if(e.email!=t)return e.reload()}).then(function(){}))},t.Eb=function(t,e){var n=this,r=null;return Bl(this,this.I().then(function(t){return r=t,void 0===e||pt(e)?{}:ji(new Ni(e))}).then(function(e){return n.a.Eb(r,t,e)}).then(function(t){if(n.email!=t)return n.reload()}).then(function(){}))},t.jc=function(t){var e=null,n=this;return Bl(this,t=co(ke(t),n.uid).then(function(t){return e=Ml(n,t,"reauthenticate"),Ll(n,t),n.h=null,n.reload()}).then(function(){return e}),!0)},t.toJSON=function(){return this.w()},t.w=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.b.w(),redirectEventId:this.ga||null};return this.metadata&&vt(t,this.metadata.w()),z(this.providerData,function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))}),vt(t,this.O.w()),t};var Gl={name:"redirectUser",F:"session"};function Zl(t){return ec(t.b,Gl,t.a)}function Kl(t){this.a=t,this.b=Ju(),this.c=null,this.f=function(t){var e=Ql("local"),n=Ql("session"),r=Ql("none");return function(t,e,n){var r=tc(e,n),i=Xu(t,e.F);return t.get(e,n).then(function(o){var s=null;try{s=Ur(a.localStorage.getItem(r))}catch(u){}if(s&&!o)return a.localStorage.removeItem(r),t.set(e,s,n);s&&o&&"localStorage"!=i.type&&a.localStorage.removeItem(r)})}(t.b,e,t.a).then(function(){return t.b.get(n,t.a)}).then(function(i){return i?n:t.b.get(r,t.a).then(function(n){return n?r:t.b.get(e,t.a).then(function(n){return n?e:t.b.get(Yl,t.a).then(function(t){return t?Ql(t):e})})})}).then(function(e){return t.c=e,Wl(t,e.F)}).o(function(){t.c||(t.c=e)})}(this),this.b.addListener(Ql("local"),this.a,b(this.g,this))}function Wl(t,e){var n,r=[];for(n in Qu)Qu[n]!==e&&r.push(ec(t.b,Ql(Qu[n]),t.a));return r.push(ec(t.b,Yl,t.a)),function(t){return new we(function(e,n){var r=t.length,i=[];if(r)for(var o=function(t,n){r--,i[t]=n,0==r&&e(i)},s=function(t){n(t)},a=0;a<t.length;a++)xe(t[a],T(o,a),s);else e(i)})}(r)}Kl.prototype.g=function(){var t=this,e=Ql("local");th(this,function(){return ke().then(function(){return t.c&&"local"!=t.c.F?t.b.get(e,t.a):null}).then(function(n){if(n)return Wl(t,"local").then(function(){t.c=e})})})};var Yl={name:"persistence",F:"session"};function Ql(t){return{name:"authUser",F:t}}function $l(t,e){return th(t,function(){return t.b.set(t.c,e.w(),t.a)})}function Jl(t){return th(t,function(){return ec(t.b,t.c,t.a)})}function Xl(t,e,n){return th(t,function(){return t.b.get(t.c,t.a).then(function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),Hl(t||{})})})}function th(t,e){return t.f=t.f.then(e,e),t.f}function eh(t){if(this.l=!1,Qr(this,"settings",new Kc),Qr(this,"app",t),!ch(this).options||!ch(this).options.apiKey)throw new S("invalid-api-key");t=r.default.SDK_VERSION?Ar(r.default.SDK_VERSION):null,this.a=new Ws(ch(this).options&&ch(this).options.apiKey,O(A),t),this.R=[],this.s=[],this.O=[],this.hb=r.default.INTERNAL.createSubscribe(b(this.zc,this)),this.X=void 0,this.bc=r.default.INTERNAL.createSubscribe(b(this.Ac,this)),ah(this,null),this.i=new Kl(ch(this).options.apiKey+":"+ch(this).name),this.D=new zl(ch(this).options.apiKey+":"+ch(this).name),this.$=fh(this,function(t){var e=ch(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(Gl,t.a).then(function(t){return t&&e&&(t.authDomain=e),Hl(t||{})})}(t.D,ch(t).options.authDomain).then(function(e){return(t.m=e)&&(e.ha=t.D),Zl(t.D)});return fh(t,e)}(t).then(function(){return Xl(t.i,e,t.P)}).then(function(e){return e?(e.ha=t.D,t.m&&(t.m.ga||null)==(e.ga||null)?e:e.reload().then(function(){return $l(t.i,e).then(function(){return e})}).o(function(n){return"auth/network-request-failed"==n.code?e:Jl(t.i)})):null}).then(function(e){ah(t,e||null)});return fh(t,n)}(this)),this.h=fh(this,function(t){return t.$.then(function(){return sh(t)}).o(function(){}).then(function(){if(!t.l)return t.ja()}).o(function(){}).then(function(){if(!t.l){t.ba=!0;var e=t.i;e.b.addListener(Ql("local"),e.a,t.ja)}})}(this)),this.ba=!1,this.ja=b(this.Zc,this),this.Ba=b(this.da,this),this.ya=b(this.mc,this),this.za=b(this.wc,this),this.Aa=b(this.xc,this),this.b=null,function(t){var e=ch(t).options.authDomain,n=ch(t).options.apiKey;e&&Or()&&(t.Oa=t.$.then(function(){if(!t.l){if(t.b=jc(e,n,ch(t).name,t.P),Nc(t.b,t),lh(t)&&Il(lh(t)),t.m){Il(t.m);var r=t.m;r.wa(t.la()),ml(r,t),yl(r=t.m,t.J),_l(r,t),na((r=t.m).a,t.P),vl(r,t),t.m=null}return t.b}}))}(this),this.INTERNAL={},this.INTERNAL.delete=b(this.delete,this),this.INTERNAL.logFramework=b(this.Gc,this),this.u=0,bn.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.la()},set:function(t){this.wa(t)},enumerable:!1}),t.aa=null,Object.defineProperty(t,"ti",{get:function(){return this.T()},set:function(t){this.yb(t)},enumerable:!1}),t.S=null,Object.defineProperty(t,"emulatorConfig",{get:function(){if(this.P){var t=qn(this.P.url);t=Jr({protocol:t.c,host:t.a,port:t.g,options:Jr({disableWarnings:this.P.ec})})}else t=null;return t},enumerable:!1})}(this),this.J=[],this.P=null}function nh(t){Qe.call(this,"languageCodeChanged"),this.h=t}function rh(t){Qe.call(this,"emulatorConfigChanged"),this.c=t}function ih(t){Qe.call(this,"frameworkChanged"),this.f=t}function oh(t){return t.Oa||Ae(new S("auth-domain-config-required"))}function sh(t){if(!Or())return Ae(new S("operation-not-supported-in-this-environment"));var e=oh(t).then(function(){return t.b.qa()}).then(function(t){return t?Jr(t):null});return fh(t,e)}function ah(t,e){lh(t)&&(function(t,e){Q(t.S,function(t){return t==e})}(lh(t),t.Ba),dn(lh(t),"tokenChanged",t.ya),dn(lh(t),"userDeleted",t.za),dn(lh(t),"userInvalidated",t.Aa),Tl(lh(t))),e&&(e.S.push(t.Ba),cn(e,"tokenChanged",t.ya),cn(e,"userDeleted",t.za),cn(e,"userInvalidated",t.Aa),0<t.u&&bl(e)),Qr(t,"currentUser",e),e&&(e.wa(t.la()),ml(e,t),yl(e,t.J),_l(e,t),na(e.a,t.P),vl(e,t))}function uh(t,e){var n=null,r=null;return fh(t,e.then(function(e){return n=Uo(e),r=Yi(e),function(t,e){var n={};return n.apiKey=ch(t).options.apiKey,n.authDomain=ch(t).options.authDomain,n.appName=ch(t).name,t.P&&(n.emulatorConfig=t.P),t.$.then(function(){return function(t,e,n,r){var i=new gl(t,e);return n&&(i.ha=n),r&&yl(i,r),i.reload().then(function(){return i})}(n,e,t.D,t.Ga())}).then(function(e){return lh(t)&&e.uid==lh(t).uid?(Rl(lh(t),e),t.da(e)):(ah(t,e),Il(e),t.da(e))}).then(function(){dh(t)})}(t,e)},function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=el(e.w(),t,b(t.kc,t))),n||e}).then(function(){return Jr({user:lh(t),credential:n,additionalUserInfo:r,operationType:"signIn"})}))}function ch(t){return t.app}function lh(t){return t.currentUser}function hh(t){return lh(t)&&lh(t)._lat||null}function dh(t){if(t.ba){for(var e=0;e<t.s.length;e++)t.s[e]&&t.s[e](hh(t));if(t.X!==t.getUid()&&t.O.length)for(t.X=t.getUid(),e=0;e<t.O.length;e++)t.O[e]&&t.O[e](hh(t))}}function fh(t,e){return t.R.push(e),e.oa(function(){Y(t.R,e)}),e}function ph(){}function gh(){this.a={},this.b=1e12}Kl.prototype.xb=function(t){var e=null,n=this;return function(t){var e=new S("invalid-persistence-type"),n=new S("unsupported-persistence-type");t:{for(r in Qu)if(Qu[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(Tr()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!xu()&&"none"!==t)throw n;break;default:if(!Pr()&&"none"!==t)throw n}}(t),th(this,function(){return t!=n.c.F?n.b.get(n.c,n.a).then(function(r){return e=r,Wl(n,t)}).then(function(){if(n.c=Ql(t),e)return n.b.set(n.c,e,n.a)}):ke()})},E(eh,bn),E(nh,Qe),E(rh,Qe),E(ih,Qe),(t=eh.prototype).xb=function(t){return fh(this,t=this.i.xb(t))},t.wa=function(t){this.aa===t||this.l||(this.aa=t,ea(this.a,this.aa),this.dispatchEvent(new nh(this.la())))},t.la=function(){return this.aa},t.fd=function(){var t=a.navigator;this.wa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.gd=function(t,e){if(!this.P){if(!/^https?:\/\//.test(t))throw new S("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");(function(t){"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),a.document&&!t&&yr().then(function(){var t=a.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#ff0000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),a.document.body.appendChild(t)})})(e=!!e&&!!e.disableWarnings),this.P={url:t,ec:e},this.settings.ib=!0,na(this.a,this.P),this.dispatchEvent(new rh(this.P))}},t.Gc=function(t){this.J.push(t),ia(this.a,r.default.SDK_VERSION?Ar(r.default.SDK_VERSION,this.J):null),this.dispatchEvent(new ih(this.J))},t.Ga=function(){return J(this.J)},t.yb=function(t){this.S===t||this.l||(this.S=t,this.a.b=this.S)},t.T=function(){return this.S},t.toJSON=function(){return{apiKey:ch(this).options.apiKey,authDomain:ch(this).options.authDomain,appName:ch(this).name,currentUser:lh(this)&&lh(this).w()}},t.Fb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.na=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?b(this.ic,this):null},t.ic=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then(function(){return uh(i,va(i.a,o))})},t.Xc=function(t){if(!Or())return Ae(new S("operation-not-supported-in-this-environment"));var e=this,n=Wi(t.providerId),i=qr(),o=null;(!Lr()||wr())&&ch(this).options.authDomain&&t.isOAuthProvider&&(o=gu(ch(this).options.authDomain,ch(this).options.apiKey,ch(this).name,"signInViaPopup",t,null,i,r.default.SDK_VERSION||null,null,null,this.T(),this.P));var s=gr(o,n&&n.ua,n&&n.ta);return fh(this,n=oh(this).then(function(n){return Dc(n,s,"signInViaPopup",t,i,!!o,e.T())}).then(function(){return new we(function(t,n){e.na("signInViaPopup",null,new S("cancelled-popup-request"),e.g),e.f=t,e.C=n,e.g=i,e.c=Mc(e.b,e,"signInViaPopup",s,i)})}).then(function(t){return s&&pr(s),t?Jr(t):null}).o(function(t){throw s&&pr(s),t}))},t.Yc=function(t){if(!Or())return Ae(new S("operation-not-supported-in-this-environment"));var e=this;return fh(this,oh(this).then(function(){return function(t){return th(t,function(){return t.b.set(Yl,t.c.F,t.a)})}(e.i)}).then(function(){return Fc(e.b,"signInViaRedirect",t,void 0,e.T())}))},t.qa=function(){var t=this;return sh(this).then(function(e){return t.b&&Hc(t.b.b),e}).o(function(e){throw t.b&&Hc(t.b.b),e})},t.dd=function(t){if(!t)return Ae(new S("null-user"));if(this.S!=t.tenantId)return Ae(new S("tenant-id-mismatch"));var e=this,n={};n.apiKey=ch(this).options.apiKey,n.authDomain=ch(this).options.authDomain,n.appName=ch(this).name;var r=function(t,e,n,r){var i=t.b,o={};return o[Qs]=i.b&&i.b.toString(),o.refreshToken=i.a,e=new gl(e||{apiKey:t.l,authDomain:t.s,appName:t.m},o),n&&(e.ha=n),r&&yl(e,r),Rl(e,t),e}(t,n,e.D,e.Ga());return fh(this,this.h.then(function(){if(ch(e).options.apiKey!=t.l)return r.reload()}).then(function(){return lh(e)&&t.uid==lh(e).uid?(Rl(lh(e),t),e.da(t)):(ah(e,r),Il(r),e.da(r))}).then(function(){dh(e)}))},t.Ab=function(){var t=this;return fh(this,this.h.then(function(){return t.b&&Hc(t.b.b),lh(t)?(ah(t,null),Jl(t.i).then(function(){dh(t)})):ke()}))},t.Zc=function(){var t=this;return Xl(this.i,ch(this).options.authDomain).then(function(e){if(!t.l){var n;if(n=lh(t)&&e){n=lh(t).uid;var r=e.uid;n=null!=n&&""!==n&&null!=r&&""!==r&&n==r}if(n)return Rl(lh(t),e),lh(t).I();(lh(t)||e)&&(ah(t,e),e&&(Il(e),e.ha=t.D),t.b&&Nc(t.b,t),dh(t))}})},t.da=function(t){return $l(this.i,t)},t.mc=function(){dh(this),this.da(lh(this))},t.wc=function(){this.Ab()},t.xc=function(){this.Ab()},t.kc=function(t){var e=this;return this.h.then(function(){return uh(e,ke(t))})},t.zc=function(t){var e=this;this.addAuthTokenListener(function(){t.next(lh(e))})},t.Ac=function(t){var e=this;!function(t,e){t.O.push(e),fh(t,t.h.then(function(){!t.l&&W(t.O,e)&&t.X!==t.getUid()&&(t.X=t.getUid(),e(hh(t)))}))}(this,function(){t.next(lh(e))})},t.Ic=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then(function(){"function"==typeof t?t(lh(r)):"function"==typeof t.next&&t.next(lh(r))}),this.hb(t,e,n)},t.Hc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then(function(){r.X=r.getUid(),"function"==typeof t?t(lh(r)):"function"==typeof t.next&&t.next(lh(r))}),this.bc(t,e,n)},t.nc=function(t){var e=this;return fh(this,this.h.then(function(){return lh(e)?lh(e).I(t).then(function(t){return{accessToken:t}}):null}))},t.Tc=function(t){var e=this;return this.h.then(function(){return uh(e,tu(e.a,Wa,{token:t}))}).then(function(t){var n=t.user;return Ol(n,"isAnonymous",!1),e.da(n),t})},t.Uc=function(t,e){var n=this;return this.h.then(function(){return uh(n,tu(n.a,Ya,{email:t,password:e}))})},t.dc=function(t,e){var n=this;return this.h.then(function(){return uh(n,tu(n.a,Ca,{email:t,password:e}))})},t.$a=function(t){var e=this;return this.h.then(function(){return uh(e,t.ka(e.a))})},t.Sc=function(t){return Wr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.$a(t)},t.zb=function(){var t=this;return this.h.then(function(){var e=lh(t);if(e&&e.isAnonymous){var n=Jr({providerId:null,isNewUser:!1});return Jr({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return uh(t,t.a.zb()).then(function(e){var n=e.user;return Ol(n,"isAnonymous",!0),t.da(n),e})})},t.getUid=function(){return lh(this)&&lh(this).uid||null},t.cc=function(t){this.addAuthTokenListener(t),this.u++,0<this.u&&lh(this)&&bl(lh(this))},t.Pc=function(t){var e=this;z(this.s,function(n){n==t&&e.u--}),0>this.u&&(this.u=0),0==this.u&&lh(this)&&Tl(lh(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.s.push(t),fh(this,this.h.then(function(){e.l||W(e.s,t)&&t(hh(e))}))},t.removeAuthTokenListener=function(t){Q(this.s,function(e){return e==t})},t.delete=function(){this.l=!0;for(var t=0;t<this.R.length;t++)this.R[t].cancel("app-deleted");return this.R=[],this.i&&(t=this.i).b.removeListener(Ql("local"),t.a,this.ja),this.b&&(Pc(this.b,this),Hc(this.b.b)),Promise.resolve()},t.hc=function(t){return fh(this,function(t,e){return tu(t,Ea,{identifier:e,continueUri:Rr()?lr():"http://localhost"}).then(function(t){return t.signinMethods||[]})}(this.a,t))},t.Bc=function(t){return!!Oo(t)},t.wb=function(t,e){var n=this;return fh(this,ke().then(function(){var t=new Ni(e);if(!t.c)throw new S("argument-error",Ri+" must be true when sending sign in link to email");return ji(t)}).then(function(e){return n.a.wb(t,e)}).then(function(){}))},t.jd=function(t){return this.Ra(t).then(function(t){return t.data.email})},t.nb=function(t,e){return fh(this,this.a.nb(t,e).then(function(){}))},t.Ra=function(t){return fh(this,this.a.Ra(t).then(function(t){return new ai(t)}))},t.jb=function(t){return fh(this,this.a.jb(t).then(function(){}))},t.vb=function(t,e){var n=this;return fh(this,ke().then(function(){return void 0===e||pt(e)?{}:ji(new Ni(e))}).then(function(e){return n.a.vb(t,e)}).then(function(){}))},t.Wc=function(t,e){return fh(this,Yc(this,t,e,b(this.$a,this)))},t.Vc=function(t,e){var n=this;return fh(this,ke().then(function(){var r=e||lr(),i=Po(t,r);if(!(r=Oo(r)))throw new S("argument-error","Invalid email link!");if(r.tenantId!==n.T())throw new S("tenant-id-mismatch");return n.$a(i)}))},ph.prototype.render=function(){},ph.prototype.reset=function(){},ph.prototype.getResponse=function(){},ph.prototype.execute=function(){};var mh=null;function vh(t,e){return(e=yh(e))&&t.a[e]||null}function yh(t){return(t=void 0===t?1e12:t)?t.toString():null}function _h(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=ue(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():cn(this.f,"click",this.i)}function wh(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function bh(){}function Th(){}gh.prototype.render=function(t,e){return this.a[this.b.toString()]=new _h(t,e),this.b++},gh.prototype.reset=function(t){var e=vh(this,t);t=yh(t),e&&t&&(e.delete(),delete this.a[t])},gh.prototype.getResponse=function(t){return(t=vh(this,t))?t.getResponse():null},gh.prototype.execute=function(t){(t=vh(this,t))&&t.execute()},_h.prototype.getResponse=function(){return wh(this),this.b},_h.prototype.execute=function(){wh(this);var t=this;this.a||(this.a=setTimeout(function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(r){}t.a=setTimeout(function(){if(t.a=null,t.b=null,n)try{n()}catch(r){}t.h&&t.execute()},6e4)},500))},_h.prototype.delete=function(){wh(this),this.g=!0,clearTimeout(this.a),this.a=null,dn(this.f,"click",this.i)},Qr(bh,"FACTOR_ID","phone"),Th.prototype.g=function(){return mh||(mh=new gh),ke(mh)},Th.prototype.c=function(){};var Ch=null;function Eh(){this.b=a.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Ih=new _t(Ct,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Sh=new Br(3e4,6e4);Eh.prototype.g=function(t){var e=this;return new we(function(n,r){var i=setTimeout(function(){r(new S("network-request-failed"))},Sh.get());!a.grecaptcha||t!==e.f&&!e.b?(a[e.a]=function(){if(a.grecaptcha){e.f=t;var o=a.grecaptcha.render;a.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(a.grecaptcha)}else clearTimeout(i),r(new S("internal-error"));delete a[e.a]},ke(Vs(kt(Ih,{onload:e.a,hl:t||""}))).o(function(){clearTimeout(i),r(new S("internal-error","Unable to load external reCAPTCHA dependencies!"))})):(clearTimeout(i),n(a.grecaptcha))})},Eh.prototype.c=function(){this.b--};var kh=null;function Ah(t,e,n,r,i,o,s){if(Qr(this,"type","recaptcha"),this.c=this.f=null,this.D=!1,this.v=e,this.g=null,s?(Ch||(Ch=new Th),s=Ch):(kh||(kh=new Eh),s=kh),this.m=s,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Ph])throw new S("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Oh],!a.document)throw new S("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!ue(e)||!this.i&&ue(e).hasChildNodes())throw new S("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new Ws(t,o||null,i||null),this.u=r||function(){return null};var u=this;this.l=[];var c=this.a[xh];this.a[xh]=function(t){if(Rh(u,t),"function"==typeof c)c(t);else if("string"==typeof c){var e=Nr(c,a);"function"==typeof e&&e(t)}};var l=this.a[Nh];this.a[Nh]=function(){if(Rh(u,null),"function"==typeof l)l();else if("string"==typeof l){var t=Nr(l,a);"function"==typeof t&&t()}}}var xh="callback",Nh="expired-callback",Ph="sitekey",Oh="size";function Rh(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(r){}}function Dh(t,e){return t.h.push(e),e.oa(function(){Y(t.h,e)}),e}function Lh(t){if(t.D)throw new S("internal-error","RecaptchaVerifier instance has been destroyed.")}function Fh(t,e,n){var i=!1;try{this.b=n||r.default.app()}catch(a){throw new S("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new S("invalid-api-key");n=this.b.options.apiKey;var o=this,s=null;try{s=this.b.auth().Ga()}catch(a){}try{i=this.b.auth().settings.appVerificationDisabledForTesting}catch(a){}s=r.default.SDK_VERSION?Ar(r.default.SDK_VERSION,s):null,Ah.call(this,n,t,e,function(){try{var t=o.b.auth().la()}catch(e){t=null}return t},s,O(A),i)}function Mh(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,s=0;s<e.length;s++)if(e[s].optional)o=!0;else{if(o)throw new S("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].M(n[i])&&!o){if(e=e[i],0>i||i>=Uh.length)throw new S("internal-error","Argument validator received an unsupported number of arguments.");n=Uh[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.K+".";break t}r=null}}if(r)throw new S("argument-error",t+" failed: "+r)}(t=Ah.prototype).Ia=function(){var t=this;return this.f?this.f:this.f=Dh(this,ke().then(function(){if(Rr()&&!br())return yr();throw new S("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return t.m.g(t.u())}).then(function(e){return t.g=e,tu(t.s,Ma,{})}).then(function(e){t.a[Ph]=e.recaptchaSiteKey}).o(function(e){throw t.f=null,e}))},t.render=function(){Lh(this);var t=this;return Dh(this,this.Ia().then(function(){if(null===t.c){var e=t.v;if(!t.i){var n=ue(e);e=function(t,e,n){var r=arguments,i=document,o=String(r[0]),s=r[1];if(!ae&&s&&(s.name||s.type)){if(o=["<",o],s.name&&o.push(' name="',zt(s.name),'"'),s.type){o.push(' type="',zt(s.type),'"');var a={};vt(a,s),delete a.type,s=a}o.push(">"),o=o.join("")}return o=pe(i,o),s&&("string"==typeof s?o.className=s:Array.isArray(s)?o.className=s.join(" "):ce(o,s)),2<r.length&&fe(i,o,r),o}("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c}))},t.verify=function(){Lh(this);var t=this;return Dh(this,this.render().then(function(e){return new we(function(n){var r=t.g.getResponse(e);if(r)n(r);else{var i=function(e){e&&(function(t,e){Q(t.l,function(t){return t==e})}(t,i),n(e))};t.l.push(i),t.i&&t.g.execute(t.c)}})}))},t.reset=function(){Lh(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){Lh(this),this.D=!0,this.m.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=ue(this.v);for(var e;e=t.firstChild;)t.removeChild(e)}},E(Fh,Ah);var Uh="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function qh(t,e){return{name:t||"",K:"a valid string",optional:!!e,M:function(t){return"string"==typeof t}}}function jh(t,e){return{name:t||"",K:"a boolean",optional:!!e,M:function(t){return"boolean"==typeof t}}}function Vh(t,e){return{name:t||"",K:"a valid object",optional:!!e,M:g}}function Bh(t,e){return{name:t||"",K:"a function",optional:!!e,M:function(t){return"function"==typeof t}}}function Hh(t,e){return{name:t||"",K:"null",optional:!!e,M:function(t){return null===t}}}function zh(t){return{name:t?t+"Credential":"credential",K:t?"a valid "+t+" credential":"a valid credential",optional:!1,M:function(e){return!!e&&!(!e.ka||t&&e.providerId!==t)}}}function Gh(t,e){return g(t)&&"string"==typeof t.type&&t.type===e&&"function"==typeof t.Ha}function Zh(t){return g(t)&&"string"==typeof t.uid}function Kh(t,e,n,r){return{name:n||"",K:t.K+" or "+e.K,optional:!!r,M:function(n){return t.M(n)||e.M(n)}}}function Wh(t,e){for(var n in e){var r=e[n].name;t[r]=$h(r,t[n],e[n].j)}}function Yh(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:T(function(t){return this[t]},n),set:T(function(t,e,n,r){Mh(t,[n],[r],!0),this[e]=r},r,n,e[n].kb),enumerable:!0})}}function Qh(t,e,n,r){t[e]=$h(e,n,r)}function $h(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return Mh(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}Wh(eh.prototype,{jb:{name:"applyActionCode",j:[qh("code")]},Ra:{name:"checkActionCode",j:[qh("code")]},nb:{name:"confirmPasswordReset",j:[qh("code"),qh("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[qh("email"),qh("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[qh("email")]},qa:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[qh("emailLink")]},Hc:{name:"onAuthStateChanged",j:[Kh(Vh(),Bh(),"nextOrObserver"),Bh("opt_error",!0),Bh("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[Kh(Vh(),Bh(),"nextOrObserver"),Bh("opt_error",!0),Bh("opt_completed",!0)]},vb:{name:"sendPasswordResetEmail",j:[qh("email"),Kh(Vh("opt_actionCodeSettings",!0),Hh(null,!0),"opt_actionCodeSettings",!0)]},wb:{name:"sendSignInLinkToEmail",j:[qh("email"),Vh("actionCodeSettings")]},xb:{name:"setPersistence",j:[qh("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[zh()]},zb:{name:"signInAnonymously",j:[]},$a:{name:"signInWithCredential",j:[zh()]},Tc:{name:"signInWithCustomToken",j:[qh("token")]},Uc:{name:"signInWithEmailAndPassword",j:[qh("email"),qh("password")]},Vc:{name:"signInWithEmailLink",j:[qh("email"),qh("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[qh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Xc:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Yc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},dd:{name:"updateCurrentUser",j:[Kh({name:"user",K:"an instance of Firebase User",optional:!1,M:function(t){return!!(t&&t instanceof gl)}},Hh(),"user")]},Ab:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[qh(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[qh("url"),Vh("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[qh("code")]}}),Yh(eh.prototype,{lc:{name:"languageCode",kb:Kh(qh(),Hh(),"languageCode")},ti:{name:"tenantId",kb:Kh(qh(),Hh(),"tenantId")}}),(eh.Persistence=Qu).LOCAL="local",eh.Persistence.SESSION="session",eh.Persistence.NONE="none",Wh(gl.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[jh("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[jh("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[zh()]},qb:{name:"linkWithCredential",j:[zh()]},Dc:{name:"linkWithPhoneNumber",j:[qh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Ec:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Fc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[zh()]},tb:{name:"reauthenticateWithCredential",j:[zh()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[qh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Nc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Oc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},ub:{name:"sendEmailVerification",j:[Kh(Vh("opt_actionCodeSettings",!0),Hh(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[qh(null,!0)]},cd:{name:"unlink",j:[qh("provider")]},Bb:{name:"updateEmail",j:[qh("email")]},Cb:{name:"updatePassword",j:[qh("password")]},ed:{name:"updatePhoneNumber",j:[zh("phone")]},Db:{name:"updateProfile",j:[Vh("profile")]},Eb:{name:"verifyBeforeUpdateEmail",j:[qh("email"),Kh(Vh("opt_actionCodeSettings",!0),Hh(null,!0),"opt_actionCodeSettings",!0)]}}),Wh(gh.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Wh(ph.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Wh(we.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),Yh(Kc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",kb:jh("appVerificationDisabledForTesting")}}),Wh(Wc.prototype,{confirm:{name:"confirm",j:[qh("verificationCode")]}}),Qh(uo,"fromJSON",function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[mo,xo,Do,fo],r=0;r<n.length;r++)if(e=n[r](t))return e;return null},[Kh(qh(),Vh(),"json")]),Qh(No,"credential",function(t,e){return new Ao(t,e)},[qh("email"),qh("password")]),Wh(Ao.prototype,{w:{name:"toJSON",j:[qh(null,!0)]}}),Wh(wo.prototype,{Ca:{name:"addScope",j:[qh("scope")]},Ka:{name:"setCustomParameters",j:[Vh("customOAuthParameters")]}}),Qh(wo,"credential",bo,[Kh(qh(),Vh(),"token")]),Qh(No,"credentialWithLink",Po,[qh("email"),qh("emailLink")]),Wh(To.prototype,{Ca:{name:"addScope",j:[qh("scope")]},Ka:{name:"setCustomParameters",j:[Vh("customOAuthParameters")]}}),Qh(To,"credential",Co,[Kh(qh(),Vh(),"token")]),Wh(Eo.prototype,{Ca:{name:"addScope",j:[qh("scope")]},Ka:{name:"setCustomParameters",j:[Vh("customOAuthParameters")]}}),Qh(Eo,"credential",Io,[Kh(qh(),Kh(Vh(),Hh()),"idToken"),Kh(qh(),Hh(),"accessToken",!0)]),Wh(So.prototype,{Ka:{name:"setCustomParameters",j:[Vh("customOAuthParameters")]}}),Qh(So,"credential",ko,[Kh(qh(),Vh(),"token"),qh("secret",!0)]),Wh(_o.prototype,{Ca:{name:"addScope",j:[qh("scope")]},credential:{name:"credential",j:[Kh(qh(),Kh(Vh(),Hh()),"optionsOrIdToken"),Kh(qh(),Hh(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[Vh("customOAuthParameters")]}}),Wh(po.prototype,{w:{name:"toJSON",j:[qh(null,!0)]}}),Wh(lo.prototype,{w:{name:"toJSON",j:[qh(null,!0)]}}),Qh(Fo,"credential",Mo,[qh("verificationId"),qh("verificationCode")]),Wh(Fo.prototype,{fb:{name:"verifyPhoneNumber",j:[Kh(qh(),{name:"phoneInfoOptions",K:"valid phone info options",optional:!1,M:function(t){return!!t&&(t.session&&t.phoneNumber?Gh(t.session,so)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?Gh(t.session,ao)&&Zh(t.multiFactorHint):t.session&&t.multiFactorUid?Gh(t.session,ao)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]}}),Wh(Ro.prototype,{w:{name:"toJSON",j:[qh(null,!0)]}}),Wh(S.prototype,{toJSON:{name:"toJSON",j:[qh(null,!0)]}}),Wh(Zo.prototype,{toJSON:{name:"toJSON",j:[qh(null,!0)]}}),Wh(Go.prototype,{toJSON:{name:"toJSON",j:[qh(null,!0)]}}),Wh(tl.prototype,{toJSON:{name:"toJSON",j:[qh(null,!0)]}}),Wh($c.prototype,{Rc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.sb}}]}}),Wh(sl.prototype,{Rb:{name:"getSession",j:[]},fc:{name:"enroll",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.sb}},qh("displayName",!0)]},bd:{name:"unenroll",j:[Kh({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:Zh},qh(),"multiFactorInfoIdentifier")]}}),Wh(Fh.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),Qh(bi,"parseLink",xi,[qh("link")]),Qh(bh,"assertion",function(t){return new il(t)},[zh("phone")]),function(){if(void 0===r.default||!r.default.INTERNAL||!r.default.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ci,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:ui,VERIFY_AND_CHANGE_EMAIL:li,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:eh,AuthCredential:uo,Error:S};Qh(t,"EmailAuthProvider",No,[]),Qh(t,"FacebookAuthProvider",wo,[]),Qh(t,"GithubAuthProvider",To,[]),Qh(t,"GoogleAuthProvider",Eo,[]),Qh(t,"TwitterAuthProvider",So,[]),Qh(t,"OAuthProvider",_o,[qh("providerId")]),Qh(t,"SAMLAuthProvider",yo,[qh("providerId")]),Qh(t,"PhoneAuthProvider",Fo,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof eh)}}]),Qh(t,"RecaptchaVerifier",Fh,[Kh(qh(),{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),Vh("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(t){return!!(t&&t instanceof r.default.app.App)}}]),Qh(t,"ActionCodeURL",bi,[]),Qh(t,"PhoneMultiFactorGenerator",bh,[]),r.default.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new eh(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC"}),r.default.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:b((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:b(t.nc,t),addAuthTokenListener:b(t.cc,t),removeAuthTokenListener:b(t.Pc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),r.default.registerVersion("@firebase/auth","0.16.5"),r.default.INTERNAL.extendNamespace({User:gl})}()}).apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},5119:(t,e,n)=>{"use strict";n.r(e),n.d(e,{Component:()=>o,ComponentContainer:()=>u,Provider:()=>a});var r=n(4762),i=n(250),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),s="[DEFAULT]",a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Set}return t.prototype.get=function(t){void 0===t&&(t=s);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.Deferred;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=(0,r.__assign)({identifier:s,optional:!1},t),n=e.optional,i=this.normalizeInstanceIdentifier(e.identifier);if(!this.isInitialized(i)&&!this.shouldAutoInitialize()){if(n)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(n)return null;throw o}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:s})}catch(h){}try{for(var i=(0,r.__values)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var a=(0,r.__read)(o.value,2),u=a[1],c=this.normalizeInstanceIdentifier(a[0]);try{var l=this.getOrInitializeService({instanceIdentifier:c});u.resolve(l)}catch(h){}}}catch(d){e={error:d}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=s),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return(0,r.__awaiter)(this,void 0,void 0,function(){var t;return(0,r.__generator)(this,function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all((0,r.__spreadArray)((0,r.__spreadArray)([],(0,r.__read)(t.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}))),(0,r.__read)(t.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()}))))];case 1:return e.sent(),[2]}})})},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=s),this.instances.has(t)},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var i=t.instanceIdentifier,o=t.options,a=void 0===o?{}:o,u=this.normalizeInstanceIdentifier(void 0===i?s:i);if(this.isInitialized(u))throw Error(this.name+"("+u+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var c=this.getOrInitializeService({instanceIdentifier:u,options:a});try{for(var l=(0,r.__values)(this.instancesDeferred.entries()),h=l.next();!h.done;h=l.next()){var d=(0,r.__read)(h.value,2),f=d[1];u===this.normalizeInstanceIdentifier(d[0])&&f.resolve(c)}}catch(p){e={error:p}}finally{try{h&&!h.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}return this.invokeOnInitCallbacks(c,u),c},t.prototype.onInit=function(t){var e=this;return this.onInitCallbacks.add(t),function(){e.onInitCallbacks.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,i;try{for(var o=(0,r.__values)(this.onInitCallbacks),s=o.next();!s.done;s=o.next()){var a=s.value;try{a(t,e)}catch(u){}}}catch(c){n={error:c}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===s?void 0:e),options:i}),this.instances.set(n,o),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(a){}return o||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:s:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}(),u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},2107:(t,e,n)=>{"use strict";var r=n(1062),i=n(5119),o=n(250),s=n(4762),a=n(308);t=n.hmd(t);var u="";function c(t){u=t}var l,h=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),(0,o.stringify)(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:(0,o.jsonEval)(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),d=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return(0,o.contains)(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),f=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new h(e)}}catch(n){}return new d},p=f("localStorage"),g=f("sessionStorage"),m=new a.Logger("@firebase/database"),v=(l=1,function(){return l++}),y=function(t){var e=(0,o.stringToByteArray)(t),n=new o.Sha1;n.update(e);var r=n.digest();return o.base64.encodeByteArray(r)},_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=_.apply(null,i):n+="object"==typeof i?(0,o.stringify)(i):i,n+=" "}return n},w=null,b=!0,T=function(t,e){(0,o.assert)(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(m.logLevel=a.LogLevel.VERBOSE,w=m.log.bind(m),e&&g.set("logging_enabled",!0)):"function"==typeof t?w=t:(w=null,g.remove("logging_enabled"))},C=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===b&&(b=!1,null===w&&!0===g.get("logging_enabled")&&T(!0)),w){var n=_.apply(null,t);w(n)}},E=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];C.apply(void 0,(0,s.__spreadArray)([t],(0,s.__read)(e)))}},I=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+_.apply(void 0,(0,s.__spreadArray)([],(0,s.__read)(t)));m.error(n)},S=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+_.apply(void 0,(0,s.__spreadArray)([],(0,s.__read)(t)));throw m.error(n),new Error(n)},k=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+_.apply(void 0,(0,s.__spreadArray)([],(0,s.__read)(t)));m.warn(n)},A=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},x="[MIN_NAME]",N="[MAX_NAME]",P=function(t,e){if(t===e)return 0;if(t===x||e===N)return-1;if(e===x||t===N)return 1;var n=q(t),r=q(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},O=function(t,e){return t===e?0:t<e?-1:1},R=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+(0,o.stringify)(e))},D=function(t){if("object"!=typeof t||null===t)return(0,o.stringify)(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=(0,o.stringify)(e[i]),r+=":",r+=D(t[e[i]]);return r+"}"},L=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)r.push(t.substring(i,i+e>n?n:i+e));return r};function F(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var M=function(t){var e,n,r,i,s;(0,o.assert)(!A(t),"Invalid JSON number"),0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,r=Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));var a=[];for(s=52;s;s-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(s=11;s;s-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(e?1:0),a.reverse();var u=a.join(""),c="";for(s=0;s<64;s+=8){var l=parseInt(u.substr(s,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()},U=new RegExp("^-?(0*)\\d{1,10}$"),q=function(t){if(U.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},j=function(t){try{t()}catch(e){setTimeout(function(){throw k("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},V=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},B=function(){function t(t,e){var n=this;this.appName_=t,this.appCheckProvider=e,this.appCheck=null==e?void 0:e.getImmediate({optional:!0}),this.appCheck||null==e||e.get().then(function(t){return n.appCheck=t})}return t.prototype.getToken=function(t){var e=this;return this.appCheck?this.appCheck.getToken(t):new Promise(function(n,r){setTimeout(function(){e.appCheck?e.getToken(t).then(n,r):n(null)},0)})},t.prototype.addTokenChangeListener=function(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then(function(e){return e.addTokenListener(t)})},t.prototype.notifyForInvalidToken=function(){k('Provided AppCheck credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly.')},t}(),H=function(){function t(t,e,n){var r=this;this.appName_=t,this.firebaseOptions_=e,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit(function(t){return r.auth_=t})}return t.prototype.getToken=function(t){var e=this;return this.auth_?this.auth_.getToken(t).catch(function(t){return t&&"auth/token-not-initialized"===t.code?(C("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)}):new Promise(function(n,r){setTimeout(function(){e.auth_?e.getToken(t).then(n,r):n(null)},0)})},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(function(e){return e.addAuthTokenListener(t)})},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then(function(e){return e.removeAuthTokenListener(t)})},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';k(t+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},t}(),z=function(){function t(t){this.accessToken=t}return t.prototype.getToken=function(t){return Promise.resolve({accessToken:this.accessToken})},t.prototype.addTokenChangeListener=function(t){t(this.accessToken)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.OWNER="owner",t}(),G=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Z="websocket",K="long_polling",W=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===s&&(s=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=p.get("host:"+t)||this._host}return t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&p.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host+"/"+(this.includeNamespaceInQueryParams?"?ns="+this.namespace:"")},t}();function Y(t,e,n){var r;if((0,o.assert)("string"==typeof e,"typeof type must == string"),(0,o.assert)("object"==typeof n,"typeof params must == object"),e===Z)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else{if(e!==K)throw new Error("Unknown connection type: "+e);r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?"}(function(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams})(t)&&(n.ns=t.namespace);var i=[];return F(n,function(t,e){i.push(t+"="+e)}),r+i.join("&")}var Q=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),(0,o.contains)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return(0,o.deepCopy)(this.counters_)},t}(),$={},J={};function X(t){var e=t.toString();return $[e]||($[e]=new Q),$[e]}var tt=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&j(function(){n.onMessage_(t[e])})},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==r(););},t}(),et="start",nt="close",rt=function(){function t(t,e,n,r,i,o,s){var a=this;this.connId=t,this.repoInfo=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=o,this.lastSessionId=s,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=E(t),this.stats_=X(e),this.urlFn=function(t){return a.appCheckToken&&(t.ac=a.appCheckToken),Y(e,K,t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new tt(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null},Math.floor(3e4)),function(t){if((0,o.isNodeSdk)()||"complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(function(){if(!n.isClosed_){n.scriptTagHolder=new it(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=(0,s.__read)(t,5),i=r[0],o=r[1],a=r[2];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===et)n.id=o,n.password=a;else{if(i!==nt)throw new Error("Unrecognized command received: "+i);o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,function(){n.onClosed_()})):n.onClosed_()}},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=(0,s.__read)(t,2),i=r[0],o=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,o)},function(){n.onClosed_()},n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),n.appCheckToken&&(t.ac=n.appCheckToken),"undefined"!=typeof location&&location.hostname&&G.test(location.hostname)&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,function(){})}})},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!((0,o.isNodeSdk)()||!t.forceAllow_&&(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=(0,o.stringify)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=(0,o.base64Encode)(e),r=L(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!(0,o.isNodeSdk)()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=(0,o.stringify)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),it=function(){function t(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,o.isNodeSdk)())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=v(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(s='<script>document.domain="'+document.domain+'";<\/script>');var a="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(u){C("frame writing exception"),u.stack&&C(u.stack),C(u)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||C("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)},Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return this.addLongPollTag_(e+=n,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,function(){clearTimeout(i),r()})},t.prototype.addTag=function(t,e){var n=this;(0,o.isNodeSdk)()?this.doNodeLongPoll(t,e):setTimeout(function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){C("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}},Math.floor(1))},t}(),ot=null;"undefined"!=typeof MozWebSocket?ot=MozWebSocket:"undefined"!=typeof WebSocket&&(ot=WebSocket);var st=function(){function t(e,n,r,i,o,s,a){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=E(this.connId),this.stats_=X(n),this.connURL=t.connectionURL_(n,s,a,i),this.nodeAdmin=n.nodeAdmin}return t.connectionURL_=function(t,e,n,r){var i={v:"5"};return!(0,o.isNodeSdk)()&&"undefined"!=typeof location&&location.hostname&&G.test(location.hostname)&&(i.r="f"),e&&(i.s=e),n&&(i.ls=n),r&&(i.ac=r),Y(t,Z,i)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,p.set("previous_websocket_failure",!0);try{if((0,o.isNodeSdk)()){var r={headers:{"User-Agent":"Firebase/5/"+u+"/"+process.platform+"/"+(this.nodeAdmin?"AdminNode":"Node"),"X-Firebase-GMPID":this.applicationId||""}};this.nodeAdmin?r.headers.Authorization=this.authToken||"":r.headers["X-Firebase-AppCheck"]=this.appCheckToken||"";var i=process.env,s=0===this.connURL.indexOf("wss://")?i.HTTPS_PROXY||i.https_proxy:i.HTTP_PROXY||i.http_proxy;s&&(r.proxy={origin:s}),this.mySock=new ot(this.connURL,[],r)}else this.mySock=new ot(this.connURL,[],r={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(c){this.log_("Error instantiating WebSocket.");var a=c.message||c.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==ot&&!t.forceDisallow_},t.previouslyFailed=function(){return p.isInMemoryStorage||!0===p.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){p.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=(0,o.jsonEval)(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if((0,o.assert)(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=(0,o.stringify)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=L(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),at=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[rt,st]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,i=st&&st.isAvailable(),o=i&&!st.previouslyFailed();if(e.webSocketOnly&&(i||k("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[st];else{var a=this.transports_=[];try{for(var u=(0,s.__values)(t.ALL_TRANSPORTS),c=u.next();!c.done;c=u.next()){var l=c.value;l&&l.isAvailable()&&a.push(l)}}catch(h){n={error:h}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),ut=function(){function t(t,e,n,r,i,o,s,a,u,c){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=o,this.onReady_=s,this.onDisconnect_=a,this.onKill_=u,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=E("c:"+this.id+":"),this.transportManager_=new at(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(n,r)},Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=V(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){this.sendData_({t:"d",d:t})},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=R("t",t),n=R("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=R("t",t),n=R("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=R("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?I("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):I("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&k("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),V(function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())},Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):V(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(p.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),ct=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.refreshAppCheckToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),lt=function(){function t(t){this.allowedEvents_=t,this.listeners_={},(0,o.assert)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=(0,s.__spreadArray)([],(0,s.__read)(this.listeners_[t])),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){(0,o.assert)(this.allowedEvents_.find(function(e){return e===t}),"Unknown event: "+t)},t}(),ht=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||(0,o.isMobileCordova)()||(window.addEventListener("online",function(){e.online_||(e.online_=!0,e.trigger("online",!0))},!1),window.addEventListener("offline",function(){e.online_&&(e.online_=!1,e.trigger("online",!1))},!1)),e}return(0,s.__extends)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return(0,o.assert)("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(lt),dt=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t}();function ft(){return new dt("")}function pt(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function gt(t){return t.pieces_.length-t.pieceNum_}function mt(t){var e=t.pieceNum_;return e<t.pieces_.length&&e++,new dt(t.pieces_,e)}function vt(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function yt(t,e){return void 0===e&&(e=0),t.pieces_.slice(t.pieceNum_+e)}function _t(t){if(t.pieceNum_>=t.pieces_.length)return null;for(var e=[],n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new dt(e,0)}function wt(t,e){for(var n=[],r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof dt)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new dt(n,0)}function bt(t){return t.pieceNum_>=t.pieces_.length}function Tt(t,e){var n=pt(t),r=pt(e);if(null===n)return e;if(n===r)return Tt(mt(t),mt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Ct(t,e){for(var n=yt(t,0),r=yt(e,0),i=0;i<n.length&&i<r.length;i++){var o=P(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function Et(t,e){if(gt(t)!==gt(e))return!1;for(var n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function It(t,e){var n=t.pieceNum_,r=e.pieceNum_;if(gt(t)>gt(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var St=function(){return function(t,e){this.errorPrefix_=e,this.parts_=yt(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=(0,o.stringLength)(this.parts_[n]);kt(this)}}();function kt(t){if(t.byteLength_>768)throw new Error(t.errorPrefix_+"has a key path longer than 768 bytes ("+t.byteLength_+").");if(t.parts_.length>32)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+At(t))}function At(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}var xt,Nt,Pt=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))},!1),r}return(0,s.__extends)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return(0,o.assert)("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(lt),Ot=1e3,Rt=function(t){function e(n,r,i,s,a,u,c,l){var h=t.call(this)||this;if(h.repoInfo_=n,h.applicationId_=r,h.onDataUpdate_=i,h.onConnectStatus_=s,h.onServerInfoUpdate_=a,h.authTokenProvider_=u,h.appCheckTokenProvider_=c,h.authOverride_=l,h.id=e.nextPersistentConnectionId_++,h.log_=E("p:"+h.id+":"),h.interruptReasons_={},h.listens=new Map,h.outstandingPuts_=[],h.outstandingGets_=[],h.outstandingPutCount_=0,h.outstandingGetCount_=0,h.onDisconnectRequestQueue_=[],h.connected_=!1,h.reconnectDelay_=Ot,h.maxReconnectDelay_=3e5,h.securityDebugCallback_=null,h.lastSessionId=null,h.establishConnectionTimer_=null,h.visible_=!1,h.requestCBHash_={},h.requestNumber_=0,h.realtime_=null,h.authToken_=null,h.appCheckToken_=null,h.forceTokenRefresh_=!1,h.invalidAuthTokenCount_=0,h.invalidAppCheckTokenCount_=0,h.firstConnection_=!0,h.lastConnectionAttemptTime_=null,h.lastConnectionEstablishedTime_=null,l&&!(0,o.isNodeSdk)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return Pt.getInstance().on("visible",h.onVisible_,h),-1===n.host.indexOf("fblocal")&&ht.getInstance().on("online",h.onOnline_,h),h}return(0,s.__extends)(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_((0,o.stringify)(i)),(0,o.assert)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.get=function(t){var e=this;this.initConnection_();var n=new o.Deferred,r={p:t._path.toString(),q:t._queryObject},i={action:"g",request:r,onComplete:function(t){var i=t.d;"ok"===t.s?(e.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var s=this.outstandingGets_.length-1;return this.connected_||setTimeout(function(){var t=e.outstandingGets_[s];void 0!==t&&i===t&&(delete e.outstandingGets_[s],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),e.log_("get "+s+" timed out on connection"),n.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(s),n.promise},e.prototype.listen=function(t,e,n,r){this.initConnection_();var i=t._queryIdentifier,s=t._path.toString();this.log_("Listen called for "+s+" "+i),this.listens.has(s)||this.listens.set(s,new Map),(0,o.assert)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,o.assert)(!this.listens.get(s).has(i),"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(s).set(i,a),this.connected_&&this.sendListen_(a)},e.prototype.sendGet_=function(t){var e=this,n=this.outstandingGets_[t];this.sendRequest("g",n.request,function(r){delete e.outstandingGets_[t],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);var s={p:i};t.tag&&(s.q=r._queryObject,s.t=t.tag),s.h=t.hashFn(),this.sendRequest("q",s,function(s){var a=s.d,u=s.s;e.warnOnListenWarnings_(a,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",s),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,a))})},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&(0,o.contains)(t,"w")){var n=(0,o.safeGet)(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e._queryParams.getIndex().toString()+'"',i=e._path.toString();k("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||(0,o.isAdmin)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.refreshAppCheckToken=function(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},function(){})},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=(0,o.isValidFormat)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,function(n){var r=n.s,i=n.d||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))})}},e.prototype.tryAppCheck=function(){var t=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},function(e){var n=e.s,r=e.d||"error";"ok"===n?t.invalidAppCheckTokenCount_=0:t.onAppCheckRevoked_(n,r)})},e.prototype.unlisten=function(t,e){var n=t._path.toString(),r=t._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),(0,o.assert)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t._queryObject,e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,function(t){r&&setTimeout(function(){r(t.s,t.d)},Math.floor(0))})},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){this.initConnection_();var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)})},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,function(t){"ok"!==t.s&&e.log_("reportStats","Error sending stats: "+t.d)})}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+(0,o.stringify)(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"apc"===t?this.onAppCheckRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):I("Unrecognized action received from server: "+(0,o.stringify)(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;(0,o.assert)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){e.establishConnectionTimer_=null,e.establishConnection_()},Math.floor(t))},e.prototype.initConnection_=function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ot,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Ot,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Ot),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){return(0,s.__awaiter)(this,void 0,void 0,function(){var t,n,r,i,a,u,c,l,h,d,f,p,g,m=this;return(0,s.__generator)(this,function(v){switch(v.label){case 0:if(!this.shouldReconnect_())return[3,4];this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+e.nextConnectionId_++,a=this.lastSessionId,u=!1,c=null,this.realtime_={close:l=function(){c?c.close():(u=!0,r())},sendRequest:function(t){(0,o.assert)(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(t)}},h=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,v.label=1;case 1:return v.trys.push([1,3,,4]),[4,Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)])];case 2:return d=s.__read.apply(void 0,[v.sent(),2]),f=d[0],p=d[1],u?C("getToken() completed but was canceled"):(C("getToken() completed. Creating connection."),this.authToken_=f&&f.accessToken,this.appCheckToken_=p&&p.token,c=new ut(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,n,r,function(t){k(t+" ("+m.repoInfo_.toString()+")"),m.interrupt("server_kill")},a)),[3,4];case 3:return g=v.sent(),this.log_("Failed to get token: "+g),u||(this.repoInfo_.nodeAdmin&&k(g),l()),[3,4];case 4:return[2]}})})},e.prototype.interrupt=function(t){C("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){C("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,o.isEmpty)(this.interruptReasons_)&&(this.reconnectDelay_=Ot,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map(function(t){return D(t)}).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new dt(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){C("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onAppCheckRevoked_=function(t,e){C("App check token revoked: "+t+"/"+e),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth(),this.tryAppCheck();try{for(var i=(0,s.__values)(this.listens.values()),o=i.next();!o.done;o=i.next()){var a=o.value;try{for(var u=(n=void 0,(0,s.__values)(a.values())),c=u.next();!c.done;c=u.next())this.sendListen_(c.value)}catch(d){n={error:d}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(f){t={error:f}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}for(l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)},e.prototype.sendConnectStats_=function(){var t={},e="js";(0,o.isNodeSdk)()&&(e=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+e+"."+u.replace(/\./g,"-")]=1,(0,o.isMobileCordova)()?t["framework.cordova"]=1:(0,o.isReactNative)()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=ht.getInstance().currentlyOnline();return(0,o.isEmpty)(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(ct),Dt=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),Lt=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new Dt(x,t),r=new Dt(x,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return Dt.MIN},t}(),Ft=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,s.__extends)(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return xt},set:function(t){xt=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return P(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw(0,o.assertionError)("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return Dt.MIN},e.prototype.maxPost=function(){return new Dt(N,xt)},e.prototype.makePost=function(t,e){return(0,o.assert)("string"==typeof t,"KeyIndex indexValue must always be a string."),new Dt(t,xt)},e.prototype.toString=function(){return".key"},e}(Lt),Mt=new Ft,Ut=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),qt=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:Vt.EMPTY_NODE,this.right=null!=o?o:Vt.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return Vt.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Vt.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),jt=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new qt(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),Vt=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,qt.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,qt.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new Ut(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new Ut(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new Ut(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new Ut(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new jt,t}();function Bt(t,e){return P(t.name,e.name)}function Ht(t,e){return P(t,e)}var zt,Gt,Zt,Kt,Wt,Yt=function(t){return"number"==typeof t?"number:"+M(t):"string:"+t},Qt=function(t){if(t.isLeafNode()){var e=t.val();(0,o.assert)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,o.contains)(e,".sv"),"Priority must be a string or number.")}else(0,o.assert)(t===Nt||t.isEmpty(),"priority of unexpected type.");(0,o.assert)(t===Nt||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},$t=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,(0,o.assert)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Qt(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return zt},set:function(t){zt=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return bt(e)?this:".priority"===pt(e)?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=pt(e);return null===r?n:n.isEmpty()&&".priority"!==r?this:((0,o.assert)(".priority"!==r||1===gt(e),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(mt(e),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+Yt(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?M(this.value_):this.value_,this.lazyHash_=y(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:((0,o.assert)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,i=t.VALUE_TYPE_ORDER.indexOf(n),s=t.VALUE_TYPE_ORDER.indexOf(r);return(0,o.assert)(i>=0,"Unknown leaf type: "+n),(0,o.assert)(s>=0,"Unknown leaf type: "+r),i===s?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}(),Jt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,s.__extends)(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?P(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return Dt.MIN},e.prototype.maxPost=function(){return new Dt(N,new $t("[PRIORITY-POST]",Zt))},e.prototype.makePost=function(t,e){var n=Gt(t);return new Dt(e,new $t("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(Lt)),Xt=Math.log(2),te=function(){function t(t){this.count=parseInt(Math.log(t+1)/Xt,10),this.current_=this.count-1;var e=parseInt(Array(this.count+1).join("1"),2);this.bits_=t+1&e}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),ee=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,s,a=r-e;if(0===a)return null;if(1===a)return o=t[e],s=n?n(o):o,new qt(s,o.node,qt.BLACK,null,null);var u=parseInt(a/2,10)+e,c=i(e,u),l=i(u+1,r);return o=t[u],s=n?n(o):o,new qt(s,o.node,qt.BLACK,c,l)},o=function(e){for(var r=null,o=null,s=t.length,a=function(e,r){var o=s-e,a=s;s-=e;var c=i(o+1,a),l=t[o],h=n?n(l):l;u(new qt(h,l.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var l=e.nextBitIsOne(),h=Math.pow(2,e.count-(c+1));l?a(h,qt.BLACK):(a(h,qt.BLACK),a(h,qt.RED))}return o}(new te(t.length));return new Vt(r||e,o)},ne={},re=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return(0,o.assert)(ne&&Jt,"ChildrenNode.ts has not been loaded"),Kt=Kt||new t({".priority":ne},{".priority":Jt})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=(0,o.safeGet)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Vt?e:null},t.prototype.hasIndex=function(t){return(0,o.contains)(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){(0,o.assert)(e!==Mt,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],a=!1,u=n.getIterator(Dt.Wrap),c=u.getNext();c;)a=a||e.isDefinedOn(c.node),i.push(c),c=u.getNext();r=a?ee(i,e.getCompare()):ne;var l=e.toString(),h=(0,s.__assign)({},this.indexSet_);h[l]=e;var d=(0,s.__assign)({},this.indexes_);return d[l]=r,new t(d,h)},t.prototype.addToIndexes=function(e,n){var r=this;return new t((0,o.map)(this.indexes_,function(t,i){var s=(0,o.safeGet)(r.indexSet_,i);if((0,o.assert)(s,"Missing index implementation for "+i),t===ne){if(s.isDefinedOn(e.node)){for(var a=[],u=n.getIterator(Dt.Wrap),c=u.getNext();c;)c.name!==e.name&&a.push(c),c=u.getNext();return a.push(e),ee(a,s.getCompare())}return ne}var l=n.get(e.name),h=t;return l&&(h=h.remove(new Dt(e.name,l))),h.insert(e,e.node)}),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t((0,o.map)(this.indexes_,function(t){if(t===ne)return t;var r=n.get(e.name);return r?t.remove(new Dt(e.name,r)):t}),this.indexSet_)},t}(),ie=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Qt(this.priorityNode_),this.children_.isEmpty()&&(0,o.assert)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return Wt||(Wt=new t(new Vt(Ht),null,re.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||Wt},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?Wt:e},t.prototype.getChild=function(t){var e=pt(t);return null===e?this:this.getImmediateChild(e).getChild(mt(t))},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if((0,o.assert)(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new Dt(e,n),i=void 0,s=void 0;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));var a=i.isEmpty()?Wt:this.priorityNode_;return new t(i,a,s)},t.prototype.updateChild=function(t,e){var n=pt(t);if(null===n)return e;(0,o.assert)(".priority"!==pt(t)||1===gt(t),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(mt(t),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(Jt,function(s,a){n[s]=a.val(e),r++,o&&t.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):o=!1}),!e&&o&&i<2*r){var s=[];for(var a in n)s[a]=n[a];return s}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+Yt(this.getPriority().val())+":"),this.forEachChild(Jt,function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)}),this.lazyHash_=""===t?"":y(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Dt(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new Dt(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new Dt(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal(function(t){return e(t.name,t.node)}):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,function(t){return t});for(var r=this.children_.getIteratorFrom(t.name,Dt.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,function(t){return t});for(var r=this.children_.getReverseIteratorFrom(t.name,Dt.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===oe?-1:0},t.prototype.withIndex=function(e){if(e===Mt||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===Mt||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(Jt),r=e.getIterator(Jt),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===Mt?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),oe=new(function(t){function e(){return t.call(this,new Vt(Ht),ie.EMPTY_NODE,re.Default)||this}return(0,s.__extends)(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return ie.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(ie));function se(t,e){if(void 0===e&&(e=null),null===t)return ie.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),(0,o.assert)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new $t(t,se(e));if(t instanceof Array){var n=ie.EMPTY_NODE;return F(t,function(e,r){if((0,o.contains)(t,e)&&"."!==e.substring(0,1)){var i=se(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(e,i))}}),n.updatePriority(se(e))}var r=[],i=!1;if(F(t,function(t,e){if("."!==t.substring(0,1)){var n=se(e);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new Dt(t,n)))}}),0===r.length)return ie.EMPTY_NODE;var s=ee(r,Bt,function(t){return t.name},Ht);if(i){var a=ee(r,Jt.getCompare());return new ie(s,se(e),new re({".priority":a},{".priority":Jt}))}return new ie(s,se(e),re.Default)}Object.defineProperties(Dt,{MIN:{value:new Dt(x,ie.EMPTY_NODE)},MAX:{value:new Dt(N,oe)}}),Ft.__EMPTY_NODE=ie.EMPTY_NODE,$t.__childrenNodeConstructor=ie,Nt=oe,Zt=oe,Gt=se;var ae,ue,ce=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,(0,o.assert)(!bt(e)&&".priority"!==pt(e),"Can't create PathIndex with empty path or .priority key"),n}return(0,s.__extends)(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?P(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=se(t),r=ie.EMPTY_NODE.updateChild(this.indexPath_,n);return new Dt(e,r)},e.prototype.maxPost=function(){var t=ie.EMPTY_NODE.updateChild(this.indexPath_,oe);return new Dt(N,t)},e.prototype.toString=function(){return yt(this.indexPath_,0).join("/")},e}(Lt),le=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,s.__extends)(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?P(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return Dt.MIN},e.prototype.maxPost=function(){return Dt.MAX},e.prototype.makePost=function(t,e){var n=se(t);return new Dt(e,n)},e.prototype.toString=function(){return".value"},e}(Lt)),he="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",de=(ae=0,ue=[],function(t){var e,n=t===ae;ae=t;var r=new Array(8);for(e=7;e>=0;e--)r[e]=he.charAt(t%64),t=Math.floor(t/64);(0,o.assert)(0===t,"Cannot push at time == 0");var i=r.join("");if(n){for(e=11;e>=0&&63===ue[e];e--)ue[e]=0;ue[e]++}else for(e=0;e<12;e++)ue[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)i+=he.charAt(ue[e]);return(0,o.assert)(20===i.length,"nextPushId: Length should be 20."),i}),fe=function(t){if("2147483647"===t)return"-";var e=q(t);if(null!=e)return""+(e+1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return N;var o=he.charAt(he.indexOf(n[i])+1);return n[i]=o,n.slice(0,i+1).join("")},pe=function(t){if("-2147483648"===t)return x;var e=q(t);if(null!=e)return""+(e-1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=he.charAt(he.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))};function ge(t){return{type:"value",snapshotNode:t}}function me(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function ve(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function ye(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}var _e=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,s){(0,o.assert)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?t:(null!=s&&(n.isEmpty()?t.hasChild(e)?s.trackChildChange(ve(e,a)):(0,o.assert)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(me(e,n)):s.trackChildChange(ye(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(Jt,function(t,r){e.hasChild(t)||n.trackChildChange(ve(t,r))}),e.isLeafNode()||e.forEachChild(Jt,function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(ye(e,r,i))}else n.trackChildChange(me(e,r))})),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?ie.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),we=function(){function t(e){this.indexedFilter_=new _e(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new Dt(e,n))||(n=ie.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=ie.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(ie.EMPTY_NODE);var i=this;return e.forEachChild(Jt,function(t,e){i.matches(new Dt(t,e))||(r=r.updateImmediateChild(t,ie.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),be=function(){function t(t){this.rangedFilter_=new we(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new Dt(e,n))||(n=ie.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=ie.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=ie.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(ie.EMPTY_NODE);var a=void 0,u=void 0,c=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(t,e){return l(e,t)}}else i=r.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();)s=i.getNext(),!h&&c(a,s)<=0&&(h=!0),h&&o<this.limit_&&c(s,u)<=0?o++:r=r.updateImmediateChild(s.name,ie.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var s;if(this.reverse_){var a=this.index_.getCompare();s=function(t,e){return a(e,t)}}else s=this.index_.getCompare();var u=t;(0,o.assert)(u.numChildren()===this.limit_,"");var c=new Dt(e,n),l=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(u.hasChild(e)){for(var d=u.getImmediateChild(e),f=r.getChildAfterChild(this.index_,l,this.reverse_);null!=f&&(f.name===e||u.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var p=null==f?1:s(f,c);if(h&&!n.isEmpty()&&p>=0)return null!=i&&i.trackChildChange(ye(e,n,d)),u.updateImmediateChild(e,n);null!=i&&i.trackChildChange(ve(e,d));var g=u.updateImmediateChild(e,ie.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(me(f.name,f.node)),g.updateImmediateChild(f.name,f.node)):g}return n.isEmpty()?t:h&&s(l,c)>=0?(null!=i&&(i.trackChildChange(ve(l.name,l.node)),i.trackChildChange(me(e,n))),u.updateImmediateChild(e,n).updateImmediateChild(l.name,ie.EMPTY_NODE)):t},t}(),Te=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Jt}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.hasStartAfter=function(){return this.startAfterSet_},t.prototype.hasEndBefore=function(){return this.endBeforeSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},t.prototype.getIndexStartValue=function(){return(0,o.assert)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return(0,o.assert)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:x},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return(0,o.assert)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return(0,o.assert)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:N},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return(0,o.assert)(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Jt},t.prototype.copy=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t}();function Ce(t,e,n){var r=t.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function Ee(t,e,n){var r=t.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function Ie(t,e){var n=t.copy();return n.index_=e,n}function Se(t){var e,n={};return t.isDefault()||(t.index_===Jt?e="$priority":t.index_===le?e="$value":t.index_===Mt?e="$key":((0,o.assert)(t.index_ instanceof ce,"Unrecognized index type!"),e=t.index_.toString()),n.orderBy=(0,o.stringify)(e),t.startSet_&&(n.startAt=(0,o.stringify)(t.indexStartValue_),t.startNameSet_&&(n.startAt+=","+(0,o.stringify)(t.indexStartName_))),t.endSet_&&(n.endAt=(0,o.stringify)(t.indexEndValue_),t.endNameSet_&&(n.endAt+=","+(0,o.stringify)(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?n.limitToFirst=t.limit_:n.limitToLast=t.limit_)),n}function ke(t){var e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_)),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_)),t.limitSet_){e.l=t.limit_;var n=t.viewFrom_;""===n&&(n=t.isViewFromLeft()?"l":"r"),e.vf=n}return t.index_!==Jt&&(e.i=t.index_.toString()),e}var Ae=function(t){function e(e,n,r,i){var o=t.call(this)||this;return o.repoInfo_=e,o.onDataUpdate_=n,o.authTokenProvider_=r,o.appCheckTokenProvider_=i,o.log_=E("p:rest:"),o.listens_={},o}return(0,s.__extends)(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:((0,o.assert)(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())},e.prototype.listen=function(t,n,r,i){var s=this,a=t._path.toString();this.log_("Listen called for "+a+" "+t._queryIdentifier);var u=e.getListenId_(t,r),c={};this.listens_[u]=c;var l=Se(t._queryParams);this.restRequest_(a+".json",l,function(t,e){var n=e;404===t&&(n=null,t=null),null===t&&s.onDataUpdate_(a,n,!1,r),(0,o.safeGet)(s.listens_,u)===c&&i(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)})},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.get=function(t){var e=this,n=Se(t._queryParams),r=t._path.toString(),i=new o.Deferred;return this.restRequest_(r+".json",n,function(t,n){var o=n;404===t&&(o=null,t=null),null===t?(e.onDataUpdate_(r,o,!1,null),i.resolve(o)):i.reject(new Error(o))}),i.promise},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;return void 0===e&&(e={}),e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(function(i){var a=(0,s.__read)(i,2),u=a[0],c=a[1];u&&u.accessToken&&(e.auth=u.accessToken),c&&c.token&&(e.ac=c.token);var l=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+(0,o.querystring)(e);r.log_("Sending REST request for "+l);var h=new XMLHttpRequest;h.onreadystatechange=function(){if(n&&4===h.readyState){r.log_("REST Response for "+l+" received. status:",h.status,"response:",h.responseText);var t=null;if(h.status>=200&&h.status<300){try{t=(0,o.jsonEval)(h.responseText)}catch(e){k("Failed to parse JSON response for "+l+": "+h.responseText)}n(null,t)}else 401!==h.status&&404!==h.status&&k("Got unsuccessful REST response for "+l+" Status: "+h.status),n(h.status);n=null}},h.open("GET",l,!0),h.send()})},e}(ct),xe=function(){function t(){this.rootNode_=ie.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}();function Ne(){return{value:null,children:new Map}}function Pe(t,e,n){if(bt(e))t.value=n,t.children.clear();else if(null!==t.value)t.value=t.value.updateChild(e,n);else{var r=pt(e);t.children.has(r)||t.children.set(r,Ne()),Pe(t.children.get(r),e=mt(e),n)}}function Oe(t,e){if(bt(e))return t.value=null,t.children.clear(),!0;if(null!==t.value){if(t.value.isLeafNode())return!1;var n=t.value;return t.value=null,n.forEachChild(Jt,function(e,n){Pe(t,new dt(e),n)}),Oe(t,e)}if(t.children.size>0){var r=pt(e);return e=mt(e),t.children.has(r)&&Oe(t.children.get(r),e)&&t.children.delete(r),0===t.children.size}return!0}function Re(t,e,n){null!==t.value?n(e,t.value):function(t,e){t.children.forEach(function(t,n){e(n,t)})}(t,function(t,r){Re(r,new dt(e.toString()+"/"+t),n)})}var De=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=(0,s.__assign)({},t);return this.last_&&F(this.last_,function(t,n){e[t]=e[t]-n}),this.last_=t,e},t}(),Le=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new De(t);var n=1e4+2e4*Math.random();V(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;F(e,function(e,i){i>0&&(0,o.contains)(t.statsToReport_,e)&&(n[e]=i,r=!0)}),r&&this.server_.reportStats(n),V(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),Fe=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}({});function Me(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var Ue,qe=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=Fe.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return t.prototype.operationForChild=function(e){if(bt(this.path)){if(null!=this.affectedTree.value)return(0,o.assert)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new dt(e));return new t(ft(),n,this.revert)}return(0,o.assert)(pt(this.path)===e,"operationForChild called for unrelated child."),new t(mt(this.path),this.affectedTree,this.revert)},t}(),je=function(){function t(t,e){this.source=t,this.path=e,this.type=Fe.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return bt(this.path)?new t(this.source,ft()):new t(this.source,mt(this.path))},t}(),Ve=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=Fe.OVERWRITE}return t.prototype.operationForChild=function(e){return bt(this.path)?new t(this.source,ft(),this.snap.getImmediateChild(e)):new t(this.source,mt(this.path),this.snap)},t}(),Be=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=Fe.MERGE}return t.prototype.operationForChild=function(e){if(bt(this.path)){var n=this.children.subtree(new dt(e));return n.isEmpty()?null:n.value?new Ve(this.source,ft(),n.value):new t(this.source,ft(),n)}return(0,o.assert)(pt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,mt(this.path),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),He=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(bt(t))return this.isFullyInitialized()&&!this.filtered_;var e=pt(t);return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),ze=function(){return function(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}();function Ge(t,e,n,r,i,s){var a=r.filter(function(t){return t.type===n});a.sort(function(e,n){return function(t,e,n){if(null==e.childName||null==n.childName)throw(0,o.assertionError)("Should only compare child_ events.");var r=new Dt(e.childName,e.snapshotNode),i=new Dt(n.childName,n.snapshotNode);return t.index_.compare(r,i)}(t,e,n)}),a.forEach(function(n){var r=function(t,e,n){return"value"===e.type||"child_removed"===e.type||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}(t,n,s);i.forEach(function(i){i.respondsTo(n.type)&&e.push(i.createEvent(r,t.query_))})})}function Ze(t,e){return{eventCache:t,serverCache:e}}function Ke(t,e,n,r){return Ze(new He(e,n,r),t.serverCache)}function We(t,e,n,r){return Ze(t.eventCache,new He(e,n,r))}function Ye(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Qe(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var $e=function(){function t(t,e){void 0===e&&(Ue||(Ue=new Vt(O)),e=Ue),this.value=t,this.children=e}return t.fromObject=function(e){var n=new t(null);return F(e,function(t,e){n=n.set(new dt(t),e)}),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:ft(),value:this.value};if(bt(t))return null;var n=pt(t),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(mt(t),e);return null!=i?{path:wt(new dt(n),i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},t.prototype.subtree=function(e){if(bt(e))return this;var n=pt(e),r=this.children.get(n);return null!==r?r.subtree(mt(e)):new t(null)},t.prototype.set=function(e,n){if(bt(e))return new t(n,this.children);var r=pt(e),i=(this.children.get(r)||new t(null)).set(mt(e),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(bt(e))return this.children.isEmpty()?new t(null):new t(null,this.children);var n=pt(e),r=this.children.get(n);if(r){var i=r.remove(mt(e)),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?new t(null):new t(this.value,o)}return this},t.prototype.get=function(t){if(bt(t))return this.value;var e=pt(t),n=this.children.get(e);return n?n.get(mt(t)):null},t.prototype.setTree=function(e,n){if(bt(e))return n;var r,i=pt(e),o=(this.children.get(i)||new t(null)).setTree(mt(e),n);return r=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new t(this.value,r)},t.prototype.fold=function(t){return this.fold_(ft(),t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal(function(r,i){n[r]=i.fold_(wt(t,r),e)}),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,ft(),e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(bt(t))return null;var i=pt(t),o=this.children.get(i);return o?o.findOnPath_(mt(t),wt(e,i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,ft(),e)},t.prototype.foreachOnPath_=function(e,n,r){if(bt(e))return this;this.value&&r(n,this.value);var i=pt(e),o=this.children.get(i);return o?o.foreachOnPath_(mt(e),wt(n,i),r):new t(null)},t.prototype.foreach=function(t){this.foreach_(ft(),t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal(function(n,r){r.foreach_(wt(t,n),e)}),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal(function(e,n){n.value&&t(e,n.value)})},t}(),Je=function(){function t(t){this.writeTree_=t}return t.empty=function(){return new t(new $e(null))},t}();function Xe(t,e,n){if(bt(e))return new Je(new $e(n));var r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,s=Tt(i,e);return o=o.updateChild(s,n),new Je(t.writeTree_.set(i,o))}var a=new $e(n),u=t.writeTree_.setTree(e,a);return new Je(u)}function tn(t,e,n){var r=t;return F(n,function(t,n){r=Xe(r,wt(e,t),n)}),r}function en(t,e){if(bt(e))return Je.empty();var n=t.writeTree_.setTree(e,new $e(null));return new Je(n)}function nn(t,e){return null!=rn(t,e)}function rn(t,e){var n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(Tt(n.path,e)):null}function on(t){var e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Jt,function(t,n){e.push(new Dt(t,n))}):t.writeTree_.children.inorderTraversal(function(t,n){null!=n.value&&e.push(new Dt(t,n.value))}),e}function sn(t,e){if(bt(e))return t;var n=rn(t,e);return new Je(null!=n?new $e(n):t.writeTree_.subtree(e))}function an(t){return t.writeTree_.isEmpty()}function un(t,e){return cn(ft(),t.writeTree_,e)}function cn(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);var r=null;return e.children.inorderTraversal(function(e,i){".priority"===e?((0,o.assert)(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=cn(wt(t,e),i,n)}),n.getChild(t).isEmpty()||null===r||(n=n.updateChild(wt(t,".priority"),r)),n}function ln(t,e){return bn(e,t)}function hn(t,e){if(t.snap)return It(t.path,e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&It(wt(t.path,n),e))return!0;return!1}function dn(t){return t.visible}function fn(t,e,n){for(var r=Je.empty(),i=0;i<t.length;++i){var s=t[i];if(e(s)){var a=s.path,u=void 0;if(s.snap)It(n,a)?r=Xe(r,u=Tt(n,a),s.snap):It(a,n)&&(u=Tt(a,n),r=Xe(r,ft(),s.snap.getChild(u)));else{if(!s.children)throw(0,o.assertionError)("WriteRecord should have .snap or .children");if(It(n,a))r=tn(r,u=Tt(n,a),s.children);else if(It(a,n))if(bt(u=Tt(a,n)))r=tn(r,ft(),s.children);else{var c=(0,o.safeGet)(s.children,pt(u));if(c){var l=c.getChild(mt(u));r=Xe(r,ft(),l)}}}}}return r}function pn(t,e,n,r,i){if(r||i){var o=sn(t.visibleWrites,e);return!i&&an(o)?n:i||null!=n||nn(o,ft())?un(fn(t.allWrites,function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(It(t.path,e)||It(e,t.path))},e),n||ie.EMPTY_NODE):null}var s=rn(t.visibleWrites,e);if(null!=s)return s;var a=sn(t.visibleWrites,e);return an(a)?n:null!=n||nn(a,ft())?un(a,n||ie.EMPTY_NODE):null}function gn(t,e,n,r){return pn(t.writeTree,t.treePath,e,n,r)}function mn(t,e){return function(t,e,n){var r=ie.EMPTY_NODE,i=rn(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Jt,function(t,e){r=r.updateImmediateChild(t,e)}),r;if(n){var o=sn(t.visibleWrites,e);return n.forEachChild(Jt,function(t,e){var n=un(sn(o,new dt(t)),e);r=r.updateImmediateChild(t,n)}),on(o).forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r}return on(sn(t.visibleWrites,e)).forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r}(t.writeTree,t.treePath,e)}function vn(t,e,n,r){return function(t,e,n,r,i){(0,o.assert)(r||i,"Either existingEventSnap or existingServerSnap must exist");var s=wt(e,n);if(nn(t.visibleWrites,s))return null;var a=sn(t.visibleWrites,s);return an(a)?i.getChild(n):un(a,i.getChild(n))}(t.writeTree,t.treePath,e,n,r)}function yn(t,e){return function(t,e){return rn(t.visibleWrites,e)}(t.writeTree,wt(t.treePath,e))}function _n(t,e,n){return function(t,e,n,r){var i=wt(e,n),o=rn(t.visibleWrites,i);return null!=o?o:r.isCompleteForChild(n)?un(sn(t.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(t.writeTree,t.treePath,e,n)}function wn(t,e){return bn(wt(t.treePath,e),t.writeTree)}function bn(t,e){return{treePath:t,writeTree:e}}var Tn=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;(0,o.assert)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),(0,o.assert)(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===e&&"child_removed"===i)this.changeMap.set(n,ye(n,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===e&&"child_changed"===i)this.changeMap.set(n,ve(n,r.oldSnap));else if("child_changed"===e&&"child_added"===i)this.changeMap.set(n,me(n,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==i)throw(0,o.assertionError)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,ye(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),Cn=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),En=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new He(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return _n(this.writes_,t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Qe(this.viewCache_),i=function(t,e,n,r,i,o){return function(t,e,n,r,i,o,s){var a,u=sn(t.visibleWrites,e),c=rn(u,ft());if(null!=c)a=c;else{if(null==n)return[];a=un(u,n)}if((a=a.withIndex(s)).isEmpty()||a.isLeafNode())return[];for(var l=[],h=s.getCompare(),d=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s),f=d.getNext();f&&l.length<1;)0!==h(f,r)&&l.push(f),f=d.getNext();return l}(t.writeTree,t.treePath,e,n,0,i,o)}(this.writes_,r,e,0,n,t);return 0===i.length?null:i[0]},t}();function In(t,e,n,r,i,s){var a=e.eventCache;if(null!=yn(r,n))return e;var u=void 0,c=void 0;if(bt(n))if((0,o.assert)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){var l=Qe(e),h=mn(r,l instanceof ie?l:ie.EMPTY_NODE);u=t.filter.updateFullNode(e.eventCache.getNode(),h,s)}else{var d=gn(r,Qe(e));u=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{var f=pt(n);if(".priority"===f){(0,o.assert)(1===gt(n),"Can't have a priority with additional path components");var p=a.getNode(),g=vn(r,n,p,c=e.serverCache.getNode());u=null!=g?t.filter.updatePriority(p,g):a.getNode()}else{var m=mt(n),v=void 0;if(a.isCompleteForChild(f)){c=e.serverCache.getNode();var y=vn(r,n,a.getNode(),c);v=null!=y?a.getNode().getImmediateChild(f).updateChild(m,y):a.getNode().getImmediateChild(f)}else v=_n(r,f,e.serverCache);u=null!=v?t.filter.updateChild(a.getNode(),f,v,m,i,s):a.getNode()}}return Ke(e,u,a.isFullyInitialized()||bt(n),t.filter.filtersNodes())}function Sn(t,e,n,r,i,o,s,a){var u,c=e.serverCache,l=s?t.filter:t.filter.getIndexedFilter();if(bt(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var h=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),h,null)}else{var d=pt(n);if(!c.isCompleteForPath(n)&&gt(n)>1)return e;var f=mt(n),p=c.getNode().getImmediateChild(d).updateChild(f,r);u=".priority"===d?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),d,p,f,Cn,null)}var g=We(e,u,c.isFullyInitialized()||bt(n),l.filtersNodes());return In(t,g,n,i,new En(i,g,o),a)}function kn(t,e,n,r,i,o,s){var a,u,c=e.eventCache,l=new En(i,e,o);if(bt(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,s),a=Ke(e,u,!0,t.filter.filtersNodes());else{var h=pt(n);if(".priority"===h)u=t.filter.updatePriority(e.eventCache.getNode(),r),a=Ke(e,u,c.isFullyInitialized(),c.isFiltered());else{var d=mt(n),f=c.getNode().getImmediateChild(h),p=void 0;if(bt(d))p=r;else{var g=l.getCompleteChild(h);p=null!=g?".priority"===vt(d)&&g.getChild(_t(d)).isEmpty()?g:g.updateChild(d,r):ie.EMPTY_NODE}a=f.equals(p)?e:Ke(e,t.filter.updateChild(c.getNode(),h,p,d,l,s),c.isFullyInitialized(),t.filter.filtersNodes())}}return a}function An(t,e){return t.eventCache.isCompleteForChild(e)}function xn(t,e,n){return n.foreach(function(t,n){e=e.updateChild(t,n)}),e}function Nn(t,e,n,r,i,o,s,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;var u,c=e;u=bt(n)?r:new $e(null).setTree(n,r);var l=e.serverCache.getNode();return u.children.inorderTraversal(function(n,r){if(l.hasChild(n)){var u=xn(0,e.serverCache.getNode().getImmediateChild(n),r);c=Sn(t,c,new dt(n),u,i,o,s,a)}}),u.children.inorderTraversal(function(n,r){var u=!e.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!l.hasChild(n)&&!u){var h=xn(0,e.serverCache.getNode().getImmediateChild(n),r);c=Sn(t,c,new dt(n),h,i,o,s,a)}}),c}var Pn,On=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n,r=this.query_._queryParams,i=new _e(r.getIndex()),o=(n=r).loadsAllData()?new _e(n.getIndex()):n.hasLimit()?new be(n):new we(n);this.processor_=function(t){return{filter:t}}(o);var s=e.serverCache,a=e.eventCache,u=i.updateFullNode(ie.EMPTY_NODE,s.getNode(),null),c=o.updateFullNode(ie.EMPTY_NODE,a.getNode(),null),l=new He(u,s.isFullyInitialized(),i.filtersNodes()),h=new He(c,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=Ze(h,l),this.eventGenerator_=new ze(this.query_)}return Object.defineProperty(t.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),t}();function Rn(t,e){var n=Qe(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!bt(e)&&!n.getImmediateChild(pt(e)).isEmpty())?n.getChild(e):null}function Dn(t){return 0===t.eventRegistrations_.length}function Ln(t,e,n){var r=[];if(n){(0,o.assert)(null==e,"A cancel should cancel all event registrations.");var i=t.query._path;t.eventRegistrations_.forEach(function(t){var e=t.createCancelEvent(n,i);e&&r.push(e)})}if(e){for(var s=[],a=0;a<t.eventRegistrations_.length;++a){var u=t.eventRegistrations_[a];if(u.matches(e)){if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(a+1));break}}else s.push(u)}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function Fn(t,e,n,r){e.type===Fe.MERGE&&null!==e.source.queryId&&((0,o.assert)(Qe(t.viewCache_),"We should always have a full cache before handling merges"),(0,o.assert)(Ye(t.viewCache_),"Missing event cache, even though we have a server cache"));var i,s,a=t.viewCache_,u=function(t,e,n,r,i){var s,a,u=new Tn;if(n.type===Fe.OVERWRITE){var c=n;c.source.fromUser?s=kn(t,e,c.path,c.snap,r,i,u):((0,o.assert)(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!bt(c.path),s=Sn(t,e,c.path,c.snap,r,i,a,u))}else if(n.type===Fe.MERGE){var l=n;l.source.fromUser?s=function(t,e,n,r,i,o,s){var a=e;return r.foreach(function(r,u){var c=wt(n,r);An(e,pt(c))&&(a=kn(t,a,c,u,i,o,s))}),r.foreach(function(r,u){var c=wt(n,r);An(e,pt(c))||(a=kn(t,a,c,u,i,o,s))}),a}(t,e,l.path,l.children,r,i,u):((0,o.assert)(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),s=Nn(t,e,l.path,l.children,r,i,a,u))}else if(n.type===Fe.ACK_USER_WRITE){var h=n;s=h.revert?function(t,e,n,r,i,s){var a;if(null!=yn(r,n))return e;var u=new En(r,e,i),c=e.eventCache.getNode(),l=void 0;if(bt(n)||".priority"===pt(n)){var h=void 0;if(e.serverCache.isFullyInitialized())h=gn(r,Qe(e));else{var d=e.serverCache.getNode();(0,o.assert)(d instanceof ie,"serverChildren would be complete if leaf node"),h=mn(r,d)}l=t.filter.updateFullNode(c,h=h,s)}else{var f=pt(n),p=_n(r,f,e.serverCache);null==p&&e.serverCache.isCompleteForChild(f)&&(p=c.getImmediateChild(f)),(l=null!=p?t.filter.updateChild(c,f,p,mt(n),u,s):e.eventCache.getNode().hasChild(f)?t.filter.updateChild(c,f,ie.EMPTY_NODE,mt(n),u,s):c).isEmpty()&&e.serverCache.isFullyInitialized()&&(a=gn(r,Qe(e))).isLeafNode()&&(l=t.filter.updateFullNode(l,a,s))}return a=e.serverCache.isFullyInitialized()||null!=yn(r,ft()),Ke(e,l,a,t.filter.filtersNodes())}(t,e,h.path,r,i,u):function(t,e,n,r,i,o,s){if(null!=yn(i,n))return e;var a=e.serverCache.isFiltered(),u=e.serverCache;if(null!=r.value){if(bt(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return Sn(t,e,n,u.getNode().getChild(n),i,o,a,s);if(bt(n)){var c=new $e(null);return u.getNode().forEachChild(Mt,function(t,e){c=c.set(new dt(t),e)}),Nn(t,e,n,c,i,o,a,s)}return e}var l=new $e(null);return r.foreach(function(t,e){var r=wt(n,t);u.isCompleteForPath(r)&&(l=l.set(t,u.getNode().getChild(r)))}),Nn(t,e,n,l,i,o,a,s)}(t,e,h.path,h.affectedTree,r,i,u)}else{if(n.type!==Fe.LISTEN_COMPLETE)throw(0,o.assertionError)("Unknown operation type: "+n.type);s=function(t,e,n,r,i){var o=e.serverCache;return In(t,We(e,o.getNode(),o.isFullyInitialized()||bt(n),o.isFiltered()),n,r,Cn,i)}(t,e,n.path,r,u)}var d=u.getChanges();return function(t,e,n){var r=e.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=Ye(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(ge(Ye(e)))}}(e,s,d),{viewCache:s,changes:d}}(t.processor_,a,e,n,r);return i=t.processor_,(0,o.assert)((s=u.viewCache).eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),(0,o.assert)(s.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),(0,o.assert)(u.viewCache.serverCache.isFullyInitialized()||!a.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=u.viewCache,Mn(t,u.changes,u.viewCache.eventCache.getNode(),null)}function Mn(t,e,n,r){return function(t,e,n,r){var i=[],o=[];return e.forEach(function(e){"child_changed"===e.type&&t.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&o.push({type:"child_moved",snapshotNode:e.snapshotNode,childName:e.childName})}),Ge(t,i,"child_removed",e,r,n),Ge(t,i,"child_added",e,r,n),Ge(t,i,"child_moved",o,r,n),Ge(t,i,"child_changed",e,r,n),Ge(t,i,"value",e,r,n),i}(t.eventGenerator_,e,n,r?[r]:t.eventRegistrations_)}var Un,qn=function(){return function(){this.views=new Map}}();function jn(t,e,n,r){var i,a,u=e.source.queryId;if(null!==u){var c=t.views.get(u);return(0,o.assert)(null!=c,"SyncTree gave us an op for an invalid query."),Fn(c,e,n,r)}var l=[];try{for(var h=(0,s.__values)(t.views.values()),d=h.next();!d.done;d=h.next())l=l.concat(Fn(c=d.value,e,n,r))}catch(f){i={error:f}}finally{try{d&&!d.done&&(a=h.return)&&a.call(h)}finally{if(i)throw i.error}}return l}function Vn(t,e,n,r,i){var o=t.views.get(e._queryIdentifier);if(!o){var s=gn(n,i?r:null),a=!1;s?a=!0:r instanceof ie?(s=mn(n,r),a=!1):(s=ie.EMPTY_NODE,a=!1);var u=Ze(new He(s,a,!1),new He(r,i,!1));return new On(e,u)}return o}function Bn(t){var e,n,r=[];try{for(var i=(0,s.__values)(t.views.values()),o=i.next();!o.done;o=i.next()){var a=o.value;a.query._queryParams.loadsAllData()||r.push(a)}}catch(u){e={error:u}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function Hn(t,e){var n,r,i=null;try{for(var o=(0,s.__values)(t.views.values()),a=o.next();!a.done;a=o.next())i=i||Rn(a.value,e)}catch(u){n={error:u}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i}function zn(t,e){return e._queryParams.loadsAllData()?Kn(t):t.views.get(e._queryIdentifier)}function Gn(t,e){return null!=zn(t,e)}function Zn(t){return null!=Kn(t)}function Kn(t){var e,n;try{for(var r=(0,s.__values)(t.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;if(o.query._queryParams.loadsAllData())return o}}catch(a){e={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return null}var Wn=1,Yn=function(){return function(t){this.listenProvider_=t,this.syncPointTree_=new $e(null),this.pendingWriteTree_={visibleWrites:Je.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}();function Qn(t,e,n,r,i){return function(t,e,n,r,i){(0,o.assert)(r>t.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Xe(t.visibleWrites,e,n)),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r,i),i?nr(t,new Ve({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,n)):[]}function $n(t,e,n){void 0===n&&(n=!1);var r=function(t,e){for(var n=0;n<t.allWrites.length;n++){var r=t.allWrites[n];if(r.writeId===e)return r}return null}(t.pendingWriteTree_,e);if(function(t,e){var n=t.allWrites.findIndex(function(t){return t.writeId===e});(0,o.assert)(n>=0,"removeWrite called with nonexistent writeId.");var r=t.allWrites[n];t.allWrites.splice(n,1);for(var i=r.visible,s=!1,a=t.allWrites.length-1;i&&a>=0;){var u=t.allWrites[a];u.visible&&(a>=n&&hn(u,r.path)?i=!1:It(r.path,u.path)&&(s=!0)),a--}return!!i&&(s?(function(t){t.visibleWrites=fn(t.allWrites,dn,ft()),t.lastWriteId=t.allWrites.length>0?t.allWrites[t.allWrites.length-1].writeId:-1}(t),!0):(r.snap?t.visibleWrites=en(t.visibleWrites,r.path):F(r.children,function(e){t.visibleWrites=en(t.visibleWrites,wt(r.path,e))}),!0))}(t.pendingWriteTree_,e)){var i=new $e(null);return null!=r.snap?i=i.set(ft(),!0):F(r.children,function(t){i=i.set(new dt(t),!0)}),nr(t,new qe(r.path,i,n))}return[]}function Jn(t,e,n){return nr(t,new Ve({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,n))}function Xn(t,e,n,r){var i=e._path,a=t.syncPointTree_.get(i),u=[];if(a&&("default"===e._queryIdentifier||Gn(a,e))){var c=function(t,e,n,r){var i,a,u=e._queryIdentifier,c=[],l=[],h=Zn(t);if("default"===u)try{for(var d=(0,s.__values)(t.views.entries()),f=d.next();!f.done;f=d.next()){var p,g=(0,s.__read)(f.value,2),m=g[0];l=l.concat(Ln(p=g[1],n,r)),Dn(p)&&(t.views.delete(m),p.query._queryParams.loadsAllData()||c.push(p.query))}}catch(v){i={error:v}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}else(p=t.views.get(u))&&(l=l.concat(Ln(p,n,r)),Dn(p)&&(t.views.delete(u),p.query._queryParams.loadsAllData()||c.push(p.query)));return h&&!Zn(t)&&c.push(new((0,o.assert)(Pn,"Reference.ts has not been loaded"),Pn)(e._repo,e._path)),{removed:c,events:l}}(a,e,n,r);0===a.views.size&&(t.syncPointTree_=t.syncPointTree_.remove(i));var l=c.removed;u=c.events;var h=-1!==l.findIndex(function(t){return t._queryParams.loadsAllData()}),d=t.syncPointTree_.findOnPath(i,function(t,e){return Zn(e)});if(h&&!d){var f=t.syncPointTree_.subtree(i);if(!f.isEmpty())for(var p=function(t){return t.fold(function(t,e,n){if(e&&Zn(e))return[Kn(e)];var r=[];return e&&(r=Bn(e)),F(n,function(t,e){r=r.concat(e)}),r})}(f),g=0;g<p.length;++g){var m=p[g],v=m.query,y=or(t,m);t.listenProvider_.startListening(hr(v),sr(t,v),y.hashFn,y.onComplete)}}!d&&l.length>0&&!r&&(h?t.listenProvider_.stopListening(hr(e),null):l.forEach(function(e){var n=t.queryToTagMap.get(ar(e));t.listenProvider_.stopListening(hr(e),n)})),function(t,e){for(var n=0;n<e.length;++n){var r=e[n];if(!r._queryParams.loadsAllData()){var i=ar(r),o=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(o)}}}(t,l)}return u}function tr(t,e,n){var r=e._path,i=null,s=!1;t.syncPointTree_.foreachOnPath(r,function(t,e){var n=Tt(t,r);i=i||Hn(e,n),s=s||Zn(e)});var a,u=t.syncPointTree_.get(r);u?(s=s||Zn(u),i=i||Hn(u,ft())):(u=new qn,t.syncPointTree_=t.syncPointTree_.set(r,u)),null!=i?a=!0:(a=!1,i=ie.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild(function(t,e){var n=Hn(e,ft());n&&(i=i.updateImmediateChild(t,n))}));var c=Gn(u,e);if(!c&&!e._queryParams.loadsAllData()){var l=ar(e);(0,o.assert)(!t.queryToTagMap.has(l),"View does not exist, but we have a tag");var h=Wn++;t.queryToTagMap.set(l,h),t.tagToQueryMap.set(h,l)}var d=function(t,e,n,r,i,o){var s=Vn(t,e,r,i,o);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,s),function(t,e){t.eventRegistrations_.push(e)}(s,n),function(t,e){var n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Jt,function(t,e){r.push(me(t,e))}),n.isFullyInitialized()&&r.push(ge(n.getNode())),Mn(t,r,n.getNode(),e)}(s,n)}(u,e,n,ln(t.pendingWriteTree_,r),i,a);if(!c&&!s){var f=zn(u,e);d=d.concat(function(t,e,n){var r=e._path,i=sr(t,e),s=or(t,n),a=t.listenProvider_.startListening(hr(e),i,s.hashFn,s.onComplete),u=t.syncPointTree_.subtree(r);if(i)(0,o.assert)(!Zn(u.value),"If we're adding a query, it shouldn't be shadowed");else for(var c=u.fold(function(t,e,n){if(!bt(t)&&e&&Zn(e))return[Kn(e).query];var r=[];return e&&(r=r.concat(Bn(e).map(function(t){return t.query}))),F(n,function(t,e){r=r.concat(e)}),r}),l=0;l<c.length;++l){var h=c[l];t.listenProvider_.stopListening(hr(h),sr(t,h))}return a}(t,e,f))}return d}function er(t,e,n){var r=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,function(t,n){var r=Hn(n,Tt(t,e));if(r)return r});return pn(r,e,i,n,!0)}function nr(t,e){return rr(e,t.syncPointTree_,null,ln(t.pendingWriteTree_,ft()))}function rr(t,e,n,r){if(bt(t.path))return ir(t,e,n,r);var i=e.get(ft());null==n&&null!=i&&(n=Hn(i,ft()));var o=[],s=pt(t.path),a=t.operationForChild(s),u=e.children.get(s);if(u&&a){var c=n?n.getImmediateChild(s):null,l=wn(r,s);o=o.concat(rr(a,u,c,l))}return i&&(o=o.concat(jn(i,t,r,n))),o}function ir(t,e,n,r){var i=e.get(ft());null==n&&null!=i&&(n=Hn(i,ft()));var o=[];return e.children.inorderTraversal(function(e,i){var s=n?n.getImmediateChild(e):null,a=wn(r,e),u=t.operationForChild(e);u&&(o=o.concat(ir(u,i,s,a)))}),i&&(o=o.concat(jn(i,t,r,n))),o}function or(t,e){var n=e.query,r=sr(t,n);return{hashFn:function(){return(function(t){return t.viewCache_.serverCache.getNode()}(e)||ie.EMPTY_NODE).hash()},onComplete:function(e){if("ok"===e)return r?function(t,e,n){var r=ur(t,n);if(r){var i=cr(r),o=i.path,s=i.queryId,a=Tt(o,e);return lr(t,o,new je(Me(s),a))}return[]}(t,n._path,r):function(t,e){return nr(t,new je({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(t,n._path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}(e,n);return Xn(t,n,null,i)}}}function sr(t,e){var n=ar(e);return t.queryToTagMap.get(n)}function ar(t){return t._path.toString()+"$"+t._queryIdentifier}function ur(t,e){return t.tagToQueryMap.get(e)}function cr(t){var e=t.indexOf("$");return(0,o.assert)(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new dt(t.substr(0,e))}}function lr(t,e,n){var r=t.syncPointTree_.get(e);return(0,o.assert)(r,"Missing sync point for query tag that we're tracking"),jn(r,n,ln(t.pendingWriteTree_,e),null)}function hr(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new((0,o.assert)(Un,"Reference.ts has not been loaded"),Un)(t._repo,t._path):t}var dr=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),fr=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=wt(this.path_,e);return new t(this.syncTree_,n)},t.prototype.node=function(){return er(this.syncTree_,this.path_)},t}(),pr=function(t,e,n){return t&&"object"==typeof t?((0,o.assert)(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?gr(t[".sv"],e,n):"object"==typeof t[".sv"]?mr(t[".sv"],e):void(0,o.assert)(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},gr=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:(0,o.assert)(!1,"Unexpected server value: "+t)}},mr=function(t,e,n){t.hasOwnProperty("increment")||(0,o.assert)(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&(0,o.assert)(!1,"Unexpected increment value: "+r);var i=e.node();if((0,o.assert)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var s=i.getValue();return"number"!=typeof s?r:s+r},vr=function(t,e,n,r){return _r(e,new fr(n,t),r)},yr=function(t,e,n){return _r(t,new dr(e),n)};function _r(t,e,n){var r,i=t.getPriority().val(),o=pr(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var s=t,a=pr(s.getValue(),e,n);return a!==s.getValue()||o!==s.getPriority().val()?new $t(a,se(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new $t(o))),u.forEachChild(Jt,function(t,i){var o=_r(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))}),r}var wr=function(){return function(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n={children:{},childCount:0}),this.name=t,this.parent=e,this.node=n}}();function br(t,e){for(var n=e instanceof dt?e:new dt(e),r=t,i=pt(n);null!==i;){var s=(0,o.safeGet)(r.node.children,i)||{children:{},childCount:0};r=new wr(i,r,s),i=pt(n=mt(n))}return r}function Tr(t){return t.node.value}function Cr(t,e){t.node.value=e,Ar(t)}function Er(t){return t.node.childCount>0}function Ir(t,e){F(t.node.children,function(n,r){e(new wr(n,t,r))})}function Sr(t,e,n,r){n&&!r&&e(t),Ir(t,function(t){Sr(t,e,!0,r)}),n&&r&&e(t)}function kr(t){return new dt(null===t.parent?t.name:kr(t.parent)+"/"+t.name)}function Ar(t){null!==t.parent&&function(t,e,n){var r=function(t){return void 0===Tr(t)&&!Er(t)}(n),i=(0,o.contains)(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,Ar(t)):r||i||(t.node.children[e]=n.node,t.node.childCount++,Ar(t))}(t.parent,t.name,t)}var xr=/[\[\].#$\/\u0000-\u001F\u007F]/,Nr=/[\[\].#$\u0000-\u001F\u007F]/,Pr=10485760,Or=function(t){return"string"==typeof t&&0!==t.length&&!xr.test(t)},Rr=function(t){return"string"==typeof t&&0!==t.length&&!Nr.test(t)},Dr=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!A(t)||t&&"object"==typeof t&&(0,o.contains)(t,".sv")},Lr=function(t,e,n,r){r&&void 0===e||Fr((0,o.errorPrefix)(t,"value"),e,n)},Fr=function(t,e,n){var r=n instanceof dt?new St(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+At(r));if("function"==typeof e)throw new Error(t+"contains a function "+At(r)+" with contents = "+e.toString());if(A(e))throw new Error(t+"contains "+e.toString()+" "+At(r));if("string"==typeof e&&e.length>Pr/3&&(0,o.stringLength)(e)>Pr)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+At(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var i=!1,s=!1;if(F(e,function(e,n){if(".value"===e)i=!0;else if(".priority"!==e&&".sv"!==e&&(s=!0,!Or(e)))throw new Error(t+" contains an invalid key ("+e+") "+At(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var a,u;!function(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=(0,o.stringLength)(e),kt(t)}(r,e),Fr(t,n,r),u=(a=r).parts_.pop(),a.byteLength_-=(0,o.stringLength)(u),a.parts_.length>0&&(a.byteLength_-=1)}),i&&s)throw new Error(t+' contains ".value" child '+At(r)+" in addition to actual children.")}},Mr=function(t,e,n,r){if(!r||void 0!==e){var i=(0,o.errorPrefix)(t,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");var s=[];F(e,function(t,e){var r=new dt(t);if(Fr(i,e,wt(n,r)),".priority"===vt(r)&&!Dr(e))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(r)}),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=yt(r=e[n]),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!Or(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(Ct);var s=null;for(n=0;n<e.length;n++){if(r=e[n],null!==s&&It(s,r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(i,s)}},Ur=function(t,e,n){if(!n||void 0!==e){if(A(e))throw new Error((0,o.errorPrefix)(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Dr(e))throw new Error((0,o.errorPrefix)(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},qr=function(t,e,n){if(!n||void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,o.errorPrefix)(t,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},jr=function(t,e,n,r){if(!(r&&void 0===n||Or(n)))throw new Error((0,o.errorPrefix)(t,e)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Vr=function(t,e,n,r){if(!(r&&void 0===n||Rr(n)))throw new Error((0,o.errorPrefix)(t,e)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Br=function(t,e){if(".info"===pt(e))throw new Error(t+" failed = Can't modify data under /.info/")},Hr=function(t,e){var n=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!Or(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==n.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Rr(t)}(n))throw new Error((0,o.errorPrefix)(t,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},zr=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error((0,o.errorPrefix)(t,e)+"must be a boolean.")},Gr=function(){return function(){this.eventLists_=[],this.recursionDepth_=0}}();function Zr(t,e){for(var n=null,r=0;r<e.length;r++){var i=e[r],o=i.getPath();null===n||Et(o,n.path)||(t.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&t.eventLists_.push(n)}function Kr(t,e,n){Zr(t,n),Yr(t,function(t){return Et(t,e)})}function Wr(t,e,n){Zr(t,n),Yr(t,function(t){return It(t,e)||It(e,t)})}function Yr(t,e){t.recursionDepth_++;for(var n=!0,r=0;r<t.eventLists_.length;r++){var i=t.eventLists_[r];i&&(e(i.path)?(Qr(t.eventLists_[r]),t.eventLists_[r]=null):n=!1)}n&&(t.eventLists_=[]),t.recursionDepth_--}function Qr(t){for(var e=0;e<t.events.length;e++){var n=t.events[e];if(null!==n){t.events[e]=null;var r=n.getEventRunner();w&&C("event: "+n.toString()),j(r)}}}var $r="repo_interrupt",Jr=function(){function t(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Gr,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Ne(),this.transactionQueueTree_=new wr,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t}();function Xr(t){var e=t.infoData_.getNode(new dt(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function ti(t){return(e=(e={timestamp:Xr(t)})||{}).timestamp=e.timestamp||(new Date).getTime(),e;var e}function ei(t,e,n,r,i){t.dataUpdateCount++;var s=new dt(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;var a=[];if(i)if(r){var u=(0,o.map)(n,function(t){return se(t)});a=function(t,e,n,r){var i=ur(t,r);if(i){var o=cr(i),s=o.path,a=o.queryId,u=Tt(s,e),c=$e.fromObject(n);return lr(t,s,new Be(Me(a),u,c))}return[]}(t.serverSyncTree_,s,u,i)}else{var c=se(n);a=function(t,e,n,r){var i=ur(t,r);if(null!=i){var o=cr(i),s=o.path,a=o.queryId,u=Tt(s,e);return lr(t,s,new Ve(Me(a),u,n))}return[]}(t.serverSyncTree_,s,c,i)}else if(r){var l=(0,o.map)(n,function(t){return se(t)});a=function(t,e,n){var r=$e.fromObject(n);return nr(t,new Be({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(t.serverSyncTree_,s,l)}else{var h=se(n);a=Jn(t.serverSyncTree_,s,h)}var d=s;a.length>0&&(d=pi(t,s)),Wr(t.eventQueue_,d,a)}function ni(t,e){ri(t,"connected",e),!1===e&&function(t){li(t,"onDisconnectEvents");var e=ti(t),n=Ne();Re(t.onDisconnect_,ft(),function(r,i){var o=vr(r,i,t.serverSyncTree_,e);Pe(n,r,o)});var r=[];Re(n,ft(),function(e,n){r=r.concat(Jn(t.serverSyncTree_,e,n));var i=_i(t,e);pi(t,i)}),t.onDisconnect_=Ne(),Wr(t.eventQueue_,ft(),r)}(t)}function ri(t,e,n){var r=new dt("/.info/"+e),i=se(n);t.infoData_.updateSnapshot(r,i);var o=Jn(t.infoSyncTree_,r,i);Wr(t.eventQueue_,r,o)}function ii(t){return t.nextWriteId_++}function oi(t,e,n,r,i){li(t,"set",{path:e.toString(),value:n,priority:r});var o=ti(t),s=se(n,r),a=er(t.serverSyncTree_,e),u=yr(s,a,o),c=ii(t),l=Qn(t.serverSyncTree_,e,u,c,!0);Zr(t.eventQueue_,l),t.server_.put(e.toString(),s.val(!0),function(n,r){var o="ok"===n;o||k("set at "+e+" failed: "+n);var s=$n(t.serverSyncTree_,c,!o);Wr(t.eventQueue_,e,s),hi(0,i,n,r)});var h=_i(t,e);pi(t,h),Wr(t.eventQueue_,h,[])}function si(t,e,n){t.server_.onDisconnectCancel(e.toString(),function(r,i){"ok"===r&&Oe(t.onDisconnect_,e),hi(0,n,r,i)})}function ai(t,e,n,r){var i=se(n);t.server_.onDisconnectPut(e.toString(),i.val(!0),function(n,o){"ok"===n&&Pe(t.onDisconnect_,e,i),hi(0,r,n,o)})}function ui(t,e,n){var r;r=".info"===pt(e._path)?Xn(t.infoSyncTree_,e,n):Xn(t.serverSyncTree_,e,n),Kr(t.eventQueue_,e._path,r)}function ci(t){t.persistentConnection_&&t.persistentConnection_.interrupt($r)}function li(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r="";t.persistentConnection_&&(r=t.persistentConnection_.id+":"),C.apply(void 0,(0,s.__spreadArray)([r],(0,s.__read)(e)))}function hi(t,e,n,r){e&&j(function(){if("ok"===n)e(null);else{var t=(n||"error").toUpperCase(),i=t;r&&(i+=": "+r);var o=new Error(i);o.code=t,e(o)}})}function di(t,e,n){return er(t.serverSyncTree_,e,n)||ie.EMPTY_NODE}function fi(t,e){if(void 0===e&&(e=t.transactionQueueTree_),e||yi(t,e),Tr(e)){var n=mi(t,e);(0,o.assert)(n.length>0,"Sending zero length transaction queue"),n.every(function(t){return 0===t.status})&&function(t,e,n){for(var r=n.map(function(t){return t.currentWriteId}),i=di(t,e,r),s=i,a=i.hash(),u=0;u<n.length;u++){var c=n[u];(0,o.assert)(0===c.status,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=1,c.retryCount++;var l=Tt(e,c.path);s=s.updateChild(l,c.currentOutputSnapshotRaw)}var h=s.val(!0),d=e;t.server_.put(d.toString(),h,function(r){li(t,"transaction put response",{path:d.toString(),status:r});var i=[];if("ok"===r){for(var o=[],s=function(e){n[e].status=2,i=i.concat($n(t.serverSyncTree_,n[e].currentWriteId)),n[e].onComplete&&o.push(function(){return n[e].onComplete(null,!0,n[e].currentOutputSnapshotResolved)}),n[e].unwatcher()},a=0;a<n.length;a++)s(a);for(yi(t,br(t.transactionQueueTree_,e)),fi(t,t.transactionQueueTree_),Wr(t.eventQueue_,e,i),a=0;a<o.length;a++)j(o[a])}else{if("datastale"===r)for(a=0;a<n.length;a++)n[a].status=3===n[a].status?4:0;else for(k("transaction at "+d.toString()+" failed: "+r),a=0;a<n.length;a++)n[a].status=4,n[a].abortReason=r;pi(t,e)}},a)}(t,kr(e),n)}else Er(e)&&Ir(e,function(e){fi(t,e)})}function pi(t,e){var n=gi(t,e),r=kr(n);return function(t,e,n){if(0!==e.length){for(var r=[],i=[],s=e.filter(function(t){return 0===t.status}).map(function(t){return t.currentWriteId}),a=function(a){var u,c=e[a],l=Tt(n,c.path),h=!1;if((0,o.assert)(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===c.status)h=!0,u=c.abortReason,i=i.concat($n(t.serverSyncTree_,c.currentWriteId,!0));else if(0===c.status)if(c.retryCount>=25)h=!0,u="maxretry",i=i.concat($n(t.serverSyncTree_,c.currentWriteId,!0));else{var d=di(t,c.path,s);c.currentInputSnapshot=d;var f=e[a].update(d.val());if(void 0!==f){Fr("transaction failed: Data returned ",f,c.path);var p=se(f);"object"==typeof f&&null!=f&&(0,o.contains)(f,".priority")||(p=p.updatePriority(d.getPriority()));var g=c.currentWriteId,m=ti(t),v=yr(p,d,m);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=v,c.currentWriteId=ii(t),s.splice(s.indexOf(g),1),i=(i=i.concat(Qn(t.serverSyncTree_,c.path,v,c.currentWriteId,c.applyLocally))).concat($n(t.serverSyncTree_,g,!0))}else h=!0,u="nodata",i=i.concat($n(t.serverSyncTree_,c.currentWriteId,!0))}Wr(t.eventQueue_,n,i),i=[],h&&(e[a].status=2,setTimeout(e[a].unwatcher,Math.floor(0)),e[a].onComplete&&r.push("nodata"===u?function(){return e[a].onComplete(null,!1,e[a].currentInputSnapshot)}:function(){return e[a].onComplete(new Error(u),!1,null)}))},u=0;u<e.length;u++)a(u);for(yi(t,t.transactionQueueTree_),u=0;u<r.length;u++)j(r[u]);fi(t,t.transactionQueueTree_)}}(t,mi(t,n),r),r}function gi(t,e){var n,r=t.transactionQueueTree_;for(n=pt(e);null!==n&&void 0===Tr(r);)r=br(r,n),n=pt(e=mt(e));return r}function mi(t,e){var n=[];return vi(t,e,n),n.sort(function(t,e){return t.order-e.order}),n}function vi(t,e,n){var r=Tr(e);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);Ir(e,function(e){vi(t,e,n)})}function yi(t,e){var n=Tr(e);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,Cr(e,n.length>0?n:void 0)}Ir(e,function(e){yi(t,e)})}function _i(t,e){var n=kr(gi(t,e)),r=br(t.transactionQueueTree_,e);return function(t,e,n){for(var r=t.parent;null!==r;){if(e(r))return!0;r=r.parent}}(r,function(e){wi(t,e)}),wi(t,r),Sr(r,function(e){wi(t,e)}),n}function wi(t,e){var n=Tr(e);if(n){for(var r=[],i=[],s=-1,a=0;a<n.length;a++)3===n[a].status||(1===n[a].status?((0,o.assert)(s===a-1,"All SENT items should be at beginning of queue."),s=a,n[a].status=3,n[a].abortReason="set"):((0,o.assert)(0===n[a].status,"Unexpected transaction status in abort"),n[a].unwatcher(),i=i.concat($n(t.serverSyncTree_,n[a].currentWriteId,!0)),n[a].onComplete&&r.push(n[a].onComplete.bind(null,new Error("set"),!1,null))));for(-1===s?Cr(e,void 0):n.length=s+1,Wr(t.eventQueue_,kr(e),i),a=0;a<r.length;a++)j(r[a])}}var bi=function(t,e){var n=Ti(t),r=n.namespace;return"firebase.com"===n.domain&&S(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||S("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&k("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new W(n.host,n.secure,r,e,"ws"===n.scheme||"wss"===n.scheme,"",r!==n.subdomain),path:new dt(n.pathString)}},Ti=function(t){var e="",n="",r="",i="",o="",a=!0,u="https",c=443;if("string"==typeof t){var l=t.indexOf("//");l>=0&&(u=t.substring(0,l-1),t=t.substring(l+2));var h=t.indexOf("/");-1===h&&(h=t.length);var d=t.indexOf("?");-1===d&&(d=t.length),e=t.substring(0,Math.min(h,d)),h<d&&(i=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}e+="/"+i}return e}(t.substring(h,d)));var f=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=(0,s.__values)(t.split("&")),o=i.next();!o.done;o=i.next()){var a=o.value;if(0!==a.length){var u=a.split("=");2===u.length?r[decodeURIComponent(u[0])]=decodeURIComponent(u[1]):k("Invalid query segment '"+a+"' in query '"+t+"'")}}}catch(c){e={error:c}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,d)));(l=e.indexOf(":"))>=0?(a="https"===u||"wss"===u,c=parseInt(e.substring(l+1),10)):l=e.length;var p=e.slice(0,l);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{var g=e.indexOf(".");r=e.substring(0,g).toLowerCase(),n=e.substring(g+1),o=r}"ns"in f&&(o=f.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:a,scheme:u,pathString:i,namespace:o}},Ci=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+(0,o.stringify)(this.snapshot.exportVal())},t}(),Ei=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),Ii=function(){function t(t,e){this.snapshotCallback=t,this.cancelCallback=e}return t.prototype.onValue=function(t,e){this.snapshotCallback.call(null,t,e)},t.prototype.onCancel=function(t){return(0,o.assert)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)},Object.defineProperty(t.prototype,"hasCancelCallback",{get:function(){return!!this.cancelCallback},enumerable:!1,configurable:!0}),t.prototype.matches=function(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context},t}(),Si=function(){function t(t,e){this._repo=t,this._path=e}return t.prototype.cancel=function(){var t=new o.Deferred;return si(this._repo,this._path,t.wrapCallback(function(){})),t.promise},t.prototype.remove=function(){Br("OnDisconnect.remove",this._path);var t=new o.Deferred;return ai(this._repo,this._path,null,t.wrapCallback(function(){})),t.promise},t.prototype.set=function(t){Br("OnDisconnect.set",this._path),Lr("OnDisconnect.set",t,this._path,!1);var e=new o.Deferred;return ai(this._repo,this._path,t,e.wrapCallback(function(){})),e.promise},t.prototype.setWithPriority=function(t,e){Br("OnDisconnect.setWithPriority",this._path),Lr("OnDisconnect.setWithPriority",t,this._path,!1),Ur("OnDisconnect.setWithPriority",e,!1);var n=new o.Deferred;return function(t,e,n,r,i){var o=se(n,r);t.server_.onDisconnectPut(e.toString(),o.val(!0),function(n,r){"ok"===n&&Pe(t.onDisconnect_,e,o),hi(0,i,n,r)})}(this._repo,this._path,t,e,n.wrapCallback(function(){})),n.promise},t.prototype.update=function(t){Br("OnDisconnect.update",this._path),Mr("OnDisconnect.update",t,this._path,!1);var e=new o.Deferred;return function(t,e,n,r){if((0,o.isEmpty)(n))return C("onDisconnect().update() called with empty data.  Don't do anything."),void hi(0,r,"ok",void 0);t.server_.onDisconnectMerge(e.toString(),n,function(i,o){"ok"===i&&F(n,function(n,r){var i=se(r);Pe(t.onDisconnect_,wt(e,n),i)}),hi(0,r,i,o)})}(this._repo,this._path,t,e.wrapCallback(function(){})),e.promise},t}(),ki=function(){function t(t,e,n,r){this._repo=t,this._path=e,this._queryParams=n,this._orderByCalled=r}return Object.defineProperty(t.prototype,"key",{get:function(){return bt(this._path)?null:vt(this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Pi(this._repo,this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_queryIdentifier",{get:function(){var t=ke(this._queryParams),e=D(t);return"{}"===e?"default":e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_queryObject",{get:function(){return ke(this._queryParams)},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){if(!((e=(0,o.getModularInstance)(e))instanceof t))return!1;var n=this._repo===e._repo,r=Et(this._path,e._path);return n&&r&&this._queryIdentifier===e._queryIdentifier},t.prototype.toJSON=function(){return this.toString()},t.prototype.toString=function(){return this._repo.toString()+function(t){for(var e="",n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}(this._path)},t}();function Ai(t,e){if(!0===t._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function xi(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Mt){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==x)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==N)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===Jt){if(null!=e&&!Dr(e)||null!=n&&!Dr(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,o.assert)(t.getIndex()instanceof ce||t.getIndex()===le,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Ni(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var Pi=function(t){function e(e,n){return t.call(this,e,n,new Te,!1)||this}return(0,s.__extends)(e,t),Object.defineProperty(e.prototype,"parent",{get:function(){var t=_t(this._path);return null===t?null:new e(this._repo,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){for(var t=this;null!==t.parent;)t=t.parent;return t},enumerable:!1,configurable:!0}),e}(ki),Oi=function(){function t(t,e,n){this._node=t,this.ref=e,this._index=n}return Object.defineProperty(t.prototype,"priority",{get:function(){return this._node.getPriority().val()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"key",{get:function(){return this.ref.key},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._node.numChildren()},enumerable:!1,configurable:!0}),t.prototype.child=function(e){var n=new dt(e),r=Li(this.ref,e);return new t(this._node.getChild(n),r,Jt)},t.prototype.exists=function(){return!this._node.isEmpty()},t.prototype.exportVal=function(){return this._node.val(!0)},t.prototype.forEach=function(e){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,function(r,i){return e(new t(i,Li(n.ref,r),Jt))})},t.prototype.hasChild=function(t){var e=new dt(t);return!this._node.getChild(e).isEmpty()},t.prototype.hasChildren=function(){return!this._node.isLeafNode()&&!this._node.isEmpty()},t.prototype.toJSON=function(){return this.exportVal()},t.prototype.val=function(){return this._node.val()},t}();function Ri(t,e){return(t=(0,o.getModularInstance)(t))._checkNotDeleted("ref"),void 0!==e?Li(t._root,e):t._root}function Di(t,e){(t=(0,o.getModularInstance)(t))._checkNotDeleted("refFromURL");var n=bi(e,t._repo.repoInfo_.nodeAdmin);Hr("refFromURL",n);var r=n.repoInfo;return t._repo.repoInfo_.isCustomHost()||r.host===t._repo.repoInfo_.host||S("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+t._repo.repoInfo_.host+")"),Ri(t,n.path.toString())}function Li(t,e){var n;return null===pt((t=(0,o.getModularInstance)(t))._path)?((n=e)&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Vr("child","path",n,!1)):Vr("child","path",e,!1),new Pi(t._repo,wt(t._path,e))}function Fi(t,e){t=(0,o.getModularInstance)(t),Br("push",t._path),Lr("push",e,t._path,!0);var n,r=Xr(t._repo),i=de(r),s=Li(t,i),a=Li(t,i);return n=null!=e?Ui(a,e).then(function(){return a}):Promise.resolve(a),s.then=n.then.bind(n),s.catch=n.then.bind(n,void 0),s}function Mi(t){return Br("remove",t._path),Ui(t,null)}function Ui(t,e){t=(0,o.getModularInstance)(t),Br("set",t._path),Lr("set",e,t._path,!1);var n=new o.Deferred;return oi(t._repo,t._path,e,null,n.wrapCallback(function(){})),n.promise}function qi(t,e){t=(0,o.getModularInstance)(t),Br("setPriority",t._path),Ur("setPriority",e,!1);var n=new o.Deferred;return oi(t._repo,wt(t._path,".priority"),e,null,n.wrapCallback(function(){})),n.promise}function ji(t,e,n){if(Br("setWithPriority",t._path),Lr("setWithPriority",e,t._path,!1),Ur("setWithPriority",n,!1),".length"===t.key||".keys"===t.key)throw"setWithPriority failed: "+t.key+" is a read-only object.";var r=new o.Deferred;return oi(t._repo,t._path,e,n,r.wrapCallback(function(){})),r.promise}function Vi(t,e){Mr("update",e,t._path,!1);var n=new o.Deferred;return function(t,e,n,r){li(t,"update",{path:e.toString(),value:n});var i=!0,s=ti(t),a={};if(F(n,function(n,r){i=!1,a[n]=vr(wt(e,n),se(r),t.serverSyncTree_,s)}),i)C("update() called with empty data.  Don't do anything."),hi(0,r,"ok",void 0);else{var u=ii(t),c=function(t,e,n,r){!function(t,e,n,r){(0,o.assert)(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=tn(t.visibleWrites,e,n),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r);var i=$e.fromObject(n);return nr(t,new Be({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(t.serverSyncTree_,e,a,u);Zr(t.eventQueue_,c),t.server_.merge(e.toString(),n,function(n,i){var o="ok"===n;o||k("update at "+e+" failed: "+n);var s=$n(t.serverSyncTree_,u,!o),a=s.length>0?pi(t,e):e;Wr(t.eventQueue_,a,s),hi(0,r,n,i)}),F(n,function(n){var r=_i(t,wt(e,n));pi(t,r)}),Wr(t.eventQueue_,e,[])}}(t._repo,t._path,e,n.wrapCallback(function(){})),n.promise}var Bi=function(){function t(t){this.callbackContext=t}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e._queryParams.getIndex();return new Ci("value",this,new Oi(t.snapshotNode,new Pi(e._repo,e._path),n))},t.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,null)}},t.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new Ei(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))},t.prototype.hasAnyCallback=function(){return null!==this.callbackContext},t}(),Hi=function(){function t(t,e){this.eventType=t,this.callbackContext=e}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return this.eventType===("children_removed"===e?"child_removed":e)},t.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new Ei(this,t,e):null},t.prototype.createEvent=function(t,e){(0,o.assert)(null!=t.childName,"Child events should have a childName.");var n=Li(new Pi(e._repo,e._path),t.childName),r=e._queryParams.getIndex();return new Ci(t.type,this,new Oi(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,t.prevName)}},t.prototype.matches=function(e){return e instanceof t&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))},t.prototype.hasAnyCallback=function(){return!!this.callbackContext},t}();function zi(t,e,n,r,i){var o;if("object"==typeof r&&(o=void 0,i=r),"function"==typeof r&&(o=r),i&&i.onlyOnce){var s=n,a=function(e,n){ui(t._repo,t,c),s(e,n)};a.userCallback=n.userCallback,a.context=n.context,n=a}var u=new Ii(n,o||void 0),c="value"===e?new Bi(u):new Hi(e,u);return function(t,e,n){var r;r=".info"===pt(e._path)?tr(t.infoSyncTree_,e,n):tr(t.serverSyncTree_,e,n),Kr(t.eventQueue_,e._path,r)}(t._repo,t,c),function(){return ui(t._repo,t,c)}}function Gi(t,e,n,r){return zi(t,"value",e,n,r)}function Zi(t,e,n,r){return zi(t,"child_added",e,n,r)}function Ki(t,e,n,r){return zi(t,"child_changed",e,n,r)}function Wi(t,e,n,r){return zi(t,"child_moved",e,n,r)}function Yi(t,e,n,r){return zi(t,"child_removed",e,n,r)}function Qi(t,e,n){var r=null,i=n?new Ii(n):null;"value"===e?r=new Bi(i):e&&(r=new Hi(e,i)),ui(t._repo,t,r)}var $i=function(){return function(){}}(),Ji=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return(0,s.__extends)(e,t),e.prototype._apply=function(t){Lr("endAt",this._value,t._path,!0);var e=Ee(t._queryParams,this._value,this._key);if(Ni(e),xi(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ki(t._repo,t._path,e,t._orderByCalled)},e}($i);function Xi(t,e){return jr("endAt","key",e,!0),new Ji(t,e)}var to=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return(0,s.__extends)(e,t),e.prototype._apply=function(t){Lr("endBefore",this._value,t._path,!1);var e,n,r,i,o=(n=this._value,r=this._key,(e=t._queryParams).index_===Mt?("string"==typeof n&&(n=pe(n)),i=Ee(e,n,r)):i=Ee(e,n,null==r?x:pe(r)),i.endBeforeSet_=!0,i);if(Ni(o),xi(o),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ki(t._repo,t._path,o,t._orderByCalled)},e}($i);function eo(t,e){return jr("endBefore","key",e,!0),new to(t,e)}var no=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return(0,s.__extends)(e,t),e.prototype._apply=function(t){Lr("startAt",this._value,t._path,!0);var e=Ce(t._queryParams,this._value,this._key);if(Ni(e),xi(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new ki(t._repo,t._path,e,t._orderByCalled)},e}($i);function ro(t,e){return void 0===t&&(t=null),jr("startAt","key",e,!0),new no(t,e)}var io=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return(0,s.__extends)(e,t),e.prototype._apply=function(t){Lr("startAfter",this._value,t._path,!1);var e,n,r,i,o=(n=this._value,r=this._key,(e=t._queryParams).index_===Mt?("string"==typeof n&&(n=fe(n)),i=Ce(e,n,r)):i=Ce(e,n,null==r?N:fe(r)),i.startAfterSet_=!0,i);if(Ni(o),xi(o),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new ki(t._repo,t._path,o,t._orderByCalled)},e}($i);function oo(t,e){return jr("startAfter","key",e,!0),new io(t,e)}var so=function(t){function e(e){var n=t.call(this)||this;return n._limit=e,n}return(0,s.__extends)(e,t),e.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new ki(t._repo,t._path,(e=this._limit,(n=t._queryParams.copy()).limitSet_=!0,n.limit_=e,n.viewFrom_="l",n),t._orderByCalled);var e,n},e}($i);function ao(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new so(t)}var uo=function(t){function e(e){var n=t.call(this)||this;return n._limit=e,n}return(0,s.__extends)(e,t),e.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new ki(t._repo,t._path,(e=this._limit,(n=t._queryParams.copy()).limitSet_=!0,n.limit_=e,n.viewFrom_="r",n),t._orderByCalled);var e,n},e}($i);function co(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new uo(t)}var lo=function(t){function e(e){var n=t.call(this)||this;return n._path=e,n}return(0,s.__extends)(e,t),e.prototype._apply=function(t){Ai(t,"orderByChild");var e=new dt(this._path);if(bt(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new ce(e),r=Ie(t._queryParams,n);return xi(r),new ki(t._repo,t._path,r,!0)},e}($i);function ho(t){if("$key"===t)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===t)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===t)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Vr("orderByChild","path",t,!1),new lo(t)}var fo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,s.__extends)(e,t),e.prototype._apply=function(t){Ai(t,"orderByKey");var e=Ie(t._queryParams,Mt);return xi(e),new ki(t._repo,t._path,e,!0)},e}($i);function po(){return new fo}var go=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,s.__extends)(e,t),e.prototype._apply=function(t){Ai(t,"orderByPriority");var e=Ie(t._queryParams,Jt);return xi(e),new ki(t._repo,t._path,e,!0)},e}($i);function mo(){return new go}var vo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,s.__extends)(e,t),e.prototype._apply=function(t){Ai(t,"orderByValue");var e=Ie(t._queryParams,le);return xi(e),new ki(t._repo,t._path,e,!0)},e}($i);function yo(){return new vo}var _o=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return(0,s.__extends)(e,t),e.prototype._apply=function(t){if(Lr("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Ji(this._value,this._key)._apply(new no(this._value,this._key)._apply(t))},e}($i);function wo(t,e){return jr("equalTo","key",e,!0),new _o(t,e)}function bo(t){for(var e,n,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var a=(0,o.getModularInstance)(t);try{for(var u=(0,s.__values)(r),c=u.next();!c.done;c=u.next()){var l=c.value;a=l._apply(a)}}catch(h){e={error:h}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}return a}!function(t){(0,o.assert)(!Pn,"__referenceConstructor has already been defined"),Pn=t}(Pi),function(t){(0,o.assert)(!Un,"__referenceConstructor has already been defined"),Un=t}(Pi);var To={},Co=!1;function Eo(t,e,n,r,i){var o=r||t.options.databaseURL;void 0===o&&(t.options.projectId||S("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),C("Using default host for project ",t.options.projectId),o=t.options.projectId+"-default-rtdb.firebaseio.com");var s,a=bi(o,i),u=a.repoInfo,c=void 0;"undefined"!=typeof process&&(c=process.env.FIREBASE_DATABASE_EMULATOR_HOST),c?(s=!0,u=(a=bi(o="http://"+c+"?ns="+u.namespace,i)).repoInfo):s=!a.repoInfo.secure;var l=i&&s?new z(z.OWNER):new H(t.name,t.options,e);Hr("Invalid Firebase Database URL",a),bt(a.path)||S("Database URL must point to the root of a Firebase Database (not including a child path).");var h=function(t,e,n,r){var i=To[e.name];i||(To[e.name]=i={});var o=i[t.toURLString()];return o&&S("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new Jr(t,Co,n,r),i[t.toURLString()]=o,o}(u,t,l,new B(t.name,n));return new Io(h,t)}var Io=function(){function t(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}return Object.defineProperty(t.prototype,"_repo",{get:function(){return this._instanceStarted||(function(t,e,n){if(t.stats_=X(t.repoInfo_),t.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)t.server_=new Ae(t.repoInfo_,function(e,n,r,i){ei(t,e,n,r,i)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(function(){return ni(t,!0)},0);else{if(null!=n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,o.stringify)(n)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}t.persistentConnection_=new Rt(t.repoInfo_,e,function(e,n,r,i){ei(t,e,n,r,i)},function(e){ni(t,e)},function(e){!function(t,e){F(e,function(e,n){ri(t,e,n)})}(t,e)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}var r,i;t.authTokenProvider_.addTokenChangeListener(function(e){t.server_.refreshAuthToken(e)}),t.appCheckProvider_.addTokenChangeListener(function(e){t.server_.refreshAppCheckToken(e.token)}),t.statsReporter_=(r=function(){return new Le(t.stats_,t.server_)},i=t.repoInfo_.toString(),J[i]||(J[i]=r()),J[i]),t.infoData_=new xe,t.infoSyncTree_=new Yn({startListening:function(e,n,r,i){var o=[],s=t.infoData_.getNode(e._path);return s.isEmpty()||(o=Jn(t.infoSyncTree_,e._path,s),setTimeout(function(){i("ok")},0)),o},stopListening:function(){}}),ri(t,"connected",!1),t.serverSyncTree_=new Yn({startListening:function(e,n,r,i){return t.server_.listen(e,r,n,function(n,r){var o=i(n,r);Wr(t.eventQueue_,e._path,o)}),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_root",{get:function(){return this._rootInternal||(this._rootInternal=new Pi(this._repo,ft())),this._rootInternal},enumerable:!1,configurable:!0}),t.prototype._delete=function(){var t,e,n;return this._checkNotDeleted("delete"),t=this._repo,(n=To[e=this.app.name])&&n[t.key]===t||S("Database "+e+"("+t.repoInfo_+") has already been deleted."),ci(t),delete n[t.key],this._repoInternal=null,this._rootInternal=null,Promise.resolve()},t.prototype._checkNotDeleted=function(t){null===this._rootInternal&&S("Cannot call "+t+" on a deleted database.")},t}();function So(t){(t=(0,o.getModularInstance)(t))._checkNotDeleted("goOffline"),ci(t._repo)}function ko(t){var e;(t=(0,o.getModularInstance)(t))._checkNotDeleted("goOnline"),(e=t._repo).persistentConnection_&&e.persistentConnection_.resume($r)}var Ao={".sv":"timestamp"},xo=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}();function No(t,e,n){var r;if(t=(0,o.getModularInstance)(t),Br("Reference.transaction",t._path),".length"===t.key||".keys"===t.key)throw"Reference.transaction failed: "+t.key+" is a read-only object.";var i=null===(r=null==n?void 0:n.applyLocally)||void 0===r||r,s=new o.Deferred,a=Gi(t,function(){});return function(e,n,r,i,a,u){li(e,"transaction on "+n);var c={path:n,update:r,onComplete:function(e,n,r){var i=null;e?s.reject(e):(i=new Oi(r,new Pi(t._repo,t._path),Jt),s.resolve(new xo(n,i)))},status:null,order:v(),applyLocally:u,retryCount:0,unwatcher:a,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},l=di(e,n,void 0);c.currentInputSnapshot=l;var h=c.update(l.val());if(void 0===h)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{Fr("transaction failed: Data returned ",h,c.path),c.status=0;var d=br(e.transactionQueueTree_,n),f=Tr(d)||[];f.push(c),Cr(d,f);var p=void 0;"object"==typeof h&&null!==h&&(0,o.contains)(h,".priority")?(p=(0,o.safeGet)(h,".priority"),(0,o.assert)(Dr(p),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):p=(er(e.serverSyncTree_,n)||ie.EMPTY_NODE).getPriority().val();var g=ti(e),m=se(h,p),y=yr(m,l,g);c.currentOutputSnapshotRaw=m,c.currentOutputSnapshotResolved=y,c.currentWriteId=ii(e);var _=Qn(e.serverSyncTree_,n,y,c.currentWriteId,c.applyLocally);Wr(e.eventQueue_,n,_),fi(e,e.transactionQueueTree_)}}(t._repo,t._path,e,0,a,i),s.promise}var Po=function(){function t(t){this._delegate=t}return t.prototype.cancel=function(t){(0,o.validateArgCount)("OnDisconnect.cancel",0,1,arguments.length),(0,o.validateCallback)("OnDisconnect.cancel","onComplete",t,!0);var e=this._delegate.cancel();return t&&e.then(function(){return t(null)},function(e){return t(e)}),e},t.prototype.remove=function(t){(0,o.validateArgCount)("OnDisconnect.remove",0,1,arguments.length),(0,o.validateCallback)("OnDisconnect.remove","onComplete",t,!0);var e=this._delegate.remove();return t&&e.then(function(){return t(null)},function(e){return t(e)}),e},t.prototype.set=function(t,e){(0,o.validateArgCount)("OnDisconnect.set",1,2,arguments.length),(0,o.validateCallback)("OnDisconnect.set","onComplete",e,!0);var n=this._delegate.set(t);return e&&n.then(function(){return e(null)},function(t){return e(t)}),n},t.prototype.setWithPriority=function(t,e,n){(0,o.validateArgCount)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,o.validateCallback)("OnDisconnect.setWithPriority","onComplete",n,!0);var r=this._delegate.setWithPriority(t,e);return n&&r.then(function(){return n(null)},function(t){return n(t)}),r},t.prototype.update=function(t,e){if((0,o.validateArgCount)("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,k("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,o.validateCallback)("OnDisconnect.update","onComplete",e,!0);var i=this._delegate.update(t);return e&&i.then(function(){return e(null)},function(t){return e(t)}),i},t}(),Oo=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return(0,o.validateArgCount)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),Ro=function(){function t(t,e){this._database=t,this._delegate=e}return t.prototype.val=function(){return(0,o.validateArgCount)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()},t.prototype.exportVal=function(){return(0,o.validateArgCount)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()},t.prototype.toJSON=function(){return(0,o.validateArgCount)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()},t.prototype.exists=function(){return(0,o.validateArgCount)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()},t.prototype.child=function(e){return(0,o.validateArgCount)("DataSnapshot.child",0,1,arguments.length),e=String(e),Vr("DataSnapshot.child","path",e,!1),new t(this._database,this._delegate.child(e))},t.prototype.hasChild=function(t){return(0,o.validateArgCount)("DataSnapshot.hasChild",1,1,arguments.length),Vr("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)},t.prototype.getPriority=function(){return(0,o.validateArgCount)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority},t.prototype.forEach=function(e){var n=this;return(0,o.validateArgCount)("DataSnapshot.forEach",1,1,arguments.length),(0,o.validateCallback)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(function(r){return e(new t(n._database,r))})},t.prototype.hasChildren=function(){return(0,o.validateArgCount)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()},Object.defineProperty(t.prototype,"key",{get:function(){return this._delegate.key},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return(0,o.validateArgCount)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size},t.prototype.getRef=function(){return(0,o.validateArgCount)("DataSnapshot.ref",0,0,arguments.length),new Lo(this._database,this._delegate.ref)},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),Do=function(){function t(t,e){this.database=t,this._delegate=e}return t.prototype.on=function(e,n,r,i){var s,a=this;(0,o.validateArgCount)("Query.on",2,4,arguments.length),(0,o.validateCallback)("Query.on","callback",n,!1);var u=t.getCancelAndContextArgs_("Query.on",r,i),c=function(t,e){n.call(u.context,new Ro(a.database,t),e)};c.userCallback=n,c.context=u.context;var l=null===(s=u.cancel)||void 0===s?void 0:s.bind(u.context);switch(e){case"value":return Gi(this._delegate,c,l),n;case"child_added":return Zi(this._delegate,c,l),n;case"child_removed":return Yi(this._delegate,c,l),n;case"child_changed":return Ki(this._delegate,c,l),n;case"child_moved":return Wi(this._delegate,c,l),n;default:throw new Error((0,o.errorPrefix)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},t.prototype.off=function(t,e,n){if((0,o.validateArgCount)("Query.off",0,3,arguments.length),qr("Query.off",t,!0),(0,o.validateCallback)("Query.off","callback",e,!0),(0,o.validateContextObject)("Query.off","context",n,!0),e){var r=function(){};r.userCallback=e,r.context=n,Qi(this._delegate,t,r)}else Qi(this._delegate,t)},t.prototype.get=function(){var t=this;return function(t){return function(t,e){var n=function(t,e){var n=e._path,r=null;t.syncPointTree_.foreachOnPath(n,function(t,e){var i=Tt(t,n);r=r||Hn(e,i)});var i=t.syncPointTree_.get(n);i?r=r||Hn(i,ft()):(i=new qn,t.syncPointTree_=t.syncPointTree_.set(n,i));var o=null!=r,s=o?new He(r,!0,!1):null;return Ye(Vn(i,e,ln(t.pendingWriteTree_,e._path),o?s.getNode():ie.EMPTY_NODE,o).viewCache_)}(t.serverSyncTree_,e);return null!=n?Promise.resolve(n):t.server_.get(e).then(function(n){var r=se(n),i=Jn(t.serverSyncTree_,e._path,r);return Kr(t.eventQueue_,e._path,i),Promise.resolve(r)},function(n){return li(t,"get for query "+(0,o.stringify)(e)+" failed: "+n),Promise.reject(new Error(n))})}((t=(0,o.getModularInstance)(t))._repo,t).then(function(e){return new Oi(e,new Pi(t._repo,t._path),t._queryParams.getIndex())})}(this._delegate).then(function(e){return new Ro(t.database,e)})},t.prototype.once=function(e,n,r,i){var s=this;(0,o.validateArgCount)("Query.once",1,4,arguments.length),(0,o.validateCallback)("Query.once","callback",n,!0);var a=t.getCancelAndContextArgs_("Query.once",r,i),u=new o.Deferred,c=function(t,e){var r=new Ro(s.database,t);n&&n.call(a.context,r,e),u.resolve(r)};c.userCallback=n,c.context=a.context;var l=function(t){a.cancel&&a.cancel.call(a.context,t),u.reject(t)};switch(e){case"value":Gi(this._delegate,c,l,{onlyOnce:!0});break;case"child_added":Zi(this._delegate,c,l,{onlyOnce:!0});break;case"child_removed":Yi(this._delegate,c,l,{onlyOnce:!0});break;case"child_changed":Ki(this._delegate,c,l,{onlyOnce:!0});break;case"child_moved":Wi(this._delegate,c,l,{onlyOnce:!0});break;default:throw new Error((0,o.errorPrefix)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise},t.prototype.limitToFirst=function(e){return(0,o.validateArgCount)("Query.limitToFirst",1,1,arguments.length),new t(this.database,bo(this._delegate,ao(e)))},t.prototype.limitToLast=function(e){return(0,o.validateArgCount)("Query.limitToLast",1,1,arguments.length),new t(this.database,bo(this._delegate,co(e)))},t.prototype.orderByChild=function(e){return(0,o.validateArgCount)("Query.orderByChild",1,1,arguments.length),new t(this.database,bo(this._delegate,ho(e)))},t.prototype.orderByKey=function(){return(0,o.validateArgCount)("Query.orderByKey",0,0,arguments.length),new t(this.database,bo(this._delegate,po()))},t.prototype.orderByPriority=function(){return(0,o.validateArgCount)("Query.orderByPriority",0,0,arguments.length),new t(this.database,bo(this._delegate,mo()))},t.prototype.orderByValue=function(){return(0,o.validateArgCount)("Query.orderByValue",0,0,arguments.length),new t(this.database,bo(this._delegate,yo()))},t.prototype.startAt=function(e,n){return void 0===e&&(e=null),(0,o.validateArgCount)("Query.startAt",0,2,arguments.length),new t(this.database,bo(this._delegate,ro(e,n)))},t.prototype.startAfter=function(e,n){return void 0===e&&(e=null),(0,o.validateArgCount)("Query.startAfter",0,2,arguments.length),new t(this.database,bo(this._delegate,oo(e,n)))},t.prototype.endAt=function(e,n){return void 0===e&&(e=null),(0,o.validateArgCount)("Query.endAt",0,2,arguments.length),new t(this.database,bo(this._delegate,Xi(e,n)))},t.prototype.endBefore=function(e,n){return void 0===e&&(e=null),(0,o.validateArgCount)("Query.endBefore",0,2,arguments.length),new t(this.database,bo(this._delegate,eo(e,n)))},t.prototype.equalTo=function(e,n){return(0,o.validateArgCount)("Query.equalTo",1,2,arguments.length),new t(this.database,bo(this._delegate,wo(e,n)))},t.prototype.toString=function(){return(0,o.validateArgCount)("Query.toString",0,0,arguments.length),this._delegate.toString()},t.prototype.toJSON=function(){return(0,o.validateArgCount)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()},t.prototype.isEqual=function(e){if((0,o.validateArgCount)("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(e._delegate)},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:void 0,context:void 0};if(e&&n)r.cancel=e,(0,o.validateCallback)(t,"cancel",r.cancel,!0),r.context=n,(0,o.validateContextObject)(t,"context",r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error((0,o.errorPrefix)(t,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return new Lo(this.database,new Pi(this._delegate._repo,this._delegate._path))},enumerable:!1,configurable:!0}),t}(),Lo=function(t){function e(e,n){var r=t.call(this,e,new ki(n._repo,n._path,new Te,!1))||this;return r.database=e,r._delegate=n,r}return(0,s.__extends)(e,t),e.prototype.getKey=function(){return(0,o.validateArgCount)("Reference.key",0,0,arguments.length),this._delegate.key},e.prototype.child=function(t){return(0,o.validateArgCount)("Reference.child",1,1,arguments.length),"number"==typeof t&&(t=String(t)),new e(this.database,Li(this._delegate,t))},e.prototype.getParent=function(){(0,o.validateArgCount)("Reference.parent",0,0,arguments.length);var t=this._delegate.parent;return t?new e(this.database,t):null},e.prototype.getRoot=function(){return(0,o.validateArgCount)("Reference.root",0,0,arguments.length),new e(this.database,this._delegate.root)},e.prototype.set=function(t,e){(0,o.validateArgCount)("Reference.set",1,2,arguments.length),(0,o.validateCallback)("Reference.set","onComplete",e,!0);var n=Ui(this._delegate,t);return e&&n.then(function(){return e(null)},function(t){return e(t)}),n},e.prototype.update=function(t,e){if((0,o.validateArgCount)("Reference.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,k("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Br("Reference.update",this._delegate._path),(0,o.validateCallback)("Reference.update","onComplete",e,!0);var i=Vi(this._delegate,t);return e&&i.then(function(){return e(null)},function(t){return e(t)}),i},e.prototype.setWithPriority=function(t,e,n){(0,o.validateArgCount)("Reference.setWithPriority",2,3,arguments.length),(0,o.validateCallback)("Reference.setWithPriority","onComplete",n,!0);var r=ji(this._delegate,t,e);return n&&r.then(function(){return n(null)},function(t){return n(t)}),r},e.prototype.remove=function(t){(0,o.validateArgCount)("Reference.remove",0,1,arguments.length),(0,o.validateCallback)("Reference.remove","onComplete",t,!0);var e=Mi(this._delegate);return t&&e.then(function(){return t(null)},function(e){return t(e)}),e},e.prototype.transaction=function(t,e,n){var r=this;(0,o.validateArgCount)("Reference.transaction",1,3,arguments.length),(0,o.validateCallback)("Reference.transaction","transactionUpdate",t,!1),(0,o.validateCallback)("Reference.transaction","onComplete",e,!0),zr("Reference.transaction","applyLocally",n,!0);var i=No(this._delegate,t,{applyLocally:n}).then(function(t){return new Oo(t.committed,new Ro(r.database,t.snapshot))});return e&&i.then(function(t){return e(null,t.committed,t.snapshot)},function(t){return e(t,!1,null)}),i},e.prototype.setPriority=function(t,e){(0,o.validateArgCount)("Reference.setPriority",1,2,arguments.length),(0,o.validateCallback)("Reference.setPriority","onComplete",e,!0);var n=qi(this._delegate,t);return e&&n.then(function(){return e(null)},function(t){return e(t)}),n},e.prototype.push=function(t,n){var r=this;(0,o.validateArgCount)("Reference.push",0,2,arguments.length),(0,o.validateCallback)("Reference.push","onComplete",n,!0);var i=Fi(this._delegate,t),s=i.then(function(t){return new e(r.database,t)});n&&s.then(function(){return n(null)},function(t){return n(t)});var a=new e(this.database,i);return a.then=s.then.bind(s),a.catch=s.catch.bind(s,void 0),a},e.prototype.onDisconnect=function(){return Br("Reference.onDisconnect",this._delegate._path),new Po(new Si(this._delegate._repo,this._delegate._path))},Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(Do),Fo=function(){function t(t,e){var n=this;this._delegate=t,this.app=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={}),(t=(0,o.getModularInstance)(t))._checkNotDeleted("useEmulator"),t._instanceStarted&&S("Cannot call useEmulator() after instance has already been initialized.");var i=t._repoInternal,s=void 0;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&S('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new z(z.OWNER);else if(r.mockUserToken){var a=(0,o.createMockUserToken)(r.mockUserToken,t.app.options.projectId);s=new z(a)}!function(t,e,n,r){t.repoInfo_=new W(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),r&&(t.authTokenProvider_=r)}(i,e,n,s)}(this._delegate,t,e,n)},t.prototype.ref=function(t){if((0,o.validateArgCount)("database.ref",0,1,arguments.length),t instanceof Lo){var e=Di(this._delegate,t.toString());return new Lo(this,e)}return e=Ri(this._delegate,t),new Lo(this,e)},t.prototype.refFromURL=function(t){var e="database.refFromURL";(0,o.validateArgCount)(e,1,1,arguments.length);var n=Di(this._delegate,t);return new Lo(this,n)},t.prototype.goOffline=function(){return(0,o.validateArgCount)("database.goOffline",0,0,arguments.length),So(this._delegate)},t.prototype.goOnline=function(){return(0,o.validateArgCount)("database.goOnline",0,0,arguments.length),ko(this._delegate)},t.ServerValue={TIMESTAMP:Ao,increment:function(t){return function(t){return{".sv":{increment:t}}}(t)}},t}(),Mo=Object.freeze({__proto__:null,forceLongPolling:function(){st.forceDisallow(),rt.forceAllow()},forceWebSockets:function(){rt.forceDisallow()},isWebSocketsAvailable:function(){return st.isAvailable()},setSecurityDebugCallback:function(t,e){t._delegate._repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){!function(t,e){if(void 0===e&&(e=!1),"undefined"!=typeof console){var n;e?(t.statsListener_||(t.statsListener_=new De(t.stats_)),n=t.statsListener_.get()):n=t.stats_.get();var r=Object.keys(n).reduce(function(t,e){return Math.max(e.length,t)},0);F(n,function(t,e){for(var n=t,i=t.length;i<r+2;i++)n+=" ";console.log(n+e)})}}(t._delegate._repo,e)},statsIncrementCounter:function(t,e){!function(t,e){t.stats_.incrementCounter(e),t.statsReporter_.statsToReport_[e]=!0}(t._delegate._repo,e)},dataUpdateCount:function(t){return t._delegate._repo.dataUpdateCount},interceptServerData:function(t,e){return function(t,e){t.interceptServerDataCallback_=e}(t._delegate._repo,e)},initStandalone:function(t){var e=t.app,n=t.url,r=t.customAuthImpl,o=t.namespace,s=t.nodeAdmin,a=void 0!==s&&s;c(t.version);var u=new i.Provider("auth-internal",new i.ComponentContainer("database-standalone"));return u.setComponent(new i.Component("auth-internal",function(){return r},"PRIVATE")),{instance:new Fo(Eo(e,u,void 0,n,a),e),namespace:o}}}),Uo=Rt;Rt.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},Rt.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var qo=Object.freeze({__proto__:null,DataConnection:Uo,RealTimeConnection:ut,hijackHash:function(t){var e=Rt.prototype.put;return Rt.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){Rt.prototype.put=e}},ConnectionTarget:W,queryIdentifier:function(t){return t._delegate._queryIdentifier},forceRestClient:function(t){!function(t){Co=t}(t)}}),jo=Fo.ServerValue;!function(e){c(e.SDK_VERSION);var n=e.INTERNAL.registerComponent(new i.Component("database",function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return new Fo(Eo(r,i,o,n),r)},"PUBLIC").setServiceProps({Reference:Lo,Query:Do,Database:Fo,DataSnapshot:Ro,enableLogging:T,INTERNAL:Mo,ServerValue:jo,TEST_ACCESS:qo}).setMultipleInstances(!0));e.registerVersion("@firebase/database","0.10.1"),(0,o.isNodeSdk)()&&(t.exports=n)}(r.default)},308:(t,e,n)=>{"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i;n.r(e),n.d(e,{LogLevel:()=>s,Logger:()=>h,setLogLevel:()=>d,setUserLogHandler:()=>f});var o=[],s=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),a={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},u=s.INFO,c=((i={})[s.DEBUG]="log",i[s.VERBOSE]="log",i[s.INFO]="info",i[s.WARN]="warn",i[s.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in s))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.DEBUG],t)),this._logHandler.apply(this,r([this,s.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.VERBOSE],t)),this._logHandler.apply(this,r([this,s.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.INFO],t)),this._logHandler.apply(this,r([this,s.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.WARN],t)),this._logHandler.apply(this,r([this,s.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.ERROR],t)),this._logHandler.apply(this,r([this,s.ERROR],t))},t}();function d(t){o.forEach(function(e){e.setLogLevel(t)})}function f(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}}).filter(function(t){return t}).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:s[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=o;r<i.length;r++)n(i[r])}},250:(t,e,n)=>{"use strict";n.r(e),n.d(e,{CONSTANTS:()=>i,Deferred:()=>f,ErrorFactory:()=>P,FirebaseError:()=>N,MAX_VALUE_MILLIS:()=>st,RANDOM_FACTOR:()=>at,Sha1:()=>W,areCookiesEnabled:()=>A,assert:()=>o,assertionError:()=>s,async:()=>$,base64:()=>u,base64Decode:()=>l,base64Encode:()=>c,calculateBackoffMillis:()=>ut,contains:()=>V,createMockUserToken:()=>p,createSubscribe:()=>Y,decode:()=>F,deepCopy:()=>h,deepExtend:()=>d,errorPrefix:()=>tt,extractQuerystring:()=>K,getGlobal:()=>x,getModularInstance:()=>lt,getUA:()=>g,isAdmin:()=>j,isBrowser:()=>y,isBrowserExtension:()=>_,isElectron:()=>b,isEmpty:()=>H,isIE:()=>T,isIndexedDBAvailable:()=>S,isMobileCordova:()=>m,isNode:()=>v,isNodeSdk:()=>E,isReactNative:()=>w,isSafari:()=>I,isUWP:()=>C,isValidFormat:()=>q,isValidTimestamp:()=>M,issuedAtTime:()=>U,jsonEval:()=>D,map:()=>z,ordinal:()=>ct,querystring:()=>G,querystringDecode:()=>Z,safeGet:()=>B,stringLength:()=>ot,stringToByteArray:()=>it,stringify:()=>L,validateArgCount:()=>X,validateCallback:()=>nt,validateContextObject:()=>rt,validateIndexedDBOpenable:()=>k,validateNamespace:()=>et});var r=n(4762),i={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},o=function(t,e){if(!t)throw s(e)},s=function(t){return new Error("Firebase Database ("+i.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},a=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},u={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=(15&a)<<2|c>>6,h=63&c;u||(h=64,s||(l=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[l],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(a(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();r.push(o<<2|s>>4),64!==a&&(r.push(s<<4&240|a>>2),64!==u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},c=function(t){var e=a(t);return u.encodeByteArray(e,!0)},l=function(t){try{return u.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function h(t){return d(void 0,t)}function d(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=d(t[n],e[n]));return t}var f=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}();function p(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var s=(0,r.__assign)({iss:"https://securetoken.google.com/"+n,aud:n,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[u.encodeString(JSON.stringify({alg:"none",type:"JWT"}),!1),u.encodeString(JSON.stringify(s),!1),""].join(".")}function g(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function m(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(g())}function v(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function y(){return"object"==typeof self&&self.self===self}function _(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function w(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function b(){return g().indexOf("Electron/")>=0}function T(){var t=g();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function C(){return g().indexOf("MSAppHost/")>=0}function E(){return!0===i.NODE_CLIENT||!0===i.NODE_ADMIN}function I(){return!v()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function S(){return"indexedDB"in self&&null!=indexedDB}function k(){return new Promise(function(t,e){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(o){e(o)}})}function A(){return!(!navigator||!navigator.cookieEnabled)}function x(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}var N=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,P.prototype.create),o}return(0,r.__extends)(e,t),e}(Error),P=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?O(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new N(i,a,r);return u},t}();function O(t,e){return t.replace(R,function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"})}var R=/\{\$([^}]+)}/g;function D(t){return JSON.parse(t)}function L(t){return JSON.stringify(t)}var F=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=D(l(o[0])||""),n=D(l(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(s){}return{header:e,claims:n,data:r,signature:i}},M=function(t){var e=F(t).claims,n=Math.floor((new Date).getTime()/1e3),r=0,i=0;return"object"==typeof e&&(e.hasOwnProperty("nbf")?r=e.nbf:e.hasOwnProperty("iat")&&(r=e.iat),i=e.hasOwnProperty("exp")?e.exp:r+86400),!!n&&!!r&&!!i&&n>=r&&n<=i},U=function(t){var e=F(t).claims;return"object"==typeof e&&e.hasOwnProperty("iat")?e.iat:null},q=function(t){var e=F(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},j=function(t){var e=F(t).claims;return"object"==typeof e&&!0===e.admin};function V(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function B(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function H(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function z(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function G(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach(function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""}function Z(t){var e={};return t.replace(/^\?/,"").split("&").forEach(function(t){if(t){var n=t.split("="),r=n[1];e[decodeURIComponent(n[0])]=decodeURIComponent(r)}}),e}function K(t){var e=t.indexOf("?");if(!e)return"";var n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}var W=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,o,s=this.chain_[0],a=this.chain_[1],u=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=c^a&(u^c),o=1518500249):(i=a^u^c,o=1859775393):r<60?(i=a&u|c&(a|u),o=2400959708):(i=a^u^c,o=3395469782);var h=(s<<5|s>>>27)+i+l+o+n[r]&4294967295;l=c,c=u,u=4294967295&(a<<30|a>>>2),a=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function Y(t,e){var n=new Q(t,e);return n.subscribe.bind(n)}var Q=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=J),void 0===r.error&&(r.error=J),void 0===r.complete&&(r.complete=J);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function $(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then(function(){t.apply(void 0,n)}).catch(function(t){e&&e(t)})}}function J(){}var X=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function tt(t,e){return t+" failed: "+e+" argument "}function et(t,e,n){if((!n||e)&&"string"!=typeof e)throw new Error(tt(t,"namespace")+"must be a valid firebase namespace.")}function nt(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(tt(t,e)+"must be a valid function.")}function rt(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(tt(t,e)+"must be a valid context object.")}var it=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);if(i>=55296&&i<=56319){var s=i-55296;r++,o(r<t.length,"Surrogate pair missing trail surrogate."),i=65536+(s<<10)+(t.charCodeAt(r)-56320)}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},ot=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e},st=144e5,at=.5;function ut(t,e,n){void 0===e&&(e=1e3),void 0===n&&(n=2);var r=e*Math.pow(n,t),i=Math.round(at*r*(Math.random()-.5)*2);return Math.min(st,r+i)}function ct(t){return Number.isFinite(t)?t+function(t){var e=(t=Math.abs(t))%100;if(e>=10&&e<=20)return"th";var n=t%10;return 1===n?"st":2===n?"nd":3===n?"rd":"th"}(t):""+t}function lt(t){return t&&t._delegate?t._delegate:t}},1858:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r.default});var r=n(1062);r.default.registerVersion("firebase","8.6.1","app")},2087:function(t,e){!function(t){"use strict";function e(t){return Array.prototype.slice.call(t)}function n(t){return new Promise(function(e,n){t.onsuccess=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function r(t,e,r){var i,o=new Promise(function(o,s){n(i=t[e].apply(t,r)).then(o,s)});return o.request=i,o}function i(t,e,n){var i=r(t,e,n);return i.then(function(t){if(t)return new l(t,i.request)})}function o(t,e,n){n.forEach(function(n){Object.defineProperty(t.prototype,n,{get:function(){return this[e][n]},set:function(t){this[e][n]=t}})})}function s(t,e,n,i){i.forEach(function(i){i in n.prototype&&(t.prototype[i]=function(){return r(this[e],i,arguments)})})}function a(t,e,n,r){r.forEach(function(r){r in n.prototype&&(t.prototype[r]=function(){return this[e][r].apply(this[e],arguments)})})}function u(t,e,n,r){r.forEach(function(r){r in n.prototype&&(t.prototype[r]=function(){return i(this[e],r,arguments)})})}function c(t){this._index=t}function l(t,e){this._cursor=t,this._request=e}function h(t){this._store=t}function d(t){this._tx=t,this.complete=new Promise(function(e,n){t.oncomplete=function(){e()},t.onerror=function(){n(t.error)},t.onabort=function(){n(t.error)}})}function f(t,e,n){this._db=t,this.oldVersion=e,this.transaction=new d(n)}function p(t){this._db=t}o(c,"_index",["name","keyPath","multiEntry","unique"]),s(c,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),u(c,"_index",IDBIndex,["openCursor","openKeyCursor"]),o(l,"_cursor",["direction","key","primaryKey","value"]),s(l,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(t){t in IDBCursor.prototype&&(l.prototype[t]=function(){var e=this,r=arguments;return Promise.resolve().then(function(){return e._cursor[t].apply(e._cursor,r),n(e._request).then(function(t){if(t)return new l(t,e._request)})})})}),h.prototype.createIndex=function(){return new c(this._store.createIndex.apply(this._store,arguments))},h.prototype.index=function(){return new c(this._store.index.apply(this._store,arguments))},o(h,"_store",["name","keyPath","indexNames","autoIncrement"]),s(h,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),u(h,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),a(h,"_store",IDBObjectStore,["deleteIndex"]),d.prototype.objectStore=function(){return new h(this._tx.objectStore.apply(this._tx,arguments))},o(d,"_tx",["objectStoreNames","mode"]),a(d,"_tx",IDBTransaction,["abort"]),f.prototype.createObjectStore=function(){return new h(this._db.createObjectStore.apply(this._db,arguments))},o(f,"_db",["name","version","objectStoreNames"]),a(f,"_db",IDBDatabase,["deleteObjectStore","close"]),p.prototype.transaction=function(){return new d(this._db.transaction.apply(this._db,arguments))},o(p,"_db",["name","version","objectStoreNames"]),a(p,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(t){[h,c].forEach(function(n){t in n.prototype&&(n.prototype[t.replace("open","iterate")]=function(){var n=e(arguments),r=n[n.length-1],i=this._store||this._index,o=i[t].apply(i,n.slice(0,-1));o.onsuccess=function(){r(o.result)}})})}),[c,h].forEach(function(t){t.prototype.getAll||(t.prototype.getAll=function(t,e){var n=this,r=[];return new Promise(function(i){n.iterateCursor(t,function(t){t?(r.push(t.value),void 0===e||r.length!=e?t.continue():i(r)):i(r)})})})}),t.openDb=function(t,e,n){var i=r(indexedDB,"open",[t,e]),o=i.request;return o&&(o.onupgradeneeded=function(t){n&&n(new f(o.result,t.oldVersion,o.transaction))}),i.then(function(t){return new p(t)})},t.deleteDb=function(t){return r(indexedDB,"deleteDatabase",[t])},Object.defineProperty(t,"__esModule",{value:!0})}(e)},8318:(t,e,n)=>{"use strict";n.d(e,{y:()=>c});var r=n(6673),i=n(5331),o=n(7498),s=n(6197),a=n(3392),u=n(1484);let c=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:s}=this,a=function(t,e,n){if(t){if(t instanceof r.L)return t;if(t[i.b])return t[i.b]()}return t||e||n?new r.L(t,e,n):new r.L(o.c)}(t,e,n);if(a.add(s?s.call(a,this.source):this.source||u.v.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),u.v.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(t){try{return this._subscribe(t)}catch(e){u.v.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof r.L?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=l(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[s.L](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?a.y:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=l(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function l(t){if(t||(t=u.v.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},7498:(t,e,n)=>{"use strict";n.d(e,{c:()=>o});var r=n(1484),i=n(4294);const o={closed:!0,next(t){},error(t){if(r.v.useDeprecatedSynchronousErrorHandling)throw t;(0,i.z)(t)},complete(){}}},5959:(t,e,n)=>{"use strict";n.d(e,{Yc:()=>c,xQ:()=>l});var r=n(8318),i=n(6673),o=n(7570),s=n(3895),a=n(9291),u=n(5331);class c extends i.L{constructor(t){super(t),this.destination=t}}let l=(()=>{class t extends r.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.b](){return new c(this)}lift(t){const e=new h(this,this);return e.operator=t,e}next(t){if(this.closed)throw new s.N;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new s.N;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new s.N;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new s.N;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new s.N;return this.hasError?(t.error(this.thrownError),o.w.EMPTY):this.isStopped?(t.complete(),o.w.EMPTY):(this.observers.push(t),new a.W(this,t))}asObservable(){const t=new r.y;return t.source=this,t}}return t.create=(t,e)=>new h(t,e),t})();class h extends l{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):o.w.EMPTY}}},9291:(t,e,n)=>{"use strict";n.d(e,{W:()=>i});var r=n(7570);class i extends r.w{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},6673:(t,e,n)=>{"use strict";n.d(e,{L:()=>c});var r=n(5024),i=n(7498),o=n(7570),s=n(5331),a=n(1484),u=n(4294);class c extends o.w{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.c;break;case 1:if(!t){this.destination=i.c;break}if("object"==typeof t){t instanceof c?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,t,e,n)}}[s.b](){return this}static create(t,e,n){const r=new c(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class l extends c{constructor(t,e,n,o){let s;super(),this._parentSubscriber=t;let a=this;(0,r.m)(e)?s=e:e&&(s=e.next,n=e.error,o=e.complete,e!==i.c&&(a=Object.create(e),(0,r.m)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=s,this._error=n,this._complete=o}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.v.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a.v;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):(0,u.z)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;(0,u.z)(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.v.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.v.useDeprecatedSynchronousErrorHandling)throw n;(0,u.z)(n)}}__tryOrSetError(t,e,n){if(!a.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.v.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):((0,u.z)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},7570:(t,e,n)=>{"use strict";n.d(e,{w:()=>a});var r=n(8470),i=n(2056),o=n(5024);const s=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let a=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:a,_unsubscribe:c,_subscriptions:l}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if((0,o.m)(c)){a&&(this._unsubscribe=void 0);try{c.call(this)}catch(h){e=h instanceof s?u(h.errors):[h]}}if((0,r.k)(l)){let t=-1,n=l.length;for(;++t<n;){const n=l[t];if((0,i.K)(n))try{n.unsubscribe()}catch(h){e=e||[],h instanceof s?e=e.concat(u(h.errors)):e.push(h)}}}if(e)throw new s(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var e;return t.EMPTY=((e=new t).closed=!0,e),t})();function u(t){return t.reduce((t,e)=>t.concat(e instanceof s?e.errors:e),[])}},1484:(t,e,n)=>{"use strict";n.d(e,{v:()=>i});let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},6882:(t,e,n)=>{"use strict";n.d(e,{IY:()=>s,Ds:()=>a,ft:()=>u});var r=n(6673),i=n(8318),o=n(6015);class s extends r.L{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.L{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function u(t,e){if(e.closed)return;if(t instanceof i.y)return t.subscribe(e);let n;try{n=(0,o.s)(t)(e)}catch(r){e.error(r)}return n}},2875:(t,e,n)=>{"use strict";n.d(e,{c:()=>a,N:()=>u});var r=n(5959),i=n(8318),o=n(7570),s=n(1564);class a extends i.y{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new o.w,t.add(this.source.subscribe(new c(this.getSubject(),this))),t.closed&&(this._connection=null,t=o.w.EMPTY)),t}refCount(){return(0,s.x)()(this)}}const u=(()=>{const t=a.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class c extends r.Yc{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}},653:(t,e,n)=>{"use strict";n.d(e,{E:()=>i,c:()=>o});var r=n(8318);const i=new r.y(t=>t.complete());function o(t){return t?function(t){return new r.y(e=>t.schedule(()=>e.complete()))}(t):i}},9764:(t,e,n)=>{"use strict";n.d(e,{D:()=>h});var r=n(8318),i=n(6015),o=n(7570),s=n(6197),a=n(2570),u=n(5686),c=n(5168),l=n(9653);function h(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[s.L]}(t))return function(t,e){return new r.y(n=>{const r=new o.w;return r.add(e.schedule(()=>{const i=t[s.L]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if((0,c.t)(t))return function(t,e){return new r.y(n=>{const r=new o.w;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if((0,l.z)(t))return(0,a.r)(t,e);if(function(t){return t&&"function"==typeof t[u.hZ]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.y(n=>{const r=new o.w;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[u.hZ](),r.add(e.schedule(function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof r.y?t:new r.y((0,i.s)(t))}},9342:(t,e,n)=>{"use strict";n.d(e,{n:()=>s});var r=n(8318),i=n(625),o=n(2570);function s(t,e){return e?(0,o.r)(t,e):new r.y((0,i.V)(t))}},1906:(t,e,n)=>{"use strict";n.d(e,{T:()=>a});var r=n(8318),i=n(6163),o=n(7471),s=n(9342);function a(...t){let e=Number.POSITIVE_INFINITY,n=null,a=t[t.length-1];return(0,i.K)(a)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof a&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof r.y?t[0]:(0,o.J)(e)((0,s.n)(t,n))}},878:(t,e,n)=>{"use strict";n.d(e,{of:()=>s});var r=n(6163),i=n(9342),o=n(2570);function s(...t){let e=t[t.length-1];return(0,r.K)(e)?(t.pop(),(0,o.r)(t,e)):(0,i.n)(t)}},9996:(t,e,n)=>{"use strict";n.d(e,{U:()=>i});var r=n(6673);function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(t,e))}}class o{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new s(t,this.project,this.thisArg))}}class s extends r.L{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},7471:(t,e,n)=>{"use strict";n.d(e,{J:()=>o});var r=n(3982),i=n(3392);function o(t=Number.POSITIVE_INFINITY){return(0,r.zg)(i.y,t)}},3982:(t,e,n)=>{"use strict";n.d(e,{zg:()=>s});var r=n(9996),i=n(9764),o=n(6882);function s(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?o=>o.pipe(s((n,o)=>(0,i.D)(t(n,o)).pipe((0,r.U)((t,r)=>e(n,t,o,r))),n)):("number"==typeof e&&(n=e),e=>e.lift(new a(t,n)))}class a{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new u(t,this.project,this.concurrent))}}class u extends o.Ds{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new o.IY(this),n=this.destination;n.add(e);const r=(0,o.ft)(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},9098:(t,e,n)=>{"use strict";n.d(e,{ht:()=>l,QV:()=>u});var r=n(6673),i=n(653),o=n(878),s=n(8318);let a=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return(0,o.of)(this.value);case"E":return t=this.error,new s.y(e=>e.error(t));case"C":return(0,i.c)()}var t;throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})();function u(t,e=0){return function(n){return n.lift(new c(t,e))}}class c{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new l(t,this.scheduler,this.delay))}}class l extends r.L{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(l.dispatch,this.delay,new h(t,this.destination)))}_next(t){this.scheduleMessage(a.createNext(t))}_error(t){this.scheduleMessage(a.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(a.createComplete()),this.unsubscribe()}}class h{constructor(t,e){this.notification=t,this.destination=e}}},1564:(t,e,n)=>{"use strict";n.d(e,{x:()=>i});var r=n(6673);function i(){return function(t){return t.lift(new o(t))}}class o{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new s(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class s extends r.L{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}},1055:(t,e,n)=>{"use strict";n.d(e,{B:()=>a});var r=n(2875),i=n(1564),o=n(5959);function s(){return new o.xQ}function a(){return t=>{return(0,i.x)()((e=s,function(t){let n;n="function"==typeof e?e:function(){return e};const i=Object.create(t,r.N);return i.source=t,i.subjectFactory=n,i})(t));var e}}},4187:(t,e,n)=>{"use strict";n.d(e,{R:()=>m});var r=n(8318);let i=1;const o=(()=>Promise.resolve())(),s={};function a(t){return t in s&&(delete s[t],!0)}const u={setImmediate(t){const e=i++;return s[e]=!0,o.then(()=>a(e)&&t()),e},clearImmediate(t){a(t)}};var c=n(8277);class l extends c.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=u.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(u.clearImmediate(e),t.scheduled=void 0)}}var h=n(1098);class d extends h.v{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}const f=new d(l);var p=n(8470);class g extends r.y{constructor(t,e=0,n=f){var r;super(),this.source=t,this.delayTime=e,this.scheduler=n,((0,p.k)(r=e)||!(r-parseFloat(r)+1>=0)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=f)}static create(t,e=0,n=f){return new g(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(g.dispatch,this.delayTime,{source:this.source,subscriber:t})}}function m(t,e=0){return function(n){return n.lift(new v(t,e))}}class v{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new g(e,this.delay,this.scheduler).subscribe(t)}}},6599:(t,e,n)=>{"use strict";n.d(e,{b:()=>s});var r=n(6673);function i(){}var o=n(5024);function s(t,e,n){return function(r){return r.lift(new a(t,e,n))}}class a{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new u(t,this.nextOrObserver,this.error,this.complete))}}class u extends r.L{constructor(t,e,n,r){super(t),this._tapNext=i,this._tapError=i,this._tapComplete=i,this._tapError=n||i,this._tapComplete=r||i,(0,o.m)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||i,this._tapError=e.error||i,this._tapComplete=e.complete||i)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}},2570:(t,e,n)=>{"use strict";n.d(e,{r:()=>o});var r=n(8318),i=n(7570);function o(t,e){return new r.y(n=>{const r=new i.w;let o=0;return r.add(e.schedule(function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},8277:(t,e,n)=>{"use strict";n.d(e,{o:()=>o});var r=n(7570);class i extends r.w{constructor(t,e){super()}schedule(t,e=0){return this}}class o extends i{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n,r=!1;try{this.work(t)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}},1098:(t,e,n)=>{"use strict";n.d(e,{v:()=>i});let r=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class i extends r{constructor(t,e=r.now){super(t,()=>i.delegate&&i.delegate!==this?i.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}},8569:(t,e,n)=>{"use strict";n.d(e,{z:()=>i,P:()=>o});var r=n(8277);const i=new(n(1098).v)(r.o),o=i},8489:(t,e,n)=>{"use strict";n.d(e,{c:()=>u,N:()=>a});var r=n(8277);class i extends r.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}var o=n(1098);class s extends o.v{}const a=new s(i),u=a},5686:(t,e,n)=>{"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(e,{hZ:()=>i});const i=r()},6197:(t,e,n)=>{"use strict";n.d(e,{L:()=>r});const r=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")()},5331:(t,e,n)=>{"use strict";n.d(e,{b:()=>r});const r=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())()},3895:(t,e,n)=>{"use strict";n.d(e,{N:()=>r});const r=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})()},4294:(t,e,n)=>{"use strict";function r(t){setTimeout(()=>{throw t},0)}n.d(e,{z:()=>r})},3392:(t,e,n)=>{"use strict";function r(t){return t}n.d(e,{y:()=>r})},8470:(t,e,n)=>{"use strict";n.d(e,{k:()=>r});const r=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))()},9653:(t,e,n)=>{"use strict";n.d(e,{z:()=>r});const r=t=>t&&"number"==typeof t.length&&"function"!=typeof t},5024:(t,e,n)=>{"use strict";function r(t){return"function"==typeof t}n.d(e,{m:()=>r})},2056:(t,e,n)=>{"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,{K:()=>r})},5168:(t,e,n)=>{"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,{t:()=>r})},6163:(t,e,n)=>{"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,{K:()=>r})},6015:(t,e,n)=>{"use strict";n.d(e,{s:()=>l});var r=n(625),i=n(4294),o=n(5686),s=n(6197),a=n(9653),u=n(5168),c=n(2056);const l=t=>{if(t&&"function"==typeof t[s.L])return l=t,t=>{const e=l[s.L]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if((0,a.z)(t))return(0,r.V)(t);if((0,u.t)(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i.z),t);if(t&&"function"==typeof t[o.hZ])return e=t,t=>{const n=e[o.hZ]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=(0,c.K)(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,l}},625:(t,e,n)=>{"use strict";n.d(e,{V:()=>r});const r=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}},2501:function(t){t.exports=function(){"use strict";const t=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),e="SweetAlert2:",n=t=>t.charAt(0).toUpperCase()+t.slice(1),r=t=>Array.prototype.slice.call(t),i=t=>{console.warn("".concat(e," ").concat("object"==typeof t?t.join(" "):t))},o=t=>{console.error("".concat(e," ").concat(t))},s=[],a=(t,e)=>{"function"==typeof t&&t(e)},u=t=>"function"==typeof t?t():t,c=t=>t&&"function"==typeof t.toPromise,l=t=>c(t)?t.toPromise():Promise.resolve(t),h=t=>t&&Promise.resolve(t)===t,d=t=>t instanceof Element||(t=>"object"==typeof t&&t.jquery)(t),f=t=>{const e={};for(const n in t)e[t[n]]="swal2-"+t[n];return e},p=f(["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"]),g=f(["success","warning","info","question","error"]),m=()=>document.body.querySelector(".".concat(p.container)),v=t=>{const e=m();return e?e.querySelector(t):null},y=t=>v(".".concat(t)),_=()=>y(p.popup),w=()=>y(p.icon),b=()=>y(p.title),T=()=>y(p["html-container"]),C=()=>y(p.image),E=()=>y(p["progress-steps"]),I=()=>y(p["validation-message"]),S=()=>v(".".concat(p.actions," .").concat(p.confirm)),k=()=>v(".".concat(p.actions," .").concat(p.deny)),A=()=>v(".".concat(p.loader)),x=()=>v(".".concat(p.actions," .").concat(p.cancel)),N=()=>y(p.actions),P=()=>y(p.footer),O=()=>y(p["timer-progress-bar"]),R=()=>y(p.close),D=()=>{const t=r(_().querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])')).sort((t,e)=>(t=parseInt(t.getAttribute("tabindex")))>(e=parseInt(e.getAttribute("tabindex")))?1:t<e?-1:0),e=r(_().querySelectorAll('\n  a[href],\n  area[href],\n  input:not([disabled]),\n  select:not([disabled]),\n  textarea:not([disabled]),\n  button:not([disabled]),\n  iframe,\n  object,\n  embed,\n  [tabindex="0"],\n  [contenteditable],\n  audio[controls],\n  video[controls],\n  summary\n')).filter(t=>"-1"!==t.getAttribute("tabindex"));return(t=>{const e=[];for(let n=0;n<t.length;n++)-1===e.indexOf(t[n])&&e.push(t[n]);return e})(t.concat(e)).filter(t=>J(t))},L=()=>!F()&&!document.body.classList.contains(p["no-backdrop"]),F=()=>document.body.classList.contains(p["toast-shown"]),M={previousBodyPadding:null},U=(t,e)=>{if(t.textContent="",e){const n=(new DOMParser).parseFromString(e,"text/html");r(n.querySelector("head").childNodes).forEach(e=>{t.appendChild(e)}),r(n.querySelector("body").childNodes).forEach(e=>{t.appendChild(e)})}},q=(t,e)=>{if(!e)return!1;const n=e.split(/\s+/);for(let r=0;r<n.length;r++)if(!t.classList.contains(n[r]))return!1;return!0},j=(t,e,n)=>{if(((t,e)=>{r(t.classList).forEach(n=>{Object.values(p).includes(n)||Object.values(g).includes(n)||Object.values(e.showClass).includes(n)||t.classList.remove(n)})})(t,e),e.customClass&&e.customClass[n]){if("string"!=typeof e.customClass[n]&&!e.customClass[n].forEach)return i("Invalid type of customClass.".concat(n,'! Expected string or iterable object, got "').concat(typeof e.customClass[n],'"'));z(t,e.customClass[n])}},V=(t,e)=>{if(!e)return null;switch(e){case"select":case"textarea":case"file":return Z(t,p[e]);case"checkbox":return t.querySelector(".".concat(p.checkbox," input"));case"radio":return t.querySelector(".".concat(p.radio," input:checked"))||t.querySelector(".".concat(p.radio," input:first-child"));case"range":return t.querySelector(".".concat(p.range," input"));default:return Z(t,p.input)}},B=t=>{if(t.focus(),"file"!==t.type){const e=t.value;t.value="",t.value=e}},H=(t,e,n)=>{t&&e&&("string"==typeof e&&(e=e.split(/\s+/).filter(Boolean)),e.forEach(e=>{t.forEach?t.forEach(t=>{n?t.classList.add(e):t.classList.remove(e)}):n?t.classList.add(e):t.classList.remove(e)}))},z=(t,e)=>{H(t,e,!0)},G=(t,e)=>{H(t,e,!1)},Z=(t,e)=>{for(let n=0;n<t.childNodes.length;n++)if(q(t.childNodes[n],e))return t.childNodes[n]},K=(t,e,n)=>{n==="".concat(parseInt(n))&&(n=parseInt(n)),n||0===parseInt(n)?t.style[e]="number"==typeof n?"".concat(n,"px"):n:t.style.removeProperty(e)},W=(t,e="flex")=>{t.style.display=e},Y=t=>{t.style.display="none"},Q=(t,e,n,r)=>{const i=t.querySelector(e);i&&(i.style[n]=r)},$=(t,e,n)=>{e?W(t,n):Y(t)},J=t=>!(!t||!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)),X=t=>!!(t.scrollHeight>t.clientHeight),tt=t=>{const e=window.getComputedStyle(t),n=parseFloat(e.getPropertyValue("animation-duration")||"0"),r=parseFloat(e.getPropertyValue("transition-duration")||"0");return n>0||r>0},et=(t,e=!1)=>{const n=O();J(n)&&(e&&(n.style.transition="none",n.style.width="100%"),setTimeout(()=>{n.style.transition="width ".concat(t/1e3,"s linear"),n.style.width="0%"},10))},nt=()=>"undefined"==typeof window||"undefined"==typeof document,rt='\n <div aria-labelledby="'.concat(p.title,'" aria-describedby="').concat(p["html-container"],'" class="').concat(p.popup,'" tabindex="-1">\n   <button type="button" class="').concat(p.close,'"></button>\n   <ul class="').concat(p["progress-steps"],'"></ul>\n   <div class="').concat(p.icon,'"></div>\n   <img class="').concat(p.image,'" />\n   <h2 class="').concat(p.title,'" id="').concat(p.title,'"></h2>\n   <div class="').concat(p["html-container"],'"></div>\n   <input class="').concat(p.input,'" />\n   <input type="file" class="').concat(p.file,'" />\n   <div class="').concat(p.range,'">\n     <input type="range" />\n     <output></output>\n   </div>\n   <select class="').concat(p.select,'"></select>\n   <div class="').concat(p.radio,'"></div>\n   <label for="').concat(p.checkbox,'" class="').concat(p.checkbox,'">\n     <input type="checkbox" />\n     <span class="').concat(p.label,'"></span>\n   </label>\n   <textarea class="').concat(p.textarea,'"></textarea>\n   <div class="').concat(p["validation-message"],'" id="').concat(p["validation-message"],'"></div>\n   <div class="').concat(p.actions,'">\n     <div class="').concat(p.loader,'"></div>\n     <button type="button" class="').concat(p.confirm,'"></button>\n     <button type="button" class="').concat(p.deny,'"></button>\n     <button type="button" class="').concat(p.cancel,'"></button>\n   </div>\n   <div class="').concat(p.footer,'"></div>\n   <div class="').concat(p["timer-progress-bar-container"],'">\n     <div class="').concat(p["timer-progress-bar"],'"></div>\n   </div>\n </div>\n').replace(/(^|\n)\s*/g,""),it=()=>{Me.isVisible()&&Me.resetValidationMessage()},ot=(t,e)=>{t instanceof HTMLElement?e.appendChild(t):"object"==typeof t?st(t,e):t&&U(e,t)},st=(t,e)=>{t.jquery?at(e,t):U(e,t.toString())},at=(t,e)=>{if(t.textContent="",0 in e)for(let n=0;n in e;n++)t.appendChild(e[n].cloneNode(!0));else t.appendChild(e.cloneNode(!0))},ut=(()=>{if(nt())return!1;const t=document.createElement("div"),e={WebkitAnimation:"webkitAnimationEnd",OAnimation:"oAnimationEnd oanimationend",animation:"animationend"};for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&void 0!==t.style[n])return e[n];return!1})();function ct(t,e,r){$(t,r["show".concat(n(e),"Button")],"inline-block"),U(t,r["".concat(e,"ButtonText")]),t.setAttribute("aria-label",r["".concat(e,"ButtonAriaLabel")]),t.className=p[e],j(t,r,"".concat(e,"Button")),z(t,r["".concat(e,"ButtonClass")])}var lt={promise:new WeakMap,innerParams:new WeakMap,domCache:new WeakMap};const ht=["input","file","range","select","radio","checkbox","textarea"],dt=(t,e)=>{t.placeholder&&!e.inputPlaceholder||(t.placeholder=e.inputPlaceholder)},ft=(t,e,n)=>{if(n.inputLabel){t.id=p.input;const r=document.createElement("label"),i=p["input-label"];r.setAttribute("for",t.id),r.className=i,z(r,n.customClass.inputLabel),r.innerText=n.inputLabel,e.insertAdjacentElement("beforebegin",r)}},pt=t=>{const e=p[t]?p[t]:p.input;return Z(_(),e)},gt={};gt.text=gt.email=gt.password=gt.number=gt.tel=gt.url=(t,e)=>("string"==typeof e.inputValue||"number"==typeof e.inputValue?t.value=e.inputValue:h(e.inputValue)||i('Unexpected type of inputValue! Expected "string", "number" or "Promise", got "'.concat(typeof e.inputValue,'"')),ft(t,t,e),dt(t,e),t.type=e.input,t),gt.file=(t,e)=>(ft(t,t,e),dt(t,e),t),gt.range=(t,e)=>{const n=t.querySelector("input"),r=t.querySelector("output");return n.value=e.inputValue,n.type=e.input,r.value=e.inputValue,ft(n,t,e),t},gt.select=(t,e)=>{if(t.textContent="",e.inputPlaceholder){const n=document.createElement("option");U(n,e.inputPlaceholder),n.value="",n.disabled=!0,n.selected=!0,t.appendChild(n)}return ft(t,t,e),t},gt.radio=t=>(t.textContent="",t),gt.checkbox=(t,e)=>{const n=V(_(),"checkbox");n.value=1,n.id=p.checkbox,n.checked=Boolean(e.inputValue);const r=t.querySelector("span");return U(r,e.inputPlaceholder),t},gt.textarea=(t,e)=>{if(t.value=e.inputValue,dt(t,e),ft(t,t,e),"MutationObserver"in window){const e=parseInt(window.getComputedStyle(_()).width);new MutationObserver(()=>{const n=t.offsetWidth+(r=t,parseInt(window.getComputedStyle(r).marginLeft)+parseInt(window.getComputedStyle(r).marginRight));var r;_().style.width=n>e?"".concat(n,"px"):null}).observe(t,{attributes:!0,attributeFilter:["style"]})}return t};const mt=(t,e)=>{const n=T();j(n,e,"htmlContainer"),e.html?(ot(e.html,n),W(n,"block")):e.text?(n.textContent=e.text,W(n,"block")):Y(n),((t,e)=>{const n=_(),r=lt.innerParams.get(t),i=!r||e.input!==r.input;ht.forEach(t=>{const r=p[t],o=Z(n,r);((t,e)=>{const n=V(_(),t);if(n){(t=>{for(let e=0;e<t.attributes.length;e++){const n=t.attributes[e].name;["type","value","style"].includes(n)||t.removeAttribute(n)}})(n);for(const t in e)n.setAttribute(t,e[t])}})(t,e.inputAttributes),o.className=r,i&&Y(o)}),e.input&&(i&&(t=>{if(!gt[t.input])return o('Unexpected type of input! Expected "text", "email", "password", "number", "tel", "select", "radio", "checkbox", "textarea", "file" or "url", got "'.concat(t.input,'"'));const e=pt(t.input),n=gt[t.input](e,t);W(n),setTimeout(()=>{B(n)})})(e),(t=>{const e=pt(t.input);t.customClass&&z(e,t.customClass.input)})(e))})(t,e)},vt=(t,e)=>{for(const n in g)e.icon!==n&&G(t,g[n]);z(t,g[e.icon]),wt(t,e),yt(),j(t,e,"icon")},yt=()=>{const t=_(),e=window.getComputedStyle(t).getPropertyValue("background-color"),n=t.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let r=0;r<n.length;r++)n[r].style.backgroundColor=e},_t=(t,e)=>{t.textContent="",U(t,e.iconHtml?bt(e.iconHtml):"success"===e.icon?'\n      <div class="swal2-success-circular-line-left"></div>\n      <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>\n      <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>\n      <div class="swal2-success-circular-line-right"></div>\n    ':"error"===e.icon?'\n      <span class="swal2-x-mark">\n        <span class="swal2-x-mark-line-left"></span>\n        <span class="swal2-x-mark-line-right"></span>\n      </span>\n    ':bt({question:"?",warning:"!",info:"i"}[e.icon]))},wt=(t,e)=>{if(e.iconColor){t.style.color=e.iconColor,t.style.borderColor=e.iconColor;for(const n of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])Q(t,n,"backgroundColor",e.iconColor);Q(t,".swal2-success-ring","borderColor",e.iconColor)}},bt=t=>'<div class="'.concat(p["icon-content"],'">').concat(t,"</div>"),Tt=(t,e)=>{((t,e)=>{const n=m(),r=_();e.toast?(K(n,"width",e.width),r.style.width="100%",r.insertBefore(A(),w())):K(r,"width",e.width),K(r,"padding",e.padding),e.background&&(r.style.background=e.background),Y(I()),((t,e)=>{t.className="".concat(p.popup," ").concat(J(t)?e.showClass.popup:""),e.toast?(z([document.documentElement,document.body],p["toast-shown"]),z(t,p.toast)):z(t,p.modal),j(t,e,"popup"),"string"==typeof e.customClass&&z(t,e.customClass),e.icon&&z(t,p["icon-".concat(e.icon)])})(r,e)})(0,e),((t,e)=>{const n=m();n&&(function(t,e){"string"==typeof e?t.style.background=e:e||z([document.documentElement,document.body],p["no-backdrop"])}(n,e.backdrop),!e.backdrop&&e.allowOutsideClick&&i('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`'),function(t,e){e in p?z(t,p[e]):(i('The "position" parameter is not valid, defaulting to "center"'),z(t,p.center))}(n,e.position),function(t,e){if(e&&"string"==typeof e){const n="grow-".concat(e);n in p&&z(t,p[n])}}(n,e.grow),j(n,e,"container"))})(0,e),((t,e)=>{const n=E();if(!e.progressSteps||0===e.progressSteps.length)return Y(n);W(n),n.textContent="",e.currentProgressStep>=e.progressSteps.length&&i("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),e.progressSteps.forEach((t,r)=>{const i=(t=>{const e=document.createElement("li");return z(e,p["progress-step"]),U(e,t),e})(t);if(n.appendChild(i),r===e.currentProgressStep&&z(i,p["active-progress-step"]),r!==e.progressSteps.length-1){const t=(t=>{const e=document.createElement("li");return z(e,p["progress-step-line"]),t.progressStepsDistance&&(e.style.width=t.progressStepsDistance),e})(e);n.appendChild(t)}})})(0,e),((t,e)=>{const n=lt.innerParams.get(t),r=w();n&&e.icon===n.icon?(_t(r,e),vt(r,e)):e.icon||e.iconHtml?e.icon&&-1===Object.keys(g).indexOf(e.icon)?(o('Unknown icon! Expected "success", "error", "warning", "info" or "question", got "'.concat(e.icon,'"')),Y(r)):(W(r),_t(r,e),vt(r,e),z(r,e.showClass.icon)):Y(r)})(t,e),((t,e)=>{const n=C();if(!e.imageUrl)return Y(n);W(n,""),n.setAttribute("src",e.imageUrl),n.setAttribute("alt",e.imageAlt),K(n,"width",e.imageWidth),K(n,"height",e.imageHeight),n.className=p.image,j(n,e,"image")})(0,e),((t,e)=>{const n=b();$(n,e.title||e.titleText,"block"),e.title&&ot(e.title,n),e.titleText&&(n.innerText=e.titleText),j(n,e,"title")})(0,e),((t,e)=>{const n=R();U(n,e.closeButtonHtml),j(n,e,"closeButton"),$(n,e.showCloseButton),n.setAttribute("aria-label",e.closeButtonAriaLabel)})(0,e),mt(t,e),((t,e)=>{const n=N(),r=A(),i=S(),o=k(),s=x();e.showConfirmButton||e.showDenyButton||e.showCancelButton||Y(n),j(n,e,"actions"),ct(i,"confirm",e),ct(o,"deny",e),ct(s,"cancel",e),function(t,e,n,r){if(!r.buttonsStyling)return G([t,e,n],p.styled);z([t,e,n],p.styled),r.confirmButtonColor&&(t.style.backgroundColor=r.confirmButtonColor,z(t,p["default-outline"])),r.denyButtonColor&&(e.style.backgroundColor=r.denyButtonColor,z(e,p["default-outline"])),r.cancelButtonColor&&(n.style.backgroundColor=r.cancelButtonColor,z(n,p["default-outline"]))}(i,o,s,e),e.reverseButtons&&(n.insertBefore(s,r),n.insertBefore(o,r),n.insertBefore(i,r)),U(r,e.loaderHtml),j(r,e,"loader")})(0,e),((t,e)=>{const n=P();$(n,e.footer),e.footer&&ot(e.footer,n),j(n,e,"footer")})(0,e),a(e.didRender,_())},Ct=()=>S()&&S().click(),Et=t=>{let e=_();e||Me.fire(),e=_();const n=A();F()?Y(w()):It(e,t),W(n),e.setAttribute("data-loading",!0),e.setAttribute("aria-busy",!0),e.focus()},It=(t,e)=>{const n=N(),r=A();!e&&J(S())&&(e=S()),W(n),e&&(Y(e),r.setAttribute("data-button-to-replace",e.className)),r.parentNode.insertBefore(r,e),z([t,n],p.loading)},St={},kt=()=>{if(St.timeout)return(()=>{const t=O(),e=parseInt(window.getComputedStyle(t).width);t.style.removeProperty("transition"),t.style.width="100%";const n=parseInt(window.getComputedStyle(t).width),r=parseInt(e/n*100);t.style.removeProperty("transition"),t.style.width="".concat(r,"%")})(),St.timeout.stop()},At=()=>{if(St.timeout){const t=St.timeout.start();return et(t),t}};let xt=!1;const Nt={},Pt=t=>{for(let e=t.target;e&&e!==document;e=e.parentNode)for(const t in Nt){const n=e.getAttribute(t);if(n)return void Nt[t].fire({template:n})}},Ot={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},Rt=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],Dt={},Lt=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],Ft=t=>Object.prototype.hasOwnProperty.call(Ot,t),Mt=t=>Dt[t],Ut=t=>{Ft(t)||i('Unknown parameter "'.concat(t,'"'))},qt=t=>{Lt.includes(t)&&i('The parameter "'.concat(t,'" is incompatible with toasts'))},jt=t=>{var e,n,r;Mt(t)&&(e=t,n=Mt(t),r='"'.concat(e,'" is deprecated and will be removed in the next major release. Please use "').concat(n,'" instead.'),s.includes(r)||(s.push(r),i(r)))};var Vt=Object.freeze({isValidParameter:Ft,isUpdatableParameter:t=>-1!==Rt.indexOf(t),isDeprecatedParameter:Mt,argsToParams:t=>{const e={};return"object"!=typeof t[0]||d(t[0])?["title","html","icon"].forEach((n,r)=>{const i=t[r];"string"==typeof i||d(i)?e[n]=i:void 0!==i&&o("Unexpected type of ".concat(n,'! Expected "string" or "Element", got ').concat(typeof i))}):Object.assign(e,t[0]),e},isVisible:()=>J(_()),clickConfirm:Ct,clickDeny:()=>k()&&k().click(),clickCancel:()=>x()&&x().click(),getContainer:m,getPopup:_,getTitle:b,getHtmlContainer:T,getImage:C,getIcon:w,getInputLabel:()=>y(p["input-label"]),getCloseButton:R,getActions:N,getConfirmButton:S,getDenyButton:k,getCancelButton:x,getLoader:A,getFooter:P,getTimerProgressBar:O,getFocusableElements:D,getValidationMessage:I,isLoading:()=>_().hasAttribute("data-loading"),fire:function(...t){return new this(...t)},mixin:function(t){return class extends(this){_main(e,n){return super._main(e,Object.assign({},t,n))}}},showLoading:Et,enableLoading:Et,getTimerLeft:()=>St.timeout&&St.timeout.getTimerLeft(),stopTimer:kt,resumeTimer:At,toggleTimer:()=>{const t=St.timeout;return t&&(t.running?kt():At())},increaseTimer:t=>{if(St.timeout){const e=St.timeout.increase(t);return et(e,!0),e}},isTimerRunning:()=>St.timeout&&St.timeout.isRunning(),bindClickHandler:function(t="data-swal-template"){Nt[t]=this,xt||(document.body.addEventListener("click",Pt),xt=!0)}});function Bt(){const t=lt.innerParams.get(this);if(!t)return;const e=lt.domCache.get(this);Y(e.loader),F()?t.icon&&W(w()):Ht(e),G([e.popup,e.actions],p.loading),e.popup.removeAttribute("aria-busy"),e.popup.removeAttribute("data-loading"),e.confirmButton.disabled=!1,e.denyButton.disabled=!1,e.cancelButton.disabled=!1}const Ht=t=>{const e=t.popup.getElementsByClassName(t.loader.getAttribute("data-button-to-replace"));e.length?W(e[0],"inline-block"):!J(S())&&!J(k())&&!J(x())&&Y(t.actions)},zt=t=>{const e=t.target,n=m();return!(Gt(t)||Zt(t)||e!==n&&(X(n)||"INPUT"===e.tagName||X(T())&&T().contains(e)))},Gt=t=>t.touches&&t.touches.length&&"stylus"===t.touches[0].touchType,Zt=t=>t.touches&&t.touches.length>1;var Kt={swalPromiseResolve:new WeakMap};function Wt(t,e,n,i){F()?Xt(t,i):((t=>new Promise(e=>{if(!t)return e();const n=window.scrollX,r=window.scrollY;St.restoreFocusTimeout=setTimeout(()=>{St.previousActiveElement&&St.previousActiveElement.focus?(St.previousActiveElement.focus(),St.previousActiveElement=null):document.body&&document.body.focus(),e()},100),window.scrollTo(n,r)}))(n).then(()=>Xt(t,i)),St.keydownTarget.removeEventListener("keydown",St.keydownHandler,{capture:St.keydownListenerCapture}),St.keydownHandlerAdded=!1),e.parentNode&&e.remove(),L()&&(null!==M.previousBodyPadding&&(document.body.style.paddingRight="".concat(M.previousBodyPadding,"px"),M.previousBodyPadding=null),(()=>{if(q(document.body,p.iosfix)){const t=parseInt(document.body.style.top,10);G(document.body,p.iosfix),document.body.style.top="",document.body.scrollTop=-1*t}})(),r(document.body.children).forEach(t=>{t.hasAttribute("data-previous-aria-hidden")?(t.setAttribute("aria-hidden",t.getAttribute("data-previous-aria-hidden")),t.removeAttribute("data-previous-aria-hidden")):t.removeAttribute("aria-hidden")})),G([document.documentElement,document.body],[p.shown,p["height-auto"],p["no-backdrop"],p["toast-shown"]])}function Yt(t){const e=_();if(!e)return;t=Qt(t);const n=lt.innerParams.get(this);if(!n||q(e,n.hideClass.popup))return;const r=Kt.swalPromiseResolve.get(this);G(e,n.showClass.popup),z(e,n.hideClass.popup);const i=m();G(i,n.showClass.backdrop),z(i,n.hideClass.backdrop),$t(this,e,n),r(t)}const Qt=t=>void 0===t?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},t),$t=(t,e,n)=>{const r=m(),i=ut&&tt(e);a(n.willClose,e),i?Jt(t,e,r,n.returnFocus,n.didClose):Wt(t,r,n.returnFocus,n.didClose)},Jt=(t,e,n,r,i)=>{St.swalCloseEventFinishedCallback=Wt.bind(null,t,n,r,i),e.addEventListener(ut,function(t){t.target===e&&(St.swalCloseEventFinishedCallback(),delete St.swalCloseEventFinishedCallback)})},Xt=(t,e)=>{setTimeout(()=>{a(e),t._destroy()})};function te(t,e,n){const r=lt.domCache.get(t);e.forEach(t=>{r[t].disabled=n})}function ee(t,e){if(!t)return!1;if("radio"===t.type){const n=t.parentNode.parentNode.querySelectorAll("input");for(let t=0;t<n.length;t++)n[t].disabled=e}else t.disabled=e}class ne{constructor(t,e){this.callback=t,this.remaining=e,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date-this.started),this.remaining}increase(t){const e=this.running;return e&&this.stop(),this.remaining+=t,e&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}var re={email:(t,e)=>/^[a-zA-Z0-9.+_-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]{2,24}$/.test(t)?Promise.resolve():Promise.resolve(e||"Invalid email address"),url:(t,e)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(t)?Promise.resolve():Promise.resolve(e||"Invalid URL")};function ie(t){(function(t){t.inputValidator||Object.keys(re).forEach(e=>{t.input===e&&(t.inputValidator=re[e])})})(t),t.showLoaderOnConfirm&&!t.preConfirm&&i("showLoaderOnConfirm is set to true, but preConfirm is not defined.\nshowLoaderOnConfirm should be used together with preConfirm, see usage example:\nhttps://sweetalert2.github.io/#ajax-request"),function(t){(!t.target||"string"==typeof t.target&&!document.querySelector(t.target)||"string"!=typeof t.target&&!t.target.appendChild)&&(i('Target parameter is not valid, defaulting to "body"'),t.target="body")}(t),"string"==typeof t.title&&(t.title=t.title.split("\n").join("<br />")),(t=>{const e=(()=>{const t=m();return!!t&&(t.remove(),G([document.documentElement,document.body],[p["no-backdrop"],p["toast-shown"],p["has-column"]]),!0)})();if(nt())return void o("SweetAlert2 requires document to initialize");const n=document.createElement("div");n.className=p.container,e&&z(n,p["no-transition"]),U(n,rt);const r="string"==typeof(i=t.target)?document.querySelector(i):i;var i;r.appendChild(n),(t=>{const e=_();e.setAttribute("role",t.toast?"alert":"dialog"),e.setAttribute("aria-live",t.toast?"polite":"assertive"),t.toast||e.setAttribute("aria-modal","true")})(t),(t=>{"rtl"===window.getComputedStyle(t).direction&&z(m(),p.rtl)})(r),(()=>{const t=_(),e=Z(t,p.input),n=Z(t,p.file),r=t.querySelector(".".concat(p.range," input")),i=t.querySelector(".".concat(p.range," output")),o=Z(t,p.select),s=t.querySelector(".".concat(p.checkbox," input")),a=Z(t,p.textarea);e.oninput=it,n.onchange=it,o.onchange=it,s.onchange=it,a.oninput=it,r.oninput=()=>{it(),i.value=r.value},r.onchange=()=>{it(),r.nextSibling.value=r.value}})()})(t)}const oe=["swal-title","swal-html","swal-footer"],se=(t,e)=>{r(t.attributes).forEach(n=>{-1===e.indexOf(n.name)&&i(['Unrecognized attribute "'.concat(n.name,'" on <').concat(t.tagName.toLowerCase(),">."),"".concat(e.length?"Allowed attributes are: ".concat(e.join(", ")):"To set the value, use HTML within the element.")])})},ae=t=>{const e=_();if(t.target!==e)return;const n=m();e.removeEventListener(ut,ae),n.style.overflowY="auto"},ue=(t,e)=>{ut&&tt(e)?(t.style.overflowY="hidden",e.addEventListener(ut,ae)):t.style.overflowY="auto"},ce=(t,e,n)=>{(()=>{if((/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1)&&!q(document.body,p.iosfix)){const t=document.body.scrollTop;document.body.style.top="".concat(-1*t,"px"),z(document.body,p.iosfix),(()=>{const t=m();let e;t.ontouchstart=t=>{e=zt(t)},t.ontouchmove=t=>{e&&(t.preventDefault(),t.stopPropagation())}})(),(()=>{if(!navigator.userAgent.match(/(CriOS|FxiOS|EdgiOS|YaBrowser|UCBrowser)/i)){const t=44;_().scrollHeight>window.innerHeight-t&&(m().style.paddingBottom="".concat(t,"px"))}})()}})(),e&&"hidden"!==n&&(null===M.previousBodyPadding&&document.body.scrollHeight>window.innerHeight&&(M.previousBodyPadding=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight="".concat(M.previousBodyPadding+(()=>{const t=document.createElement("div");t.className=p["scrollbar-measure"],document.body.appendChild(t);const e=t.getBoundingClientRect().width-t.clientWidth;return document.body.removeChild(t),e})(),"px"))),setTimeout(()=>{t.scrollTop=0})},le=(t,e,n)=>{z(t,n.showClass.backdrop),e.style.setProperty("opacity","0","important"),W(e,"grid"),setTimeout(()=>{z(e,n.showClass.popup),e.style.removeProperty("opacity")},10),z([document.documentElement,document.body],p.shown),n.heightAuto&&n.backdrop&&!n.toast&&z([document.documentElement,document.body],p["height-auto"])},he={select:(t,e,n)=>{const r=Z(t,p.select),i=(t,e,r)=>{const i=document.createElement("option");i.value=r,U(i,e),i.selected=fe(r,n.inputValue),t.appendChild(i)};e.forEach(t=>{const e=t[0],n=t[1];if(Array.isArray(n)){const t=document.createElement("optgroup");t.label=e,t.disabled=!1,r.appendChild(t),n.forEach(e=>i(t,e[1],e[0]))}else i(r,n,e)}),r.focus()},radio:(t,e,n)=>{const r=Z(t,p.radio);e.forEach(t=>{const e=t[0],i=t[1],o=document.createElement("input"),s=document.createElement("label");o.type="radio",o.name=p.radio,o.value=e,fe(e,n.inputValue)&&(o.checked=!0);const a=document.createElement("span");U(a,i),a.className=p.label,s.appendChild(o),s.appendChild(a),r.appendChild(s)});const i=r.querySelectorAll("input");i.length&&i[0].focus()}},de=t=>{const e=[];return"undefined"!=typeof Map&&t instanceof Map?t.forEach((t,n)=>{let r=t;"object"==typeof r&&(r=de(r)),e.push([n,r])}):Object.keys(t).forEach(n=>{let r=t[n];"object"==typeof r&&(r=de(r)),e.push([n,r])}),e},fe=(t,e)=>e&&e.toString()===t.toString(),pe=(t,e,n)=>{const r=((t,e)=>{const n=t.getInput();if(!n)return null;switch(e.input){case"checkbox":return(t=>t.checked?1:0)(n);case"radio":return(t=>t.checked?t.value:null)(n);case"file":return(t=>t.files.length?null!==t.getAttribute("multiple")?t.files:t.files[0]:null)(n);default:return e.inputAutoTrim?n.value.trim():n.value}})(t,e);e.inputValidator?ge(t,e,r,n):t.getInput().checkValidity()?"deny"===n?me(t,e,r):ye(t,e,r):(t.enableButtons(),t.showValidationMessage(e.validationMessage))},ge=(t,e,n,r)=>{t.disableInput(),Promise.resolve().then(()=>l(e.inputValidator(n,e.validationMessage))).then(i=>{t.enableButtons(),t.enableInput(),i?t.showValidationMessage(i):"deny"===r?me(t,e,n):ye(t,e,n)})},me=(t,e,n)=>{e.showLoaderOnDeny&&Et(k()),e.preDeny?Promise.resolve().then(()=>l(e.preDeny(n,e.validationMessage))).then(e=>{!1===e?t.hideLoading():t.closePopup({isDenied:!0,value:void 0===e?n:e})}):t.closePopup({isDenied:!0,value:n})},ve=(t,e)=>{t.closePopup({isConfirmed:!0,value:e})},ye=(t,e,n)=>{e.showLoaderOnConfirm&&Et(),e.preConfirm?(t.resetValidationMessage(),Promise.resolve().then(()=>l(e.preConfirm(n,e.validationMessage))).then(e=>{J(I())||!1===e?t.hideLoading():ve(t,void 0===e?n:e)})):ve(t,n)},_e=(t,e,n)=>{const r=D();if(r.length)return(e+=n)===r.length?e=0:-1===e&&(e=r.length-1),r[e].focus();_().focus()},we=["ArrowRight","ArrowDown"],be=["ArrowLeft","ArrowUp"],Te=(t,e,n)=>{if(!e.isComposing&&e.target&&t.getInput()&&e.target.outerHTML===t.getInput().outerHTML){if(["textarea","file"].includes(n.input))return;Ct(),e.preventDefault()}},Ce=(t,e)=>{const n=t.target,r=D();let i=-1;for(let o=0;o<r.length;o++)if(n===r[o]){i=o;break}_e(0,i,t.shiftKey?-1:1),t.stopPropagation(),t.preventDefault()},Ee=t=>{if(![S(),k(),x()].includes(document.activeElement))return;const e=we.includes(t)?"nextElementSibling":"previousElementSibling",n=document.activeElement[e];n&&n.focus()},Ie=(e,n,r)=>{u(n.allowEscapeKey)&&(e.preventDefault(),r(t.esc))};let Se=!1;const ke=(t,e)=>{const o=(t=>{const e="string"==typeof t.template?document.querySelector(t.template):t.template;if(!e)return{};const o=e.content;return(t=>{const e=oe.concat(["swal-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);r(t.children).forEach(t=>{const n=t.tagName.toLowerCase();-1===e.indexOf(n)&&i("Unrecognized element <".concat(n,">"))})})(o),Object.assign((t=>{const e={};return r(t.querySelectorAll("swal-param")).forEach(t=>{se(t,["name","value"]);const n=t.getAttribute("name");let r=t.getAttribute("value");"boolean"==typeof Ot[n]&&"false"===r&&(r=!1),"object"==typeof Ot[n]&&(r=JSON.parse(r)),e[n]=r}),e})(o),(t=>{const e={};return r(t.querySelectorAll("swal-button")).forEach(t=>{se(t,["type","color","aria-label"]);const r=t.getAttribute("type");e["".concat(r,"ButtonText")]=t.innerHTML,e["show".concat(n(r),"Button")]=!0,t.hasAttribute("color")&&(e["".concat(r,"ButtonColor")]=t.getAttribute("color")),t.hasAttribute("aria-label")&&(e["".concat(r,"ButtonAriaLabel")]=t.getAttribute("aria-label"))}),e})(o),(t=>{const e={},n=t.querySelector("swal-image");return n&&(se(n,["src","width","height","alt"]),n.hasAttribute("src")&&(e.imageUrl=n.getAttribute("src")),n.hasAttribute("width")&&(e.imageWidth=n.getAttribute("width")),n.hasAttribute("height")&&(e.imageHeight=n.getAttribute("height")),n.hasAttribute("alt")&&(e.imageAlt=n.getAttribute("alt"))),e})(o),(t=>{const e={},n=t.querySelector("swal-icon");return n&&(se(n,["type","color"]),n.hasAttribute("type")&&(e.icon=n.getAttribute("type")),n.hasAttribute("color")&&(e.iconColor=n.getAttribute("color")),e.iconHtml=n.innerHTML),e})(o),(t=>{const e={},n=t.querySelector("swal-input");n&&(se(n,["type","label","placeholder","value"]),e.input=n.getAttribute("type")||"text",n.hasAttribute("label")&&(e.inputLabel=n.getAttribute("label")),n.hasAttribute("placeholder")&&(e.inputPlaceholder=n.getAttribute("placeholder")),n.hasAttribute("value")&&(e.inputValue=n.getAttribute("value")));const i=t.querySelectorAll("swal-input-option");return i.length&&(e.inputOptions={},r(i).forEach(t=>{se(t,["value"]);const n=t.getAttribute("value");e.inputOptions[n]=t.innerHTML})),e})(o),((t,e)=>{const n={};for(const r in e){const i=e[r],o=t.querySelector(i);o&&(se(o,[]),n[i.replace(/^swal-/,"")]=o.innerHTML.trim())}return n})(o,oe))})(t),s=Object.assign({},Ot,e,o,t);return s.showClass=Object.assign({},Ot.showClass,s.showClass),s.hideClass=Object.assign({},Ot.hideClass,s.hideClass),s},Ae=(e,n,i)=>new Promise(s=>{const d=t=>{e.closePopup({isDismissed:!0,dismiss:t})};Kt.swalPromiseResolve.set(e,s),n.confirmButton.onclick=()=>((t,e)=>{t.disableButtons(),e.input?pe(t,e,"confirm"):ye(t,e,!0)})(e,i),n.denyButton.onclick=()=>((t,e)=>{t.disableButtons(),e.returnInputValueOnDeny?pe(t,e,"deny"):me(t,e,!1)})(e,i),n.cancelButton.onclick=()=>((e,n)=>{e.disableButtons(),n(t.cancel)})(e,d),n.closeButton.onclick=()=>d(t.close),((e,n,r)=>{lt.innerParams.get(e).toast?((e,n,r)=>{n.popup.onclick=()=>{const n=lt.innerParams.get(e);n.showConfirmButton||n.showDenyButton||n.showCancelButton||n.showCloseButton||n.timer||n.input||r(t.close)}})(e,n,r):((t=>{t.popup.onmousedown=()=>{t.container.onmouseup=function(e){t.container.onmouseup=void 0,e.target===t.container&&(Se=!0)}}})(n),(t=>{t.container.onmousedown=()=>{t.popup.onmouseup=function(e){t.popup.onmouseup=void 0,(e.target===t.popup||t.popup.contains(e.target))&&(Se=!0)}}})(n),((e,n,r)=>{n.container.onclick=i=>{const o=lt.innerParams.get(e);Se?Se=!1:i.target===n.container&&u(o.allowOutsideClick)&&r(t.backdrop)}})(e,n,r))})(e,n,d),((t,e,n,r)=>{e.keydownTarget&&e.keydownHandlerAdded&&(e.keydownTarget.removeEventListener("keydown",e.keydownHandler,{capture:e.keydownListenerCapture}),e.keydownHandlerAdded=!1),n.toast||(e.keydownHandler=e=>((t,e,n)=>{const r=lt.innerParams.get(t);r&&(r.stopKeydownPropagation&&e.stopPropagation(),"Enter"===e.key?Te(t,e,r):"Tab"===e.key?Ce(e,r):[...we,...be].includes(e.key)?Ee(e.key):"Escape"===e.key&&Ie(e,r,n))})(t,e,r),e.keydownTarget=n.keydownListenerCapture?window:_(),e.keydownListenerCapture=n.keydownListenerCapture,e.keydownTarget.addEventListener("keydown",e.keydownHandler,{capture:e.keydownListenerCapture}),e.keydownHandlerAdded=!0)})(e,St,i,d),((t,e)=>{"select"===e.input||"radio"===e.input?((t,e)=>{const n=_(),r=t=>he[e.input](n,de(t),e);c(e.inputOptions)||h(e.inputOptions)?(Et(S()),l(e.inputOptions).then(e=>{t.hideLoading(),r(e)})):"object"==typeof e.inputOptions?r(e.inputOptions):o("Unexpected type of inputOptions! Expected object, Map or Promise, got ".concat(typeof e.inputOptions))})(t,e):["text","email","number","tel","textarea"].includes(e.input)&&(c(e.inputValue)||h(e.inputValue))&&((t,e)=>{const n=t.getInput();Y(n),l(e.inputValue).then(r=>{n.value="number"===e.input?parseFloat(r)||0:"".concat(r),W(n),n.focus(),t.hideLoading()}).catch(e=>{o("Error in inputValue promise: ".concat(e)),n.value="",W(n),n.focus(),t.hideLoading()})})(t,e)})(e,i),(t=>{const e=m(),n=_();a(t.willOpen,n);const i=window.getComputedStyle(document.body).overflowY;le(e,n,t),setTimeout(()=>{ue(e,n)},10),L()&&(ce(e,t.scrollbarPadding,i),r(document.body.children).forEach(t=>{t===m()||t.contains(m())||(t.hasAttribute("aria-hidden")&&t.setAttribute("data-previous-aria-hidden",t.getAttribute("aria-hidden")),t.setAttribute("aria-hidden","true"))})),F()||St.previousActiveElement||(St.previousActiveElement=document.activeElement),setTimeout(()=>a(t.didOpen,n)),G(e,p["no-transition"])})(i),xe(St,i,d),Ne(n,i),setTimeout(()=>{n.container.scrollTop=0})}),xe=(t,e,n)=>{const r=O();Y(r),e.timer&&(t.timeout=new ne(()=>{n("timer"),delete t.timeout},e.timer),e.timerProgressBar&&(W(r),setTimeout(()=>{t.timeout&&t.timeout.running&&et(e.timer)})))},Ne=(t,e)=>{if(!e.toast)return u(e.allowEnterKey)?void(Pe(t,e)||_e(0,-1,1)):Oe()},Pe=(t,e)=>e.focusDeny&&J(t.denyButton)?(t.denyButton.focus(),!0):e.focusCancel&&J(t.cancelButton)?(t.cancelButton.focus(),!0):!(!e.focusConfirm||!J(t.confirmButton)||(t.confirmButton.focus(),0)),Oe=()=>{document.activeElement&&"function"==typeof document.activeElement.blur&&document.activeElement.blur()},Re=t=>{for(const e in t)t[e]=new WeakMap};var De=Object.freeze({hideLoading:Bt,disableLoading:Bt,getInput:function(t){const e=lt.innerParams.get(t||this),n=lt.domCache.get(t||this);return n?V(n.popup,e.input):null},close:Yt,closePopup:Yt,closeModal:Yt,closeToast:Yt,enableButtons:function(){te(this,["confirmButton","denyButton","cancelButton"],!1)},disableButtons:function(){te(this,["confirmButton","denyButton","cancelButton"],!0)},enableInput:function(){return ee(this.getInput(),!1)},disableInput:function(){return ee(this.getInput(),!0)},showValidationMessage:function(t){const e=lt.domCache.get(this),n=lt.innerParams.get(this);U(e.validationMessage,t),e.validationMessage.className=p["validation-message"],n.customClass&&n.customClass.validationMessage&&z(e.validationMessage,n.customClass.validationMessage),W(e.validationMessage);const r=this.getInput();r&&(r.setAttribute("aria-invalid",!0),r.setAttribute("aria-describedBy",p["validation-message"]),B(r),z(r,p.inputerror))},resetValidationMessage:function(){const t=lt.domCache.get(this);t.validationMessage&&Y(t.validationMessage);const e=this.getInput();e&&(e.removeAttribute("aria-invalid"),e.removeAttribute("aria-describedBy"),G(e,p.inputerror))},getProgressSteps:function(){return lt.domCache.get(this).progressSteps},_main:function(t,e={}){(t=>{for(const e in t)Ut(e),t.toast&&qt(e),jt(e)})(Object.assign({},e,t)),St.currentInstance&&St.currentInstance._destroy(),St.currentInstance=this;const n=ke(t,e);ie(n),Object.freeze(n),St.timeout&&(St.timeout.stop(),delete St.timeout),clearTimeout(St.restoreFocusTimeout);const r=(t=>{const e={popup:_(),container:m(),actions:N(),confirmButton:S(),denyButton:k(),cancelButton:x(),loader:A(),closeButton:R(),validationMessage:I(),progressSteps:E()};return lt.domCache.set(t,e),e})(this);return Tt(this,n),lt.innerParams.set(this,n),Ae(this,r,n)},update:function(t){const e=_(),n=lt.innerParams.get(this);if(!e||q(e,n.hideClass.popup))return i("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");const r={};Object.keys(t).forEach(e=>{Me.isUpdatableParameter(e)?r[e]=t[e]:i('Invalid parameter to update: "'.concat(e,'". Updatable params are listed here: https://github.com/sweetalert2/sweetalert2/blob/master/src/utils/params.js\n\nIf you think this parameter should be updatable, request it here: https://github.com/sweetalert2/sweetalert2/issues/new?template=02_feature_request.md'))});const o=Object.assign({},n,r);Tt(this,o),lt.innerParams.set(this,o),Object.defineProperties(this,{params:{value:Object.assign({},this.params,t),writable:!1,enumerable:!0}})},_destroy:function(){const t=lt.domCache.get(this),e=lt.innerParams.get(this);e&&(t.popup&&St.swalCloseEventFinishedCallback&&(St.swalCloseEventFinishedCallback(),delete St.swalCloseEventFinishedCallback),St.deferDisposalTimer&&(clearTimeout(St.deferDisposalTimer),delete St.deferDisposalTimer),a(e.didDestroy),delete this.params,delete St.keydownHandler,delete St.keydownTarget,Re(lt),Re(Kt))}});let Le;class Fe{constructor(...t){if("undefined"==typeof window)return;Le=this;const e=Object.freeze(this.constructor.argsToParams(t));Object.defineProperties(this,{params:{value:e,writable:!1,enumerable:!0,configurable:!0}});const n=this._main(this.params);lt.promise.set(this,n)}then(t){return lt.promise.get(this).then(t)}finally(t){return lt.promise.get(this).finally(t)}}Object.assign(Fe.prototype,De),Object.assign(Fe,Vt),Object.keys(De).forEach(t=>{Fe[t]=function(...e){if(Le)return Le[t](...e)}}),Fe.DismissReason=t,Fe.version="11.0.8";const Me=Fe;return Me.default=Me,Me}(),void 0!==this&&this.Sweetalert2&&(this.swal=this.sweetAlert=this.Swal=this.SweetAlert=this.Sweetalert2),"undefined"!=typeof document&&function(t,e){var n=t.createElement("style");if(t.getElementsByTagName("head")[0].appendChild(n),n.styleSheet)n.styleSheet.disabled||(n.styleSheet.cssText=e);else try{n.innerHTML=e}catch(t){n.innerText=e}}(document,'.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4!important;grid-row:1/4!important;grid-template-columns:1fr 99fr 1fr;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 .625em #d9d9d9}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:700}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.3125em;padding:0}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-styled:focus{box-shadow:0 0 0 1px #fff,0 0 0 3px rgba(100,150,200,.5)}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;transform:rotate(45deg);border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-.8em;left:-.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{-webkit-animation:swal2-toast-animate-success-line-tip .75s;animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{-webkit-animation:swal2-toast-animate-success-line-long .75s;animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{-webkit-animation:swal2-toast-show .5s;animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{-webkit-animation:swal2-toast-hide .1s forwards;animation:swal2-toast-hide .1s forwards}.swal2-container{display:grid;position:fixed;z-index:1060;top:0;right:0;bottom:0;left:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end" "gap gap gap";grid-template-rows:auto auto auto .625em;height:100%;padding:.625em .625em 0;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}.swal2-container::after{content:"";grid-column:1/4;grid-row:4;height:.625em}.swal2-container.swal2-backdrop-show,.swal2-container.swal2-noanimation{background:rgba(0,0,0,.4)}.swal2-container.swal2-backdrop-hide{background:0 0!important}.swal2-container.swal2-bottom-start,.swal2-container.swal2-center-start,.swal2-container.swal2-top-start{grid-template-columns:minmax(0,1fr) auto auto}.swal2-container.swal2-bottom,.swal2-container.swal2-center,.swal2-container.swal2-top{grid-template-columns:auto minmax(0,1fr) auto}.swal2-container.swal2-bottom-end,.swal2-container.swal2-center-end,.swal2-container.swal2-top-end{grid-template-columns:auto auto minmax(0,1fr)}.swal2-container.swal2-top-start>.swal2-popup{align-self:start}.swal2-container.swal2-top>.swal2-popup{grid-column:2;align-self:start;justify-self:center}.swal2-container.swal2-top-end>.swal2-popup,.swal2-container.swal2-top-right>.swal2-popup{grid-column:3;align-self:start;justify-self:end}.swal2-container.swal2-center-left>.swal2-popup,.swal2-container.swal2-center-start>.swal2-popup{grid-row:2;align-self:center}.swal2-container.swal2-center>.swal2-popup{grid-column:2;grid-row:2;align-self:center;justify-self:center}.swal2-container.swal2-center-end>.swal2-popup,.swal2-container.swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;align-self:center;justify-self:end}.swal2-container.swal2-bottom-left>.swal2-popup,.swal2-container.swal2-bottom-start>.swal2-popup{grid-column:1;grid-row:3;align-self:end}.swal2-container.swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;justify-self:center;align-self:end}.swal2-container.swal2-bottom-end>.swal2-popup,.swal2-container.swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;align-self:end;justify-self:end}.swal2-container.swal2-grow-fullscreen>.swal2-popup,.swal2-container.swal2-grow-row>.swal2-popup{grid-column:1/4;width:100%}.swal2-container.swal2-grow-column>.swal2-popup,.swal2-container.swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}.swal2-container.swal2-no-transition{transition:none!important}.swal2-popup{display:none;position:relative;box-sizing:border-box;width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;font-family:inherit;font-size:1rem}.swal2-popup:focus{outline:0}.swal2-popup.swal2-loading{overflow-y:hidden}.swal2-title{position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:#595959;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}.swal2-actions{display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:100%;margin:1.25em auto 0;padding:0}.swal2-actions:not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}.swal2-actions:not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0,0,0,.1),rgba(0,0,0,.1))}.swal2-actions:not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0,0,0,.2),rgba(0,0,0,.2))}.swal2-loader{display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;-webkit-animation:swal2-rotate-loading 1.5s linear 0s infinite normal;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 transparent #2778c4 transparent}.swal2-styled{margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px transparent;font-weight:500}.swal2-styled:not([disabled]){cursor:pointer}.swal2-styled.swal2-confirm{border:0;border-radius:.25em;background:initial;background-color:#7367f0;color:#fff;font-size:1em}.swal2-styled.swal2-confirm:focus{box-shadow:0 0 0 3px rgba(115,103,240,.5)}.swal2-styled.swal2-deny{border:0;border-radius:.25em;background:initial;background-color:#ea5455;color:#fff;font-size:1em}.swal2-styled.swal2-deny:focus{box-shadow:0 0 0 3px rgba(234,84,85,.5)}.swal2-styled.swal2-cancel{border:0;border-radius:.25em;background:initial;background-color:#6e7d88;color:#fff;font-size:1em}.swal2-styled.swal2-cancel:focus{box-shadow:0 0 0 3px rgba(110,125,136,.5)}.swal2-styled.swal2-default-outline:focus{box-shadow:0 0 0 3px rgba(100,150,200,.5)}.swal2-styled:focus{outline:0}.swal2-styled::-moz-focus-inner{border:0}.swal2-footer{justify-content:center;margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:#545454;font-size:1em}.swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto!important;height:.25em;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}.swal2-timer-progress-bar{width:100%;height:.25em;background:rgba(0,0,0,.2)}.swal2-image{max-width:100%;margin:2em auto 1em}.swal2-close{z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:0 0;color:#ccc;font-family:serif;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}.swal2-close:hover{transform:none;background:0 0;color:#f27474}.swal2-close:focus{outline:0;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}.swal2-close::-moz-focus-inner{border:0}.swal2-html-container{z-index:1;justify-content:center;margin:0;padding:1em 1.6em .3em;color:#545454;font-size:1.125em;font-weight:400;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word}.swal2-checkbox,.swal2-file,.swal2-input,.swal2-radio,.swal2-select,.swal2-textarea{margin:1em 2em 0}.swal2-file,.swal2-input,.swal2-textarea{box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid #d9d9d9;border-radius:.1875em;background:inherit;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px transparent;color:inherit;font-size:1.125em}.swal2-file.swal2-inputerror,.swal2-input.swal2-inputerror,.swal2-textarea.swal2-inputerror{border-color:#f27474!important;box-shadow:0 0 2px #f27474!important}.swal2-file:focus,.swal2-input:focus,.swal2-textarea:focus{border:1px solid #b4dbed;outline:0;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}.swal2-file::-moz-placeholder,.swal2-input::-moz-placeholder,.swal2-textarea::-moz-placeholder{color:#ccc}.swal2-file:-ms-input-placeholder,.swal2-input:-ms-input-placeholder,.swal2-textarea:-ms-input-placeholder{color:#ccc}.swal2-file::placeholder,.swal2-input::placeholder,.swal2-textarea::placeholder{color:#ccc}.swal2-range{margin:1em 2em 0;background:#fff}.swal2-range input{width:80%}.swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}.swal2-range input,.swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}.swal2-input{height:2.625em;padding:0 .75em}.swal2-input[type=number]{max-width:10em}.swal2-file{width:75%;margin-right:auto;margin-left:auto;background:inherit;font-size:1.125em}.swal2-textarea{height:6.75em;padding:.75em}.swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:inherit;color:inherit;font-size:1.125em}.swal2-checkbox,.swal2-radio{align-items:center;justify-content:center;background:#fff;color:inherit}.swal2-checkbox label,.swal2-radio label{margin:0 .6em;font-size:1.125em}.swal2-checkbox input,.swal2-radio input{flex-shrink:0;margin:0 .4em}.swal2-input-label{display:flex;justify-content:center;margin:1em auto 0}.swal2-validation-message{align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:#f0f0f0;color:#666;font-size:1em;font-weight:300}.swal2-validation-message::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}.swal2-icon{position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:.25em solid transparent;border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}.swal2-icon.swal2-error{border-color:#f27474;color:#f27474}.swal2-icon.swal2-error .swal2-x-mark{position:relative;flex-grow:1}.swal2-icon.swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}.swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}.swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}.swal2-icon.swal2-error.swal2-icon-show{-webkit-animation:swal2-animate-error-icon .5s;animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-error.swal2-icon-show .swal2-x-mark{-webkit-animation:swal2-animate-error-x-mark .5s;animation:swal2-animate-error-x-mark .5s}.swal2-icon.swal2-warning{border-color:#facea8;color:#f8bb86}.swal2-icon.swal2-info{border-color:#9de0f6;color:#3fc3ee}.swal2-icon.swal2-question{border-color:#c9dae1;color:#87adbd}.swal2-icon.swal2-success{border-color:#a5dc86;color:#a5dc86}.swal2-icon.swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;transform:rotate(45deg);border-radius:50%}.swal2-icon.swal2-success [class^=swal2-success-circular-line][class$=left]{top:-.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}.swal2-icon.swal2-success [class^=swal2-success-circular-line][class$=right]{top:-.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}.swal2-icon.swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-.25em;left:-.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}.swal2-icon.swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}.swal2-icon.swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}.swal2-icon.swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}.swal2-icon.swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-line-tip{-webkit-animation:swal2-animate-success-line-tip .75s;animation:swal2-animate-success-line-tip .75s}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-line-long{-webkit-animation:swal2-animate-success-line-long .75s;animation:swal2-animate-success-line-long .75s}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-circular-line-right{-webkit-animation:swal2-rotate-success-circular-line 4.25s ease-in;animation:swal2-rotate-success-circular-line 4.25s ease-in}.swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:inherit;font-weight:600}.swal2-progress-steps li{display:inline-block;position:relative}.swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}.swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}[class^=swal2]{-webkit-tap-highlight-color:transparent}.swal2-show{-webkit-animation:swal2-show .3s;animation:swal2-show .3s}.swal2-hide{-webkit-animation:swal2-hide .15s forwards;animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@-webkit-keyframes swal2-toast-show{0%{transform:translateY(-.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0)}}@keyframes swal2-toast-show{0%{transform:translateY(-.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0)}}@-webkit-keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@-webkit-keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@-webkit-keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@-webkit-keyframes swal2-show{0%{transform:scale(.7)}45%{transform:scale(1.05)}80%{transform:scale(.95)}100%{transform:scale(1)}}@keyframes swal2-show{0%{transform:scale(.7)}45%{transform:scale(1.05)}80%{transform:scale(.95)}100%{transform:scale(1)}}@-webkit-keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(.5);opacity:0}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(.5);opacity:0}}@-webkit-keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@-webkit-keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@-webkit-keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@-webkit-keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(.4);opacity:0}50%{margin-top:1.625em;transform:scale(.4);opacity:0}80%{margin-top:-.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(.4);opacity:0}50%{margin-top:1.625em;transform:scale(.4);opacity:0}80%{margin-top:-.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@-webkit-keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0);opacity:1}}@-webkit-keyframes swal2-rotate-loading{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}@keyframes swal2-rotate-loading{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto!important}body.swal2-no-backdrop .swal2-container{top:auto;right:auto;bottom:auto;left:auto;max-width:calc(100% - .625em * 2);background-color:transparent!important}body.swal2-no-backdrop .swal2-container>.swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}body.swal2-no-backdrop .swal2-container.swal2-top{top:0;left:50%;transform:translateX(-50%)}body.swal2-no-backdrop .swal2-container.swal2-top-left,body.swal2-no-backdrop .swal2-container.swal2-top-start{top:0;left:0}body.swal2-no-backdrop .swal2-container.swal2-top-end,body.swal2-no-backdrop .swal2-container.swal2-top-right{top:0;right:0}body.swal2-no-backdrop .swal2-container.swal2-center{top:50%;left:50%;transform:translate(-50%,-50%)}body.swal2-no-backdrop .swal2-container.swal2-center-left,body.swal2-no-backdrop .swal2-container.swal2-center-start{top:50%;left:0;transform:translateY(-50%)}body.swal2-no-backdrop .swal2-container.swal2-center-end,body.swal2-no-backdrop .swal2-container.swal2-center-right{top:50%;right:0;transform:translateY(-50%)}body.swal2-no-backdrop .swal2-container.swal2-bottom{bottom:0;left:50%;transform:translateX(-50%)}body.swal2-no-backdrop .swal2-container.swal2-bottom-left,body.swal2-no-backdrop .swal2-container.swal2-bottom-start{bottom:0;left:0}body.swal2-no-backdrop .swal2-container.swal2-bottom-end,body.swal2-no-backdrop .swal2-container.swal2-bottom-right{right:0;bottom:0}@media print{body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow-y:scroll!important}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown) .swal2-container{position:static!important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:transparent}body.swal2-toast-shown .swal2-container.swal2-top{top:0;right:auto;bottom:auto;left:50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{top:0;right:0;bottom:auto;left:auto}body.swal2-toast-shown .swal2-container.swal2-top-left,body.swal2-toast-shown .swal2-container.swal2-top-start{top:0;right:auto;bottom:auto;left:0}body.swal2-toast-shown .swal2-container.swal2-center-left,body.swal2-toast-shown .swal2-container.swal2-center-start{top:50%;right:auto;bottom:auto;left:0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{top:50%;right:auto;bottom:auto;left:50%;transform:translate(-50%,-50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{top:50%;right:0;bottom:auto;left:auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-left,body.swal2-toast-shown .swal2-container.swal2-bottom-start{top:auto;right:auto;bottom:0;left:0}body.swal2-toast-shown .swal2-container.swal2-bottom{top:auto;right:auto;bottom:0;left:50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{top:auto;right:0;bottom:0;left:auto}')},9992:(t,e,n)=>{"use strict";var r=n(5366);let i=null;function o(){return i}const s=new r.OlP("DocumentToken");let a=(()=>{class t{historyGo(t){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=(0,r.Yz7)({factory:u,token:t,providedIn:"platform"}),t})();function u(){return(0,r.LFG)(l)}const c=new r.OlP("Location Initialized");let l=(()=>{class t extends a{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return o().getBaseHref(this._doc)}onPopState(t){const e=o().getGlobalEventTarget(this._doc,"window");return e.addEventListener("popstate",t,!1),()=>e.removeEventListener("popstate",t)}onHashChange(t){const e=o().getGlobalEventTarget(this._doc,"window");return e.addEventListener("hashchange",t,!1),()=>e.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){h()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){h()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(s))},t.\u0275prov=(0,r.Yz7)({factory:d,token:t,providedIn:"platform"}),t})();function h(){return!!window.history.pushState}function d(){return new l((0,r.LFG)(s))}function f(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function p(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function g(t){return t&&"?"!==t[0]?"?"+t:t}let m=(()=>{class t{historyGo(t){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=(0,r.Yz7)({factory:v,token:t,providedIn:"root"}),t})();function v(t){const e=(0,r.LFG)(s).location;return new _((0,r.LFG)(a),e&&e.origin||"")}const y=new r.OlP("appBaseHref");let _=(()=>{class t extends m{constructor(t,e){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return f(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+g(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformLocation).historyGo)||void 0===n||n.call(e,t)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(a),r.LFG(y,8))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),w=(()=>{class t extends m{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=e&&(this._baseHref=e)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=f(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformLocation).historyGo)||void 0===n||n.call(e,t)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(a),r.LFG(y,8))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),b=(()=>{class t{constructor(t,e){this._subject=new r.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=p(C(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+g(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,C(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformStrategy).historyGo)||void 0===n||n.call(e,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(m),r.LFG(a))},t.normalizeQueryParams=g,t.joinWithSlash=f,t.stripTrailingSlash=p,t.\u0275prov=(0,r.Yz7)({factory:T,token:t,providedIn:"root"}),t})();function T(){return new b((0,r.LFG)(m),(0,r.LFG)(a))}function C(t){return t.replace(/\/index.html$/,"")}var E=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({});const I=r.kL8;class S{}let k=(()=>{class t extends S{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(I(e||this.locale)(t)){case E.Zero:return"zero";case E.One:return"one";case E.Two:return"two";case E.Few:return"few";case E.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.soG))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class A{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let x=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;if(!this._differ&&e)try{this._differ=this._differs.find(e).create(this.ngForTrackBy)}catch(Fv){throw new Error(`Cannot find a differ supporting object '${e}' of type '${t=e,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new A(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new N(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const o=new N(t,i);e.push(o)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.s_b),r.Y36(r.Rgc),r.Y36(r.ZZ4))},t.\u0275dir=r.lG2({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class N{constructor(t,e){this.record=t,this.view=e}}let P=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new O,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){R("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){R("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.s_b),r.Y36(r.Rgc))},t.\u0275dir=r.lG2({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class O{constructor(){this.$implicit=null,this.ngIf=null}}function R(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${(0,r.AaK)(e)}'.`)}let D=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[{provide:S,useClass:k}]}),t})();function L(t){return"server"===t}let F=(()=>{class t{}return t.\u0275prov=(0,r.Yz7)({token:t,providedIn:"root",factory:()=>new M((0,r.LFG)(s),window)}),t})();class M{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&(t.body.createShadowRoot||t.body.attachShadow)){const n=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let r=n.currentNode;for(;r;){const t=r.shadowRoot;if(t){const n=t.getElementById(e)||t.querySelector(`[name="${e}"]`);if(n)return n}r=n.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),this.attemptFocus(e))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=U(this.window.history)||U(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(Fv){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(Fv){return!1}}}function U(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class q extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var t;t=new q,i||(i=t)}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=(V=V||document.querySelector("base"),V?V.getAttribute("href"):null);return null==e?null:function(t){j=j||document.createElement("a"),j.setAttribute("href",t);const e=j.pathname;return"/"===e.charAt(0)?e:`/${e}`}(e)}resetBaseElement(){V=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return function(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}(document.cookie,t)}}let j,V=null;const B=new r.OlP("TRANSITION_ID"),H=[{provide:r.ip1,useFactory:function(t,e,n){return()=>{n.get(r.CZH).donePromise.then(()=>{const n=o();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[B,s,r.zs3],multi:!0}];class z{static init(){(0,r.VLi)(new z)}addToWindow(t){r.dqk.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.dqk.getAllAngularTestabilities=()=>t.getAllTestabilities(),r.dqk.getAllAngularRootElements=()=>t.getAllRootElements(),r.dqk.frameworkStabilizers||(r.dqk.frameworkStabilizers=[]),r.dqk.frameworkStabilizers.push(t=>{const e=r.dqk.getAllAngularTestabilities();let n=e.length,i=!1;const o=function(e){i=i||e,n--,0==n&&t(i)};e.forEach(function(t){t.whenStable(o)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?o().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}let G=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const Z=new r.OlP("EventManagerPlugins");let K=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Z),r.LFG(r.R0b))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class W{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=o().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let Y=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),Q=(()=>{class t extends Y{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,e,n){t.forEach(t=>{const r=this._doc.createElement("style");r.textContent=t,n.push(e.appendChild(r))})}addHost(t){const e=[];this._addStylesToHost(this._stylesSet,t,e),this._hostNodes.set(t,e)}removeHost(t){const e=this._hostNodes.get(t);e&&e.forEach($),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((e,n)=>{this._addStylesToHost(t,n,e)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach($))}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(s))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();function $(t){o().remove(t)}const J={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},X=/%COMP%/g;function tt(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?tt(t,i,n):(i=i.replace(X,t),n.push(i))}return n}function et(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let nt=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new rt(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case r.ifc.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new it(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case 1:case r.ifc.ShadowDom:return new ot(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=tt(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(K),r.LFG(Q),r.LFG(r.AFp))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class rt{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(J[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=J[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=J[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&(r.JOm.DashCase|r.JOm.Important)?t.style.setProperty(e,n,i&r.JOm.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&r.JOm.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,et(n)):this.eventManager.addEventListener(t,e,et(n))}}class it extends rt{constructor(t,e,n,r){super(t),this.component=n;const i=tt(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(X,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(X,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class ot extends rt{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=tt(r.id,r.styles,[]);for(let o=0;o<i.length;o++){const t=document.createElement("style");t.textContent=i[o],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let st=(()=>{class t extends W{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(s))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const at=["alt","control","meta","shift"],ut={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ct={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},lt={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let ht=(()=>{class t extends W{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),s=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>o().onAndCancel(e,i.domEventName,s))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let o="";if(at.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&ct.hasOwnProperty(e)&&(e=ct[e]))}return ut[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),at.forEach(r=>{r!=n&&(0,lt[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(s))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const dt=(0,r.eFA)(r._c5,"browser",[{provide:r.Lbi,useValue:"browser"},{provide:r.g9A,useValue:function(){q.makeCurrent(),z.init()},multi:!0},{provide:s,useFactory:function(){return(0,r.RDi)(document),document},deps:[]}]),ft=[[],{provide:r.zSh,useValue:"root"},{provide:r.qLn,useFactory:function(){return new r.qLn},deps:[]},{provide:Z,useClass:st,multi:!0,deps:[s,r.R0b,r.Lbi]},{provide:Z,useClass:ht,multi:!0,deps:[s]},[],{provide:nt,useClass:nt,deps:[K,Q,r.AFp]},{provide:r.FYo,useExisting:nt},{provide:Y,useExisting:Q},{provide:Q,useClass:Q,deps:[s]},{provide:r.dDg,useClass:r.dDg,deps:[r.R0b]},{provide:K,useClass:K,deps:[Z,r.R0b]},{provide:class{},useClass:G,deps:[]},[]];let pt=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:r.AFp,useValue:e.appId},{provide:B,useExisting:r.AFp},H]}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(t,12))},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:ft,imports:[D,r.hGG]}),t})();"undefined"!=typeof window&&window;var gt=n(9764),mt=n(878),vt=n(5959),yt=n(3895);class _t extends vt.xQ{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new yt.N;return this._value}next(t){super.next(this._value=t)}}var wt=n(6163),bt=n(8470),Tt=n(6673);class Ct extends Tt.L{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class Et extends Tt.L{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var It=n(6015),St=n(8318);function kt(t,e,n,r,i=new Et(t,n,r)){if(!i.closed)return e instanceof St.y?e.subscribe(i):(0,It.s)(e)(i)}var At=n(9342);const xt={};class Nt{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new Pt(t,this.resultSelector))}}class Pt extends Ct{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(xt),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++)this.add(kt(this,t[n],void 0,n))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n){const r=this.values,i=this.toRespond?r[n]===xt?--this.toRespond:this.toRespond:0;r[n]=e,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}const Ot=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})();var Rt=n(7471);function Dt(...t){return(0,Rt.J)(1)((0,mt.of)(...t))}var Lt=n(653);function Ft(t){return new St.y(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?(0,gt.D)(n):(0,Lt.c)()).subscribe(e)})}var Mt=n(2875),Ut=n(9996),qt=n(6882);function jt(t,e){return"function"==typeof e?n=>n.pipe(jt((n,r)=>(0,gt.D)(t(n,r)).pipe((0,Ut.U)((t,i)=>e(n,t,r,i))))):e=>e.lift(new Vt(t))}class Vt{constructor(t){this.project=t}call(t,e){return e.subscribe(new Bt(t,this.project))}}class Bt extends qt.Ds{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new qt.IY(this),r=this.destination;r.add(n),this.innerSubscription=(0,qt.ft)(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}const Ht=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();function zt(t){return e=>0===t?(0,Lt.c)():e.lift(new Gt(t))}class Gt{constructor(t){if(this.total=t,this.total<0)throw new Ht}call(t,e){return e.subscribe(new Zt(t,this.total))}}class Zt extends Tt.L{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function Kt(...t){const e=t[t.length-1];return(0,wt.K)(e)?(t.pop(),n=>Dt(t,n,e)):e=>Dt(t,e)}function Wt(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new Yt(t,e,n))}}class Yt{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new Qt(t,this.accumulator,this.seed,this.hasSeed))}}class Qt extends Tt.L{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function $t(t,e){return function(n){return n.lift(new Jt(t,e))}}class Jt{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new Xt(t,this.predicate,this.thisArg))}}class Xt extends Tt.L{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}function te(t){return function(e){const n=new ee(t),r=e.lift(n);return n.caught=r}}class ee{constructor(t){this.selector=t}call(t,e){return e.subscribe(new ne(t,this.selector,this.caught))}}class ne extends qt.Ds{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new qt.IY(this);this.add(r);const i=(0,qt.ft)(n,r);i!==r&&this.add(i)}}}var re=n(3982);function ie(t,e){return(0,re.zg)(t,e,1)}function oe(t){return function(e){return 0===t?(0,Lt.c)():e.lift(new se(t))}}class se{constructor(t){if(this.total=t,this.total<0)throw new Ht}call(t,e){return e.subscribe(new ae(t,this.total))}}class ae extends Tt.L{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}function ue(t=he){return e=>e.lift(new ce(t))}class ce{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new le(t,this.errorFactory))}}class le extends Tt.L{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(Yy){t=Yy}this.destination.error(t)}}}function he(){return new Ot}function de(t=null){return e=>e.lift(new fe(t))}class fe{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new pe(t,this.defaultValue))}}class pe extends Tt.L{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var ge=n(3392);function me(t,e){const n=arguments.length>=2;return r=>r.pipe(t?$t((e,n)=>t(e,n,r)):ge.y,zt(1),n?de(e):ue(()=>new Ot))}var ve=n(6599),ye=n(1564),_e=n(7570);class we{constructor(t){this.callback=t}call(t,e){return e.subscribe(new be(t,this.callback))}}class be extends Tt.L{constructor(t,e){super(t),this.add(new _e.w(e))}}class Te{constructor(t,e){this.id=t,this.url=e}}class Ce extends Te{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ee extends Te{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Ie extends Te{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Se extends Te{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ke extends Te{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ae extends Te{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xe extends Te{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ne extends Te{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Pe extends Te{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Oe{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Re{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class De{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Le{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Fe{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Me{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ue{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const qe="primary";class je{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Ve(t){return new je(t)}function Be(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function He(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const e=r[o],n=t[o];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function ze(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!Ge(t[i],e[i]))return!1;return!0}function Ge(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((t,e)=>r[e]===t)}return t===e}function Ze(t){return Array.prototype.concat.apply([],t)}function Ke(t){return t.length>0?t[t.length-1]:null}function We(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function Ye(t){return(0,r.CqO)(t)?t:(0,r.QGY)(t)?(0,gt.D)(Promise.resolve(t)):(0,mt.of)(t)}const Qe={exact:function t(e,n,r){if(!sn(e.segments,n.segments))return!1;if(!en(e.segments,n.segments,r))return!1;if(e.numberOfChildren!==n.numberOfChildren)return!1;for(const i in n.children){if(!e.children[i])return!1;if(!t(e.children[i],n.children[i],r))return!1}return!0},subset:Xe},$e={exact:function(t,e){return ze(t,e)},subset:function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>Ge(t[n],e[n]))},ignored:()=>!0};function Je(t,e,n){return Qe[n.paths](t.root,e.root,n.matrixParams)&&$e[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function Xe(t,e,n){return tn(t,e,e.segments,n)}function tn(t,e,n,r){if(t.segments.length>n.length){const i=t.segments.slice(0,n.length);return!!sn(i,n)&&!e.hasChildren()&&!!en(i,n,r)}if(t.segments.length===n.length){if(!sn(t.segments,n))return!1;if(!en(t.segments,n,r))return!1;for(const n in e.children){if(!t.children[n])return!1;if(!Xe(t.children[n],e.children[n],r))return!1}return!0}{const i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!!sn(t.segments,i)&&!!en(t.segments,i,r)&&!!t.children.primary&&tn(t.children.primary,e,o,r)}}function en(t,e,n){return e.every((e,r)=>$e[n](t[r].parameters,e.parameters))}class nn{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ve(this.queryParams)),this._queryParamMap}toString(){return cn.serialize(this)}}class rn{constructor(t,e){this.segments=t,this.children=e,this.parent=null,We(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ln(this)}}class on{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Ve(this.parameters)),this._parameterMap}toString(){return vn(this)}}function sn(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}class an{}class un{parse(t){const e=new Tn(t);return new nn(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var e;return`/${hn(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${fn(e)}=${fn(t)}`).join("&"):`${fn(e)}=${fn(n)}`});return e.length?`?${e.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${e=t.fragment,encodeURI(e)}`:""}`}}const cn=new un;function ln(t){return t.segments.map(t=>vn(t)).join("/")}function hn(t,e){if(!t.hasChildren())return ln(t);if(e){const e=t.children.primary?hn(t.children.primary,!1):"",n=[];return We(t.children,(t,e)=>{e!==qe&&n.push(`${e}:${hn(t,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function(t,e){let n=[];return We(t.children,(t,r)=>{r===qe&&(n=n.concat(e(t,r)))}),We(t.children,(t,r)=>{r!==qe&&(n=n.concat(e(t,r)))}),n}(t,(e,n)=>n===qe?[hn(t.children.primary,!1)]:[`${n}:${hn(e,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children.primary?`${ln(t)}/${e[0]}`:`${ln(t)}/(${e.join("//")})`}}function dn(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function fn(t){return dn(t).replace(/%3B/gi,";")}function pn(t){return dn(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function gn(t){return decodeURIComponent(t)}function mn(t){return gn(t.replace(/\+/g,"%20"))}function vn(t){return`${pn(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${pn(t)}=${pn(e[t])}`).join("")}`;var e}const yn=/^[^\/()?;=#]+/;function _n(t){const e=t.match(yn);return e?e[0]:""}const wn=/^[^=?&#]+/,bn=/^[^?&#]+/;class Tn{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new rn([],{}):new rn([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new rn(t,e)),n}parseSegment(){const t=_n(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new on(gn(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=_n(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=_n(this.remaining);t&&(n=t,this.capture(n))}t[gn(e)]=gn(n)}parseQueryParam(t){const e=function(t){const e=t.match(wn);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(bn);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=mn(e),i=mn(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=_n(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=qe);const o=this.parseChildren();e[i]=1===Object.keys(o).length?o.primary:new rn([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class Cn{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=En(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=En(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=In(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return In(t,this._root).map(t=>t.value)}}function En(t,e){if(t===e.value)return e;for(const n of e.children){const e=En(t,n);if(e)return e}return null}function In(t,e){if(t===e.value)return[e];for(const n of e.children){const r=In(t,n);if(r.length)return r.unshift(e),r}return[]}class Sn{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function kn(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class An extends Cn{constructor(t,e){super(t),this.snapshot=e,Dn(this,t)}toString(){return this.snapshot.toString()}}function xn(t,e){const n=function(t,e){const n=new On([],{},{},"",{},qe,e,null,t.root,-1,{});return new Rn("",new Sn(n,[]))}(t,e),r=new _t([new on("",{})]),i=new _t({}),o=new _t({}),s=new _t({}),a=new _t(""),u=new Nn(r,i,s,a,o,qe,e,n.root);return u.snapshot=n.root,new An(new Sn(u,[]),n)}class Nn{constructor(t,e,n,r,i,o,s,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Ut.U)(t=>Ve(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Ut.U)(t=>Ve(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Pn(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class On{constructor(t,e,n,r,i,o,s,a,u,c,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ve(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ve(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Rn extends Cn{constructor(t,e){super(e),this.url=t,Dn(this,e)}toString(){return Ln(this._root)}}function Dn(t,e){e.value._routerState=t,e.children.forEach(e=>Dn(t,e))}function Ln(t){const e=t.children.length>0?` { ${t.children.map(Ln).join(", ")} } `:"";return`${t.value}${e}`}function Fn(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,ze(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),ze(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!ze(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),ze(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function Mn(t,e){return ze(t.params,e.params)&&function(t,e){return sn(t,e)&&t.every((t,n)=>ze(t.parameters,e[n].parameters))}(t.url,e.url)&&!(!t.parent!=!e.parent)&&(!t.parent||Mn(t.parent,e.parent))}function Un(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function(t,e,n){return e.children.map(e=>{for(const r of n.children)if(t.shouldReuseRoute(e.value,r.value.snapshot))return Un(t,e,r);return Un(t,e)})}(t,e,n);return new Sn(r,i)}{if(t.shouldAttach(e.value)){const n=t.retrieve(e.value);if(null!==n){const t=n.route;return qn(e,t),t}}const n=new Nn(new _t((r=e.value).url),new _t(r.params),new _t(r.queryParams),new _t(r.fragment),new _t(r.data),r.outlet,r.component,r),i=e.children.map(e=>Un(t,e));return new Sn(n,i)}var r}function qn(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(let n=0;n<t.children.length;++n)qn(t.children[n],e.children[n])}function jn(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Vn(t){return"object"==typeof t&&null!=t&&t.outlets}function Bn(t,e,n,r,i){let o={};return r&&We(r,(t,e)=>{o[e]=Array.isArray(t)?t.map(t=>`${t}`):`${t}`}),new nn(n.root===t?e:Hn(n.root,t,e),o,i)}function Hn(t,e,n){const r={};return We(t.children,(t,i)=>{r[i]=t===e?n:Hn(t,e,n)}),new rn(t.segments,r)}class zn{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&jn(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(Vn);if(r&&r!==Ke(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Gn{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function Zn(t,e,n){if(t||(t=new rn([],{})),0===t.segments.length&&t.hasChildren())return Kn(t,e,n);const r=function(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const e=t.segments[i],s=n[r];if(Vn(s))break;const a=`${s}`,u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&u&&"object"==typeof u&&void 0===u.outlets){if(!$n(a,u,e))return o;r+=2}else{if(!$n(a,{},e))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new rn(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new rn(t.segments.slice(r.pathIndex),t.children),Kn(e,0,i)}return r.match&&0===i.length?new rn(t.segments,{}):r.match&&!t.hasChildren()?Wn(t,e,n):r.match?Kn(t,0,i):Wn(t,e,n)}function Kn(t,e,n){if(0===n.length)return new rn(t.segments,{});{const r=function(t){return Vn(t[0])?t[0].outlets:{[qe]:t}}(n),i={};return We(r,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(i[r]=Zn(t.children[r],e,n))}),We(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new rn(t.segments,i)}}function Wn(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const o=n[i];if(Vn(o)){const t=Yn(o.outlets);return new rn(r,t)}if(0===i&&jn(n[0])){r.push(new on(t.segments[e].path,Qn(n[0]))),i++;continue}const s=Vn(o)?o.outlets.primary:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&jn(a)?(r.push(new on(s,Qn(a))),i+=2):(r.push(new on(s,{})),i++)}return new rn(r,{})}function Yn(t){const e={};return We(t,(t,n)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[n]=Wn(new rn([],{}),0,t))}),e}function Qn(t){const e={};return We(t,(t,n)=>e[n]=`${t}`),e}function $n(t,e,n){return t==n.path&&ze(e,n.parameters)}class Jn{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),Fn(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=kn(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),We(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,i=kn(t);for(const o of Object.keys(i))this.deactivateRouteAndItsChildren(i[o],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(t,e,n){const r=kn(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new Me(t.value.snapshot))}),t.children.length&&this.forwardEvent(new Le(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(Fn(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),Xn(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function Xn(t){Fn(t.value),t.children.forEach(Xn)}class tr{constructor(t,e){this.routes=t,this.module=e}}function er(t){return"function"==typeof t}function nr(t){return t instanceof nn}const rr=Symbol("INITIAL_VALUE");function ir(){return jt(t=>function(...t){let e,n;return(0,wt.K)(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&(0,bt.k)(t[0])&&(t=t[0]),(0,At.n)(t,n).lift(new Nt(e))}(t.map(t=>t.pipe(zt(1),Kt(rr)))).pipe(Wt((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==rr)return t;if(r===rr&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||nr(r))return r}return t},t)},rr),$t(t=>t!==rr),(0,Ut.U)(t=>nr(t)?t:!0===t),zt(1)))}let or=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&r._UZ(0,"router-outlet")},directives:function(){return[ni]},encapsulation:2}),t})();function sr(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];ar(r,ur(e,r))}}function ar(t,e){t.children&&sr(t.children,e)}function ur(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function cr(t){const e=t.children&&t.children.map(cr),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==qe&&(n.component=or),n}function lr(t){return t.outlet||qe}function hr(t,e){const n=t.filter(t=>lr(t)===e);return n.push(...t.filter(t=>lr(t)!==e)),n}const dr={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function fr(t,e,n){var r;if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?Object.assign({},dr):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(e.matcher||He)(n,t,e);if(!i)return Object.assign({},dr);const o={};We(i.posParams,(t,e)=>{o[e]=t.path});const s=i.consumed.length>0?Object.assign(Object.assign({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:s,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function pr(t,e,n,r,i="corrected"){if(n.length>0&&function(t,e,n){return n.some(n=>gr(t,e,n)&&lr(n)!==qe)}(t,n,r)){const i=new rn(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const o of n)if(""===o.path&&lr(o)!==qe){const n=new rn([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[lr(o)]=n}return i}(t,e,r,new rn(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>gr(t,e,n))}(t,n,r)){const o=new rn(t.segments,function(t,e,n,r,i,o){const s={};for(const a of r)if(gr(t,n,a)&&!i[lr(a)]){const n=new rn([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===o?t.segments.length:e.length,s[lr(a)]=n}return Object.assign(Object.assign({},i),s)}(t,e,n,r,t.children,i));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}const o=new rn(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}function gr(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function mr(t,e,n,r){return!!(lr(t)===r||r!==qe&&gr(e,n,t))&&("**"===t.path||fr(e,t,n).matched)}function vr(t,e,n){return 0===e.length&&!t.children[n]}class yr{constructor(t){this.segmentGroup=t||null}}class _r{constructor(t){this.urlTree=t}}function wr(t){return new St.y(e=>e.error(new yr(t)))}function br(t){return new St.y(e=>e.error(new _r(t)))}function Tr(t){return new St.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class Cr{constructor(t,e,n,i,o){this.configLoader=e,this.urlSerializer=n,this.urlTree=i,this.config=o,this.allowRedirects=!0,this.ngModule=t.get(r.h0i)}apply(){const t=pr(this.urlTree.root,[],[],this.config).segmentGroup,e=new rn(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,qe).pipe((0,Ut.U)(t=>this.createUrlTree(Er(t),this.urlTree.queryParams,this.urlTree.fragment))).pipe(te(t=>{if(t instanceof _r)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof yr)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,qe).pipe((0,Ut.U)(e=>this.createUrlTree(Er(e),t.queryParams,t.fragment))).pipe(te(t=>{if(t instanceof yr)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new rn([],{[qe]:t}):t;return new nn(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe((0,Ut.U)(t=>new rn([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){const r=[];for(const i of Object.keys(n.children))"primary"===i?r.unshift(i):r.push(i);return(0,gt.D)(r).pipe(ie(r=>{const i=n.children[r],o=hr(e,r);return this.expandSegmentGroup(t,o,i,r).pipe((0,Ut.U)(t=>({segment:t,outlet:r})))}),Wt((t,e)=>(t[e.outlet]=e.segment,t),{}),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?$t((e,n)=>t(e,n,r)):ge.y,oe(1),n?de(e):ue(()=>new Ot))}())}expandSegment(t,e,n,r,i,o){return(0,gt.D)(n).pipe(ie(s=>this.expandSegmentAgainstRoute(t,e,n,s,r,i,o).pipe(te(t=>{if(t instanceof yr)return(0,mt.of)(null);throw t}))),me(t=>!!t),te((t,n)=>{if(t instanceof Ot||"EmptyError"===t.name){if(vr(e,r,i))return(0,mt.of)(new rn([],{}));throw new yr(e)}throw t}))}expandSegmentAgainstRoute(t,e,n,r,i,o,s){return mr(r,e,i,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i,o):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):wr(e):wr(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?br(i):this.lineralizeSegments(n,i).pipe((0,re.zg)(n=>{const i=new rn(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){const{matched:s,consumedSegments:a,lastChild:u,positionalParamSegments:c}=fr(e,r,i);if(!s)return wr(e);const l=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith("/")?br(l):this.lineralizeSegments(r,l).pipe((0,re.zg)(r=>this.expandSegment(t,e,n,r.concat(i.slice(u)),o,!1)))}matchSegmentAgainstRoute(t,e,n,r,i){if("**"===n.path)return n.loadChildren?(n._loadedConfig?(0,mt.of)(n._loadedConfig):this.configLoader.load(t.injector,n)).pipe((0,Ut.U)(t=>(n._loadedConfig=t,new rn(r,{})))):(0,mt.of)(new rn(r,{}));const{matched:o,consumedSegments:s,lastChild:a}=fr(e,n,r);if(!o)return wr(e);const u=r.slice(a);return this.getChildConfig(t,n,r).pipe((0,re.zg)(t=>{const r=t.module,o=t.routes,{segmentGroup:a,slicedSegments:c}=pr(e,s,u,o),l=new rn(a.segments,a.children);if(0===c.length&&l.hasChildren())return this.expandChildren(r,o,l).pipe((0,Ut.U)(t=>new rn(s,t)));if(0===o.length&&0===c.length)return(0,mt.of)(new rn(s,{}));const h=lr(n)===i;return this.expandSegment(r,l,o,c,h?qe:i,!0).pipe((0,Ut.U)(t=>new rn(s.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?(0,mt.of)(new tr(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?(0,mt.of)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe((0,re.zg)(n=>n?this.configLoader.load(t.injector,e).pipe((0,Ut.U)(t=>(e._loadedConfig=t,t))):function(t){return new St.y(e=>e.error(Be(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):(0,mt.of)(new tr([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;if(!r||0===r.length)return(0,mt.of)(!0);const i=r.map(r=>{const i=t.get(r);let o;if(function(t){return t&&er(t.canLoad)}(i))o=i.canLoad(e,n);else{if(!er(i))throw new Error("Invalid CanLoad guard");o=i(e,n)}return Ye(o)});return(0,mt.of)(i).pipe(ir(),(0,ve.b)(t=>{if(!nr(t))return;const e=Be(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),(0,Ut.U)(t=>!0===t))}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return(0,mt.of)(n);if(r.numberOfChildren>1||!r.children.primary)return Tr(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new nn(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return We(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let o={};return We(e.children,(e,i)=>{o[i]=this.createSegmentGroup(t,e,n,r)}),new rn(i,o)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function Er(t){const e={};for(const n of Object.keys(t.children)){const r=Er(t.children[n]);(r.segments.length>0||r.hasChildren())&&(e[n]=r)}return function(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new rn(t.segments.concat(e.segments),e.children)}return t}(new rn(t.segments,e))}class Ir{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class Sr{constructor(t,e){this.component=t,this.route=e}}function kr(t,e,n){const r=t._root;return xr(r,e?e._root:null,n,[r.value])}function Ar(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function xr(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=kn(e);return t.children.forEach(t=>{!function(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const u=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!sn(t.url,e.url);case"pathParamsOrQueryParamsChange":return!sn(t.url,e.url)||!ze(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Mn(t,e)||!ze(t.queryParams,e.queryParams);case"paramsChange":default:return!Mn(t,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Ir(r)):(o.data=s.data,o._resolvedData=s._resolvedData),xr(t,e,o.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Sr(a.outlet.component,s))}else s&&Nr(e,a,i),i.canActivateChecks.push(new Ir(r)),xr(t,null,o.component?a?a.children:null:n,r,i)}(t,o[t.value.outlet],n,r.concat([t.value]),i),delete o[t.value.outlet]}),We(o,(t,e)=>Nr(t,n.getContext(e),i)),i}function Nr(t,e,n){const r=kn(t),i=t.value;We(r,(t,r)=>{Nr(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new Sr(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class Pr{}function Or(t){return new St.y(e=>e.error(t))}class Rr{constructor(t,e,n,r,i,o){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}recognize(){const t=pr(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,qe);if(null===e)return null;const n=new On([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},qe,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Sn(n,e),i=new Rn(this.url,r);return this.inheritParamsAndData(i._root),i}inheritParamsAndData(t){const e=t.value,n=Pn(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=[];for(const i of Object.keys(e.children)){const r=e.children[i],o=hr(t,i),s=this.processSegmentGroup(o,r,i);if(null===s)return null;n.push(...s)}const r=Lr(n);return r.sort((t,e)=>t.value.outlet===qe?-1:e.value.outlet===qe?1:t.value.outlet.localeCompare(e.value.outlet)),r}processSegment(t,e,n,r){for(const i of t){const t=this.processSegmentAgainstRoute(i,e,n,r);if(null!==t)return t}return vr(e,n,r)?[]:null}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo||!mr(t,e,n,r))return null;let i,o=[],s=[];if("**"===t.path){const r=n.length>0?Ke(n).parameters:{};i=new On(n,r,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Ur(t),lr(t),t.component,t,Fr(e),Mr(e)+n.length,qr(t))}else{const r=fr(e,t,n);if(!r.matched)return null;o=r.consumedSegments,s=n.slice(r.lastChild),i=new On(o,r.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Ur(t),lr(t),t.component,t,Fr(e),Mr(e)+o.length,qr(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:u,slicedSegments:c}=pr(e,o,s,a.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution);if(0===c.length&&u.hasChildren()){const t=this.processChildren(a,u);return null===t?null:[new Sn(i,t)]}if(0===a.length&&0===c.length)return[new Sn(i,[])];const l=lr(t)===r,h=this.processSegment(a,u,c,l?qe:r);return null===h?null:[new Sn(i,h)]}}function Dr(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Lr(t){const e=[],n=new Set;for(const r of t){if(!Dr(r)){e.push(r);continue}const t=e.find(t=>r.value.routeConfig===t.value.routeConfig);void 0!==t?(t.children.push(...r.children),n.add(t)):e.push(r)}for(const r of n){const t=Lr(r.children);e.push(new Sn(r.value,t))}return e.filter(t=>!n.has(t))}function Fr(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Mr(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function Ur(t){return t.data||{}}function qr(t){return t.resolve||{}}function jr(t){return jt(e=>{const n=t(e);return n?(0,gt.D)(n).pipe((0,Ut.U)(()=>e)):(0,mt.of)(e)})}class Vr extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const Br=new r.OlP("ROUTES");class Hr{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const n=this.loadModuleFactory(e.loadChildren).pipe((0,Ut.U)(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const i=n.create(t);return new tr(Ze(i.injector.get(Br,void 0,r.XFs.Self|r.XFs.Optional)).map(cr),i)}),te(t=>{throw e._loader$=void 0,t}));return e._loader$=new Mt.c(n,()=>new vt.xQ).pipe((0,ye.x)()),e._loader$}loadModuleFactory(t){return"string"==typeof t?(0,gt.D)(this.loader.load(t)):Ye(t()).pipe((0,re.zg)(t=>t instanceof r.YKP?(0,mt.of)(t):(0,gt.D)(this.compiler.compileModuleAsync(t))))}}class zr{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Gr,this.attachRef=null}}class Gr{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new zr,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class Zr{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function Kr(t){throw t}function Wr(t,e,n){return e.parse("/")}function Yr(t,e){return(0,mt.of)(null)}const Qr={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},$r={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Jr=(()=>{class t{constructor(t,e,n,i,o,s,a,u){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=i,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new vt.xQ,this.errorHandler=Kr,this.malformedUriErrorHandler=Wr,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Yr,afterPreactivation:Yr},this.urlHandlingStrategy=new Zr,this.routeReuseStrategy=new Vr,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.ngModule=o.get(r.h0i),this.console=o.get(r.c2e);const c=o.get(r.R0b);this.isNgZoneEnabled=c instanceof r.R0b&&r.R0b.isInAngularZone(),this.resetConfig(u),this.currentUrlTree=new nn(new rn([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Hr(s,a,t=>this.triggerEvent(new Oe(t)),t=>this.triggerEvent(new Re(t))),this.routerState=xn(this.currentUrlTree,this.rootComponentType),this.transitions=new _t({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe($t(t=>0!==t.id),(0,Ut.U)(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),jt(t=>{let n=!1,r=!1;return(0,mt.of)(t).pipe((0,ve.b)(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),jt(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return(0,mt.of)(t).pipe(jt(t=>{const n=this.transitions.getValue();return e.next(new Ce(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?Lt.E:Promise.resolve(t)}),(r=this.ngModule.injector,i=this.configLoader,o=this.urlSerializer,s=this.config,jt(t=>function(t,e,n,r,i){return new Cr(t,e,n,r,i).apply()}(r,i,o,t.extractedUrl,s).pipe((0,Ut.U)(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e}))))),(0,ve.b)(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return(0,re.zg)(o=>function(t,e,n,r,i="emptyOnly",o="legacy"){try{const s=new Rr(t,e,n,r,i,o).recognize();return null===s?Or(new Pr):(0,mt.of)(s)}catch(Yy){return Or(Yy)}}(t,e,o.urlAfterRedirects,n(o.urlAfterRedirects),r,i).pipe((0,Ut.U)(t=>Object.assign(Object.assign({},o),{targetSnapshot:t}))))}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,ve.b)(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects);const n=new ke(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var r,i,o,s;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:o,extras:s}=t,a=new Ce(n,this.serializeUrl(r),i,o);e.next(a);const u=xn(r,this.rootComponentType).snapshot;return(0,mt.of)(Object.assign(Object.assign({},t),{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign(Object.assign({},s),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),Lt.E}),jr(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),(0,ve.b)(t=>{const e=new Ae(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),(0,Ut.U)(t=>Object.assign(Object.assign({},t),{guards:kr(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return(0,re.zg)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?(0,mt.of)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return(0,gt.D)(t).pipe((0,re.zg)(t=>function(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||0===o.length)return(0,mt.of)(!0);const s=o.map(o=>{const s=Ar(o,e,i);let a;if(function(t){return t&&er(t.canDeactivate)}(s))a=Ye(s.canDeactivate(t,e,n,r));else{if(!er(s))throw new Error("Invalid CanDeactivate guard");a=Ye(s(t,e,n,r))}return a.pipe(me())});return(0,mt.of)(s).pipe(ir())}(t.component,t.route,n,e,r)),me(t=>!0!==t,!0))}(s,r,i,t).pipe((0,re.zg)(n=>n&&function(t){return"boolean"==typeof t}(n)?function(t,e,n,r){return(0,gt.D)(e).pipe(ie(e=>Dt(function(t,e){return null!==t&&e&&e(new De(t)),(0,mt.of)(!0)}(e.route.parent,r),function(t,e){return null!==t&&e&&e(new Fe(t)),(0,mt.of)(!0)}(e.route,r),function(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>Ft(()=>{const i=e.guards.map(i=>{const o=Ar(i,e.node,n);let s;if(function(t){return t&&er(t.canActivateChild)}(o))s=Ye(o.canActivateChild(r,t));else{if(!er(o))throw new Error("Invalid CanActivateChild guard");s=Ye(o(r,t))}return s.pipe(me())});return(0,mt.of)(i).pipe(ir())}));return(0,mt.of)(i).pipe(ir())}(t,e.path,n),function(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,mt.of)(!0);const i=r.map(r=>Ft(()=>{const i=Ar(r,e,n);let o;if(function(t){return t&&er(t.canActivate)}(i))o=Ye(i.canActivate(e,t));else{if(!er(i))throw new Error("Invalid CanActivate guard");o=Ye(i(e,t))}return o.pipe(me())}));return(0,mt.of)(i).pipe(ir())}(t,e.route,n))),me(t=>!0!==t,!0))}(r,o,t,e):(0,mt.of)(n)),(0,Ut.U)(t=>Object.assign(Object.assign({},n),{guardsResult:t})))})}(this.ngModule.injector,t=>this.triggerEvent(t)),(0,ve.b)(t=>{if(nr(t.guardsResult)){const e=Be(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}const e=new xe(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),$t(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const n=new Ie(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(n),t.resolve(!1),!1}return!0}),jr(t=>{if(t.guards.canActivateChecks.length)return(0,mt.of)(t).pipe((0,ve.b)(t=>{const e=new Ne(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),jt(t=>{let n=!1;return(0,mt.of)(t).pipe((r=this.paramsInheritanceStrategy,i=this.ngModule.injector,(0,re.zg)(t=>{const{targetSnapshot:e,guards:{canActivateChecks:n}}=t;if(!n.length)return(0,mt.of)(t);let o=0;return(0,gt.D)(n).pipe(ie(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return(0,mt.of)({});const o={};return(0,gt.D)(i).pipe((0,re.zg)(i=>function(t,e,n,r){const i=Ar(t,e,r);return Ye(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe((0,ve.b)(t=>{o[i]=t}))),oe(1),(0,re.zg)(()=>Object.keys(o).length===i.length?(0,mt.of)(o):Lt.E))}(t._resolve,t,e,r).pipe((0,Ut.U)(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),Pn(t,n).resolve),null)))}(t.route,e,r,i)),(0,ve.b)(()=>o++),oe(1),(0,re.zg)(e=>o===n.length?(0,mt.of)(t):Lt.E))})),(0,ve.b)({next:()=>n=!0,complete:()=>{if(!n){const n=new Ie(t.id,this.serializeUrl(t.extractedUrl),"At least one route resolver didn't emit any value.");e.next(n),t.resolve(!1)}}}));var r,i}),(0,ve.b)(t=>{const e=new Pe(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),jr(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),(0,Ut.U)(t=>{const e=function(t,e,n){const r=Un(t,e._root,n?n._root:void 0);return new An(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),(0,ve.b)(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),(o=this.rootContexts,s=this.routeReuseStrategy,a=t=>this.triggerEvent(t),(0,Ut.U)(t=>(new Jn(s,t.targetRouterState,t.currentRouterState,a).activate(o),t))),(0,ve.b)({next(){n=!0},complete(){n=!0}}),(i=()=>{if(!n&&!r){this.resetUrlToCurrentUrlTree();const n=new Ie(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(n),t.resolve(!1)}this.currentNavigation=null},t=>t.lift(new we(i))),te(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=nr(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new Ie(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new Se(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(gl){t.reject(gl)}}var i;return Lt.E}));var i,o,s,a}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const e=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,e)&&setTimeout(()=>{const{source:t,state:n,urlTree:r}=e,i={replaceUrl:!0};if(n){const t=Object.assign({},n);delete t.navigationId,0!==Object.keys(t).length&&(i.state=t)}this.scheduleNavigation(r,t,n,i)},0),this.lastLocationChangeInfo=e}))}extractLocationChangeInfoFromEvent(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,e){if(!t)return!0;const n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){sr(t),this.config=t.map(cr),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,e={}){const{relativeTo:n,queryParams:r,fragment:i,queryParamsHandling:o,preserveFragment:s}=e,a=n||this.routerState.root,u=s?this.currentUrlTree.fragment:i;let c=null;switch(o){case"merge":c=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=r||null}return null!==c&&(c=this.removeEmptyProps(c)),function(t,e,n,r,i){if(0===n.length)return Bn(e.root,e.root,e,r,i);const o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new zn(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return We(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new zn(n,e,r)}(n);if(o.toRoot())return Bn(e.root,new rn([],{}),e,r,i);const s=function(t,e,n){if(t.isAbsolute)return new Gn(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new Gn(t,t===e.root,0)}const r=jn(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new Gn(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(o,e,t),a=s.processChildren?Kn(s.segmentGroup,s.index,o.commands):Zn(s.segmentGroup,s.index,o.commands);return Bn(s.segmentGroup,a,e,r,i)}(a,this.currentUrlTree,t,c,null!=u?u:null)}navigateByUrl(t,e={skipLocationChange:!1}){const n=nr(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(Yy){e=this.malformedUriErrorHandler(Yy,this.urlSerializer,t)}return e}isActive(t,e){let n;if(n=!0===e?Object.assign({},Qr):!1===e?Object.assign({},$r):e,nr(t))return Je(this.currentUrlTree,t,n);const r=this.parseUrl(t);return Je(this.currentUrlTree,r,n)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new Ee(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){if(this.disposed)return Promise.resolve(!1);const o=this.getTransition(),s="imperative"!==e&&"imperative"===(null==o?void 0:o.source),a=(this.lastSuccessfulId===o.id||this.currentNavigation?o.rawUrl:o.urlAfterRedirects).toString()===t.toString();if(s&&a)return Promise.resolve(!0);let u,c,l;i?(u=i.resolve,c=i.reject,l=i.promise):l=new Promise((t,e)=>{u=t,c=e});const h=++this.navigationId;return this.setTransition({id:h,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:u,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,n,r){const i=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(i)||e?this.location.replaceState(i,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(i,"",Object.assign(Object.assign({},r),{navigationId:n}))}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.DyG),r.LFG(an),r.LFG(Gr),r.LFG(b),r.LFG(r.zs3),r.LFG(r.v3s),r.LFG(r.Sil),r.LFG(void 0))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),Xr=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.route=e,this.commands=[],this.onChanges=new vt.xQ,null==n&&r.setAttribute(i.nativeElement,"tabindex","0")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}onClick(){const t={skipLocationChange:ei(this.skipLocationChange),replaceUrl:ei(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:ei(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Jr),r.Y36(Nn),r.$8M("tabindex"),r.Y36(r.Qsj),r.Y36(r.SBq))},t.\u0275dir=r.lG2({type:t,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,e){1&t&&r.NdJ("click",function(){return e.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[r.TTD]}),t})(),ti=(()=>{class t{constructor(t,e,n){this.router=t,this.route=e,this.locationStrategy=n,this.commands=[],this.onChanges=new vt.xQ,this.subscription=t.events.subscribe(t=>{t instanceof Ee&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,e,n,r,i){if(0!==t||e||n||r||i)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;const o={skipLocationChange:ei(this.skipLocationChange),replaceUrl:ei(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,o),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:ei(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Jr),r.Y36(Nn),r.Y36(m))},t.\u0275dir=r.lG2({type:t,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,e){1&t&&r.NdJ("click",function(t){return e.onClick(t.button,t.ctrlKey,t.shiftKey,t.altKey,t.metaKey)}),2&t&&(r.Ikx("href",e.href,r.LSH),r.uIk("target",e.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[r.TTD]}),t})();function ei(t){return""===t||!!t}let ni=(()=>{class t{constructor(t,e,n,i,o){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new r.vpe,this.deactivateEvents=new r.vpe,this.name=i||qe,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new ri(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Gr),r.Y36(r.s_b),r.Y36(r._Vd),r.$8M("name"),r.Y36(r.sBO))},t.\u0275dir=r.lG2({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class ri{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===Nn?this.route:t===Gr?this.childContexts:this.parent.get(t,e)}}class ii{}class oi{preload(t,e){return(0,mt.of)(null)}}let si=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new Hr(e,n,e=>t.triggerEvent(new Oe(e)),e=>t.triggerEvent(new Re(e)))}setUpPreloading(){this.subscription=this.router.events.pipe($t(t=>t instanceof Ee),ie(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(r.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return(0,gt.D)(n).pipe((0,Rt.J)(),(0,Ut.U)(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>(e._loadedConfig?(0,mt.of)(e._loadedConfig):this.loader.load(t.injector,e)).pipe((0,re.zg)(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Jr),r.LFG(r.v3s),r.LFG(r.Sil),r.LFG(r.zs3),r.LFG(ii))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),ai=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Ce?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ee&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Ue&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new Ue(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Jr),r.LFG(F),r.LFG(void 0))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const ui=new r.OlP("ROUTER_CONFIGURATION"),ci=new r.OlP("ROUTER_FORROOT_GUARD"),li=[b,{provide:an,useClass:un},{provide:Jr,useFactory:function(t,e,n,r,i,o,s,a={},u,c){const l=new Jr(null,t,e,n,r,i,o,Ze(s));return u&&(l.urlHandlingStrategy=u),c&&(l.routeReuseStrategy=c),function(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy)}(a,l),a.enableTracing&&l.events.subscribe(t=>{var e,n;null===(e=console.group)||void 0===e||e.call(console,`Router Event: ${t.constructor.name}`),console.log(t.toString()),console.log(t),null===(n=console.groupEnd)||void 0===n||n.call(console)}),l},deps:[an,Gr,b,r.zs3,r.v3s,r.Sil,Br,ui,[class{},new r.FiY],[class{},new r.FiY]]},Gr,{provide:Nn,useFactory:function(t){return t.routerState.root},deps:[Jr]},{provide:r.v3s,useClass:r.EAV},si,oi,class{preload(t,e){return e().pipe(te(()=>(0,mt.of)(null)))}},{provide:ui,useValue:{enableTracing:!1}}];function hi(){return new r.PXZ("Router",Jr)}let di=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[li,mi(e),{provide:ci,useFactory:gi,deps:[[Jr,new r.FiY,new r.tp0]]},{provide:ui,useValue:n||{}},{provide:m,useFactory:pi,deps:[a,[new r.tBr(y),new r.FiY],ui]},{provide:ai,useFactory:fi,deps:[Jr,F,ui]},{provide:ii,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:oi},{provide:r.PXZ,multi:!0,useFactory:hi},[vi,{provide:r.ip1,multi:!0,useFactory:yi,deps:[vi]},{provide:wi,useFactory:_i,deps:[vi]},{provide:r.tb,multi:!0,useExisting:wi}]]}}static forChild(e){return{ngModule:t,providers:[mi(e)]}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(ci,8),r.LFG(Jr,8))},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({}),t})();function fi(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new ai(t,e,n)}function pi(t,e,n={}){return n.useHash?new w(t,e):new _(t,e)}function gi(t){return"guarded"}function mi(t){return[{provide:r.deG,multi:!0,useValue:t},{provide:Br,multi:!0,useValue:t}]}let vi=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new vt.xQ}appInitializer(){return this.injector.get(c,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(Jr),r=this.injector.get(ui);return"disabled"===r.initialNavigation?(n.setUpLocationChangeListener(),t(!0)):"enabled"===r.initialNavigation||"enabledBlocking"===r.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?(0,mt.of)(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()):t(!0),e})}bootstrapListener(t){const e=this.injector.get(ui),n=this.injector.get(si),i=this.injector.get(ai),o=this.injector.get(Jr),s=this.injector.get(r.z2F);t===s.components[0]&&("enabledNonBlocking"!==e.initialNavigation&&void 0!==e.initialNavigation||o.initialNavigation(),n.setUpPreloading(),i.init(),o.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.zs3))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();function yi(t){return t.appInitializer.bind(t)}function _i(t){return t.bootstrapListener.bind(t)}const wi=new r.OlP("Router Initializer");var bi=n(8569);function Ti(){return t=>t.lift(new Ci)}class Ci{call(t,e){return e.subscribe(new Ei(t))}}class Ei extends Tt.L{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}function Ii(t,e){return n=>n.lift(new Si(t,e))}class Si{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new ki(t,this.compare,this.keySelector))}}class ki extends Tt.L{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}var Ai=n(9098),xi=n(2346),Ni=n(1858),Pi=n(1062),Oi=n(250),Ri=n(308),Di=function(t,e){return(Di=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Li(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var Fi,Mi="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Ui=Ui||{},qi=Mi||self;function ji(){}function Vi(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Bi(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Hi="closure_uid_"+(1e9*Math.random()>>>0),zi=0;function Gi(t,e,n){return t.call.apply(t.bind,arguments)}function Zi(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function Ki(t,e,n){return(Ki=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Gi:Zi).apply(null,arguments)}function Wi(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function Yi(){return Date.now()}function Qi(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function $i(){this.j=this.j,this.i=this.i}$i.prototype.j=!1,$i.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,Hi)&&t[Hi]||(t[Hi]=++zi)}(this)},$i.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var Ji=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Xi=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function to(t){return Array.prototype.concat.apply([],arguments)}function eo(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function no(t){return/^[\s\xa0]*$/.test(t)}var ro,io=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function oo(t,e){return-1!=t.indexOf(e)}function so(t,e){return t<e?-1:t>e?1:0}t:{var ao=qi.navigator;if(ao){var uo=ao.userAgent;if(uo){ro=uo;break t}}ro=""}function co(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function lo(t){var e={};for(var n in t)e[n]=t[n];return e}var ho="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function fo(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<ho.length;o++)n=ho[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function po(t){return po[" "](t),t}po[" "]=ji;var go,mo,vo=oo(ro,"Opera"),yo=oo(ro,"Trident")||oo(ro,"MSIE"),_o=oo(ro,"Edge"),wo=_o||yo,bo=oo(ro,"Gecko")&&!(oo(ro.toLowerCase(),"webkit")&&!oo(ro,"Edge"))&&!(oo(ro,"Trident")||oo(ro,"MSIE"))&&!oo(ro,"Edge"),To=oo(ro.toLowerCase(),"webkit")&&!oo(ro,"Edge");function Co(){var t=qi.document;return t?t.documentMode:void 0}t:{var Eo="",Io=(mo=ro,bo?/rv:([^\);]+)(\)|;)/.exec(mo):_o?/Edge\/([\d\.]+)/.exec(mo):yo?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(mo):To?/WebKit\/(\S+)/.exec(mo):vo?/(?:Version)[ \/]?(\S+)/.exec(mo):void 0);if(Io&&(Eo=Io?Io[1]:""),yo){var So=Co();if(null!=So&&So>parseFloat(Eo)){go=String(So);break t}}go=Eo}var ko={};function Ao(t){return function(t,e){var n=ko;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=io(String(go)).split("."),r=io(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=so(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||so(0==s[2].length,0==a[2].length)||so(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e})}var xo=qi.document&&yo&&(Co()||parseInt(go,10))||void 0,No=!yo||9<=Number(xo),Po=yo&&!Ao("9"),Oo=function(){if(!qi.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{qi.addEventListener("test",ji,e),qi.removeEventListener("test",ji,e)}catch(n){}return t}();function Ro(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function Do(t,e){if(Ro.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(bo){t:{try{po(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Lo[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}Ro.prototype.b=function(){this.defaultPrevented=!0},Qi(Do,Ro);var Lo={2:"touch",3:"pen",4:"mouse"};Do.prototype.b=function(){Do.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Po)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var Fo="closure_listenable_"+(1e6*Math.random()|0),Mo=0;function Uo(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++Mo,this.Y=this.Z=!1}function qo(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function jo(t){this.src=t,this.a={},this.b=0}function Vo(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=Ji(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(qo(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function Bo(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}jo.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=Bo(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new Uo(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var Ho="closure_lm_"+(1e6*Math.random()|0),zo={};function Go(t,e,n,r,i){if(r&&r.once)return Ko(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Go(t,e[o],n,r,i);return null}return n=es(n),t&&t[Fo]?t.va(e,n,Bi(r)?!!r.capture:!!r,i):Zo(t,e,n,!1,r,i)}function Zo(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=Bi(i)?!!i.capture:!!i;if(s&&!No)return null;var a=Xo(t);if(a||(t[Ho]=a=new jo(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=Jo,e=No?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Oo||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Qo(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Ko(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)Ko(t,e[o],n,r,i);return null}return n=es(n),t&&t[Fo]?t.wa(e,n,Bi(r)?!!r.capture:!!r,i):Zo(t,e,n,!0,r,i)}function Wo(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Wo(t,e[o],n,r,i);else r=Bi(r)?!!r.capture:!!r,n=es(n),t&&t[Fo]?(t=t.c,(e=String(e).toString())in t.a&&-1<(n=Bo(o=t.a[e],n,r,i))&&(qo(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=Xo(t))&&(e=t.a[e.toString()],t=-1,e&&(t=Bo(e,n,r,i)),(n=-1<t?e[t]:null)&&Yo(n))}function Yo(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[Fo])Vo(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Qo(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Xo(e))?(Vo(n,t),0==n.b&&(n.src=null,e[Ho]=null)):qo(t)}}}function Qo(t){return t in zo?zo[t]:zo[t]="on"+t}function $o(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&Yo(t),n.call(r,e)}function Jo(t,e){if(t.Y)return!0;if(!No){if(!e)t:{e=["window","event"];for(var n=qi,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return $o(t,e=new Do(e,this))}return $o(t,new Do(e,this))}function Xo(t){return(t=t[Ho])instanceof jo?t:null}var ts="__closure_events_fn_"+(1e9*Math.random()>>>0);function es(t){return"function"==typeof t?t:(t[ts]||(t[ts]=function(e){return t.handleEvent(e)}),t[ts])}function ns(){$i.call(this),this.c=new jo(this),this.J=this,this.C=null}function rs(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new Ro(e,t);else if(e instanceof Ro)e.target=e.target||t;else{var i=e;fo(e=new Ro(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=is(s,r,!0,e)&&i}if(i=is(s=e.a=t,r,!0,e)&&i,i=is(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=is(s=e.a=n[o],r,!1,e)&&i}function is(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var a=s.listener,u=s.ca||s.src;s.Z&&Vo(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}Qi(ns,$i),ns.prototype[Fo]=!0,(Fi=ns.prototype).addEventListener=function(t,e,n,r){Go(this,t,e,n,r)},Fi.removeEventListener=function(t,e,n,r){Wo(this,t,e,n,r)},Fi.G=function(){if(ns.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)qo(n[r]);delete e.a[t],e.b--}}this.C=null},Fi.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},Fi.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var os=qi.JSON.stringify;function ss(){this.b=this.a=null}var as,us=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,this.a=(t=this.a).next,t.next=null):t=this.c(),t},t}())(function(){return new ls},function(t){t.reset()});function cs(){var t=ps,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function ls(){this.next=this.b=this.a=null}function hs(t){qi.setTimeout(function(){throw t},0)}function ds(t,e){as||function(){var t=qi.Promise.resolve(void 0);as=function(){t.then(gs)}}(),fs||(as(),fs=!0),ps.add(t,e)}ss.prototype.add=function(t,e){var n=us.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},ls.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},ls.prototype.reset=function(){this.next=this.b=this.a=null};var fs=!1,ps=new ss;function gs(){for(var t;t=cs();){try{t.a.call(t.b)}catch(n){hs(n)}var e=us;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}fs=!1}function ms(t,e){ns.call(this),this.b=t||1,this.a=e||qi,this.f=Ki(this.Za,this),this.g=Yi()}function vs(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function ys(t,e,n){if("function"==typeof t)n&&(t=Ki(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Ki(t.handleEvent,t)}return 2147483647<Number(e)?-1:qi.setTimeout(t,e||0)}function _s(t){t.a=ys(function(){t.a=null,t.c&&(t.c=!1,_s(t))},t.h);var e=t.b;t.b=null,t.g.apply(null,e)}Qi(ms,ns),(Fi=ms.prototype).aa=!1,Fi.M=null,Fi.Za=function(){if(this.aa){var t=Yi()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),rs(this,"tick"),this.aa&&(vs(this),this.start()))}},Fi.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=Yi())},Fi.G=function(){ms.X.G.call(this),vs(this),delete this.a};var ws=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}Di(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:_s(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(qi.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}($i);function bs(t){$i.call(this),this.b=t,this.a={}}Qi(bs,$i);var Ts=[];function Cs(t,e,n,r){Array.isArray(n)||(n&&(Ts[0]=n.toString()),n=Ts);for(var i=0;i<n.length;i++){var o=Go(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Es(t){co(t.a,function(t,e){this.a.hasOwnProperty(e)&&Yo(t)},t),t.a={}}function Is(){this.a=!0}function Ss(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return os(n)}catch(a){return e}}(t,n)+(r?" "+r:"")})}bs.prototype.G=function(){bs.X.G.call(this),Es(this)},bs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Is.prototype.info=function(){};var ks={},As=null;function xs(){return As=As||new ns}function Ns(t){Ro.call(this,ks.Fa,t)}function Ps(t){var e=xs();rs(e,new Ns(e,t))}function Os(t,e){Ro.call(this,ks.STAT_EVENT,t),this.stat=e}function Rs(t){var e=xs();rs(e,new Os(e,t))}function Ds(t){Ro.call(this,ks.Ga,t)}function Ls(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return qi.setTimeout(function(){t()},e)}ks.Fa="serverreachability",Qi(Ns,Ro),ks.STAT_EVENT="statevent",Qi(Os,Ro),ks.Ga="timingevent",Qi(Ds,Ro);var Fs={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},Ms={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function Us(){}function qs(){}Us.prototype.a=null;var js,Vs={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function Bs(){Ro.call(this,"d")}function Hs(){Ro.call(this,"c")}function zs(){}function Gs(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new bs(this),this.P=Zs,this.R=new ms(t=wo?125:void 0),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}Qi(Bs,Ro),Qi(Hs,Ro),Qi(zs,Us),js=new zs;var Zs=45e3,Ks={},Ws={};function Ys(t,e,n){t.H=1,t.i=va(ha(e)),t.j=n,t.I=!0,Qs(t,null)}function Qs(t,e){t.u=Yi(),Xs(t),t.l=ha(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),Na(n.b,"t",r),t.D=0,t.a=Eu(t.g,t.g.C?e:null),0<t.O&&(t.F=new ws(Ki(t.Ca,t,t.a),t.O)),Cs(t.J,t.a,"readystatechange",t.Xa),e=t.B?lo(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),Ps(1),function(t,e,n,r,i,o){t.info(function(){if(t.a)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s})}(t.c,t.m,t.l,t.f,t.S,t.j)}function $s(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=Js(t,n);if(i==Ws){4==e&&(t.h=4,Rs(14),r=!1),Ss(t.c,t.f,null,"[Incomplete Response]");break}if(i==Ks){t.h=4,Rs(15),Ss(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}Ss(t.c,t.f,i,null),ia(t,i)}4==e&&0==n.length&&(t.h=1,Rs(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),mu(e),e.F=!0,Rs(11))):(Ss(t.c,t.f,n,"[Invalid Chunked Response]"),ra(t),na(t))}function Js(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?Ws:(n=Number(e.substring(n,r)),isNaN(n)?Ks:(r+=1)+n>e.length?Ws:(e=e.substr(r,n),t.D=r+n,e))}function Xs(t){t.T=Yi()+t.P,ta(t,t.P)}function ta(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=Ls(Ki(t.Va,t),e)}function ea(t){t.o&&(qi.clearTimeout(t.o),t.o=null)}function na(t){0==t.g.v||t.A||_u(t.g,t)}function ra(t){ea(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,vs(t.R),Es(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function ia(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||Ma(n.b,t)))if(n.I=t.N,!t.C&&Ma(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(dy){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;yu(n),au(n)}gu(n),Rs(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=Ls(Ki(n.Sa,n),6e3));if(1>=Fa(n.b)&&n.ea){try{n.ea()}catch(dy){}n.ea=void 0}}else bu(n,11)}else if((t.C||n.a==t)&&yu(n),!no(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(n.P=(i=e[r])[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var a=i[5];if(null!=a&&"number"==typeof a&&0<a){var u=1.5*a;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&(oo(l,"spdy")||oo(l,"quic")||oo(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(Ua(h,h.b),h.b=null))}if(u.A){var d=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;d&&(u.na=d,ma(u.B,u.A,d))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=Yi()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var f=t;if((u=n).la=Cu(u,u.C?u.ga:null,u.fa),f.C){qa(u.b,f);var p=f,g=u.D;g&&p.setTimeout(g),p.o&&(ea(p),Xs(p)),u.a=f}else pu(u);0<n.g.length&&lu(n)}else"stop"!=i[0]&&"close"!=i[0]||bu(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?bu(n,7):su(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);Ps(4)}catch(dy){}}function oa(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Vi(t)||"string"==typeof t)Xi(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(Vi(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(Vi(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function sa(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof sa)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function aa(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];ua(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)ua(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function ua(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(Fi=Gs.prototype).setTimeout=function(t){this.P=t},Fi.Xa=function(t){t=t.target;var e=this.F;e&&3==nu(t)?e.f():this.Ca(t)},Fi.Ca=function(t){try{if(t==this.a)t:{var e=nu(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!wo&&!this.a.$())){this.A||4!=e||7==n||Ps(8==n||0>=r?3:2),ea(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s})}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!no(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.h=3,Rs(12),ra(this),na(this);break t}Ss(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,ia(this,u)}this.I?($s(this,e,o),wo&&this.b&&3==e&&(Cs(this.J,this.R,"tick",this.Wa),this.R.start())):(Ss(this.c,this.f,o,null),ia(this,o)),4==e&&ra(this),this.b&&!this.A&&(4==e?_u(this.g,this):(this.b=!1,Xs(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,Rs(12)):(this.h=0,Rs(13)),ra(this),na(this)}}}catch(c){}},Fi.Wa=function(){if(this.a){var t=nu(this.a),e=this.a.$();this.D<e.length&&(ea(this),$s(this,t,e),this.b&&4!=t&&Xs(this))}},Fi.cancel=function(){this.A=!0,ra(this)},Fi.Va=function(){this.o=null;var t=Yi();0<=t-this.T?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.c,this.l),2!=this.H&&(Ps(3),Rs(17)),ra(this),this.h=2,na(this)):ta(this,this.T-t)},(Fi=sa.prototype).K=function(){aa(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},Fi.L=function(){return aa(this),this.a.concat()},Fi.get=function(t,e){return ua(this.b,t)?this.b[t]:e},Fi.set=function(t,e){ua(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},Fi.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var ca=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function la(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof la){this.a=void 0!==e?e:t.a,da(this,t.f),this.j=t.j,fa(this,t.c),pa(this,t.h),this.g=t.g,e=t.b;var n=new Sa;n.c=e.c,e.a&&(n.a=new sa(e.a),n.b=e.b),ga(this,n),this.i=t.i}else t&&(n=String(t).match(ca))?(this.a=!!e,da(this,n[1]||"",!0),this.j=ya(n[2]||""),fa(this,n[3]||"",!0),pa(this,n[4]),this.g=ya(n[5]||"",!0),ga(this,n[6]||"",!0),this.i=ya(n[7]||"")):(this.a=!!e,this.b=new Sa(null,this.a))}function ha(t){return new la(t)}function da(t,e,n){t.f=n?ya(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function fa(t,e,n){t.c=n?ya(e,!0):e}function pa(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function ga(t,e,n){e instanceof Sa?(t.b=e,function(t,e){e&&!t.f&&(ka(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Aa(this,e),Na(this,n,t))},t)),t.f=e}(t.b,t.a)):(n||(e=_a(e,Ea)),t.b=new Sa(e,t.a))}function ma(t,e,n){t.b.set(e,n)}function va(t){return ma(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Yi()).toString(36)),t}function ya(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function _a(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,wa),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function wa(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}la.prototype.toString=function(){var t=[],e=this.f;e&&t.push(_a(e,ba,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(_a(e,ba,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(_a(n,"/"==n.charAt(0)?Ca:Ta,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",_a(n,Ia)),t.join("")};var ba=/[#\/\?@]/g,Ta=/[#\?:]/g,Ca=/[#\?]/g,Ea=/[#\?@]/g,Ia=/#/g;function Sa(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function ka(t){t.a||(t.a=new sa,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function Aa(t,e){ka(t),e=Pa(t,e),ua(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,ua((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&aa(t)))}function xa(t,e){return ka(t),e=Pa(t,e),ua(t.a.b,e)}function Na(t,e,n){Aa(t,e),0<n.length&&(t.c=null,t.a.set(Pa(t,e),eo(n)),t.b+=n.length)}function Pa(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(Fi=Sa.prototype).add=function(t,e){ka(this),this.c=null,t=Pa(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},Fi.forEach=function(t,e){ka(this),this.a.forEach(function(n,r){Xi(n,function(n){t.call(e,n,r,this)},this)},this)},Fi.L=function(){ka(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},Fi.K=function(t){ka(this);var e=[];if("string"==typeof t)xa(this,t)&&(e=to(e,this.a.get(Pa(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=to(e,t[n])}return e},Fi.set=function(t,e){return ka(this),this.c=null,xa(this,t=Pa(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},Fi.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},Fi.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var Oa=function(){return function(t,e){this.b=t,this.a=e}}();function Ra(t){this.g=t||Da,t=qi.PerformanceNavigationTiming?0<(t=qi.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(qi.ia&&qi.ia.ya&&qi.ia.ya()&&qi.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var Da=10;function La(t){return!!t.b||!!t.a&&t.a.size>=t.f}function Fa(t){return t.b?1:t.a?t.a.size:0}function Ma(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function Ua(t,e){t.a?t.a.add(e):t.b=e}function qa(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function ja(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=Li(t.a.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.s)}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return eo(t.c)}function Va(){}function Ba(){this.a=new Va}function Ha(t,e,n){var r=n||"";try{oa(t,function(t,n){var i=t;Bi(t)&&(i=os(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(Yy){throw e.push(r+"type="+encodeURIComponent("_badmap")),Yy}}function za(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}Ra.prototype.cancel=function(){var t,e;if(this.c=ja(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=Li(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},Va.prototype.stringify=function(t){return qi.JSON.stringify(t,void 0)},Va.prototype.parse=function(t){return qi.JSON.parse(t,void 0)};var Ga=qi.JSON.parse;function Za(t){ns.call(this),this.headers=new sa,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=Ka,this.D=this.F=!1}Qi(Za,ns);var Ka="",Wa=/^https?$/i,Ya=["POST","PUT"];function Qa(t){return"content-type"==t.toLowerCase()}function $a(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Ja(t),tu(t)}function Ja(t){t.u||(t.u=!0,rs(t,"complete"),rs(t,"error"))}function Xa(t){if(t.b&&void 0!==Ui&&(!t.s[1]||4!=nu(t)||2!=t.W()))if(t.l&&4==nu(t))ys(t.za,0,t);else if(rs(t,"readystatechange"),4==nu(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(ca)[1]||null;if(!o&&qi.self&&qi.self.location){var s=qi.self.location.protocol;o=s.substr(0,s.length-1)}i=!Wa.test(o?o.toLowerCase():"")}e=i}if(e)rs(t,"complete"),rs(t,"success");else{t.h=6;try{var a=2<nu(t)?t.a.statusText:""}catch(n){a=""}t.f=a+" ["+t.W()+"]",Ja(t)}}finally{tu(t)}}}function tu(t,e){if(t.a){eu(t);var n=t.a,r=t.s[0]?ji:null;t.a=null,t.s=null,e||rs(t,"ready");try{n.onreadystatechange=r}catch(Yy){}}}function eu(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(qi.clearTimeout(t.m),t.m=null)}function nu(t){return t.a?t.a.readyState:0}function ru(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return co(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):ma(t,e,n))}function iu(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function ou(t){this.pa=0,this.g=[],this.c=new Is,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=iu("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=iu("baseRetryDelayMs",5e3,t),this.Ra=iu("retryDelaySeedMs",1e4,t),this.Ma=iu("forwardChannelMaxRetries",2,t),this.ma=iu("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new Ra(t&&t.concurrentRequestLimit),this.ka=new Ba,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function su(t){if(uu(t),3==t.v){var e=t.R++,n=ha(t.B);ma(n,"SID",t.J),ma(n,"RID",e),ma(n,"TYPE","terminate"),du(t,n),(e=new Gs(t,t.c,e,void 0)).H=2,e.i=va(ha(n)),n=!1,qi.navigator&&qi.navigator.sendBeacon&&(n=qi.navigator.sendBeacon(e.i.toString(),"")),!n&&qi.Image&&((new Image).src=e.i,n=!0),n||(e.a=Eu(e.g,null),e.a.ba(e.i)),e.u=Yi(),Xs(e)}Tu(t)}function au(t){t.a&&(mu(t),t.a.cancel(),t.a=null)}function uu(t){au(t),t.j&&(qi.clearTimeout(t.j),t.j=null),yu(t),t.b.cancel(),t.h&&("number"==typeof t.h&&qi.clearTimeout(t.h),t.h=null)}function cu(t,e){t.g.push(new Oa(t.Oa++,e)),3==t.v&&lu(t)}function lu(t){La(t.b)||t.h||(t.h=!0,ds(t.Ba,t),t.u=0)}function hu(t,e){var n;n=e?e.f:t.R++;var r=ha(t.B);ma(r,"SID",t.J),ma(r,"RID",n),ma(r,"AID",t.P),du(t,r),t.i&&t.l&&ru(r,t.i,t.l),n=new Gs(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=fu(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),Ua(t.b,n),Ys(n,r,e)}function du(t,e){t.f&&oa({},function(t,n){ma(e,n,t)})}function fu(t,e,n){n=Math.min(t.g.length,n);var r=t.f?Ki(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].b)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),a=!1;else try{Ha(l,s,"req"+c+"_")}catch(ec){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function pu(t){t.a||t.j||(t.T=1,ds(t.Aa,t),t.o=0)}function gu(t){return!(t.a||t.j||3<=t.o||(t.T++,t.j=Ls(Ki(t.Aa,t),wu(t,t.o)),t.o++,0))}function mu(t){null!=t.s&&(qi.clearTimeout(t.s),t.s=null)}function vu(t){t.a=new Gs(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=ha(t.la);ma(e,"RID","rpc"),ma(e,"SID",t.J),ma(e,"CI",t.H?"0":"1"),ma(e,"AID",t.P),du(t,e),ma(e,"TYPE","xmlhttp"),t.i&&t.l&&ru(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=va(ha(e)),n.j=null,n.I=!0,Qs(n,t)}function yu(t){null!=t.m&&(qi.clearTimeout(t.m),t.m=null)}function _u(t,e){var n=null;if(t.a==e){yu(t),mu(t),t.a=null;var r=2}else{if(!Ma(t.b,e))return;n=e.s,qa(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=Yi()-e.u;var i=t.u;rs(r=xs(),new Ds(r,n,e,i)),lu(t)}else pu(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(Fa(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=Ls(Ki(t.Ba,t,e),wu(t,t.u)),t.u++,0)))}(t,e)||2==r&&gu(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:bu(t,5);break;case 4:bu(t,10);break;case 3:bu(t,6);break;default:bu(t,2)}}function wu(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function bu(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=Ki(t.Ya,t);n||(n=new la("//www.google.com/images/cleardot.gif"),qi.location&&"http"==qi.location.protocol||da(n,"https"),va(n)),function(t,e){var n=new Is;if(qi.Image){var r=new Image;r.onload=Wi(za,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Wi(za,n,r,"TestLoadImage: error",!1,e),r.onabort=Wi(za,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Wi(za,n,r,"TestLoadImage: timeout",!1,e),qi.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else Rs(2);t.v=0,t.f&&t.f.ra(e),Tu(t),uu(t)}function Tu(t){t.v=0,t.I=-1,t.f&&(0==ja(t.b).length&&0==t.g.length||(t.b.c.length=0,eo(t.g),t.g.length=0),t.f.qa())}function Cu(t,e,n){var r=function(t){return t instanceof la?ha(t):new la(t,void 0)}(n);if(""!=r.c)e&&fa(r,e+"."+r.c),pa(r,r.h);else{var i=qi.location;r=function(t,e,n,r){var i=new la(null,void 0);return t&&da(i,t),e&&fa(i,e),n&&pa(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&co(t.V,function(t,e){ma(r,e,t)}),n=t.na,(e=t.A)&&n&&ma(r,e,n),ma(r,"VER",t.ha),du(t,r),r}function Eu(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Za(t.Na)).F=t.C,e}function Iu(){}function Su(){if(yo&&!(10<=Number(xo)))throw Error("Environmental error: no available transport.")}function ku(t,e){ns.call(this),this.a=new ou(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!no(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!no(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new Nu(this)}function Au(t){Bs.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function xu(){Hs.call(this),this.status=1}function Nu(t){this.a=t}(Fi=Za.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(t){var e;return(e=t.a)||(e=t.a={}),e}(this.H?this.H:js),this.a.onreadystatechange=Ki(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(o){return void $a(this,o)}t=n||"";var i=new sa(this.headers);r&&oa(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=Qa,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=qi.FormData&&t instanceof qi.FormData,!(0<=Ji(Ya,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{eu(this),0<this.o&&((this.D=function(t){return yo&&Ao(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=Ki(this.xa,this)):this.m=ys(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){$a(this,o)}},Fi.xa=function(){void 0!==Ui&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,rs(this,"timeout"),this.abort(8))},Fi.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,rs(this,"complete"),rs(this,"abort"),tu(this))},Fi.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),tu(this,!0)),Za.X.G.call(this)},Fi.za=function(){this.j||(this.A||this.l||this.g?Xa(this):this.Ua())},Fi.Ua=function(){Xa(this)},Fi.W=function(){try{return 2<nu(this)?this.a.status:-1}catch(mo){return-1}},Fi.$=function(){try{return this.a?this.a.responseText:""}catch(mo){return""}},Fi.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Ga(e)}},Fi.ua=function(){return this.h},Fi.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(Fi=ou.prototype).ha=8,Fi.v=1,Fi.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new Gs(this,this.c,t,void 0),r=this.l;if(this.O&&(r?fo(r=lo(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=fu(this,n,e),ma(i=ha(this.B),"RID",t),ma(i,"CVER",22),this.A&&ma(i,"X-HTTP-Session-Id",this.A),du(this,i),this.i&&r&&ru(i,this.i,r),Ua(this.b,n),this.Ia&&ma(i,"TYPE","init"),this.da?(ma(i,"$req",e),ma(i,"SID","null"),n.U=!0,Ys(n,i,null)):Ys(n,i,e),this.v=2}}else 3==this.v&&(t?hu(this,t):0==this.g.length||La(this.b)||hu(this))},Fi.Aa=function(){if(this.j=null,vu(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=Ls(Ki(this.Ta,this),t)}},Fi.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,Rs(10),au(this),vu(this))},Fi.Sa=function(){null!=this.m&&(this.m=null,au(this),gu(this),Rs(19))},Fi.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),Rs(2)):(this.c.info("Failed to ping google.com"),Rs(1))},(Fi=Iu.prototype).ta=function(){},Fi.sa=function(){},Fi.ra=function(){},Fi.qa=function(){},Fi.Ja=function(){},Su.prototype.a=function(t,e){return new ku(t,e)},Qi(ku,ns),ku.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;Rs(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=Cu(t,null,t.fa),lu(t)},ku.prototype.close=function(){su(this.a)},ku.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,cu(this.a,e)}else this.l?((e={}).__data__=os(t),cu(this.a,e)):cu(this.a,t)},ku.prototype.G=function(){this.a.f=null,delete this.f,su(this.a),delete this.a,ku.X.G.call(this)},Qi(Au,Bs),Qi(xu,Hs),Qi(Nu,Iu),Nu.prototype.ta=function(){rs(this.a,"a")},Nu.prototype.sa=function(t){rs(this.a,new Au(t))},Nu.prototype.ra=function(t){rs(this.a,new xu(t))},Nu.prototype.qa=function(){rs(this.a,"b")},Su.prototype.createWebChannel=Su.prototype.a,ku.prototype.send=ku.prototype.h,ku.prototype.open=ku.prototype.g,ku.prototype.close=ku.prototype.close,Fs.NO_ERROR=0,Fs.TIMEOUT=8,Fs.HTTP_ERROR=6,Ms.COMPLETE="complete",qs.EventType=Vs,Vs.OPEN="a",Vs.CLOSE="b",Vs.ERROR="c",Vs.MESSAGE="d",ns.prototype.listen=ns.prototype.va,Za.prototype.listenOnce=Za.prototype.wa,Za.prototype.getLastError=Za.prototype.Qa,Za.prototype.getLastErrorCode=Za.prototype.ua,Za.prototype.getStatus=Za.prototype.W,Za.prototype.getResponseJson=Za.prototype.Pa,Za.prototype.getResponseText=Za.prototype.$,Za.prototype.send=Za.prototype.ba;var Pu=Fs,Ou=Ms,Ru=ks,Du=qs,Lu=Za,Fu=n(4762),Mu=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();Mu.o=-1;var Uu={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},qu=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return(0,Fu.__extends)(e,t),e}(Error),ju=new Ri.Logger("@firebase/firestore");function Vu(){return ju.logLevel}function Bu(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(ju.logLevel<=Ri.LogLevel.DEBUG){var r=e.map(Gu);ju.debug.apply(ju,(0,Fu.__spreadArray)(["Firestore (8.5.0): "+t],r))}}function Hu(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(ju.logLevel<=Ri.LogLevel.ERROR){var r=e.map(Gu);ju.error.apply(ju,(0,Fu.__spreadArray)(["Firestore (8.5.0): "+t],r))}}function zu(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(ju.logLevel<=Ri.LogLevel.WARN){var r=e.map(Gu);ju.warn.apply(ju,(0,Fu.__spreadArray)(["Firestore (8.5.0): "+t],r))}}function Gu(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(Yy){return t}}function Zu(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.5.0) INTERNAL ASSERTION FAILED: "+t;throw Hu(e),new Error(e)}function Ku(t,e){t||Zu()}function Wu(t,e){return t}function Yu(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Qu=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=Yu(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function $u(t,e){return t<e?-1:t>e?1:0}function Ju(t,e,n){return t.length===e.length&&t.every(function(t,r){return n(t,e[r])})}function Xu(t){return t+"\0"}var tc=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new qu(Uu.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new qu(Uu.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new qu(Uu.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new qu(Uu.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?$u(this.nanoseconds,t.nanoseconds):$u(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),ec=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new tc(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();function nc(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function rc(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function ic(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var oc=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&Zu(),void 0===n?n=t.length-e:n>t.length-e&&Zu(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),sc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Fu.__extends)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new qu(Uu.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter(function(t){return t.length>0}))}return new e(r)},e.emptyPath=function(){return new e([])},e}(oc),ac=/^[_a-zA-Z][_a-zA-Z0-9]*$/,uc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Fu.__extends)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return ac.test(t)},e.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new qu(Uu.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new qu(Uu.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new qu(Uu.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new qu(Uu.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(oc),cc=function(){function t(t){this.fields=t,t.sort(uc.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return Ju(this.fields,t.fields,function(t,e){return t.isEqual(e)})},t}(),lc=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.binaryString)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return $u(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();lc.EMPTY_BYTE_STRING=new lc("");var hc=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function dc(t){if(Ku(!!t),"string"==typeof t){var e=0,n=hc.exec(t);if(Ku(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:fc(t.seconds),nanos:fc(t.nanos)}}function fc(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function pc(t){return"string"==typeof t?lc.fromBase64String(t):lc.fromUint8Array(t)}function gc(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function mc(t){var e=t.mapValue.fields.__previous_value__;return gc(e)?mc(e):e}function vc(t){var e=dc(t.mapValue.fields.__local_write_time__.timestampValue);return new tc(e.seconds,e.nanos)}function yc(t){return null==t}function _c(t){return 0===t&&1/t==-1/0}function wc(t){return"number"==typeof t&&Number.isInteger(t)&&!_c(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var bc=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(sc.fromString(e))},t.fromName=function(e){return new t(sc.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===sc.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return sc.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new sc(e.slice()))},t}();function Tc(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?gc(t)?4:10:Zu()}function Cc(t,e){var n=Tc(t);if(n!==Tc(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return vc(t).isEqual(vc(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=dc(t.timestampValue),r=dc(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return pc(t.bytesValue).isEqual(pc(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return fc(t.geoPointValue.latitude)===fc(e.geoPointValue.latitude)&&fc(t.geoPointValue.longitude)===fc(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return fc(t.integerValue)===fc(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=fc(t.doubleValue),r=fc(e.doubleValue);return n===r?_c(n)===_c(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Ju(t.arrayValue.values||[],e.arrayValue.values||[],Cc);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(nc(n)!==nc(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Cc(n[i],r[i])))return!1;return!0}(t,e);default:return Zu()}}function Ec(t,e){return void 0!==(t.values||[]).find(function(t){return Cc(t,e)})}function Ic(t,e){var n=Tc(t),r=Tc(e);if(n!==r)return $u(n,r);switch(n){case 0:return 0;case 1:return $u(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=fc(t.integerValue||t.doubleValue),r=fc(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Sc(t.timestampValue,e.timestampValue);case 4:return Sc(vc(t),vc(e));case 5:return $u(t.stringValue,e.stringValue);case 6:return function(t,e){var n=pc(t),r=pc(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=$u(n[i],r[i]);if(0!==o)return o}return $u(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=$u(fc(t.latitude),fc(e.latitude));return 0!==n?n:$u(fc(t.longitude),fc(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Ic(n[i],r[i]);if(o)return o}return $u(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=$u(r[s],o[s]);if(0!==a)return a;var u=Ic(n[r[s]],i[o[s]]);if(0!==u)return u}return $u(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Zu()}}function Sc(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return $u(t,e);var n=dc(t),r=dc(e),i=$u(n.seconds,r.seconds);return 0!==i?i:$u(n.nanos,r.nanos)}function kc(t){return Ac(t)}function Ac(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=dc(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?pc(t.bytesValue).toBase64():"referenceValue"in t?bc.fromName(t.referenceValue).toString():"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=Ac(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+Ac(t.fields[o])}return e+"}"}(t.mapValue):Zu();var e}function xc(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function Nc(t){return!!t&&"integerValue"in t}function Pc(t){return!!t&&"arrayValue"in t}function Oc(t){return!!t&&"nullValue"in t}function Rc(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Dc(t){return!!t&&"mapValue"in t}var Lc=function(){function t(t){this.overlayMap=new Map,this.partialValue=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(e){return t.extractNestedValue(this.buildProto(),e)},t.prototype.toProto=function(){return this.field(uc.emptyPath())},t.prototype.set=function(t,e){this.setOverlay(t,e)},t.prototype.setAll=function(t){var e=this;t.forEach(function(t,n){t?e.set(n,t):e.delete(n)})},t.prototype.delete=function(t){this.setOverlay(t,null)},t.prototype.isEqual=function(t){return Cc(this.buildProto(),t.buildProto())},t.prototype.setOverlay=function(t,e){for(var n=this.overlayMap,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===Tc(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.lastSegment(),e)},t.prototype.applyOverlay=function(e,n){var r=this,i=!1,o=t.extractNestedValue(this.partialValue,e),s=Dc(o)?Object.assign({},o.mapValue.fields):{};return n.forEach(function(t,n){if(t instanceof Map){var o=r.applyOverlay(e.child(n),t);null!=o&&(s[n]=o,i=!0)}else null!==t?(s[n]=t,i=!0):s.hasOwnProperty(n)&&(delete s[n],i=!0)}),i?{mapValue:{fields:s}}:null},t.prototype.buildProto=function(){var t=this.applyOverlay(uc.emptyPath(),this.overlayMap);return null!=t&&(this.partialValue=t,this.overlayMap.clear()),this.partialValue},t.extractNestedValue=function(t,e){if(e.isEmpty())return t;for(var n=t,r=0;r<e.length-1;++r){if(!n.mapValue.fields)return null;if(!Dc(n=n.mapValue.fields[e.get(r)]))return null}return(n=(n.mapValue.fields||{})[e.lastSegment()])||null},t.prototype.clone=function(){return new t(this.buildProto())},t}();function Fc(t){var e=[];return rc(t.fields||{},function(t,n){var r=new uc([t]);if(Dc(n)){var i=Fc(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++)e.push(r.child(s[o]))}else e.push(r)}),new cc(e)}var Mc=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,ec.min(),Lc.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,Lc.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,Lc.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=Lc.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=Lc.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.toProto())+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),Uc=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.h=null};function qc(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new Uc(t,e,n,r,i,o,s)}function jc(t){var e=Wu(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(function(t){return function(t){return t.field.canonicalString()+t.op.toString()+kc(t.value)}(t)}).join(","),n+="|ob:",n+=e.orderBy.map(function(t){return function(t){return t.field.canonicalString()+t.dir}(t)}).join(","),yc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Xc(e.startAt)),e.endAt&&(n+="|ub:",n+=Xc(e.endAt)),e.h=n}return e.h}function Vc(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!el(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!Cc(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!rl(t.startAt,e.startAt)&&rl(t.endAt,e.endAt)}function Bc(t){return bc.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Hc=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return(0,Fu.__extends)(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new zc(t,n,r):"array-contains"===n?new Wc(t,r):"in"===n?new Yc(t,r):"not-in"===n?new Qc(t,r):"array-contains-any"===n?new $c(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new Gc(t,n):new Zc(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(Ic(e,this.value)):null!==e&&Tc(this.value)===Tc(e)&&this.m(Ic(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Zu()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),zc=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=bc.fromName(r.referenceValue),i}return(0,Fu.__extends)(e,t),e.prototype.matches=function(t){var e=bc.comparator(t.key,this.key);return this.m(e)},e}(Hc),Gc=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Kc(0,n),r}return(0,Fu.__extends)(e,t),e.prototype.matches=function(t){return this.keys.some(function(e){return e.isEqual(t.key)})},e}(Hc),Zc=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Kc(0,n),r}return(0,Fu.__extends)(e,t),e.prototype.matches=function(t){return!this.keys.some(function(e){return e.isEqual(t.key)})},e}(Hc);function Kc(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(t){return bc.fromName(t.referenceValue)})}var Wc=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return(0,Fu.__extends)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return Pc(e)&&Ec(e.arrayValue,this.value)},e}(Hc),Yc=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return(0,Fu.__extends)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&Ec(this.value.arrayValue,e)},e}(Hc),Qc=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return(0,Fu.__extends)(e,t),e.prototype.matches=function(t){if(Ec(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!Ec(this.value.arrayValue,e)},e}(Hc),$c=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return(0,Fu.__extends)(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!Pc(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return Ec(e.value.arrayValue,t)})},e}(Hc),Jc=function(t,e){this.position=t,this.before=e};function Xc(t){return(t.before?"b":"a")+":"+t.position.map(function(t){return kc(t)}).join(",")}var tl=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function el(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function nl(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.isKeyField()?bc.comparator(bc.fromName(s.referenceValue),n.key):Ic(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function rl(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Cc(t.position[n],e.position[n]))return!1;return!0}var il=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.p=null,this.T=null};function ol(t,e,n,r,i,o,s,a){return new il(t,e,n,r,i,o,s,a)}function sl(t){return new il(t)}function al(t){return!yc(t.limit)&&"F"===t.limitType}function ul(t){return!yc(t.limit)&&"L"===t.limitType}function cl(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function ll(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function hl(t){return null!==t.collectionGroup}function dl(t){var e=Wu(t);if(null===e.p){e.p=[];var n=ll(e),r=cl(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new tl(n)),e.p.push(new tl(uc.keyField(),"asc"));else{for(var i=!1,o=0,s=e.explicitOrderBy;o<s.length;o++){var a=s[o];e.p.push(a),a.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new tl(uc.keyField(),u))}}}return e.p}function fl(t){var e=Wu(t);if(!e.T)if("F"===e.limitType)e.T=qc(e.path,e.collectionGroup,dl(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=dl(e);r<i.length;r++){var o=i[r];n.push(new tl(o.field,"desc"===o.dir?"asc":"desc"))}var s=e.endAt?new Jc(e.endAt.position,!e.endAt.before):null,a=e.startAt?new Jc(e.startAt.position,!e.startAt.before):null;e.T=qc(e.path,e.collectionGroup,n,e.filters,e.limit,s,a)}return e.T}function pl(t,e,n){return new il(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function gl(t,e){return Vc(fl(t),fl(e))&&t.limitType===e.limitType}function ml(t){return jc(fl(t))+"|lt:"+t.limitType}function vl(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map(function(t){return(e=t).field.canonicalString()+" "+e.op+" "+kc(e.value);var e}).join(", ")+"]"),yc(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map(function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)}).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Xc(t.startAt)),t.endAt&&(e+=", endAt: "+Xc(t.endAt)),"Target("+e+")"}(fl(t))+"; limitType="+t.limitType+")"}function yl(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):bc.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!nl(t.startAt,dl(t),e)||t.endAt&&nl(t.endAt,dl(t),e))}(t,e)}function _l(t){return function(e,n){for(var r=!1,i=0,o=dl(t);i<o.length;i++){var s=o[i],a=wl(s,e,n);if(0!==a)return a;r=r||s.field.isKeyField()}return 0}}function wl(t,e,n){var r=t.field.isKeyField()?bc.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?Ic(r,i):Zu()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Zu()}}function bl(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:_c(e)?"-0":e}}function Tl(t){return{integerValue:""+t}}function Cl(t,e){return wc(e)?Tl(e):bl(t,e)}var El=function(){this._=void 0};function Il(t,e,n){return t instanceof Al?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof xl?Nl(t,e):t instanceof Pl?Ol(t,e):function(t,e){var n=kl(t,e),r=Dl(n)+Dl(t.A);return Nc(n)&&Nc(t.A)?Tl(r):bl(t.R,r)}(t,e)}function Sl(t,e,n){return t instanceof xl?Nl(t,e):t instanceof Pl?Ol(t,e):n}function kl(t,e){return t instanceof Rl?Nc(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var Al=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Fu.__extends)(e,t),e}(El),xl=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return(0,Fu.__extends)(e,t),e}(El);function Nl(t,e){for(var n=Ll(e),r=function(t){n.some(function(e){return Cc(e,t)})||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Pl=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return(0,Fu.__extends)(e,t),e}(El);function Ol(t,e){for(var n=Ll(e),r=function(t){n=n.filter(function(e){return!Cc(e,t)})},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Rl=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return(0,Fu.__extends)(e,t),e}(El);function Dl(t){return fc(t.integerValue||t.doubleValue)}function Ll(t){return Pc(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Fl=function(t,e){this.field=t,this.transform=e},Ml=function(t,e){this.version=t,this.transformResults=e},Ul=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function ql(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var jl=function(){};function Vl(t,e,n){t instanceof Zl?function(t,e,n){var r=t.value.clone(),i=Yl(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof Kl?function(t,e,n){if(ql(t.precondition,e)){var r=Yl(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(Wl(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function Bl(t,e,n){t instanceof Zl?function(t,e,n){if(ql(t.precondition,e)){var r=t.value.clone(),i=Ql(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(Gl(e),r).setHasLocalMutations()}}(t,e,n):t instanceof Kl?function(t,e,n){if(ql(t.precondition,e)){var r=Ql(t.fieldTransforms,n,e),i=e.data;i.setAll(Wl(t)),i.setAll(r),e.convertToFoundDocument(Gl(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){ql(t.precondition,e)&&e.convertToNoDocument(ec.min())}(t,e)}function Hl(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e.data.field(o.field),a=kl(o.transform,s||null);null!=a&&(null==n&&(n=Lc.empty()),n.set(o.field,a))}return n||null}function zl(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&Ju(t,e,function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof xl&&e instanceof xl||t instanceof Pl&&e instanceof Pl?Ju(t.elements,e.elements,Cc):t instanceof Rl&&e instanceof Rl?Cc(t.A,e.A):t instanceof Al&&e instanceof Al}(t.transform,e.transform)}(t,e)})}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function Gl(t){return t.isFoundDocument()?t.version:ec.min()}var Zl=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return(0,Fu.__extends)(e,t),e}(jl),Kl=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.fieldMask=r,s.precondition=i,s.fieldTransforms=o,s.type=1,s}return(0,Fu.__extends)(e,t),e}(jl);function Wl(t){var e=new Map;return t.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}}),e}function Yl(t,e,n){var r=new Map;Ku(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,Sl(s,a,n[i]))}return r}function Ql(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=n.data.field(s.field);r.set(s.field,Il(a,u,e))}return r}var $l,Jl,Xl=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return(0,Fu.__extends)(e,t),e}(jl),th=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return(0,Fu.__extends)(e,t),e}(jl),eh=function(t){this.count=t};function nh(t){switch(t){case Uu.OK:return Zu();case Uu.CANCELLED:case Uu.UNKNOWN:case Uu.DEADLINE_EXCEEDED:case Uu.RESOURCE_EXHAUSTED:case Uu.INTERNAL:case Uu.UNAVAILABLE:case Uu.UNAUTHENTICATED:return!1;case Uu.INVALID_ARGUMENT:case Uu.NOT_FOUND:case Uu.ALREADY_EXISTS:case Uu.PERMISSION_DENIED:case Uu.FAILED_PRECONDITION:case Uu.ABORTED:case Uu.OUT_OF_RANGE:case Uu.UNIMPLEMENTED:case Uu.DATA_LOSS:return!0;default:return Zu()}}function rh(t){if(void 0===t)return Hu("GRPC error has no .code"),Uu.UNKNOWN;switch(t){case $l.OK:return Uu.OK;case $l.CANCELLED:return Uu.CANCELLED;case $l.UNKNOWN:return Uu.UNKNOWN;case $l.DEADLINE_EXCEEDED:return Uu.DEADLINE_EXCEEDED;case $l.RESOURCE_EXHAUSTED:return Uu.RESOURCE_EXHAUSTED;case $l.INTERNAL:return Uu.INTERNAL;case $l.UNAVAILABLE:return Uu.UNAVAILABLE;case $l.UNAUTHENTICATED:return Uu.UNAUTHENTICATED;case $l.INVALID_ARGUMENT:return Uu.INVALID_ARGUMENT;case $l.NOT_FOUND:return Uu.NOT_FOUND;case $l.ALREADY_EXISTS:return Uu.ALREADY_EXISTS;case $l.PERMISSION_DENIED:return Uu.PERMISSION_DENIED;case $l.FAILED_PRECONDITION:return Uu.FAILED_PRECONDITION;case $l.ABORTED:return Uu.ABORTED;case $l.OUT_OF_RANGE:return Uu.OUT_OF_RANGE;case $l.UNIMPLEMENTED:return Uu.UNIMPLEMENTED;case $l.DATA_LOSS:return Uu.DATA_LOSS;default:return Zu()}}(Jl=$l||($l={}))[Jl.OK=0]="OK",Jl[Jl.CANCELLED=1]="CANCELLED",Jl[Jl.UNKNOWN=2]="UNKNOWN",Jl[Jl.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Jl[Jl.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Jl[Jl.NOT_FOUND=5]="NOT_FOUND",Jl[Jl.ALREADY_EXISTS=6]="ALREADY_EXISTS",Jl[Jl.PERMISSION_DENIED=7]="PERMISSION_DENIED",Jl[Jl.UNAUTHENTICATED=16]="UNAUTHENTICATED",Jl[Jl.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Jl[Jl.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Jl[Jl.ABORTED=10]="ABORTED",Jl[Jl.OUT_OF_RANGE=11]="OUT_OF_RANGE",Jl[Jl.UNIMPLEMENTED=12]="UNIMPLEMENTED",Jl[Jl.INTERNAL=13]="INTERNAL",Jl[Jl.UNAVAILABLE=14]="UNAVAILABLE",Jl[Jl.DATA_LOSS=15]="DATA_LOSS";var ih=function(){function t(t,e){this.comparator=t,this.root=e||sh.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,sh.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,sh.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal(function(e,n){return t(e,n),!1})},t.prototype.toString=function(){var t=[];return this.inorderTraversal(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new oh(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new oh(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new oh(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new oh(this.root,t,this.comparator,!0)},t}(),oh=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),sh=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw Zu();if(this.right.isRed())throw Zu();var t=this.left.check();if(t!==this.right.check())throw Zu();return t+(this.isRed()?0:1)},t}();sh.EMPTY=null,sh.RED=!0,sh.BLACK=!1,sh.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw Zu()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw Zu()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw Zu()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw Zu()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw Zu()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new sh(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var ah=function(){function t(t){this.comparator=t,this.data=new ih(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new uh(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new uh(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),uh=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),ch=new ih(bc.comparator);function lh(){return ch}var hh=new ih(bc.comparator);function dh(){return hh}var fh=new ih(bc.comparator);function ph(){return fh}var gh=new ah(bc.comparator);function mh(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=gh,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var vh=new ah($u);function yh(){return vh}var _h=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,wh.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(ec.min(),r,yh(),lh(),mh())},t}(),wh=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(lc.EMPTY_BYTE_STRING,n,mh(),mh(),mh())},t}(),bh=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},Th=function(t,e){this.targetId=t,this.V=e},Ch=function(t,e,n,r){void 0===n&&(n=lc.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Eh=function(){function t(){this.S=0,this.D=kh(),this.C=lc.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"O",{get:function(){return this.F},enumerable:!1,configurable:!0}),t.prototype.$=function(t){t.approximateByteSize()>0&&(this.F=!0,this.C=t)},t.prototype.M=function(){var t=mh(),e=mh(),n=mh();return this.D.forEach(function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Zu()}}),new wh(this.C,this.N,t,e,n)},t.prototype.L=function(){this.F=!1,this.D=kh()},t.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.F=!0,this.N=!0},t}(),Ih=function(){function t(t){this.W=t,this.G=new Map,this.H=lh(),this.J=Sh(),this.Y=new ah($u)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.tt(r=o[i],t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.$(t.resumeToken);break;case 1:r.K(),r.k||r.L(),r.$(t.resumeToken);break;case 2:r.K(),r.k||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.$(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.$(t.resumeToken));break;default:Zu()}})},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach(function(t,r){n.st(r)&&e(r)})},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(Bc(i))if(0===n){var o=new bc(i.path);this.tt(e,o,Mc.newNoDocument(o,ec.min()))}else Ku(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach(function(r,i){var o=e.ot(i);if(o){if(r.current&&Bc(o.target)){var s=new bc(o.target.path);null!==e.H.get(s)||e.at(i,s)||e.tt(i,s,Mc.newNoDocument(s,t))}r.O&&(n.set(i,r.M()),r.L())}});var r=mh();this.J.forEach(function(t,n){var i=!0;n.forEachWhile(function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)}),i&&(r=r.add(t))});var i=new _h(t,n,this.Y,this.H,r);return this.H=lh(),this.J=Sh(),this.Y=new ah($u),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new Eh,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new ah($u),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||Bu("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new Eh),this.W.getRemoteKeysForTarget(t).forEach(function(n){e.tt(t,n,null)})},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function Sh(){return new ih(bc.comparator)}function kh(){return new ih(bc.comparator)}var Ah={asc:"ASCENDING",desc:"DESCENDING"},xh={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Nh=function(t,e){this.databaseId=t,this.I=e};function Ph(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Oh(t,e){return t.I?e.toBase64():e.toUint8Array()}function Rh(t,e){return Ph(t,e.toTimestamp())}function Dh(t){return Ku(!!t),ec.fromTimestamp(function(t){var e=dc(t);return new tc(e.seconds,e.nanos)}(t))}function Lh(t,e){return function(t){return new sc(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function Fh(t){var e=sc.fromString(t);return Ku(sd(e)),e}function Mh(t,e){return Lh(t.databaseId,e.path)}function Uh(t,e){var n=Fh(e);if(n.get(1)!==t.databaseId.projectId)throw new qu(Uu.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new qu(Uu.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new bc(Bh(n))}function qh(t,e){return Lh(t.databaseId,e)}function jh(t){var e=Fh(t);return 4===e.length?sc.emptyPath():Bh(e)}function Vh(t){return new sc(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Bh(t){return Ku(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function Hh(t,e,n){return{name:Mh(t,e),fields:n.toProto().mapValue.fields}}function zh(t,e,n){var r=Uh(t,e.name),i=Dh(e.updateTime),o=new Lc({mapValue:{fields:e.fields}}),s=Mc.newFoundDocument(r,i,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}function Gh(t,e){var n;if(e instanceof Zl)n={update:Hh(t,e.key,e.value)};else if(e instanceof Xl)n={delete:Mh(t,e.key)};else if(e instanceof Kl)n={update:Hh(t,e.key,e.data),updateMask:od(e.fieldMask)};else{if(!(e instanceof th))return Zu();n={verify:Mh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(function(t){return function(t,e){var n=e.transform;if(n instanceof Al)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof xl)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Pl)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Rl)return{fieldPath:e.field.canonicalString(),increment:n.A};throw Zu()}(0,t)})),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Rh(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Zu()}(t,e.precondition)),n}function Zh(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?Ul.updateTime(Dh(t.updateTime)):void 0!==t.exists?Ul.exists(t.exists):Ul.none()}(e.currentDocument):Ul.none(),r=e.updateTransforms?e.updateTransforms.map(function(e){return function(t,e){var n=null;"setToServerValue"in e?(Ku("REQUEST_TIME"===e.setToServerValue),n=new Al):"appendMissingElements"in e?n=new xl(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new Pl(e.removeAllFromArray.values||[]):"increment"in e?n=new Rl(t,e.increment):Zu();var r=uc.fromServerFormat(e.fieldPath);return new Fl(r,n)}(t,e)}):[];if(e.update){var i=Uh(t,e.update.name),o=new Lc({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){return new cc((t.fieldPaths||[]).map(function(t){return uc.fromServerFormat(t)}))}(e.updateMask);return new Kl(i,o,s,n,r)}return new Zl(i,o,n,r)}if(e.delete){var a=Uh(t,e.delete);return new Xl(a,n)}if(e.verify){var u=Uh(t,e.verify);return new th(u,n)}return Zu()}function Kh(t,e){return{documents:[qh(t,e.path)]}}function Wh(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=qh(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=qh(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map(function(t){return function(t){if("=="===t.op){if(Rc(t.value))return{unaryFilter:{field:ed(t.field),op:"IS_NAN"}};if(Oc(t.value))return{unaryFilter:{field:ed(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Rc(t.value))return{unaryFilter:{field:ed(t.field),op:"IS_NOT_NAN"}};if(Oc(t.value))return{unaryFilter:{field:ed(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ed(t.field),op:td(t.op),value:t.value}}}(t)});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map(function(t){return function(t){return{field:ed(t.field),direction:Xh(t.dir)}}(t)})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.I||yc(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=$h(e.startAt)),e.endAt&&(n.structuredQuery.endAt=$h(e.endAt)),n}function Yh(t){var e=jh(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Ku(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=Qh(n.where));var a=[];n.orderBy&&(a=n.orderBy.map(function(t){return function(t){return new tl(nd(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)}));var u=null;n.limit&&(u=function(t){var e;return yc(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=Jh(n.startAt));var l=null;return n.endAt&&(l=Jh(n.endAt)),ol(e,i,a,s,u,"F",c,l)}function Qh(t){return t?void 0!==t.unaryFilter?[id(t)]:void 0!==t.fieldFilter?[rd(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return Qh(t)}).reduce(function(t,e){return t.concat(e)}):Zu():[]}function $h(t){return{before:t.before,values:t.position}}function Jh(t){return new Jc(t.values||[],!!t.before)}function Xh(t){return Ah[t]}function td(t){return xh[t]}function ed(t){return{fieldPath:t.canonicalString()}}function nd(t){return uc.fromServerFormat(t.fieldPath)}function rd(t){return Hc.create(nd(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Zu()}}(t.fieldFilter.op),t.fieldFilter.value)}function id(t){switch(t.unaryFilter.op){case"IS_NAN":var e=nd(t.unaryFilter.field);return Hc.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=nd(t.unaryFilter.field);return Hc.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=nd(t.unaryFilter.field);return Hc.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=nd(t.unaryFilter.field);return Hc.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Zu()}}function od(t){var e=[];return t.fields.forEach(function(t){return e.push(t.canonicalString())}),{fieldPaths:e}}function sd(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function ad(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=cd(e)),e=ud(t.get(n),e);return cd(e)}function ud(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function cd(t){return t+"\x01\x01"}function ld(t){var e=t.length;if(Ku(e>=2),2===e)return Ku("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),sc.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&Zu(),t.charAt(s+1)){case"\x01":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:Zu()}o=s+2}return new sc(r)}var hd=function(t,e){this.seconds=t,this.nanoseconds=e},dd=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};dd.store="owner",dd.key="owner";var fd=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};fd.store="mutationQueues",fd.keyPath="userId";var pd=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};pd.store="mutations",pd.keyPath="batchId",pd.userMutationsIndex="userMutationsIndex",pd.userMutationsKeyPath=["userId","batchId"];var gd=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,ad(e)]},t.key=function(t,e,n){return[t,ad(e),n]},t}();gd.store="documentMutations",gd.PLACEHOLDER=new gd;var md=function(t,e){this.path=t,this.readTime=e},vd=function(t,e){this.path=t,this.version=e},yd=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};yd.store="remoteDocuments",yd.readTimeIndex="readTimeIndex",yd.readTimeIndexPath="readTime",yd.collectionReadTimeIndex="collectionReadTimeIndex",yd.collectionReadTimeIndexPath=["parentPath","readTime"];var _d=function(t){this.byteSize=t};_d.store="remoteDocumentGlobal",_d.key="remoteDocumentGlobalKey";var wd=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};wd.store="targets",wd.keyPath="targetId",wd.queryTargetsIndexName="queryTargetsIndex",wd.queryTargetsKeyPath=["canonicalId","targetId"];var bd=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};bd.store="targetDocuments",bd.keyPath=["targetId","path"],bd.documentTargetsIndex="documentTargetsIndex",bd.documentTargetsKeyPath=["path","targetId"];var Td=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Td.key="targetGlobalKey",Td.store="targetGlobal";var Cd=function(t,e){this.collectionId=t,this.parent=e};Cd.store="collectionParents",Cd.keyPath=["collectionId","parent"];var Ed=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Ed.store="clientMetadata",Ed.keyPath="clientId";var Id=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};Id.store="bundles",Id.keyPath="bundleId";var Sd=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};Sd.store="namedQueries",Sd.keyPath="name";var kd=(0,Fu.__spreadArray)((0,Fu.__spreadArray)([],(0,Fu.__spreadArray)((0,Fu.__spreadArray)([],(0,Fu.__spreadArray)((0,Fu.__spreadArray)([],(0,Fu.__spreadArray)((0,Fu.__spreadArray)([],[fd.store,pd.store,gd.store,yd.store,wd.store,dd.store,Td.store,bd.store]),[Ed.store])),[_d.store])),[Cd.store])),[Id.store,Sd.store]),Ad="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",xd=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(t){return t()})},t}(),Nd=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},Pd=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&Zu(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t(function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}})},t.prototype.toPromise=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.waitFor=function(e){return new t(function(t,n){var r=0,i=0,o=!1;e.forEach(function(e){++r,e.next(function(){++i,o&&i===r&&t()},function(t){return n(t)})}),o=!0,i===r&&t()})},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.waitFor(r)},t}(),Od=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new Nd,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new Ld(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=jd(e.target.error);n.ft.reject(new Ld(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new Ld(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(Bu("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Md(e)},t}(),Rd=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t((0,Oi.getUA)())&&Hu("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return Bu("SimpleDb","Removing database:",t),Ud(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=(0,Oi.getUA)(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var e,n=this;return(0,Fu.__generator)(this,function(r){switch(r.label){case 0:return this.db?[3,2]:(Bu("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new Ld(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new qu(Uu.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new Ld(t,n))},i.onupgradeneeded=function(t){Bu("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.wt.Rt(t.target.result,i.transaction,t.oldVersion,n.version).next(function(){Bu("SimpleDb","Database upgrade to version "+n.version+" complete")})}})]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}})})},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var i,o,s,a,u;return(0,Fu.__generator)(this,function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,l;return(0,Fu.__generator)(this,function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.At(t)];case 2:return a.db=h.sent(),e=Od.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch(function(t){return e.abort(t),Pd.reject(t)}).toPromise(),u={},s.catch(function(){}),[4,e.dt];case 3:return[2,(u.value=(h.sent(),s),u)];case 4:return Bu("SimpleDb","Transaction failed with error:",(c=h.sent()).message,"Retrying:",l="FirebaseError"!==c.name&&o<3),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}})},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),Dd=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return Ud(this.Pt.delete())},t}(),Ld=function(t){function e(e,n){var r=this;return(r=t.call(this,Uu.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return(0,Fu.__extends)(e,t),e}(qu);function Fd(t){return"IndexedDbTransactionError"===t.name}var Md=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(Bu("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Bu("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Ud(n)},t.prototype.add=function(t){return Bu("SimpleDb","ADD",this.store.name,t,t),Ud(this.store.add(t))},t.prototype.get=function(t){var e=this;return Ud(this.store.get(t)).next(function(n){return void 0===n&&(n=null),Bu("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return Bu("SimpleDb","DELETE",this.store.name,t),Ud(this.store.delete(t))},t.prototype.count=function(){return Bu("SimpleDb","COUNT",this.store.name),Ud(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.Ft=function(t,e){Bu("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.kt=!1;var r=this.cursor(n);return this.xt(r,function(t,e,n){return n.delete()})},t.prototype.Ot=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.$t=function(t){var e=this.cursor({});return new Pd(function(n,r){e.onerror=function(t){var e=jd(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.xt=function(t,e){var n=[];return new Pd(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new Dd(i),s=e(i.primaryKey,i.value,o);if(s instanceof Pd){var a=s.catch(function(t){return o.done(),Pd.reject(t)});n.push(a)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}}).next(function(){return Pd.waitFor(n)})},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Ud(t){return new Pd(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=jd(t.target.error);n(e)}})}var qd=!1;function jd(t){var e=Rd._t((0,Oi.getUA)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new qu("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return qd||(qd=!0,setTimeout(function(){throw r},0)),r}}return t}var Vd=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return(0,Fu.__extends)(e,t),e}(xd);function Bd(t,e){var n=Wu(t);return Rd.It(n.Mt,e)}var Hd=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&Vl(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&Bl(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&Bl(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach(function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(ec.min())})},t.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},mh())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Ju(this.mutations,t.mutations,function(t,e){return zl(t,e)})&&Ju(this.baseMutations,t.baseMutations,function(t,e){return zl(t,e)})},t}(),zd=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){Ku(e.mutations.length===r.length);for(var i=ph(),o=e.mutations,s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),Gd=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=ec.min()),void 0===o&&(o=ec.min()),void 0===s&&(s=lc.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),Zd=function(t){this.Lt=t};function Kd(t,e){if(e.document)return zh(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=bc.fromSegments(e.noDocument.path),r=Jd(e.noDocument.readTime),i=Mc.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=bc.fromSegments(e.unknownDocument.path);return r=Jd(e.unknownDocument.version),Mc.newUnknownDocument(o,r)}return Zu()}function Wd(t,e,n){var r=Yd(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o=function(t,e){return{name:Mh(t,e.key),fields:e.data.toProto().mapValue.fields,updateTime:Ph(t,e.version.toTimestamp())}}(t.Lt,e),s=e.hasCommittedMutations;return new yd(null,null,o,s,r,i)}if(e.isNoDocument()){var a=e.key.path.toArray(),u=$d(e.version);return s=e.hasCommittedMutations,new yd(null,new md(a,u),null,s,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),l=$d(e.version);return new yd(new vd(c,l),null,null,!0,r,i)}return Zu()}function Yd(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Qd(t){var e=new tc(t[0],t[1]);return ec.fromTimestamp(e)}function $d(t){var e=t.toTimestamp();return new hd(e.seconds,e.nanoseconds)}function Jd(t){var e=new tc(t.seconds,t.nanoseconds);return ec.fromTimestamp(e)}function Xd(t,e){for(var n=(e.baseMutations||[]).map(function(e){return Zh(t.Lt,e)}),r=0;r<e.mutations.length-1;++r)r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform&&(e.mutations[r].updateTransforms=e.mutations[r+1].transform.fieldTransforms,e.mutations.splice(r+1,1),++r);var i=e.mutations.map(function(e){return Zh(t.Lt,e)}),o=tc.fromMillis(e.localWriteTimeMs);return new Hd(e.batchId,o,n,i)}function tf(t){var e,n,r=Jd(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Jd(t.lastLimboFreeSnapshotVersion):ec.min();return void 0!==t.query.documents?(Ku(1===(n=t.query).documents.length),e=fl(sl(jh(n.documents[0])))):e=function(t){return fl(Yh(t))}(t.query),new Gd(e,t.targetId,0,t.lastListenSequenceNumber,r,i,lc.fromBase64String(t.resumeToken))}function ef(t,e){var n,r=$d(e.snapshotVersion),i=$d(e.lastLimboFreeSnapshotVersion);n=Bc(e.target)?Kh(t.Lt,e.target):Wh(t.Lt,e.target);var o=e.resumeToken.toBase64();return new wd(e.targetId,jc(e.target),r,o,e.sequenceNumber,i,n)}function nf(t){var e=Yh({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?pl(e,e.limit,"L"):e}var rf=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return of(t).get(e).next(function(t){if(t)return{id:(e=t).bundleId,createTime:Jd(e.createTime),version:e.version};var e})},t.prototype.saveBundleMetadata=function(t,e){return of(t).put({bundleId:(n=e).id,createTime:$d(Dh(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return sf(t).get(e).next(function(t){if(t)return{name:(e=t).name,query:nf(e.bundledQuery),readTime:Jd(e.readTime)};var e})},t.prototype.saveNamedQuery=function(t,e){return sf(t).put(function(t){return{name:t.name,readTime:$d(Dh(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function of(t){return Bd(t,Id.store)}function sf(t){return Bd(t,Sd.store)}var af=function(){function t(){this.Bt=new uf}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),Pd.resolve()},t.prototype.getCollectionParents=function(t,e){return Pd.resolve(this.Bt.getEntries(e))},t}(),uf=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new ah(sc.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new ah(sc.comparator)).toArray()},t}(),cf=function(){function t(){this.qt=new uf}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener(function(){n.qt.add(e)});var o={collectionId:r,parent:ad(i)};return lf(t).put(o)}return Pd.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Xu(e),""],!1,!0);return lf(t).Nt(r).next(function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(ld(o.parent))}return n})},t}();function lf(t){return Bd(t,Cd.store)}var hf={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},df=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function ff(t,e,n){var r=t.store(pd.store),i=t.store(gd.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.Ot({range:s},function(t,e,n){return a++,n.delete()});o.push(u.next(function(){Ku(1===a)}));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var d=h[l],f=gd.key(e,d.key.path,n.batchId);o.push(i.delete(f)),c.push(d.key)}return Pd.waitFor(o).next(function(){return c})}function pf(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Zu();e=t.noDocument}return JSON.stringify(e).length}df.DEFAULT_COLLECTION_PERCENTILE=10,df.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,df.DEFAULT=new df(41943040,df.DEFAULT_COLLECTION_PERCENTILE,df.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),df.DISABLED=new df(-1,0,0);var gf=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Qt={}}return t.Kt=function(e,n,r,i){return Ku(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return vf(t).Ot({index:pd.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=yf(t),s=vf(t);return s.add({}).next(function(a){Ku("number"==typeof a);for(var u=new Hd(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map(function(e){return Gh(t.Lt,e)}),i=n.mutations.map(function(e){return Gh(t.Lt,e)});return new pd(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),l=[],h=new ah(function(t,e){return $u(t.canonicalString(),e.canonicalString())}),d=0,f=r;d<f.length;d++){var p=f[d],g=gd.key(i.userId,p.key.path,a);h=h.add(p.key.path.popLast()),l.push(s.put(c)),l.push(o.put(g,gd.PLACEHOLDER))}return h.forEach(function(e){l.push(i.Ut.addToCollectionParentIndex(t,e))}),t.addOnCommittedListener(function(){i.Qt[a]=u.keys()}),Pd.waitFor(l).next(function(){return u})})},t.prototype.lookupMutationBatch=function(t,e){var n=this;return vf(t).get(e).next(function(t){return t?(Ku(t.userId===n.userId),Xd(n.R,t)):null})},t.prototype.jt=function(t,e){var n=this;return this.Qt[e]?Pd.resolve(this.Qt[e]):this.lookupMutationBatch(t,e).next(function(t){if(t){var r=t.keys();return n.Qt[e]=r,r}return null})},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return vf(t).Ot({index:pd.userMutationsIndex,range:i},function(t,e,i){e.userId===n.userId&&(Ku(e.batchId>=r),o=Xd(n.R,e)),i.done()}).next(function(){return o})},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return vf(t).Ot({index:pd.userMutationsIndex,range:e,reverse:!0},function(t,e,r){n=e.batchId,r.done()}).next(function(){return n})},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return vf(t).Nt(pd.userMutationsIndex,n).next(function(t){return t.map(function(t){return Xd(e.R,t)})})},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=gd.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return yf(t).Ot({range:i},function(r,i,s){var a=r[0],u=r[2],c=ld(r[1]);if(a===n.userId&&e.path.isEqual(c))return vf(t).get(u).next(function(t){if(!t)throw Zu();Ku(t.userId===n.userId),o.push(Xd(n.R,t))});s.done()}).next(function(){return o})},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new ah($u),i=[];return e.forEach(function(e){var o=gd.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=yf(t).Ot({range:s},function(t,i,o){var s=t[0],a=t[2],u=ld(t[1]);s===n.userId&&e.path.isEqual(u)?r=r.add(a):o.done()});i.push(a)}),Pd.waitFor(i).next(function(){return n.Wt(t,r)})},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=gd.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new ah($u);return yf(t).Ot({range:s},function(t,e,o){var s=t[0],u=t[2],c=ld(t[1]);s===n.userId&&r.isPrefixOf(c)?c.length===i&&(a=a.add(u)):o.done()}).next(function(){return n.Wt(t,a)})},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(vf(t).get(e).next(function(t){if(null===t)throw Zu();Ku(t.userId===n.userId),r.push(Xd(n.R,t))}))}),Pd.waitFor(i).next(function(){return r})},t.prototype.removeMutationBatch=function(t,e){var n=this;return ff(t.Mt,this.userId,e).next(function(r){return t.addOnCommittedListener(function(){n.Gt(e.batchId)}),Pd.forEach(r,function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)})})},t.prototype.Gt=function(t){delete this.Qt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next(function(n){if(!n)return Pd.resolve();var r=IDBKeyRange.lowerBound(gd.prefixForUser(e.userId)),i=[];return yf(t).Ot({range:r},function(t,n,r){if(t[0]===e.userId){var o=ld(t[1]);i.push(o)}else r.done()}).next(function(){Ku(0===i.length)})})},t.prototype.containsKey=function(t,e){return mf(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return _f(t).get(this.userId).next(function(t){return t||new fd(e.userId,-1,"")})},t}();function mf(t,e,n){var r=gd.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return yf(t).Ot({range:o,kt:!0},function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()}).next(function(){return s})}function vf(t){return Bd(t,pd.store)}function yf(t){return Bd(t,gd.store)}function _f(t){return Bd(t,fd.store)}var wf=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),bf=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next(function(n){var r=new wf(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next(function(){return n.highestTargetId})})},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next(function(t){return ec.fromTimestamp(new tc(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next(function(t){return t.highestListenSequenceNumber})},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)})},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next(function(){return n.Xt(t).next(function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)})})},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next(function(){return Tf(t).delete(e.targetId)}).next(function(){return n.Xt(t)}).next(function(e){return Ku(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)})},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return Tf(t).Ot(function(s,a){var u=tf(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))}).next(function(){return Pd.waitFor(o)}).next(function(){return i})},t.prototype.forEachTarget=function(t,e){return Tf(t).Ot(function(t,n){var r=tf(n);e(r)})},t.prototype.Xt=function(t){return Cf(t).get(Td.key).next(function(t){return Ku(null!==t),t})},t.prototype.Zt=function(t,e){return Cf(t).put(Td.key,e)},t.prototype.te=function(t,e){return Tf(t).put(ef(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next(function(t){return t.targetCount})},t.prototype.getTargetData=function(t,e){var n=jc(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Tf(t).Ot({range:r,index:wd.queryTargetsIndexName},function(t,n,r){var o=tf(n);Vc(e,o.target)&&(i=o,r.done())}).next(function(){return i})},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=Ef(t);return e.forEach(function(e){var s=ad(e.path);i.push(o.put(new bd(n,s))),i.push(r.referenceDelegate.addReference(t,n,e))}),Pd.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=Ef(t);return Pd.forEach(e,function(e){var o=ad(e.path);return Pd.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])})},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=Ef(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Ef(t),i=mh();return r.Ot({range:n,kt:!0},function(t,e,n){var r=ld(t[1]),o=new bc(r);i=i.add(o)}).next(function(){return i})},t.prototype.containsKey=function(t,e){var n=ad(e.path),r=IDBKeyRange.bound([n],[Xu(n)],!1,!0),i=0;return Ef(t).Ot({index:bd.documentTargetsIndex,kt:!0,range:r},function(t,e,n){0!==t[0]&&(i++,n.done())}).next(function(){return i>0})},t.prototype.lt=function(t,e){return Tf(t).get(e).next(function(t){return t?tf(t):null})},t}();function Tf(t){return Bd(t,wd.store)}function Cf(t){return Bd(t,Td.store)}function Ef(t){return Bd(t,bd.store)}function If(t){return(0,Fu.__awaiter)(this,void 0,void 0,function(){return(0,Fu.__generator)(this,function(e){if(t.code!==Uu.FAILED_PRECONDITION||t.message!==Ad)throw t;return Bu("LocalStore","Unexpectedly lost primary lease"),[2]})})}function Sf(t,e){var n=t[1],r=e[1],i=$u(t[0],e[0]);return 0===i?$u(n,r):i}var kf=function(){function t(t){this.ne=t,this.buffer=new ah(Sf),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Sf(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Af=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;Bu("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,function(){return(0,Fu.__awaiter)(e,void 0,void 0,function(){var e;return(0,Fu.__generator)(this,function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return Fd(e=n.sent())?(Bu("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,If(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}})})})},t}(),xf=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return Pd.resolve(Mu.o);var r=new kf(e);return this.ae.forEachTarget(t,function(t){return r.re(t.sequenceNumber)}).next(function(){return n.ae.le(t,function(t){return r.re(t)})}).next(function(){return r.maxValue})},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Bu("LruGarbageCollector","Garbage collection skipped; disabled"),Pd.resolve(hf)):this.getCacheSize(t).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(Bu("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),hf):n.fe(t,e)})},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,o,s,a,u,c=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(function(e){return e>c.params.maximumSequenceNumbersToCollect?(Bu("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)}).next(function(r){return n=r,s=Date.now(),c.removeTargets(t,n,e)}).next(function(e){return i=e,a=Date.now(),c.removeOrphanedDocuments(t,n)}).next(function(t){return u=Date.now(),Vu()<=Ri.LogLevel.DEBUG&&Bu("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),Pd.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})})},t}(),Nf=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new xf(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.de=function(t){var e=0;return this.le(t,function(t){e++}).next(function(){return e})},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,function(t,n){return e(n)})},t.prototype.addReference=function(t,e,n){return Pf(t,n)},t.prototype.removeReference=function(t,e,n){return Pf(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return Pf(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return _f(t).$t(function(r){return mf(t,r,e).next(function(t){return t&&(n=!0),Pd.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,function(s,a){if(a<=e){var u=n._e(t,s).next(function(e){if(!e)return o++,r.getEntry(t,s).next(function(){return r.removeEntry(s),Ef(t).delete([0,ad(s.path)])})});i.push(u)}}).next(function(){return Pd.waitFor(i)}).next(function(){return r.apply(t)}).next(function(){return o})},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return Pf(t,e)},t.prototype.we=function(t,e){var n,r=Ef(t),i=Mu.o;return r.Ot({index:bd.documentTargetsIndex},function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==Mu.o&&e(new bc(ld(n)),i),i=s,n=o):i=Mu.o}).next(function(){i!==Mu.o&&e(new bc(ld(n)),i)})},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function Pf(t,e){return Ef(t).put(function(t,e){return new bd(0,ad(t.path),e)}(e,t.currentSequenceNumber))}var Of=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(this.equalsFn(o[0],t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){rc(this.inner,function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}})},t.prototype.isEmpty=function(){return ic(this.inner)},t}(),Rf=function(){function t(){this.changes=new Of(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:ec.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:Mc.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?Pd.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),Df=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return Mf(t).put(Uf(e),n)},t.prototype.removeEntry=function(t,e){var n=Mf(t),r=Uf(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.me(t,r)})},t.prototype.getEntry=function(t,e){var n=this;return Mf(t).get(Uf(e)).next(function(t){return n.ye(e,t)})},t.prototype.ge=function(t,e){var n=this;return Mf(t).get(Uf(e)).next(function(t){return{document:n.ye(e,t),size:pf(t)}})},t.prototype.getEntries=function(t,e){var n=this,r=lh();return this.pe(t,e,function(t,e){var i=n.ye(t,e);r=r.insert(t,i)}).next(function(){return r})},t.prototype.Ee=function(t,e){var n=this,r=lh(),i=new ih(bc.comparator);return this.pe(t,e,function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,pf(e))}).next(function(){return{documents:r,Te:i}})},t.prototype.pe=function(t,e,n){if(e.isEmpty())return Pd.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return Mf(t).Ot({range:r},function(t,e,r){for(var s=bc.fromSegments(t);o&&bc.comparator(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()}).next(function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=lh(),o=e.path.length+1,s={};if(n.isEqual(ec.min())){var a=e.path.toArray();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.toArray(),c=Yd(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=yd.collectionReadTimeIndex}return Mf(t).Ot(s,function(t,n,s){if(t.length===o){var a=Kd(r.R,n);e.path.isPrefixOf(a.key.path)?yl(e,a)&&(i=i.insert(a.key,a)):s.done()}}).next(function(){return i})},t.prototype.newChangeBuffer=function(t){return new Lf(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return Ff(t).get(_d.key).next(function(t){return Ku(!!t),t})},t.prototype.me=function(t,e){return Ff(t).put(_d.key,e)},t.prototype.ye=function(t,e){if(e){var n=Kd(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(ec.min()))return n}return Mc.newInvalidDocument(t)},t}(),Lf=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new Of(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),r}return(0,Fu.__extends)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new ah(function(t,e){return $u(t.canonicalString(),e.canonicalString())});return this.changes.forEach(function(o,s){var a=e.Ae.get(o);if(s.document.isValidDocument()){var u=Wd(e.Ie.R,s.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=pf(u);r+=c-a,n.push(e.Ie.addEntry(t,o,u))}else if(r-=a,e.trackRemovals){var l=Wd(e.Ie.R,Mc.newNoDocument(o,ec.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,l))}else n.push(e.Ie.removeEntry(t,o))}),i.forEach(function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))}),n.push(this.Ie.updateMetadata(t,r)),Pd.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next(function(t){return n.Ae.set(e,t.size),t.document})},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next(function(t){var e=t.documents;return t.Te.forEach(function(t,e){n.Ae.set(t,e)}),e})},e}(Rf);function Ff(t){return Bd(t,_d.store)}function Mf(t){return Bd(t,yd.store)}function Uf(t){return t.path.toArray()}var qf=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;Ku(n<r&&n>=0&&r<=11);var o=new Od("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(dd.store)}(t),function(t){t.createObjectStore(fd.store,{keyPath:fd.keyPath}),t.createObjectStore(pd.store,{keyPath:pd.keyPath,autoIncrement:!0}).createIndex(pd.userMutationsIndex,pd.userMutationsKeyPath,{unique:!0}),t.createObjectStore(gd.store)}(t),jf(t),function(t){t.createObjectStore(yd.store)}(t));var s=Pd.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(bd.store),t.deleteObjectStore(wd.store),t.deleteObjectStore(Td.store)}(t),jf(t)),s=s.next(function(){return function(t){var e=t.store(Td.store),n=new Td(0,0,ec.min().toTimestamp(),0);return e.put(Td.key,n)}(o)})),n<4&&r>=4&&(0!==n&&(s=s.next(function(){return function(t,e){return e.store(pd.store).Nt().next(function(n){t.deleteObjectStore(pd.store),t.createObjectStore(pd.store,{keyPath:pd.keyPath,autoIncrement:!0}).createIndex(pd.userMutationsIndex,pd.userMutationsKeyPath,{unique:!0});var r=e.store(pd.store),i=n.map(function(t){return r.put(t)});return Pd.waitFor(i)})}(t,o)})),s=s.next(function(){!function(t){t.createObjectStore(Ed.store,{keyPath:Ed.keyPath})}(t)})),n<5&&r>=5&&(s=s.next(function(){return i.Re(o)})),n<6&&r>=6&&(s=s.next(function(){return function(t){t.createObjectStore(_d.store)}(t),i.be(o)})),n<7&&r>=7&&(s=s.next(function(){return i.ve(o)})),n<8&&r>=8&&(s=s.next(function(){return i.Pe(t,o)})),n<9&&r>=9&&(s=s.next(function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(yd.store);e.createIndex(yd.readTimeIndex,yd.readTimeIndexPath,{unique:!1}),e.createIndex(yd.collectionReadTimeIndex,yd.collectionReadTimeIndexPath,{unique:!1})}(e)})),n<10&&r>=10&&(s=s.next(function(){return i.Ve(o)})),n<11&&r>=11&&(s=s.next(function(){!function(t){t.createObjectStore(Id.store,{keyPath:Id.keyPath})}(t),function(t){t.createObjectStore(Sd.store,{keyPath:Sd.keyPath})}(t)})),s},t.prototype.be=function(t){var e=0;return t.store(yd.store).Ot(function(t,n){e+=pf(n)}).next(function(){var n=new _d(e);return t.store(_d.store).put(_d.key,n)})},t.prototype.Re=function(t){var e=this,n=t.store(fd.store),r=t.store(pd.store);return n.Nt().next(function(n){return Pd.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(pd.userMutationsIndex,i).next(function(r){return Pd.forEach(r,function(r){Ku(r.userId===n.userId);var i=Xd(e.R,r);return ff(t,n.userId,i).next(function(){})})})})})},t.prototype.ve=function(t){var e=t.store(bd.store),n=t.store(yd.store);return t.store(Td.store).get(Td.key).next(function(t){var r=[];return n.Ot(function(n,i){var o=new sc(n),s=function(t){return[0,ad(t)]}(o);r.push(e.get(s).next(function(n){return n?Pd.resolve():function(n){return e.put(new bd(0,ad(n),t.highestListenSequenceNumber))}(o)}))}).next(function(){return Pd.waitFor(r)})})},t.prototype.Pe=function(t,e){t.createObjectStore(Cd.store,{keyPath:Cd.keyPath});var n=e.store(Cd.store),r=new uf,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:ad(i)})}};return e.store(yd.store).Ot({kt:!0},function(t,e){var n=new sc(t);return i(n.popLast())}).next(function(){return e.store(gd.store).Ot({kt:!0},function(t,e){var n=ld(t[1]);return i(n.popLast())})})},t.prototype.Ve=function(t){var e=this,n=t.store(wd.store);return n.Ot(function(t,r){var i=tf(r),o=ef(e.R,i);return n.put(o)})},t}();function jf(t){t.createObjectStore(bd.store,{keyPath:bd.keyPath}).createIndex(bd.documentTargetsIndex,bd.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(wd.store,{keyPath:wd.keyPath}).createIndex(wd.queryTargetsIndexName,wd.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Td.store)}var Vf="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Bf=function(){function t(e,n,r,i,o,s,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=s,this.document=a,this.De=c,this.Ce=l,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.Oe=null,this.$e=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new qu(Uu.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Nf(this,i),this.Le=n+"main",this.R=new Zd(u),this.Be=new Rd(this.Le,11,new qf(this.R)),this.qe=new bf(this.referenceDelegate,this.R),this.Ut=new cf,this.Ue=function(t,e){return new Df(t,e)}(this.R,this.Ut),this.Qe=new rf,this.window&&this.window.localStorage?this.Ke=this.window.localStorage:(this.Ke=null,!1===l&&Hu("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new qu(Uu.FAILED_PRECONDITION,Vf);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(e){return t.qe.getHighestSequenceNumber(e)})}).then(function(e){t.Ne=new Mu(e,t.De)}).then(function(){t.xe=!0}).catch(function(e){return t.Be&&t.Be.close(),Promise.reject(e)})},t.prototype.He=function(t){var e=this;return this.Me=function(n){return(0,Fu.__awaiter)(e,void 0,void 0,function(){return(0,Fu.__generator)(this,function(e){return this.started?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt(function(n){return(0,Fu.__awaiter)(e,void 0,void 0,function(){return(0,Fu.__generator)(this,function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget(function(){return(0,Fu.__awaiter)(e,void 0,void 0,function(){return(0,Fu.__generator)(this,function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return zf(e).put(new Ed(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.Je(e).next(function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable(function(){return t.Me(!1)}))})}).next(function(){return t.Ye(e)}).next(function(n){return t.isPrimary&&!n?t.Xe(e).next(function(){return!1}):!!n&&t.Ze(e).next(function(){return!0})})}).catch(function(e){if(Fd(e))return Bu("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return Bu("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(function(e){t.isPrimary!==e&&t.Se.enqueueRetryable(function(){return t.Me(e)}),t.isPrimary=e})},t.prototype.Je=function(t){var e=this;return Hf(t).get(dd.key).next(function(t){return Pd.resolve(e.tn(t))})},t.prototype.en=function(t){return zf(t).delete(this.clientId)},t.prototype.nn=function(){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var t,e,n,r=this;return(0,Fu.__generator)(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.sn(this.$e,18e5)?[3,2]:(this.$e=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var e=Bd(t,Ed.store);return e.Nt().next(function(t){var n=r.rn(t,18e5),i=t.filter(function(t){return-1===n.indexOf(t)});return Pd.forEach(i,function(t){return e.delete(t.clientId)}).next(function(){return i})})}).catch(function(){return[]})]);case 1:if(t=i.sent(),this.Ke)for(e=0,n=t;e<n.length;e++)this.Ke.removeItem(this.on(n[e].clientId));i.label=2;case 2:return[2]}})})},t.prototype.ze=function(){var t=this;this.Oe=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return t.je().then(function(){return t.nn()}).then(function(){return t.ze()})})},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?Pd.resolve(!0):Hf(t).get(dd.key).next(function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new qu(Uu.FAILED_PRECONDITION,Vf);return!1}}return!(!e.networkEnabled||!e.inForeground)||zf(t).Nt().next(function(t){return void 0===e.rn(t,5e3).find(function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))})})}).next(function(t){return e.isPrimary!==t&&Bu("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.shutdown=function(){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var t=this;return(0,Fu.__generator)(this,function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.Oe&&(this.Oe.cancel(),this.Oe=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[dd.store,Ed.store],function(e){var n=new Vd(e,Mu.o);return t.Xe(n).next(function(){return t.en(n)})})];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}})})},t.prototype.rn=function(t,e){var n=this;return t.filter(function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)})},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(e){return zf(e).Nt().next(function(e){return t.rn(e,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return gf.Kt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r,i=this;return Bu("IndexedDbPersistence","Starting transaction:",t),this.Be.runTransaction(t,"readonly"===e?"readonly":"readwrite",kd,function(o){return r=new Vd(o,i.Ne?i.Ne.next():Mu.o),"readwrite-primary"===e?i.Je(r).next(function(t){return!!t||i.Ye(r)}).next(function(e){if(!e)throw Hu("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Se.enqueueRetryable(function(){return i.Me(!1)}),new qu(Uu.FAILED_PRECONDITION,Ad);return n(r)}).next(function(t){return i.Ze(r).next(function(){return t})}):i.dn(r).next(function(){return n(r)})}).then(function(t){return r.raiseOnCommittedEvent(),t})},t.prototype.dn=function(t){var e=this;return Hf(t).get(dd.key).next(function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new qu(Uu.FAILED_PRECONDITION,Vf)})},t.prototype.Ze=function(t){var e=new dd(this.clientId,this.allowTabSynchronization,Date.now());return Hf(t).put(dd.key,e)},t.yt=function(){return Rd.yt()},t.prototype.Xe=function(t){var e=this,n=Hf(t);return n.get(dd.key).next(function(t){return e.tn(t)?(Bu("IndexedDbPersistence","Releasing primary lease."),n.delete(dd.key)):Pd.resolve()})},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(Hu("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.je()})},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.un(),e.Se.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener("unload",this.Fe))},t.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("unload",this.Fe),this.Fe=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Ke)||void 0===e?void 0:e.getItem(this.on(t)));return Bu("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return Hu("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Ke)try{this.Ke.setItem(this.on(this.clientId),String(Date.now()))}catch(t){Hu("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Ke)try{this.Ke.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Hf(t){return Bd(t,dd.store)}function zf(t){return Bd(t,Ed.store)}function Gf(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Zf=function(t,e){this.progress=t,this.wn=e},Kf=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next(function(r){return n.yn(t,e,r)})},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next(function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t})},t.prototype.gn=function(t,e){t.forEach(function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)})},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next(function(e){return n.En(t,e).next(function(){return e})})},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next(function(t){return n.gn(e,t)})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return bc.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):hl(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new bc(e)).next(function(t){var e=dh();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e})},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=dh();return this.Ut.getCollectionParents(t,i).next(function(s){return Pd.forEach(s,function(s){var a=function(t,e){return new il(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.An(t,a,n).next(function(t){t.forEach(function(t,e){o=o.insert(t,e)})})}).next(function(){return o})})},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next(function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)}).next(function(e){return o.Rn(t,i=e,r).next(function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=r.get(c);null==l&&(l=Mc.newInvalidDocument(c),r=r.insert(c,l)),Bl(u,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}})}).next(function(){return r.forEach(function(t,n){yl(e,n)||(r=r.remove(t))}),r})},t.prototype.Rn=function(t,e,n){for(var r=mh(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof Kl&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next(function(t){return t.forEach(function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))}),c})},t}(),Wf=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=mh(),i=mh(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Yf=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(ec.min())?this.Dn(t,e):this.Sn.pn(t,r).next(function(o){var s=i.Cn(e,o);return(al(e)||ul(e))&&i.Nn(e.limitType,s,r,n)?i.Dn(t,e):(Vu()<=Ri.LogLevel.DEBUG&&Bu("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),vl(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next(function(t){return s.forEach(function(e){t=t.insert(e.key,e)}),t}))})},t.prototype.Cn=function(t,e){var n=new ah(_l(t));return e.forEach(function(e,r){yl(t,r)&&(n=n.add(r))}),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return Vu()<=Ri.LogLevel.DEBUG&&Bu("QueryEngine","Using full collection scan to execute query:",vl(e)),this.Sn.getDocumentsMatchingQuery(t,e,ec.min())},t}(),Qf=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new ih($u),this.kn=new Of(function(t){return jc(t)},Vc),this.On=ec.min(),this._n=t.getMutationQueue(n),this.$n=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new Kf(this.$n,this._n,this.persistence.getIndexManager()),this.Qe=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.collect(n,e.Fn)})},t}();function $f(t,e,n,r){return new Qf(t,e,n,r)}function Jf(t,e){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var n,r,i,o;return(0,Fu.__generator)(this,function(s){switch(s.label){case 0:return n=Wu(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",function(t){var o;return n._n.getAllMutationBatches(t).next(function(s){return o=s,r=n.persistence.getMutationQueue(e),i=new Kf(n.$n,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)}).next(function(e){for(var n=[],r=[],s=mh(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)s=s.add(h[l].key)}for(var d=0,f=e;d<f.length;d++){var p=f[d];r.push(p.batchId);for(var g=0,m=p.mutations;g<m.length;g++)s=s.add(m[g].key)}return i.pn(t,s).next(function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}})})})];case 1:return o=s.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}})})}function Xf(t,e){var n=Wu(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var r=e.batch.keys(),i=n.$n.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=Pd.resolve();return o.forEach(function(t){s=s.next(function(){return r.getEntry(e,t)}).next(function(e){var o=n.docVersions.get(t);Ku(null!==o),e.version.compareTo(o)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))})}),s.next(function(){return t._n.removeMutationBatch(e,i)})}(n,t,e,i).next(function(){return i.apply(t)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}function tp(t){var e=Wu(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.qe.getLastRemoteSnapshotVersion(t)})}function ep(t,e){var n=Wu(t),r=e.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(t){var o=n.$n.newChangeBuffer({trackRemovals:!0});i=n.Fn;var s=[];e.targetChanges.forEach(function(e,o){var a=i.get(o);if(a){s.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next(function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)}));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=a.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return Ku(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,c,e)&&s.push(n.qe.updateTargetData(t,c))}}});var a=lh();if(e.documentUpdates.forEach(function(r,i){e.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))}),s.push(np(t,o,e.documentUpdates,r,void 0).next(function(t){a=t})),!r.isEqual(ec.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next(function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)});s.push(u)}return Pd.waitFor(s).next(function(){return o.apply(t)}).next(function(){return n.Mn.En(t,a)}).next(function(){return a})}).then(function(t){return n.Fn=i,t})}function np(t,e,n,r,i){var o=mh();return n.forEach(function(t){return o=o.add(t)}),e.getEntries(t,o).next(function(t){var o=lh();return n.forEach(function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s.isNoDocument()&&s.version.isEqual(ec.min())?(e.removeEntry(n,u),o=o.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(s,u),o=o.insert(n,s)):Bu("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)}),o})}function rp(t,e){var n=Wu(t);return n.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)})}function ip(t,e){var n=Wu(t);return n.persistence.runTransaction("Allocate target","readwrite",function(t){var r;return n.qe.getTargetData(t,e).next(function(i){return i?Pd.resolve(r=i):n.qe.allocateTargetId(t).next(function(i){return r=new Gd(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next(function(){return r})})})}).then(function(t){var r=n.Fn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(t.targetId,t),n.kn.set(e,t.targetId)),t})}function op(t,e,n){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var r,i,o,s;return(0,Fu.__generator)(this,function(a){switch(a.label){case 0:r=Wu(t),i=r.Fn.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,function(t){return r.persistence.referenceDelegate.removeTarget(t,i)})];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!Fd(s=a.sent()))throw s;return Bu("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.Fn=r.Fn.remove(e),r.kn.delete(i.target),[2]}})})}function sp(t,e,n){var r=Wu(t),i=ec.min(),o=mh();return r.persistence.runTransaction("Execute query","readonly",function(t){return function(t,e,n){var r=Wu(t),i=r.kn.get(n);return void 0!==i?Pd.resolve(r.Fn.get(i)):r.qe.getTargetData(e,n)}(r,t,fl(e)).next(function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next(function(t){o=t})}).next(function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:ec.min(),n?o:mh())}).next(function(t){return{documents:t,Bn:o}})})}function ap(t,e){var n=Wu(t),r=Wu(n.qe),i=n.Fn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.lt(t,e).next(function(t){return t?t.target:null})})}function up(t){var e=Wu(t);return e.persistence.runTransaction("Get new document changes","readonly",function(t){return function(t,e,n){var r=Wu(t),i=lh(),o=Yd(n),s=Mf(e),a=IDBKeyRange.lowerBound(o,!0);return s.Ot({index:yd.readTimeIndex,range:a},function(t,e){var n=Kd(r.R,e);i=i.insert(n.key,n),o=e.readTime}).next(function(){return{wn:i,readTime:Qd(o)}})}(e.$n,t,e.On)}).then(function(t){var n=t.wn;return e.On=t.readTime,n})}function cp(t){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var e;return(0,Fu.__generator)(this,function(n){return[2,(e=Wu(t)).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return function(t){var e=Mf(t),n=ec.min();return e.Ot({index:yd.readTimeIndex,reverse:!0},function(t,e,r){e.readTime&&(n=Qd(e.readTime)),r.done()}).next(function(){return n})}(t)}).then(function(t){e.On=t})]})})}function lp(t,e,n,r){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var i,o,s,a,u,c,l,h,d,f;return(0,Fu.__generator)(this,function(p){switch(p.label){case 0:for(i=Wu(t),o=mh(),s=lh(),a=ph(),u=0,c=n;u<c.length;u++)h=e.qn((l=c[u]).metadata.name),l.document&&(o=o.add(h)),s=s.insert(h,e.Un(l)),a=a.insert(h,e.Qn(l.metadata.readTime));return d=i.$n.newChangeBuffer({trackRemovals:!0}),[4,ip(i,function(t){return fl(sl(sc.fromString("__bundle__/docs/"+t)))}(r))];case 1:return f=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",function(t){return np(t,d,s,ec.min(),a).next(function(e){return d.apply(t),e}).next(function(e){return i.qe.removeMatchingKeysForTargetId(t,f.targetId).next(function(){return i.qe.addMatchingKeys(t,o,f.targetId)}).next(function(){return i.Mn.En(t,e)}).next(function(){return e})})})]}})})}function hp(t,e,n){return void 0===n&&(n=mh()),(0,Fu.__awaiter)(this,void 0,void 0,function(){var r,i;return(0,Fu.__generator)(this,function(o){switch(o.label){case 0:return[4,ip(t,fl(nf(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=Wu(t)).persistence.runTransaction("Save named query","readwrite",function(t){var o=Dh(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Qe.saveNamedQuery(t,e);var s=r.withResumeToken(lc.EMPTY_BYTE_STRING,o);return i.Fn=i.Fn.insert(s.targetId,s),i.qe.updateTargetData(t,s).next(function(){return i.qe.removeMatchingKeysForTargetId(t,r.targetId)}).next(function(){return i.qe.addMatchingKeys(t,n,r.targetId)}).next(function(){return i.Qe.saveNamedQuery(t,e)})})]}})})}var dp=function(){function t(t){this.R=t,this.Kn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return Pd.resolve(this.Kn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Kn.set(e.id,{id:(n=e).id,version:n.version,createTime:Dh(n.createTime)}),Pd.resolve()},t.prototype.getNamedQuery=function(t,e){return Pd.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:nf(t.bundledQuery),readTime:Dh(t.readTime)}}(e)),Pd.resolve()},t}(),fp=function(){function t(){this.Wn=new ah(pp.Gn),this.zn=new ah(pp.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new pp(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},t.prototype.removeReference=function(t,e){this.Yn(new pp(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},t.prototype.Zn=function(t){var e=this,n=new bc(new sc([])),r=new pp(n,t),i=new pp(n,t+1),o=[];return this.zn.forEachInRange([r,i],function(t){e.Yn(t),o.push(t.key)}),o},t.prototype.ts=function(){var t=this;this.Wn.forEach(function(e){return t.Yn(e)})},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new bc(new sc([])),n=new pp(e,t),r=new pp(e,t+1),i=mh();return this.zn.forEachInRange([n,r],function(t){i=i.add(t.key)}),i},t.prototype.containsKey=function(t){var e=new pp(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),pp=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return bc.comparator(t.key,e.key)||$u(t.ns,e.ns)},t.Hn=function(t,e){return $u(t.ns,e.ns)||bc.comparator(t.key,e.key)},t}(),gp=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new ah(pp.Gn)}return t.prototype.checkEmpty=function(t){return Pd.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++;var o=new Hd(i,e,n,r);this._n.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.rs=this.rs.add(new pp(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return Pd.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return Pd.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this.cs(e+1),r=n<0?0:n;return Pd.resolve(this._n.length>r?this._n[r]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return Pd.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return Pd.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new pp(e,0),i=new pp(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],function(t){var e=n.os(t.ns);o.push(e)}),Pd.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new ah($u);return e.forEach(function(t){var e=new pp(t,0),i=new pp(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],function(t){r=r.add(t.ns)})}),Pd.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;bc.isDocumentKey(i)||(i=i.child(""));var o=new pp(new bc(i),0),s=new ah($u);return this.rs.forEachWhile(function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(s=s.add(t.ns)),!0)},o),Pd.resolve(this.us(s))},t.prototype.us=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.os(t);null!==r&&n.push(r)}),n},t.prototype.removeMutationBatch=function(t,e){var n=this;Ku(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return Pd.forEach(e.mutations,function(i){var o=new pp(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(function(){n.rs=r})},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new pp(e,0),r=this.rs.firstAfterOrEqual(n);return Pd.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return Pd.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),mp=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new ih(bc.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:s,readTime:n}),this.size+=s-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return Pd.resolve(n?n.document.clone():Mc.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=lh();return e.forEach(function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():Mc.newInvalidDocument(t))}),Pd.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=lh(),i=new bc(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var s=o.getNext(),a=s.value,u=a.document,c=a.readTime;if(!e.path.isPrefixOf(s.key.path))break;c.compareTo(n)<=0||yl(e,u)&&(r=r.insert(u.key,u.clone()))}return Pd.resolve(r)},t.prototype.fs=function(t,e){return Pd.forEach(this.docs,function(t){return e(t)})},t.prototype.newChangeBuffer=function(t){return new vp(this)},t.prototype.getSize=function(t){return Pd.resolve(this.size)},t}(),vp=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return(0,Fu.__extends)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach(function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)}),Pd.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(Rf),yp=function(){function t(t){this.persistence=t,this.ds=new Of(function(t){return jc(t)},Vc),this.lastRemoteSnapshotVersion=ec.min(),this.highestTargetId=0,this.ws=0,this._s=new fp,this.targetCount=0,this.ys=wf.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach(function(t,n){return e(n)}),Pd.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return Pd.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return Pd.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),Pd.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),Pd.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new wf(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,Pd.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),Pd.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,Pd.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach(function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.ds.delete(s),o.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),Pd.waitFor(o).next(function(){return i})},t.prototype.getTargetCount=function(t){return Pd.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return Pd.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),Pd.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.markPotentiallyOrphaned(t,e))}),Pd.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),Pd.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return Pd.resolve(n)},t.prototype.containsKey=function(t,e){return Pd.resolve(this._s.containsKey(e))},t}(),_p=function(){function t(t,e){var n=this;this.gs={},this.Ne=new Mu(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new yp(this),this.Ut=new af,this.Ue=function(t,e){return new mp(t,function(t){return n.referenceDelegate.ps(t)})}(this.Ut),this.R=new Zd(e),this.Qe=new dp(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new gp(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r=this;Bu("MemoryPersistence","Starting transaction:",t);var i=new wp(this.Ne.next());return this.referenceDelegate.Es(),n(i).next(function(t){return r.referenceDelegate.Ts(i).next(function(){return t})}).toPromise().then(function(t){return i.raiseOnCommittedEvent(),t})},t.prototype.Is=function(t,e){return Pd.or(Object.values(this.gs).map(function(n){return function(){return n.containsKey(t,e)}}))},t}(),wp=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return(0,Fu.__extends)(e,t),e}(xd),bp=function(){function t(t){this.persistence=t,this.As=new fp,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw Zu()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),Pd.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),Pd.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),Pd.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach(function(t){return n.vs.add(t.toString())});var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(function(t){t.forEach(function(t){return n.vs.add(t.toString())})}).next(function(){return r.removeTargetData(t,e)})},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Pd.forEach(this.vs,function(r){var i=bc.fromPath(r);return e.Ps(t,i).next(function(t){t||n.removeEntry(i)})}).next(function(){return e.Rs=null,n.apply(t)})},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next(function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())})},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return Pd.or([function(){return Pd.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),Tp=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function Cp(t,e){return"firestore_clients_"+t+"_"+e}function Ep(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function Ip(t,e){return"firestore_targets_"+t+"_"+e}Tp.UNAUTHENTICATED=new Tp(null),Tp.GOOGLE_CREDENTIALS=new Tp("google-credentials-uid"),Tp.FIRST_PARTY=new Tp("first-party-uid");var Sp=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new qu(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(Hu("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),kp=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new qu(i.error.code,i.error.message)),o?new t(e,i.state,r):(Hu("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Ap=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=yh(),s=0;i&&s<r.activeTargetIds.length;++s)i=wc(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(Hu("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),xp=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(Hu("SharedClientState","Failed to parse online state: "+e),null)},t}(),Np=function(){function t(){this.activeTargetIds=yh()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Pp=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new ih($u),this.started=!1,this.Os=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.$s=Cp(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.ks=this.ks.insert(this.Ns,new Np),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Qs=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var t,e,n,r,i,o,s,a,u,c,l=this;return(0,Fu.__generator)(this,function(h){switch(h.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(Cp(this.persistenceKey,r)))&&(o=Ap.Vs(r,i))&&(this.ks=this.ks.insert(o.clientId,o));for(this.Ks(),(s=this.storage.getItem(this.Us))&&(a=this.js(s))&&this.Ws(a),u=0,c=this.Os;u<c.length;u++)this.Fs(c[u]);return this.Os=[],this.window.addEventListener("unload",function(){return l.shutdown()}),this.started=!0,[2]}})})},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach(function(n,r){r.activeTargetIds.has(t)&&(e=!0)}),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(Ip(this.persistenceKey,t));if(n){var r=kp.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Ks(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Ks()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(Ip(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach(function(t){r.Hs(t)}),this.currentUser=t,n.forEach(function(t){r.addPendingMutation(t)})},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.$s),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return Bu("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){Bu("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){Bu("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Fs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(Bu("SharedClientState","EVENT",n.key,n.newValue),n.key===this.$s)return void Hu("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable(function(){return(0,Fu.__awaiter)(e,void 0,void 0,function(){var t,e,r,i,o,s;return(0,Fu.__generator)(this,function(a){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(s=function(t){var e=Mu.o;if(null!=t)try{var n=JSON.parse(t);Ku("number"==typeof n),e=n}catch(t){Hu("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==Mu.o&&this.sequenceNumberHandler(s);else if(n.key===this.Qs)return[2,this.syncEngine.ci()]}else this.Os.push(n);return[2]})})})}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Ks=function(){this.setItem(this.$s,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new Sp(this.currentUser,t,e,n),i=Ep(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=Ep(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){this.storage.setItem(this.Us,JSON.stringify({clientId:this.Ns,onlineState:t}))},t.prototype.Ys=function(t,e,n){var r=Ip(this.persistenceKey,t),i=new kp(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Qs,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return Ap.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]);return Sp.Vs(new Tp(void 0!==n[2]?n[2]:null),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return kp.Vs(r,e)},t.prototype.js=function(t){return xp.Vs(t)},t.prototype.ii=function(t){return(0,Fu.__awaiter)(this,void 0,void 0,function(){return(0,Fu.__generator)(this,function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(Bu("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),o=this.Gs(r),s=[],a=[];return o.forEach(function(t){i.has(t)||s.push(t)}),i.forEach(function(t){o.has(t)||a.push(t)}),this.syncEngine.hi(s,a).then(function(){n.ks=r})},t.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=yh();return t.forEach(function(t,n){e=e.unionWith(n.activeTargetIds)}),e},t}(),Op=function(){function t(){this.li=new Np,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new Np,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),Rp=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),Dp=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){Bu("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){Bu("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Lp={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Fp=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),Mp=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n}return(0,Fu.__extends)(e,t),e.prototype.ki=function(t,e,n,r){return new Promise(function(i,o){var s=new Lu;s.listenOnce(Ou.COMPLETE,function(){try{switch(s.getLastErrorCode()){case Pu.NO_ERROR:var e=s.getResponseJson();Bu("Connection","XHR received:",JSON.stringify(e)),i(e);break;case Pu.TIMEOUT:Bu("Connection",'RPC "'+t+'" timed out'),o(new qu(Uu.DEADLINE_EXCEEDED,"Request time out"));break;case Pu.HTTP_ERROR:var n=s.getStatus();if(Bu("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(Uu).indexOf(e)>=0?e:Uu.UNKNOWN}(r.status);o(new qu(a,r.message))}else o(new qu(Uu.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new qu(Uu.UNAVAILABLE,"Connection failed."));break;default:Zu()}}finally{Bu("Connection",'RPC "'+t+'" completed.')}});var a=JSON.stringify(r);s.send(e,"POST",a,n,15)})},e.prototype.$i=function(t,e){var n=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new Su,i=xs(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.Fi(o.initMessageHeaders,e),(0,Oi.isMobileCordova)()||(0,Oi.isReactNative)()||(0,Oi.isElectron)()||(0,Oi.isIE)()||(0,Oi.isUWP)()||(0,Oi.isBrowserExtension)()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");Bu("Connection","Creating WebChannel: "+s,o);var a=r.createWebChannel(s,o),u=!1,c=!1,l=new Fp({Ei:function(t){c?Bu("Connection","Not sending because WebChannel is closed:",t):(u||(Bu("Connection","Opening WebChannel transport."),a.open(),u=!0),Bu("Connection","WebChannel sending:",t),a.send(t))},Ti:function(){return a.close()}}),h=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return h(a,Du.EventType.OPEN,function(){c||Bu("Connection","WebChannel transport opened.")}),h(a,Du.EventType.CLOSE,function(){c||(c=!0,Bu("Connection","WebChannel transport closed"),l.Vi())}),h(a,Du.EventType.ERROR,function(t){c||(c=!0,zu("Connection","WebChannel transport errored:",t),l.Vi(new qu(Uu.UNAVAILABLE,"The operation could not be completed")))}),h(a,Du.EventType.MESSAGE,function(t){var e;if(!c){var n=t.data[0];Ku(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){Bu("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=$l[t];if(void 0!==e)return rh(e)}(i),s=r.message;void 0===o&&(o=Uu.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),c=!0,l.Vi(new qu(o,s)),a.close()}else Bu("Connection","WebChannel received:",n),l.Si(n)}}),h(i,Ru.STAT_EVENT,function(t){10===t.stat?Bu("Connection","Detected buffering proxy"):11===t.stat&&Bu("Connection","Detected no buffering proxy")}),setTimeout(function(){l.Pi()},0),l},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.Di=(t.ssl?"https":"http")+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);Bu("RestConnection","Sending: ",i,n);var o={};return this.Fi(o,r),this.ki(t,i,o,n).then(function(t){return Bu("RestConnection","Received: ",t),t},function(e){throw zu("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e})},t.prototype.Oi=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.5.0",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){return this.Di+"/v1/"+e+":"+Lp[t]},t}());function Up(){return"undefined"!=typeof window?window:null}function qp(){return"undefined"!=typeof document?document:null}function jp(t){return new Nh(t,!0)}var Vp=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Qi=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Ki=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Qi),i=Math.max(0,n-r);i>0&&Bu("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,function(){return e.Qi=Date.now(),t()}),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),Bp=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new Vp(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return(0,Fu.__awaiter)(this,void 0,void 0,function(){return(0,Fu.__generator)(this,function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,function(){return t.rr()}))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return(0,Fu.__awaiter)(this,void 0,void 0,function(){return(0,Fu.__generator)(this,function(t){return this.er()?[2,this.close(0)]:[2]})})},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return(0,Fu.__awaiter)(this,void 0,void 0,function(){return(0,Fu.__generator)(this,function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===Uu.RESOURCE_EXHAUSTED?(Hu(e.toString()),Hu("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Ki()):e&&e.code===Uu.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}})})},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then(function(e){t.Yi===n&&t.lr(e)},function(n){e(function(){var e=new qu(Uu.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)})})},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii(function(){n(function(){return e.state=2,e.listener.Ii()})}),this.stream.Ri(function(t){n(function(){return e.dr(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji(function(){return(0,Fu.__awaiter)(t,void 0,void 0,function(){return(0,Fu.__generator)(this,function(t){return this.state=0,this.start(),[2]})})})},t.prototype.dr=function(t){return Bu("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget(function(){return e.Yi===t?n():(Bu("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),Hp=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,s}return(0,Fu.__extends)(e,t),e.prototype.wr=function(t){return this.Hi.$i("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Zu()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.I?(Ku(void 0===e||"string"==typeof e),lc.fromBase64String(e||"")):(Ku(void 0===e||e instanceof Uint8Array),lc.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?Uu.UNKNOWN:rh(t.code);return new qu(e,t.message||"")}(a);n=new Ch(r,i,o,s||null)}else if("documentChange"in e){i=Uh(t,(r=e.documentChange).document.name),o=Dh(r.document.updateTime);var a=new Lc({mapValue:{fields:r.document.fields}}),u=(s=Mc.newFoundDocument(i,o,a),r.targetIds||[]);n=new bh(u,r.removedTargetIds||[],s.key,s)}else if("documentDelete"in e)i=Uh(t,(r=e.documentDelete).document),o=r.readTime?Dh(r.readTime):ec.min(),a=Mc.newNoDocument(i,o),n=new bh([],s=r.removedTargetIds||[],a.key,a);else if("documentRemove"in e)i=Uh(t,(r=e.documentRemove).document),n=new bh([],o=r.removedTargetIds||[],i,null);else{if(!("filter"in e))return Zu();var c=e.filter;i=new eh(r=c.count||0),n=new Th(o=c.targetId,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return ec.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?ec.min():e.readTime?Dh(e.readTime):ec.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=Vh(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=Bc(r)?{documents:Kh(t,r)}:{query:Wh(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=Oh(t,e.resumeToken):e.snapshotVersion.compareTo(ec.min())>0&&(n.readTime=Ph(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Zu()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=Vh(this.R),e.removeTarget=t,this.cr(e)},e}(Bp),zp=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,s.gr=!1,s}return(0,Fu.__extends)(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.$i("Write",t)},e.prototype.onMessage=function(t){if(Ku(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(Ku(void 0!==e),t.map(function(t){return function(t,e){var n=Dh(t.updateTime?t.updateTime:e);return n.isEqual(ec.min())&&(n=Dh(e)),new Ml(n,t.transformResults||[])}(t,e)})):[]}(t.writeResults,t.commitTime),n=Dh(t.commitTime);return this.listener.Tr(n,e)}return Ku(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=Vh(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map(function(t){return Gh(e.R,t)})};this.cr(n)},e}(Bp),Gp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return(0,Fu.__extends)(e,t),e.prototype.br=function(){if(this.Rr)throw new qu(Uu.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.Ni(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===Uu.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new qu(Uu.UNKNOWN,t.toString())})},e.prototype.Oi=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.Oi(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===Uu.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new qu(Uu.UNKNOWN,t.toString())})},e.prototype.terminate=function(){this.Rr=!0},e}(function(){}),Zp=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()}))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(Hu(e),this.Vr=!1):Bu("OnlineStateTracker",e)},t.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),Kp=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.Or=new Map,this.$r=new Set,this.Mr=[],this.Lr=i,this.Lr.di(function(t){n.enqueueAndForget(function(){return(0,Fu.__awaiter)(o,void 0,void 0,function(){return(0,Fu.__generator)(this,function(t){switch(t.label){case 0:return ng(this)?(Bu("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var e;return(0,Fu.__generator)(this,function(n){switch(n.label){case 0:return(e=Wu(t)).$r.add(4),[4,Yp(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.$r.delete(4),[4,Wp(e)];case 2:return n.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.Br=new Zp(n,r)};function Wp(t){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var e,n;return(0,Fu.__generator)(this,function(r){switch(r.label){case 0:if(!ng(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function Yp(t){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var e,n;return(0,Fu.__generator)(this,function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function Qp(t,e){var n=Wu(t);n.Or.has(e.targetId)||(n.Or.set(e.targetId,e),eg(n)?tg(n):vg(n).er()&&Jp(n,e))}function $p(t,e){var n=Wu(t),r=vg(n);n.Or.delete(e),r.er()&&Xp(n,e),0===n.Or.size&&(r.er()?r.ir():ng(n)&&n.Br.set("Unknown"))}function Jp(t,e){t.qr.U(e.targetId),vg(t).mr(e)}function Xp(t,e){t.qr.U(e),vg(t).yr(e)}function tg(t){t.qr=new Ih({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.Or.get(e)||null}}),vg(t).start(),t.Br.Sr()}function eg(t){return ng(t)&&!vg(t).tr()&&t.Or.size>0}function ng(t){return 0===Wu(t).$r.size}function rg(t){t.qr=void 0}function ig(t){return(0,Fu.__awaiter)(this,void 0,void 0,function(){return(0,Fu.__generator)(this,function(e){return t.Or.forEach(function(e,n){Jp(t,e)}),[2]})})}function og(t,e){return(0,Fu.__awaiter)(this,void 0,void 0,function(){return(0,Fu.__generator)(this,function(n){return rg(t),eg(t)?(t.Br.Nr(e),tg(t)):t.Br.set("Unknown"),[2]})})}function sg(t,e,n){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var r,i,o;return(0,Fu.__generator)(this,function(s){switch(s.label){case 0:if(t.Br.set("Online"),!(e instanceof Ch&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var n,r,i,o;return(0,Fu.__generator)(this,function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?t.Or.has(o=i[r])?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]:[3,5];case 2:s.sent(),t.Or.delete(o),t.qr.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}})})}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),Bu("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,ag(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof bh?t.qr.X(e):e instanceof Th?t.qr.rt(e):t.qr.et(e),n.isEqual(ec.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,tp(t.localStore)];case 8:return i=s.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach(function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.Or.get(r);i&&t.Or.set(r,i.withResumeToken(n.resumeToken,e))}}),n.targetMismatches.forEach(function(e){var n=t.Or.get(e);if(n){t.Or.set(e,n.withResumeToken(lc.EMPTY_BYTE_STRING,n.snapshotVersion)),Xp(t,e);var r=new Gd(n.target,e,1,n.sequenceNumber);Jp(t,r)}}),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return Bu("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,ag(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}})})}function ag(t,e,n){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var r=this;return(0,Fu.__generator)(this,function(i){switch(i.label){case 0:if(!Fd(e))throw e;return t.$r.add(1),[4,Yp(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return tp(t.localStore)}),t.asyncQueue.enqueueRetryable(function(){return(0,Fu.__awaiter)(r,void 0,void 0,function(){return(0,Fu.__generator)(this,function(e){switch(e.label){case 0:return Bu("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.$r.delete(1),[4,Wp(t)];case 2:return e.sent(),[2]}})})}),[2]}})})}function ug(t,e){return e().catch(function(n){return ag(t,n,e)})}function cg(t){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var e,n,r,i,o;return(0,Fu.__generator)(this,function(s){switch(s.label){case 0:e=Wu(t),n=yg(e),r=e.kr.length>0?e.kr[e.kr.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return ng(t)&&t.kr.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,rp(e.localStore,r)];case 3:return null===(i=s.sent())?(0===e.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.kr.push(e);var n=yg(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,ag(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return lg(e)&&hg(e),[2]}})})}function lg(t){return ng(t)&&!yg(t).tr()&&t.kr.length>0}function hg(t){yg(t).start()}function dg(t){return(0,Fu.__awaiter)(this,void 0,void 0,function(){return(0,Fu.__generator)(this,function(e){return yg(t).Ar(),[2]})})}function fg(t){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var e,n,r;return(0,Fu.__generator)(this,function(i){for(e=yg(t),n=0,r=t.kr;n<r.length;n++)e.Er(r[n].mutations);return[2]})})}function pg(t,e,n){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var r,i;return(0,Fu.__generator)(this,function(o){switch(o.label){case 0:return r=t.kr.shift(),i=zd.from(r,e,n),[4,ug(t,function(){return t.remoteSyncer.applySuccessfulWrite(i)})];case 1:return o.sent(),[4,cg(t)];case 2:return o.sent(),[2]}})})}function gg(t,e){return(0,Fu.__awaiter)(this,void 0,void 0,function(){return(0,Fu.__generator)(this,function(n){switch(n.label){case 0:return e&&yg(t).pr?[4,function(t,e){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var n,r;return(0,Fu.__generator)(this,function(i){switch(i.label){case 0:return nh(r=e.code)&&r!==Uu.ABORTED?(n=t.kr.shift(),yg(t).sr(),[4,ug(t,function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)})]):[3,3];case 1:return i.sent(),[4,cg(t)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return lg(t)&&hg(t),[2]}})})}function mg(t,e){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var n;return(0,Fu.__generator)(this,function(r){switch(r.label){case 0:return n=Wu(t),e?(n.$r.delete(2),[4,Wp(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.$r.add(2),[4,Yp(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function vg(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=Wu(t);return r.br(),new Hp(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:ig.bind(null,t),Ri:og.bind(null,t),_r:sg.bind(null,t)}),t.Mr.push(function(n){return(0,Fu.__awaiter)(e,void 0,void 0,function(){return(0,Fu.__generator)(this,function(e){switch(e.label){case 0:return n?(t.Ur.sr(),eg(t)?tg(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),rg(t),e.label=3;case 3:return[2]}})})})),t.Ur}function yg(t){var e=this;return t.Qr||(t.Qr=function(t,e,n){var r=Wu(t);return r.br(),new zp(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:dg.bind(null,t),Ri:gg.bind(null,t),Ir:fg.bind(null,t),Tr:pg.bind(null,t)}),t.Mr.push(function(n){return(0,Fu.__awaiter)(e,void 0,void 0,function(){return(0,Fu.__generator)(this,function(e){switch(e.label){case 0:return n?(t.Qr.sr(),[4,cg(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Qr.stop()];case 3:e.sent(),t.kr.length>0&&(Bu("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),e.label=4;case 4:return[2]}})})})),t.Qr}var _g=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Nd,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(t){})}return t.createAndSchedule=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new qu(Uu.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(e){return t.deferred.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function wg(t,e){if(Hu("AsyncQueue",e+": "+t),Fd(t))return new qu(Uu.UNAVAILABLE,e+": "+t);throw t}var bg=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||bc.comparator(e.key,n.key)}:function(t,e){return bc.comparator(t.key,e.key)},this.keyedMap=dh(),this.sortedSet=new ih(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),Tg=function(){function t(){this.Kr=new ih(bc.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Kr.get(e);n?0!==t.type&&3===n.type?this.Kr=this.Kr.insert(e,t):3===t.type&&1!==n.type?this.Kr=this.Kr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Kr=this.Kr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Kr=this.Kr.remove(e):1===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):Zu():this.Kr=this.Kr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Kr.inorderTraversal(function(e,n){t.push(n)}),t},t}(),Cg=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach(function(t){o.push({type:0,doc:t})}),new t(e,n,bg.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&gl(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),Eg=function(){this.Wr=void 0,this.listeners=[]},Ig=function(){this.queries=new Of(function(t){return ml(t)},gl),this.onlineState="Unknown",this.Gr=new Set};function Sg(t,e){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return(0,Fu.__generator)(this,function(c){switch(c.label){case 0:if(n=Wu(t),i=!1,(o=n.queries.get(r=e.query))||(i=!0,o=new Eg),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.onListen(r)];case 2:return s.Wr=c.sent(),[3,4];case 3:return a=c.sent(),u=wg(a,"Initialization of query '"+vl(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&Ng(n),[2]}})})}function kg(t,e){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s;return(0,Fu.__generator)(this,function(a){return n=Wu(t),i=!1,(o=n.queries.get(r=e.query))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]})})}function Ag(t,e){for(var n=Wu(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=n.queries.get(s.query);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].Hr(s)&&(r=!0);a.Wr=s}}r&&Ng(n)}function xg(t,e,n){var r=Wu(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function Ng(t){t.Gr.forEach(function(t){t.next()})}var Pg=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Cg(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){return!t.fromCache||!(this.options.so&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=Cg.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),Og=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),Rg=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return Uh(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?zh(this.R,t.document,!1):Mc.newNoDocument(this.qn(t.metadata.name),this.Qn(t.metadata.readTime))},t.prototype.Qn=function(t){return Dh(t)},t}(),Dg=function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=Lg(t)}return t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new Rg(this.R),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.qn(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],l=(e.get(c)||mh()).add(s);e.set(c,l)}}return e},t.prototype.complete=function(){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var t,e,n,r,i;return(0,Fu.__generator)(this,function(o){switch(o.label){case 0:return[4,lp(this.localStore,new Rg(this.R),this.documents,this.ro.id)];case 1:t=o.sent(),e=this.co(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?[4,hp(this.localStore,i=r[n],e.get(i.name))]:[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new Zf(Object.assign({},this.progress),t))]}})})},t}();function Lg(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var Fg=function(t){this.key=t},Mg=function(t){this.key=t},Ug=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=mh(),this.mutatedKeys=mh(),this.lo=_l(t),this.fo=new bg(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new Tg,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=al(this.query)&&i.size===this.query.limit?i.last():null,c=ul(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(function(t,e){var l=i.get(t),h=yl(n.query,e)?e:null,d=!!l&&n.mutatedKeys.has(l.key),f=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?d!==f&&(r.track({type:3,doc:h}),p=!0):n.yo(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.lo(h,u)>0||c&&n.lo(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(a=!0)),p&&(h?(s=s.add(h),o=f?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))}),al(this.query)||ul(this.query))for(;s.size>this.query.limit;){var l=al(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fo:s,mo:r,Nn:a,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Zu()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)}),this.po(n);var s=e?this.Eo():[],a=0===this.ho.size&&this.current?1:0,u=a!==this.ao;return this.ao=a,0!==o.length||u?{snapshot:new Cg(this.query,t.fo,i,o,t.mutatedKeys,0===a,u,!1),To:s}:{To:s}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new Tg,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach(function(t){return e.uo=e.uo.add(t)}),t.modifiedDocuments.forEach(function(t){}),t.removedDocuments.forEach(function(t){return e.uo=e.uo.delete(t)}),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=mh(),this.fo.forEach(function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))});var n=[];return e.forEach(function(e){t.ho.has(e)||n.push(new Mg(e))}),this.ho.forEach(function(t){e.has(t)||n.push(new Fg(t))}),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=mh();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return Cg.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),qg=function(t,e,n){this.query=t,this.targetId=e,this.view=n},jg=function(t){this.key=t,this.bo=!1},Vg=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new Of(function(t){return ml(t)},gl),this.Vo=new Map,this.So=new Set,this.Do=new ih(bc.comparator),this.Co=new Map,this.No=new fp,this.xo={},this.Fo=new Map,this.ko=wf.Yt(),this.onlineState="Unknown",this.Oo=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.Oo},enumerable:!1,configurable:!0}),t}();function Bg(t,e){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s;return(0,Fu.__generator)(this,function(a){switch(a.label){case 0:return n=vm(t),(i=n.Po.get(e))?(n.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.Ro(),[3,4]):[3,1];case 1:return[4,ip(n.localStore,fl(e))];case 2:return o=a.sent(),s=n.sharedClientState.addLocalQueryTarget(o.targetId),[4,Hg(n,e,o.targetId,"current"===s)];case 3:r=a.sent(),n.isPrimaryClient&&Qp(n.remoteStore,o),a.label=4;case 4:return[2,r]}})})}function Hg(t,e,n,r){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var i,o,s,a,u,c;return(0,Fu.__generator)(this,function(l){switch(l.label){case 0:return t.$o=function(e,n,r){return function(t,e,n,r){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var i,o,s;return(0,Fu.__generator)(this,function(a){switch(a.label){case 0:return(i=e.view._o(n)).Nn?[4,sp(t.localStore,e.query,!1).then(function(t){return e.view._o(t.documents,i)})]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),s=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(nm(t,e.targetId,s.To),s.snapshot)]}})})}(t,e,n,r)},[4,sp(t.localStore,e,!0)];case 1:return i=l.sent(),o=new Ug(e,i.Bn),s=o._o(i.documents),a=wh.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=o.applyChanges(s,t.isPrimaryClient,a),nm(t,n,u.To),c=new qg(e,n,o),[2,(t.Po.set(e,c),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),u.snapshot)]}})})}function zg(t,e){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var n,r,i;return(0,Fu.__generator)(this,function(o){switch(o.label){case 0:return n=Wu(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter(function(t){return!gl(t,e)})),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,op(n.localStore,r.targetId,!1).then(function(){n.sharedClientState.clearQueryState(r.targetId),$p(n.remoteStore,r.targetId),tm(n,r.targetId)}).catch(If)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return tm(n,r.targetId),[4,op(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}})})}function Gg(t,e,n){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var r,i,o,s;return(0,Fu.__generator)(this,function(a){switch(a.label){case 0:r=ym(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=Wu(t),i=tc.now(),o=e.reduce(function(t,e){return t.add(e.key)},mh());return r.persistence.runTransaction("Locally write mutations","readwrite",function(t){return r.Mn.pn(t,o).next(function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],l=Hl(c,n.get(c.key));null!=l&&s.push(new Kl(c.key,l,Fc(l.toProto().mapValue),Ul.exists(!0)))}return r._n.addMutationBatch(t,i,s,e)})}).then(function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}})}(r.localStore,e)];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new ih($u)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,om(r,i.changes)];case 3:return a.sent(),[4,cg(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=wg(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}})})}function Zg(t,e){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var n,r;return(0,Fu.__generator)(this,function(i){switch(i.label){case 0:n=Wu(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,ep(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach(function(t,e){var r=n.Co.get(e);r&&(Ku(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?Ku(r.bo):t.removedDocuments.size>0&&(Ku(r.bo),r.bo=!1))}),[4,om(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,If(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function Kg(t,e,n){var r=Wu(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach(function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)}),function(t,e){var n=Wu(t);n.onlineState=e;var r=!1;n.queries.forEach(function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)}),r&&Ng(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Wg(t,e,n){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var r,i,o,s,a,u;return(0,Fu.__generator)(this,function(c){switch(c.label){case 0:return(r=Wu(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(o=i&&i.key)?(s=(s=new ih(bc.comparator)).insert(o,Mc.newNoDocument(o,ec.min())),a=mh().add(o),u=new _h(ec.min(),new Map,new ah($u),s,a),[4,Zg(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),im(r),[3,4];case 2:return[4,op(r.localStore,e,!1).then(function(){return tm(r,e,n)}).catch(If)];case 3:c.sent(),c.label=4;case 4:return[2]}})})}function Yg(t,e){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var n,r,i;return(0,Fu.__generator)(this,function(o){switch(o.label){case 0:n=Wu(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,Xf(n.localStore,e)];case 2:return i=o.sent(),Xg(n,r,null),Jg(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,om(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,If(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function Qg(t,e,n){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var r,i;return(0,Fu.__generator)(this,function(o){switch(o.label){case 0:r=Wu(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=Wu(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(t){var r;return n._n.lookupMutationBatch(t,e).next(function(e){return Ku(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}(r.localStore,e)];case 2:return i=o.sent(),Xg(r,e,n),Jg(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,om(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,If(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function $g(t,e){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s;return(0,Fu.__generator)(this,function(a){switch(a.label){case 0:ng((n=Wu(t)).remoteStore)||Bu("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=Wu(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e._n.getHighestUnacknowledgedBatchId(t)})}(n.localStore)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Fo.get(r)||[]).push(e),n.Fo.set(r,i),[3,4]);case 3:return o=a.sent(),s=wg(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}})})}function Jg(t,e){(t.Fo.get(e)||[]).forEach(function(t){t.resolve()}),t.Fo.delete(e)}function Xg(t,e,n){var r=Wu(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function tm(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach(function(e){t.No.containsKey(e)||em(t,e)})}function em(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&($p(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),im(t))}function nm(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof Fg?(t.No.addReference(o.key,e),rm(t,o)):o instanceof Mg?(Bu("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||em(t,o.key)):Zu()}}function rm(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(Bu("SyncEngine","New document in limbo: "+n),t.So.add(r),im(t))}function im(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new bc(sc.fromString(e)),r=t.ko.next();t.Co.set(r,new jg(n)),t.Do=t.Do.insert(n,r),Qp(t.remoteStore,new Gd(fl(sl(n.path)),r,2,Mu.o))}}function om(t,e,n){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var r,i,o,s;return(0,Fu.__generator)(this,function(a){switch(a.label){case 0:return r=Wu(t),i=[],o=[],s=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach(function(t,a){s.push(r.$o(a,e,n).then(function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=Wf.Pn(a.targetId,t);o.push(e)}}))}),[4,Promise.all(s)]);case 1:return a.sent(),r.vo._r(i),[4,function(t,e){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c;return(0,Fu.__generator)(this,function(l){switch(l.label){case 0:n=Wu(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(t){return Pd.forEach(e,function(e){return Pd.forEach(e.bn,function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)}).next(function(){return Pd.forEach(e.vn,function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)})})})})];case 2:return l.sent(),[3,4];case 3:if(!Fd(r=l.sent()))throw r;return Bu("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=(s=o[i]).targetId,s.fromCache||(u=n.Fn.get(a),c=u.withLastLimboFreeSnapshotVersion(u.snapshotVersion),n.Fn=n.Fn.insert(a,c));return[2]}})})}(r.localStore,o)];case 2:a.sent(),a.label=3;case 3:return[2]}})})}function sm(t,e){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var n,r;return(0,Fu.__generator)(this,function(i){switch(i.label){case 0:return(n=Wu(t)).currentUser.isEqual(e)?[3,3]:(Bu("SyncEngine","User change. New user:",e.toKey()),[4,Jf(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Fo.forEach(function(t){t.forEach(function(t){t.reject(new qu(Uu.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),t.Fo.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,om(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function am(t,e){var n=Wu(t),r=n.Co.get(e);if(r&&r.bo)return mh().add(r.key);var i=mh(),o=n.Vo.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=n.Po.get(a[s]);i=i.unionWith(u.view.wo)}return i}function um(t,e){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var n,r,i;return(0,Fu.__generator)(this,function(o){switch(o.label){case 0:return[4,sp((n=Wu(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&nm(n,e.targetId,i.To),i)]}})})}function cm(t){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var e;return(0,Fu.__generator)(this,function(n){return[2,up((e=Wu(t)).localStore).then(function(t){return om(e,t)})]})})}function lm(t,e,n,r){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var i,o;return(0,Fu.__generator)(this,function(s){switch(s.label){case 0:return[4,function(t,e){var n=Wu(t),r=Wu(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(t){return r.jt(t,e).next(function(e){return e?n.Mn.pn(t,e):Pd.resolve(null)})})}((i=Wu(t)).localStore,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,cg(i.remoteStore)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Xg(i,e,r||null),Jg(i,e),function(t,e){Wu(Wu(t)._n).Gt(e)}(i.localStore,e)):Zu(),s.label=4;case 4:return[4,om(i,o)];case 5:return s.sent(),[3,7];case 6:Bu("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}})})}function hm(t,e){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return(0,Fu.__generator)(this,function(c){switch(c.label){case 0:return vm(n=Wu(t)),ym(n),!0!==e||!0===n.Oo?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,dm(n,r.toArray())]);case 1:return i=c.sent(),n.Oo=!0,[4,mg(n.remoteStore,!0)];case 2:for(c.sent(),o=0,s=i;o<s.length;o++)Qp(n.remoteStore,s[o]);return[3,7];case 3:return!1!==e||!1===n.Oo?[3,7]:(a=[],u=Promise.resolve(),n.Vo.forEach(function(t,e){n.sharedClientState.isLocalQueryTarget(e)?a.push(e):u=u.then(function(){return tm(n,e),op(n.localStore,e,!0)}),$p(n.remoteStore,e)}),[4,u]);case 4:return c.sent(),[4,dm(n,a)];case 5:return c.sent(),function(t){var e=Wu(t);e.Co.forEach(function(t,n){$p(e.remoteStore,n)}),e.No.ts(),e.Co=new Map,e.Do=new ih(bc.comparator)}(n),n.Oo=!1,[4,mg(n.remoteStore,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}})})}function dm(t,e,n){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,l,h,d,f,p;return(0,Fu.__generator)(this,function(g){switch(g.label){case 0:n=Wu(t),r=[],i=[],o=0,s=e,g.label=1;case 1:return o<s.length?(u=void 0,(c=n.Vo.get(a=s[o]))&&0!==c.length?[4,ip(n.localStore,fl(c[0]))]:[3,7]):[3,13];case 2:u=g.sent(),l=0,h=c,g.label=3;case 3:return l<h.length?(d=n.Po.get(h[l]),[4,um(n,d)]):[3,6];case 4:(f=g.sent()).snapshot&&i.push(f.snapshot),g.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,ap(n.localStore,a)];case 8:return p=g.sent(),[4,ip(n.localStore,p)];case 9:return u=g.sent(),[4,Hg(n,fm(p),a,!1)];case 10:g.sent(),g.label=11;case 11:r.push(u),g.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}})})}function fm(t){return ol(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function pm(t){var e=Wu(t);return Wu(Wu(e.localStore).persistence).fn()}function gm(t,e,n,r){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var i,o,s;return(0,Fu.__generator)(this,function(a){switch(a.label){case 0:return(i=Wu(t)).Oo?(Bu("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,up(i.localStore)];case 3:return o=a.sent(),s=_h.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,om(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,op(i.localStore,e,!0)];case 6:return a.sent(),tm(i,e,r),[3,8];case 7:Zu(),a.label=8;case 8:return[2]}})})}function mm(t,e,n){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var r,i,o,s,a,u,c,l,h;return(0,Fu.__generator)(this,function(d){switch(d.label){case 0:if(!(r=vm(t)).Oo)return[3,10];i=0,o=e,d.label=1;case 1:return i<o.length?r.Vo.has(s=o[i])?(Bu("SyncEngine","Adding an already active target "+s),[3,5]):[4,ap(r.localStore,s)]:[3,6];case 2:return a=d.sent(),[4,ip(r.localStore,a)];case 3:return u=d.sent(),[4,Hg(r,fm(a),u.targetId,!1)];case 4:d.sent(),Qp(r.remoteStore,u),d.label=5;case 5:return i++,[3,1];case 6:c=function(t){return(0,Fu.__generator)(this,function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,op(r.localStore,t,!1).then(function(){$p(r.remoteStore,t),tm(r,t)}).catch(If)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})},l=0,h=n,d.label=7;case 7:return l<h.length?[5,c(h[l])]:[3,10];case 8:d.sent(),d.label=9;case 9:return l++,[3,7];case 10:return[2]}})})}function vm(t){var e=Wu(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Zg.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=am.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Wg.bind(null,e),e.vo._r=Ag.bind(null,e.eventManager),e.vo.Mo=xg.bind(null,e.eventManager),e}function ym(t){var e=Wu(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Yg.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Qg.bind(null,e),e}function _m(t,e,n){var r=Wu(t);(function(t,e,n){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var r,i,o,s,a,u;return(0,Fu.__generator)(this,function(c){switch(c.label){case 0:return c.trys.push([0,14,,15]),[4,e.getMetadata()];case 1:return r=c.sent(),[4,function(t,e){var n=Wu(t),r=Dh(e.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",function(t){return n.Qe.getBundleMetadata(t,e.id)}).then(function(t){return!!t&&t.createTime.compareTo(r)>=0})}(t.localStore,r)];case 2:return c.sent()?[4,e.close()]:[3,4];case 3:return[2,(c.sent(),void n._completeWith(function(t){return{taskState:"Success",documentsLoaded:t.totalDocuments,bytesLoaded:t.totalBytes,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(r)))];case 4:return n._updateProgress(Lg(r)),i=new Dg(r,t.localStore,e.R),[4,e.Lo()];case 5:o=c.sent(),c.label=6;case 6:return o?[4,i.oo(o)]:[3,10];case 7:return(s=c.sent())&&n._updateProgress(s),[4,e.Lo()];case 8:o=c.sent(),c.label=9;case 9:return[3,6];case 10:return[4,i.complete()];case 11:return a=c.sent(),[4,om(t,a.wn,void 0)];case 12:return c.sent(),[4,function(t,e){var n=Wu(t);return n.persistence.runTransaction("Save bundle","readwrite",function(t){return n.Qe.saveBundleMetadata(t,e)})}(t.localStore,r)];case 13:return c.sent(),n._completeWith(a.progress),[3,15];case 14:return zu("SyncEngine","Loading bundle failed with "+(u=c.sent())),n._failWith(u),[3,15];case 15:return[2]}})})})(r,e,n).then(function(){r.sharedClientState.notifyBundleLoaded()})}var wm=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return(0,Fu.__awaiter)(this,void 0,void 0,function(){return(0,Fu.__generator)(this,function(e){switch(e.label){case 0:return this.R=jp(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Qo(t),[2]}})})},t.prototype.Uo=function(t){return null},t.prototype.Qo=function(t){return $f(this.persistence,new Yf,t.initialUser,this.R)},t.prototype.qo=function(t){return new _p(bp.bs,this.R)},t.prototype.Bo=function(t){return new Op},t.prototype.terminate=function(){return(0,Fu.__awaiter)(this,void 0,void 0,function(){return(0,Fu.__generator)(this,function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}})})},t}(),bm=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Ko=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return(0,Fu.__extends)(e,t),e.prototype.initialize=function(e){return(0,Fu.__awaiter)(this,void 0,void 0,function(){return(0,Fu.__generator)(this,function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,cp(this.localStore)];case 2:return n.sent(),[4,this.Ko.initialize(this,e)];case 3:return n.sent(),[4,ym(this.Ko.syncEngine)];case 4:return n.sent(),[4,cg(this.Ko.remoteStore)];case 5:return n.sent(),[2]}})})},e.prototype.Qo=function(t){return $f(this.persistence,new Yf,t.initialUser,this.R)},e.prototype.Uo=function(t){return new Af(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)},e.prototype.qo=function(t){var e=Gf(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?df.withCacheSize(this.cacheSizeBytes):df.DEFAULT;return new Bf(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,Up(),qp(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new Op},e}(wm),Tm=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Ko=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return(0,Fu.__extends)(e,t),e.prototype.initialize=function(e){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var n,r=this;return(0,Fu.__generator)(this,function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Ko.syncEngine,this.sharedClientState instanceof Pp?(this.sharedClientState.syncEngine={ui:lm.bind(null,n),ai:gm.bind(null,n),hi:mm.bind(null,n),fn:pm.bind(null,n),ci:cm.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He(function(t){return(0,Fu.__awaiter)(r,void 0,void 0,function(){return(0,Fu.__generator)(this,function(e){switch(e.label){case 0:return[4,hm(this.Ko.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}})})})];case 4:return i.sent(),[2]}})})},e.prototype.Bo=function(t){var e=Up();if(!Pp.yt(e))throw new qu(Uu.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Gf(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new Pp(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(bm),Cm=function(){function t(){}return t.prototype.initialize=function(t,e){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var n=this;return(0,Fu.__generator)(this,function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return Kg(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=sm.bind(null,this.syncEngine),[4,mg(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.createEventManager=function(t){return new Ig},t.prototype.createDatastore=function(t){var e=jp(t.databaseInfo.databaseId),n=new Mp(t.databaseInfo);return function(t,e,n){return new Gp(t,e,n)}(t.credentials,n,e)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,s=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return Kg(s.syncEngine,t,0)},o=Dp.yt()?new Dp:new Rp,new Kp(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,s){var a=new Vg(t,e,n,r,i,o);return s&&(a.Oo=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var e;return(0,Fu.__generator)(this,function(n){switch(n.label){case 0:return e=Wu(t),Bu("RemoteStore","RemoteStore shutting down."),e.$r.add(5),[4,Yp(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}})})}(this.remoteStore)},t}();function Em(t,e){void 0===e&&(e=10240);var n=0;return{read:function(){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var r;return(0,Fu.__generator)(this,function(i){return n<t.byteLength?(r={value:t.slice(n,n+e),done:!1},[2,(n+=e,r)]):[2,{done:!0}]})})},cancel:function(){return(0,Fu.__awaiter)(this,void 0,void 0,function(){return(0,Fu.__generator)(this,function(t){return[2]})})},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var Im=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),Sm=function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new Nd,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then(function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))},function(t){return n.metadata.reject(t)})}return t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return(0,Fu.__awaiter)(this,void 0,void 0,function(){return(0,Fu.__generator)(this,function(t){return[2,this.metadata.promise]})})},t.prototype.Lo=function(){return(0,Fu.__awaiter)(this,void 0,void 0,function(){return(0,Fu.__generator)(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}})})},t.prototype.Ho=function(){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var t,e,n,r;return(0,Fu.__generator)(this,function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(t=i.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new Og(JSON.parse(r),t.length+n)]}})})},t.prototype.Zo=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},t.prototype.Jo=function(){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var t,e;return(0,Fu.__generator)(this,function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}})})},t.prototype.Xo=function(t){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var e;return(0,Fu.__generator)(this,function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}})})},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var t,e;return(0,Fu.__generator)(this,function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}})})},t}(),km=function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var e,n=this;return(0,Fu.__generator)(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new qu(Uu.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s,a;return(0,Fu.__generator)(this,function(u){switch(u.label){case 0:return n=Wu(t),r=Vh(n.R)+"/documents",i={documents:e.map(function(t){return Mh(n.R,t)})},[4,n.Oi("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach(function(t){var e=function(t,e){return"found"in e?function(t,e){Ku(!!e.found);var n=Uh(t,e.found.name),r=Dh(e.found.updateTime),i=new Lc({mapValue:{fields:e.found.fields}});return Mc.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){Ku(!!e.missing),Ku(!!e.readTime);var n=Uh(t,e.missing),r=Dh(e.readTime);return Mc.newNoDocument(n,r)}(t,e):Zu()}(n.R,t);s.set(e.key.toString(),e)}),a=[],[2,(e.forEach(function(t){var e=s.get(t.toString());Ku(!!e),a.push(e)}),a)]}})})}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach(function(t){return n.recordVersion(t)}),e)]}})})},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new Xl(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var t,e=this;return(0,Fu.__generator)(this,function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach(function(e){t.delete(e.key.toString())}),t.forEach(function(t,n){var r=bc.fromPath(n);e.mutations.push(new th(r,e.precondition(r)))}),[4,function(t,e){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var n,r,i;return(0,Fu.__generator)(this,function(o){switch(o.label){case 0:return n=Wu(t),r=Vh(n.R)+"/documents",i={writes:e.map(function(t){return Gh(n.R,t)})},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}})})},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw Zu();e=ec.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new qu(Uu.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?Ul.updateTime(e):Ul.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(ec.min()))throw new qu(Uu.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ul.updateTime(e)}return Ul.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}(),Am=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new Vp(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji(function(){return(0,Fu.__awaiter)(t,void 0,void 0,function(){var t,e,n=this;return(0,Fu.__generator)(this,function(r){return t=new km(this.datastore),(e=this.sc(t))&&e.then(function(e){n.asyncQueue.enqueueAndForget(function(){return t.commit().then(function(){n.deferred.resolve(e)}).catch(function(t){n.ic(t)})})}).catch(function(t){n.ic(t)}),[2]})})})},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!yc(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget(function(){return e.nc(),Promise.resolve()})):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!nh(e)}return!1},t}(),xm=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=Tp.UNAUTHENTICATED,this.clientId=Qu.u(),this.credentialListener=function(){},this.receivedInitialUser=new Nd,this.credentials.setChangeListener(function(t){Bu("FirestoreClient","Received user=",t.uid),r.user=t,r.credentialListener(t),r.receivedInitialUser.resolve()})}return t.prototype.getConfiguration=function(){return(0,Fu.__awaiter)(this,void 0,void 0,function(){return(0,Fu.__generator)(this,function(t){switch(t.label){case 0:return[4,this.receivedInitialUser.promise];case 1:return[2,(t.sent(),{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100})]}})})},t.prototype.setCredentialChangeListener=function(t){var e=this;this.credentialListener=t,this.receivedInitialUser.promise.then(function(){return e.credentialListener(e.user)})},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new qu(Uu.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new Nd;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return(0,Fu.__awaiter)(t,void 0,void 0,function(){var t,n;return(0,Fu.__generator)(this,function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=wg(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}})})}),e.promise},t}();function Nm(t,e){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var n,r,i=this;return(0,Fu.__generator)(this,function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),Bu("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener(function(n){r.isEqual(n)||(r=n,t.asyncQueue.enqueueRetryable(function(){return(0,Fu.__awaiter)(i,void 0,void 0,function(){return(0,Fu.__generator)(this,function(t){switch(t.label){case 0:return[4,Jf(e.localStore,n)];case 1:return t.sent(),[2]}})})}))}),e.persistence.setDatabaseDeletedListener(function(){return t.terminate()}),t.offlineComponents=e,[2]}})})}function Pm(t,e){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var n,r;return(0,Fu.__generator)(this,function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,Om(t)];case 1:return n=i.sent(),Bu("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener(function(n){return t.asyncQueue.enqueueRetryable(function(){return function(t,e){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var n,r;return(0,Fu.__generator)(this,function(i){switch(i.label){case 0:return(n=Wu(t)).asyncQueue.verifyOperationInProgress(),Bu("RemoteStore","RemoteStore received new credentials"),r=ng(n),n.$r.add(3),[4,Yp(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.$r.delete(3),[4,Wp(n)];case 3:return i.sent(),[2]}})})}(e.remoteStore,n)})}),t.onlineComponents=e,[2]}})})}function Om(t){return(0,Fu.__awaiter)(this,void 0,void 0,function(){return(0,Fu.__generator)(this,function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(Bu("FirestoreClient","Using default OfflineComponentProvider"),[4,Nm(t,new wm)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}})})}function Rm(t){return(0,Fu.__awaiter)(this,void 0,void 0,function(){return(0,Fu.__generator)(this,function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(Bu("FirestoreClient","Using default OnlineComponentProvider"),[4,Pm(t,new Cm)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}})})}function Dm(t){return Om(t).then(function(t){return t.persistence})}function Lm(t){return Om(t).then(function(t){return t.localStore})}function Fm(t){return Rm(t).then(function(t){return t.remoteStore})}function Mm(t){return Rm(t).then(function(t){return t.syncEngine})}function Um(t){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var e,n;return(0,Fu.__generator)(this,function(r){switch(r.label){case 0:return[4,Rm(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=Bg.bind(null,e.syncEngine),n.onUnlisten=zg.bind(null,e.syncEngine),n)]}})})}function qm(t,e,n){var r=this;void 0===n&&(n={});var i=new Nd;return t.asyncQueue.enqueueAndForget(function(){return(0,Fu.__awaiter)(r,void 0,void 0,function(){var r;return(0,Fu.__generator)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Im({next:function(o){e.enqueueAndForget(function(){return kg(t,s)});var a=o.docs.has(n);!a&&o.fromCache?i.reject(new qu(Uu.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new qu(Uu.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new Pg(sl(n.path),o,{includeMetadataChanges:!0,so:!0});return Sg(t,s)},[4,Um(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}function jm(t,e,n){var r=this;void 0===n&&(n={});var i=new Nd;return t.asyncQueue.enqueueAndForget(function(){return(0,Fu.__awaiter)(r,void 0,void 0,function(){var r;return(0,Fu.__generator)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Im({next:function(n){e.enqueueAndForget(function(){return kg(t,s)}),n.fromCache&&"server"===r.source?i.reject(new qu(Uu.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new Pg(n,o,{includeMetadataChanges:!0,so:!0});return Sg(t,s)},[4,Um(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}var Vm=function(t,e,n,r,i,o,s){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s},Bm=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),Hm=new Map,zm=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},Gm=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t){this.changeListener=t,t(Tp.UNAUTHENTICATED)},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Zm=function(){function t(t){this.token=t,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t){this.changeListener=t,t(this.token.user)},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Km=function(){function t(t){var e=this;this.oc=null,this.currentUser=Tp.UNAUTHENTICATED,this.receivedInitialUser=!1,this.cc=0,this.changeListener=null,this.forceRefresh=!1,this.oc=function(){e.cc++,e.currentUser=e.uc(),e.receivedInitialUser=!0,e.changeListener&&e.changeListener(e.currentUser)},this.cc=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.oc):(this.oc(null),t.get().then(function(t){e.auth=t,e.oc&&e.auth.addAuthTokenListener(e.oc)},function(){}))}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return t.cc!==e?(Bu("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(Ku("string"==typeof n.accessToken),new zm(n.accessToken,t.currentUser)):null}):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t){this.changeListener=t,this.receivedInitialUser&&t(this.currentUser)},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.oc),this.oc=null,this.changeListener=null},t.prototype.uc=function(){var t=this.auth&&this.auth.getUid();return Ku(null===t||"string"==typeof t),new Tp(t)},t}(),Wm=function(){function t(t,e,n){this.ac=t,this.hc=e,this.lc=n,this.type="FirstParty",this.user=Tp.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.hc},e=this.ac.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.lc&&(t["X-Goog-Iam-Authorization-Token"]=this.lc),t},enumerable:!1,configurable:!0}),t}(),Ym=function(){function t(t,e,n){this.ac=t,this.hc=e,this.lc=n}return t.prototype.getToken=function(){return Promise.resolve(new Wm(this.ac,this.hc,this.lc))},t.prototype.setChangeListener=function(t){t(Tp.FIRST_PARTY)},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function Qm(t,e,n){if(!n)throw new qu(Uu.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function $m(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new qu(Uu.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Jm(t,e,n,r){if(!0===e&&!0===r)throw new qu(Uu.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Xm(t){if(!bc.isDocumentKey(t))throw new qu(Uu.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function tv(t){if(bc.isDocumentKey(t))throw new qu(Uu.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function ev(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":Zu()}function nv(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new qu(Uu.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=ev(t);throw new qu(Uu.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function rv(t,e){if(e<=0)throw new qu(Uu.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var iv=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new qu(Uu.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new qu(Uu.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,Jm("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),ov=function(){function t(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new iv({}),this._settingsFrozen=!1,t instanceof Bm?(this._databaseId=t,this._credentials=new Gm):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new qu(Uu.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Bm(t.options.projectId)}(t),this._credentials=new Km(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new qu(Uu.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new qu(Uu.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new iv(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new Gm;switch(t.type){case"gapi":var e=t.client;return Ku(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Ym(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new qu(Uu.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return(t=Hm.get(this))&&(Bu("ComponentProvider","Removing Datastore"),Hm.delete(this),t.terminate()),Promise.resolve();var t},t}(),sv=function(){function t(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new uv(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),av=function(){function t(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),uv=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,sl(r))||this)._path=r,i.type="collection",i}return(0,Fu.__extends)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new sv(this.firestore,null,new bc(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(av);function cv(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=(0,Oi.getModularInstance)(t),Qm("collection","path",e),t instanceof ov)return tv(n=sc.fromString.apply(sc,(0,Fu.__spreadArray)([e],r))),new uv(t,null,n);if(!(t instanceof sv||t instanceof uv))throw new qu(Uu.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return tv(n=sc.fromString.apply(sc,(0,Fu.__spreadArray)([t.path],r)).child(sc.fromString(e))),new uv(t.firestore,null,n)}function lv(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=(0,Oi.getModularInstance)(t),1===arguments.length&&(e=Qu.u()),Qm("doc","path",e),t instanceof ov)return Xm(n=sc.fromString.apply(sc,(0,Fu.__spreadArray)([e],r))),new sv(t,null,new bc(n));if(!(t instanceof sv||t instanceof uv))throw new qu(Uu.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Xm(n=t._path.child(sc.fromString.apply(sc,(0,Fu.__spreadArray)([e],r)))),new sv(t.firestore,t instanceof uv?t.converter:null,new bc(n))}function hv(t,e){return t=(0,Oi.getModularInstance)(t),e=(0,Oi.getModularInstance)(e),(t instanceof sv||t instanceof uv)&&(e instanceof sv||e instanceof uv)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function dv(t,e){return t=(0,Oi.getModularInstance)(t),e=(0,Oi.getModularInstance)(e),t instanceof av&&e instanceof av&&t.firestore===e.firestore&&gl(t._query,e._query)&&t.converter===e.converter}var fv=function(){function t(){var t=this;this.fc=Promise.resolve(),this.dc=[],this.wc=!1,this._c=[],this.mc=null,this.yc=!1,this.gc=[],this.Zi=new Vp(this,"async_queue_retry"),this.Ec=function(){var e=qp();e&&Bu("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=qp();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ec)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this.wc},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Tc(),this.Ic(t)},t.prototype.enterRestrictedMode=function(){if(!this.wc){this.wc=!0;var t=qp();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ec)}},t.prototype.enqueue=function(t){return this.Tc(),this.wc?new Promise(function(t){}):this.Ic(t)},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget(function(){return e.dc.push(t),e.Ac()})},t.prototype.Ac=function(){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var t,e=this;return(0,Fu.__generator)(this,function(n){switch(n.label){case 0:if(0===this.dc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.dc[0]()];case 2:return n.sent(),this.dc.shift(),this.Zi.reset(),[3,4];case 3:if(!Fd(t=n.sent()))throw t;return Bu("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.dc.length>0&&this.Zi.ji(function(){return e.Ac()}),n.label=5;case 5:return[2]}})})},t.prototype.Ic=function(t){var e=this,n=this.fc.then(function(){return e.yc=!0,t().catch(function(t){throw e.mc=t,e.yc=!1,Hu("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t}).then(function(t){return e.yc=!1,t})});return this.fc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Tc(),this.gc.indexOf(t)>-1&&(e=0);var i=_g.createAndSchedule(this,t,e,n,function(t){return r.Rc(t)});return this._c.push(i),i},t.prototype.Tc=function(){this.mc&&Zu()},t.prototype.verifyOperationInProgress=function(){},t.prototype.bc=function(){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var t;return(0,Fu.__generator)(this,function(e){switch(e.label){case 0:return[4,t=this.fc];case 1:e.sent(),e.label=2;case 2:if(t!==this.fc)return[3,0];e.label=3;case 3:return[2]}})})},t.prototype.vc=function(t){for(var e=0,n=this._c;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Pc=function(t){var e=this;return this.bc().then(function(){e._c.sort(function(t,e){return t.targetTimeMs-e.targetTimeMs});for(var n=0,r=e._c;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.bc()})},t.prototype.Vc=function(t){this.gc.push(t)},t.prototype.Rc=function(t){var e=this._c.indexOf(t);this._c.splice(e,1)},t}();function pv(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var gv=function(){function t(){this._progressObserver={},this._taskCompletionResolver=new Nd,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)},t}(),mv=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).type="firestore",r._queue=new fv,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return(0,Fu.__extends)(e,t),e.prototype._terminate=function(){return this._firestoreClient||yv(this),this._firestoreClient.terminate()},e}(ov);function vv(t){return t._firestoreClient||yv(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function yv(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new Vm(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new xm(t._credentials,t._queue,r)}function _v(t,e,n){var r=this,i=new Nd;return t.asyncQueue.enqueue(function(){return(0,Fu.__awaiter)(r,void 0,void 0,function(){var r;return(0,Fu.__generator)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,Nm(t,n)];case 1:return o.sent(),[4,Pm(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===Uu.FAILED_PRECONDITION||t.code===Uu.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function wv(t){if(t._initialized||t._terminated)throw new qu(Uu.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var bv=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new qu(Uu.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new uc(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),Tv=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(lc.fromBase64String(e))}catch(e){throw new qu(Uu.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(lc.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),Cv=function(t){this._methodName=t},Ev=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new qu(Uu.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new qu(Uu.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return $u(this._lat,t._lat)||$u(this._long,t._long)},t}(),Iv=/^__.*__$/,Sv=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new Kl(t,this.data,this.fieldMask,e,this.fieldTransforms):new Zl(t,this.data,e,this.fieldTransforms)},t}(),kv=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new Kl(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function Av(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Zu()}}var xv=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Sc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dc",{get:function(){return this.settings.Dc},enumerable:!1,configurable:!0}),t.prototype.Cc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.Nc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Cc({path:n,xc:!1});return r.Fc(t),r},t.prototype.kc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Cc({path:n,xc:!1});return r.Sc(),r},t.prototype.Oc=function(t){return this.Cc({path:void 0,xc:!0})},t.prototype.$c=function(t){return Yv(t,this.settings.methodName,this.settings.Mc||!1,this.path,this.settings.Lc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find(function(e){return t.isPrefixOf(e)})||void 0!==this.fieldTransforms.find(function(e){return t.isPrefixOf(e.field)})},t.prototype.Sc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.Fc(this.path.get(t))},t.prototype.Fc=function(t){if(0===t.length)throw this.$c("Document fields must not be empty");if(Av(this.Dc)&&Iv.test(t))throw this.$c('Document fields cannot begin and end with "__"')},t}(),Nv=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||jp(t)}return t.prototype.Bc=function(t,e,n,r){return void 0===r&&(r=!1),new xv({Dc:t,methodName:e,Lc:n,path:uc.emptyPath(),xc:!1,Mc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function Pv(t){var e=t._freezeSettings(),n=jp(t._databaseId);return new Nv(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Ov(t,e,n,r,i,o){void 0===o&&(o={});var s=t.Bc(o.merge||o.mergeFields?2:0,e,n,i);Gv("Data must be an object, but it was:",s,r);var a,u,c=Hv(r,s);if(o.merge)a=new cc(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,d=o.mergeFields;h<d.length;h++){var f=Zv(e,d[h],n);if(!s.contains(f))throw new qu(Uu.INVALID_ARGUMENT,"Field '"+f+"' is specified in your field mask but missing from your input data.");Qv(l,f)||l.push(f)}a=new cc(l),u=s.fieldTransforms.filter(function(t){return a.covers(t.field)})}else a=null,u=s.fieldTransforms;return new Sv(new Lc(c),a,u)}var Rv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Fu.__extends)(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Dc)throw t.$c(1===t.Dc?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(Cv);function Dv(t,e,n){return new xv({Dc:3,Lc:e.settings.Lc,methodName:t._methodName,xc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var Lv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Fu.__extends)(e,t),e.prototype._toFieldTransform=function(t){return new Fl(t.path,new Al)},e.prototype.isEqual=function(t){return t instanceof e},e}(Cv),Fv=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).qc=n,r}return(0,Fu.__extends)(e,t),e.prototype._toFieldTransform=function(t){var e=Dv(this,t,!0),n=this.qc.map(function(t){return Bv(t,e)}),r=new xl(n);return new Fl(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Cv),Mv=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).qc=n,r}return(0,Fu.__extends)(e,t),e.prototype._toFieldTransform=function(t){var e=Dv(this,t,!0),n=this.qc.map(function(t){return Bv(t,e)}),r=new Pl(n);return new Fl(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Cv),Uv=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Uc=n,r}return(0,Fu.__extends)(e,t),e.prototype._toFieldTransform=function(t){var e=new Rl(t.R,Cl(t.R,this.Uc));return new Fl(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(Cv);function qv(t,e,n,r){var i=t.Bc(1,e,n);Gv("Data must be an object, but it was:",i,r);var o=[],s=Lc.empty();rc(r,function(t,r){var a=Wv(e,t,n);r=(0,Oi.getModularInstance)(r);var u=i.kc(a);if(r instanceof Rv)o.push(a);else{var c=Bv(r,u);null!=c&&(o.push(a),s.set(a,c))}});var a=new cc(o);return new kv(s,a,i.fieldTransforms)}function jv(t,e,n,r,i,o){var s=t.Bc(1,e,n),a=[Zv(e,r,n)],u=[i];if(o.length%2!=0)throw new qu(Uu.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(Zv(e,o[c])),u.push(o[c+1]);for(var l=[],h=Lc.empty(),d=a.length-1;d>=0;--d)if(!Qv(l,a[d])){var f=a[d],p=u[d];p=(0,Oi.getModularInstance)(p);var g=s.kc(f);if(p instanceof Rv)l.push(f);else{var m=Bv(p,g);null!=m&&(l.push(f),h.set(f,m))}}var v=new cc(l);return new kv(h,v,s.fieldTransforms)}function Vv(t,e,n,r){return void 0===r&&(r=!1),Bv(n,t.Bc(r?4:3,e))}function Bv(t,e){if(zv(t=(0,Oi.getModularInstance)(t)))return Gv("Unsupported field value:",e,t),Hv(t,e);if(t instanceof Cv)return function(t,e){if(!Av(e.Dc))throw e.$c(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.$c(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xc&&4!==e.Dc)throw e.$c("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=Bv(o[i],e.Oc(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=(0,Oi.getModularInstance)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Cl(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=tc.fromDate(t);return{timestampValue:Ph(e.R,n)}}if(t instanceof tc)return n=new tc(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:Ph(e.R,n)};if(t instanceof Ev)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Tv)return{bytesValue:Oh(e.R,t._byteString)};if(t instanceof sv){var r=t.firestore._databaseId;if(!r.isEqual(n=e.databaseId))throw e.$c("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Lh(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.$c("Unsupported field value: "+ev(t))}(t,e)}function Hv(t,e){var n={};return ic(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):rc(t,function(t,r){var i=Bv(r,e.Nc(t));null!=i&&(n[t]=i)}),{mapValue:{fields:n}}}function zv(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof tc||t instanceof Ev||t instanceof Tv||t instanceof sv||t instanceof Cv)}function Gv(t,e,n){if(!zv(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=ev(n);throw e.$c("an object"===r?t+" a custom object":t+" "+r)}}function Zv(t,e,n){if((e=(0,Oi.getModularInstance)(e))instanceof bv)return e._internalPath;if("string"==typeof e)return Wv(t,e);throw Yv("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var Kv=new RegExp("[~\\*/\\[\\]]");function Wv(t,e,n){if(e.search(Kv)>=0)throw Yv("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(bv.bind.apply(bv,(0,Fu.__spreadArray)([void 0],e.split(".")))))._internalPath}catch(Qi){throw Yv("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function Yv(t,e,n,r,i){var o=r&&!r.isEmpty(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new qu(Uu.INVALID_ARGUMENT,(a+=". ")+t+u)}function Qv(t,e){return t.some(function(t){return t.isEqual(e)})}var $v=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new sv(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new Jv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.toProto())}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(Xv("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),Jv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Fu.__extends)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}($v);function Xv(t,e){return"string"==typeof e?Wv(t,e):e instanceof bv?e._internalPath:e._delegate._internalPath}var ty=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),ey=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this)._firestore=e,a._firestoreImpl=e,a.metadata=o,a}return(0,Fu.__extends)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new ny(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.toProto(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(Xv("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}($v),ny=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Fu.__extends)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(ey),ry=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new ty(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach(function(r){t.call(e,new ny(n._firestore,n._userDataWriter,r.key,r,new ty(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))})},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new qu(Uu.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map(function(e){return{type:"added",doc:new ny(t._firestore,t._userDataWriter,e.doc.key,e.doc,new ty(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:n++}})}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter(function(t){return e||3!==t.type}).map(function(e){var n=new ny(t._firestore,t._userDataWriter,e.doc.key,e.doc,new ty(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:iy(e.type),doc:n,oldIndex:i,newIndex:o}})}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function iy(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Zu()}}function oy(t,e){return t instanceof ey&&e instanceof ey?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof ry&&e instanceof ry&&t._firestore===e._firestore&&dv(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function sy(t){if(ul(t)&&0===t.explicitOrderBy.length)throw new qu(Uu.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var ay=function(){};function uy(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var cy=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qc=e,i.Kc=n,i.jc=r,i.type="where",i}return(0,Fu.__extends)(e,t),e.prototype._apply=function(t){var e=Pv(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new qu(Uu.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){my(s,o);for(var u=[],c=0,l=s;c<l.length;c++)u.push(gy(r,t,l[c]));a={arrayValue:{values:u}}}else a=gy(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||my(s,o),a=Vv(n,"where",s,"in"===o||"not-in"===o);var h=Hc.create(i,o,a);return function(t,e){if(e.g()){var n=ll(t);if(null!==n&&!n.isEqual(e.field))throw new qu(Uu.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=cl(t);null!==r&&vy(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new qu(Uu.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t._query,0,e,t.firestore._databaseId,this.Qc,this.Kc,this.jc);return new av(t.firestore,t.converter,function(t,e){var n=t.filters.concat([e]);return new il(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(ay),ly=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Qc=e,r.Wc=n,r.type="orderBy",r}return(0,Fu.__extends)(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new qu(Uu.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new qu(Uu.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new tl(e,n);return function(t,e){if(null===cl(t)){var n=ll(t);null!==n&&vy(0,n,e.field)}}(t,r),r}(t._query,this.Qc,this.Wc);return new av(t.firestore,t.converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new il(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(ay),hy=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Gc=n,i.zc=r,i}return(0,Fu.__extends)(e,t),e.prototype._apply=function(t){return new av(t.firestore,t.converter,pl(t._query,this.Gc,this.zc))},e}(ay),dy=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return(0,Fu.__extends)(e,t),e.prototype._apply=function(t){var e=py(t,this.type,this.Hc,this.Jc);return new av(t.firestore,t.converter,function(t,e){return new il(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(ay),fy=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return(0,Fu.__extends)(e,t),e.prototype._apply=function(t){var e=py(t,this.type,this.Hc,this.Jc);return new av(t.firestore,t.converter,function(t,e){return new il(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(ay);function py(t,e,n,r){if(n[0]=(0,Oi.getModularInstance)(n[0]),n[0]instanceof $v)return function(t,e,n,r,i){if(!r)throw new qu(Uu.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=dl(t);s<a.length;s++){var u=a[s];if(u.field.isKeyField())o.push(xc(e,r.key));else{var c=r.data.field(u.field);if(gc(c))throw new qu(Uu.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new qu(Uu.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Jc(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=Pv(t.firestore);return function(t,e,n,r,i,o){var s=t.explicitOrderBy;if(i.length>s.length)throw new qu(Uu.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.isKeyField()){if("string"!=typeof c)throw new qu(Uu.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!hl(t)&&-1!==c.indexOf("/"))throw new qu(Uu.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(sc.fromString(c));if(!bc.isDocumentKey(l))throw new qu(Uu.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new bc(l);a.push(xc(e,h))}else{var d=Vv(n,r,c);a.push(d)}}return new Jc(a,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function gy(t,e,n){if("string"==typeof(n=(0,Oi.getModularInstance)(n))){if(""===n)throw new qu(Uu.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!hl(e)&&-1!==n.indexOf("/"))throw new qu(Uu.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(sc.fromString(n));if(!bc.isDocumentKey(r))throw new qu(Uu.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return xc(t,new bc(r))}if(n instanceof sv)return xc(t,n._key);throw new qu(Uu.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+ev(n)+".")}function my(t,e){if(!Array.isArray(t)||0===t.length)throw new qu(Uu.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new qu(Uu.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function vy(t,e,n){if(!n.isEqual(e))throw new qu(Uu.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var yy=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),Tc(t)){case 0:return null;case 1:return t.booleanValue;case 2:return fc(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(pc(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Zu()}},t.prototype.convertObject=function(t,e){var n=this,r={};return rc(t.fields||{},function(t,i){r[t]=n.convertValue(i,e)}),r},t.prototype.convertGeoPoint=function(t){return new Ev(fc(t.latitude),fc(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.convertValue(t,e)})},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=mc(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(vc(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=dc(t);return new tc(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=sc.fromString(t);Ku(sd(n));var r=new Bm(n.get(1),n.get(3)),i=new bc(n.popFirst(5));return r.isEqual(e)||Hu("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function _y(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var wy=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,Fu.__extends)(e,t),e.prototype.convertBytes=function(t){return new Tv(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new sv(this.firestore,null,e)},e}(yy),by=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Pv(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=Ty(t,this._firestore),i=_y(r.converter,e,n),o=Ov(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,Ul.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,s=Ty(t,this._firestore);return o="string"==typeof(e=(0,Oi.getModularInstance)(e))||e instanceof bv?jv(this._dataReader,"WriteBatch.update",s._key,e,n,r):qv(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,Ul.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=Ty(t,this._firestore);return this._mutations=this._mutations.concat(new Xl(e._key,Ul.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new qu(Uu.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function Ty(t,e){if((t=(0,Oi.getModularInstance)(t)).firestore!==e)throw new qu(Uu.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var Cy=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,Fu.__extends)(e,t),e.prototype.convertBytes=function(t){return new Tv(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new sv(this.firestore,null,e)},e}(yy);function Ey(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=nv(t,sv);var o=nv(t.firestore,mv),s=Pv(o);return Sy(o,[("string"==typeof(e=(0,Oi.getModularInstance)(e))||e instanceof bv?jv(s,"updateDoc",t._key,e,n,r):qv(s,"updateDoc",t._key,e)).toMutation(t._key,Ul.exists(!0))])}function Iy(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t=(0,Oi.getModularInstance)(t);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||pv(i[a])||(s=i[a],a++);var u,c,l,h={includeMetadataChanges:s.includeMetadataChanges};if(pv(i[a])){var d=i[a];i[a]=null===(e=d.next)||void 0===e?void 0:e.bind(d),i[a+1]=null===(n=d.error)||void 0===n?void 0:n.bind(d),i[a+2]=null===(r=d.complete)||void 0===r?void 0:r.bind(d)}if(t instanceof sv)c=nv(t.firestore,mv),l=sl(t._key.path),u={next:function(e){i[a]&&i[a](ky(c,t,e))},error:i[a+1],complete:i[a+2]};else{var f=nv(t,av);c=nv(f.firestore,mv),l=f._query;var p=new Cy(c);u={next:function(t){i[a]&&i[a](new ry(c,p,f,t))},error:i[a+1],complete:i[a+2]},sy(t._query)}return function(t,e,n,r){var i=this,o=new Im(r),s=new Pg(e,o,n);return t.asyncQueue.enqueueAndForget(function(){return(0,Fu.__awaiter)(i,void 0,void 0,function(){var e;return(0,Fu.__generator)(this,function(n){switch(n.label){case 0:return e=Sg,[4,Um(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})}),function(){o.Wo(),t.asyncQueue.enqueueAndForget(function(){return(0,Fu.__awaiter)(i,void 0,void 0,function(){var e;return(0,Fu.__generator)(this,function(n){switch(n.label){case 0:return e=kg,[4,Um(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})})}}(vv(c),l,h,u)}function Sy(t,e){return function(t,e){var n=this,r=new Nd;return t.asyncQueue.enqueueAndForget(function(){return(0,Fu.__awaiter)(n,void 0,void 0,function(){var n;return(0,Fu.__generator)(this,function(i){switch(i.label){case 0:return n=Gg,[4,Mm(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(vv(t),e)}function ky(t,e,n){var r=n.docs.get(e._key),i=new Cy(t);return new ey(t,i,e._key,r,new ty(n.hasPendingWrites,n.fromCache),e.converter)}var Ay=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return(0,Fu.__extends)(e,t),e.prototype.get=function(e){var n=this,r=Ty(e,this._firestore),i=new Cy(this._firestore);return t.prototype.get.call(this,e).then(function(t){return new ey(n._firestore,i,r._key,t._document,new ty(!1,!1),r.converter)})},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=Pv(t)}return t.prototype.get=function(t){var e=this,n=Ty(t,this._firestore),r=new wy(this._firestore);return this._transaction.lookup([n._key]).then(function(t){if(!t||1!==t.length)return Zu();var i=t[0];if(i.isFoundDocument())return new $v(e._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new $v(e._firestore,r,n._key,null,n.converter);throw Zu()})},t.prototype.set=function(t,e,n){var r=Ty(t,this._firestore),i=_y(r.converter,e,n),o=Ov(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=Ty(t,this._firestore);return o="string"==typeof(e=(0,Oi.getModularInstance)(e))||e instanceof bv?jv(this._dataReader,"Transaction.update",s._key,e,n,r):qv(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,o),this},t.prototype.delete=function(t){var e=Ty(t,this._firestore);return this._transaction.delete(e._key),this},t}());function xy(){if("undefined"==typeof Uint8Array)throw new qu(Uu.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Ny(){if("undefined"==typeof atob)throw new qu(Uu.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Py=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return Ny(),new t(Tv.fromBase64String(e))},t.fromUint8Array=function(e){return xy(),new t(Tv.fromUint8Array(e))},t.prototype.toBase64=function(){return Ny(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return xy(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),Oy=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){wv(t=nv(t,mv));var n=vv(t),r=t._freezeSettings(),i=new Cm;return _v(n,i,new bm(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){wv(t=nv(t,mv));var e=vv(t),n=t._freezeSettings(),r=new Cm;return _v(e,r,new Tm(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new qu(Uu.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new Nd;return t._queue.enqueueAndForgetEvenWhileRestricted(function(){return(0,Fu.__awaiter)(e,void 0,void 0,function(){var e;return(0,Fu.__generator)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return(0,Fu.__awaiter)(this,void 0,void 0,function(){return(0,Fu.__generator)(this,function(e){switch(e.label){case 0:return Rd.yt()?[4,Rd.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}})})}(Gf(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise}(t._delegate)},t}(),Ry=function(){function t(t,e,n){var r=this;this._delegate=e,this.Yc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof Bm||(this.Xc=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this._delegate._getSettings()),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={});var i=(t=nv(t,ov))._getSettings();if("firestore.googleapis.com"!==i.host&&i.host!==e&&zu("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},i),{host:e+":"+n,ssl:!1})),r.mockUserToken){var o=(0,Oi.createMockUserToken)(r.mockUserToken),s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new qu(Uu.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");t._credentials=new Zm(new zm(o,new Tp(s)))}}(this._delegate,t,e,n)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return(0,Fu.__awaiter)(e,void 0,void 0,function(){var e,n;return(0,Fu.__generator)(this,function(r){switch(r.label){case 0:return[4,Dm(t)];case 1:return e=r.sent(),[4,Fm(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=Wu(t);return e.$r.delete(0),Wp(e)}(n))]}})})})}(vv(nv(this._delegate,mv)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return(0,Fu.__awaiter)(e,void 0,void 0,function(){var e,n;return(0,Fu.__generator)(this,function(r){switch(r.label){case 0:return[4,Dm(t)];case 1:return e=r.sent(),[4,Fm(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var e;return(0,Fu.__generator)(this,function(n){switch(n.label){case 0:return(e=Wu(t)).$r.add(0),[4,Yp(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}})})}(n))]}})})})}(vv(nv(this._delegate,mv)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&Jm("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Yc.enableMultiTabIndexedDbPersistence(this):this.Yc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Yc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.Xc&&(this.Xc._removeServiceInstance("firestore"),this.Xc._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new Nd;return t.asyncQueue.enqueueAndForget(function(){return(0,Fu.__awaiter)(e,void 0,void 0,function(){var e;return(0,Fu.__generator)(this,function(r){switch(r.label){case 0:return e=$g,[4,Mm(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}})})}),n.promise}(vv(nv(this._delegate,mv)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new Im(e);return t.asyncQueue.enqueueAndForget(function(){return(0,Fu.__awaiter)(n,void 0,void 0,function(){var e;return(0,Fu.__generator)(this,function(n){switch(n.label){case 0:return e=function(t,e){Wu(t).Gr.add(e),e.next()},[4,Um(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})}),function(){r.Wo(),t.asyncQueue.enqueueAndForget(function(){return(0,Fu.__awaiter)(n,void 0,void 0,function(){var e;return(0,Fu.__generator)(this,function(n){switch(n.label){case 0:return e=function(t,e){Wu(t).Gr.delete(e)},[4,Um(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})})}}(vv(t=nv(t,mv)),pv(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.Xc)throw new qu(Uu.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Xc},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new Ky(this,cv(this._delegate,t))}catch(t){throw qy(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new Uy(this,lv(this._delegate,t))}catch(t){throw qy(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new zy(this,function(t,e){if(t=nv(t,ov),Qm("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new qu(Uu.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new av(t,null,function(t){return new il(sc.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw qy(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new Nd;return t.asyncQueue.enqueueAndForget(function(){return(0,Fu.__awaiter)(n,void 0,void 0,function(){var n;return(0,Fu.__generator)(this,function(i){switch(i.label){case 0:return[4,function(t){return Rm(t).then(function(t){return t.datastore})}(t)];case 1:return n=i.sent(),new Am(t.asyncQueue,n,e,r).run(),[2]}})})}),r.promise}(vv(t),function(n){return e(new Ay(t,n))})}(this._delegate,function(n){return t(new Ly(e,n))})},t.prototype.batch=function(){var t=this;return vv(this._delegate),new Fy(new by(this._delegate,function(e){return Sy(t._delegate,e)}))},t.prototype.loadBundle=function(t){throw new qu(Uu.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new qu(Uu.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),Dy=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,Fu.__extends)(e,t),e.prototype.convertBytes=function(t){return new Py(new Tv(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return Uy.Zc(e,this.firestore,null)},e}(yy),Ly=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new Dy(t)}return t.prototype.get=function(t){var e=this,n=Wy(t);return this._delegate.get(n).then(function(t){return new By(e._firestore,new ey(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))})},t.prototype.set=function(t,e,n){var r=Wy(t);return n?($m("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Wy(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,(0,Fu.__spreadArray)([s,e,n],i)),this},t.prototype.delete=function(t){var e=Wy(t);return this._delegate.delete(e),this},t}(),Fy=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=Wy(t);return n?($m("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Wy(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,(0,Fu.__spreadArray)([s,e,n],i)),this},t.prototype.delete=function(t){var e=Wy(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),My=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new ny(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new Hy(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.tu=function(e,n){var r=t.eu,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new Dy(e),n),i.set(n,o)),o},t}();My.eu=new WeakMap;var Uy=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Dy(t)}return t.nu=function(e,n,r){if(e.length%2!=0)throw new qu(Uu.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new sv(n._delegate,r,new bc(e)))},t.Zc=function(e,n,r){return new t(n,new sv(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Ky(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new Ky(this.firestore,cv(this._delegate,t))}catch(t){throw qy(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=(0,Oi.getModularInstance)(t))instanceof sv&&hv(this._delegate,t)},t.prototype.set=function(t,e){e=$m("DocumentReference.set",e);try{return function(t,e,n){t=nv(t,sv);var r=nv(t.firestore,mv),i=_y(t.converter,e,n);return Sy(r,[Ov(Pv(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,Ul.none())])}(this._delegate,t,e)}catch(t){throw qy(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?Ey(this._delegate,t):Ey.apply(void 0,(0,Fu.__spreadArray)([this._delegate,t,e],n))}catch(t){throw qy(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return Sy(nv((t=this._delegate).firestore,mv),[new Xl(t._key,Ul.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=jy(e),i=Vy(e,function(e){return new By(t.firestore,new ey(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))});return Iy(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=nv(t,sv);var e=nv(t.firestore,mv),n=vv(e),r=new Cy(e);return function(t,e){var n=this,r=new Nd;return t.asyncQueue.enqueueAndForget(function(){return(0,Fu.__awaiter)(n,void 0,void 0,function(){var n;return(0,Fu.__generator)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var r,i;return(0,Fu.__generator)(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=Wu(t);return n.persistence.runTransaction("read document","readonly",function(t){return n.Mn.mn(t,e)})}(t,e)];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new qu(Uu.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=wg(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}})})},[4,Lm(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._key).then(function(n){return new ey(e,r,t._key,n,new ty(null!==n&&n.hasLocalMutations,!0),t.converter)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=nv(t,sv);var e=nv(t.firestore,mv);return qm(vv(e),t._key,{source:"server"}).then(function(n){return ky(e,t,n)})}(this._delegate):function(t){t=nv(t,sv);var e=nv(t.firestore,mv);return qm(vv(e),t._key).then(function(n){return ky(e,t,n)})}(this._delegate)).then(function(t){return new By(e.firestore,new ey(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))})},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?My.tu(this.firestore,e):null))},t}();function qy(t,e,n){return t.message=t.message.replace(e,n),t}function jy(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!pv(r))return r}return{}}function Vy(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=pv(t[0])?t[0]:pv(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var By=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new Uy(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return oy(this._delegate,t._delegate)},t}(),Hy=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Fu.__extends)(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(By),zy=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Dy(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,uy(this._delegate,function(t,e,n){var r=e,i=Xv("where",t);return new cy(i,r,n)}(e,n,r)))}catch(e){throw qy(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,uy(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=Xv("orderBy",t);return new ly(r,n)}(e,n)))}catch(e){throw qy(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,uy(this._delegate,function(t){return rv("limit",t),new hy("limit",t,"F")}(e)))}catch(e){throw qy(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,uy(this._delegate,function(t){return rv("limitToLast",t),new hy("limitToLast",t,"L")}(e)))}catch(e){throw qy(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,uy(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new dy("startAt",t,!0)}).apply(void 0,e)))}catch(e){throw qy(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,uy(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new dy("startAfter",t,!1)}).apply(void 0,e)))}catch(e){throw qy(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,uy(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new fy("endBefore",t,!0)}).apply(void 0,e)))}catch(e){throw qy(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,uy(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new fy("endAt",t,!1)}).apply(void 0,e)))}catch(e){throw qy(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return dv(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=nv(t,av);var e=nv(t.firestore,mv),n=vv(e),r=new Cy(e);return function(t,e){var n=this,r=new Nd;return t.asyncQueue.enqueueAndForget(function(){return(0,Fu.__awaiter)(n,void 0,void 0,function(){var n;return(0,Fu.__generator)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var r,i,o,s,a;return(0,Fu.__generator)(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,sp(t,e,!0)];case 1:return a=u.sent(),r=new Ug(e,a.Bn),i=r._o(a.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=wg(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}})})},[4,Lm(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._query).then(function(n){return new ry(e,r,t,n)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=nv(t,av);var e=nv(t.firestore,mv),n=vv(e),r=new Cy(e);return jm(n,t._query,{source:"server"}).then(function(n){return new ry(e,r,t,n)})}(this._delegate):function(t){t=nv(t,av);var e=nv(t.firestore,mv),n=vv(e),r=new Cy(e);return sy(t._query),jm(n,t._query).then(function(n){return new ry(e,r,t,n)})}(this._delegate)).then(function(t){return new Zy(e.firestore,new ry(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))})},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=jy(e),i=Vy(e,function(e){return new Zy(t.firestore,new ry(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))});return Iy(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?My.tu(this.firestore,e):null))},t}(),Gy=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new Hy(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),Zy=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new zy(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map(function(e){return new Hy(t._firestore,e)})},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map(function(t){return new Gy(e._firestore,t)})},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach(function(r){t.call(e,new Hy(n._firestore,r))})},t.prototype.isEqual=function(t){return oy(this._delegate,t._delegate)},t}(),Ky=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return(0,Fu.__extends)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new Uy(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new Uy(this.firestore,void 0===t?lv(this._delegate):lv(this._delegate,t))}catch(t){throw qy(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=nv(t.firestore,mv),r=lv(t),i=_y(t.converter,e);return Sy(n,[Ov(Pv(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,Ul.exists(!1))]).then(function(){return r})}(this._delegate,t).then(function(t){return new Uy(e.firestore,t)})},e.prototype.isEqual=function(t){return hv(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?My.tu(this.firestore,t):null))},e}(zy);function Wy(t){return nv(t,sv)}var Yy,Qy=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(bv.bind.apply(bv,(0,Fu.__spreadArray)([void 0],t)))}return t.documentId=function(){return new t(uc.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=(0,Oi.getModularInstance)(t))instanceof bv&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),$y=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new Lv("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new Rv("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Fv("arrayUnion",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Mv("arrayRemove",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new Uv("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}(),Jy=n(5119),Xy={Firestore:Ry,GeoPoint:Ev,Timestamp:tc,Blob:Py,Transaction:Ly,WriteBatch:Fy,DocumentReference:Uy,DocumentSnapshot:By,Query:zy,QueryDocumentSnapshot:Hy,QuerySnapshot:Zy,CollectionReference:Ky,FieldPath:Qy,FieldValue:$y,setLogLevel:function(t){ju.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new Jy.Component("firestore",function(t){return function(t,e){return new Ry(t,new mv(t,e),new Oy)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},Xy)))})(Yy=Pi.default),Yy.registerVersion("@firebase/firestore","2.3.0");var t_=n(1906),e_=n(8489),n_=n(9291);class r_ extends vt.xQ{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new i_(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,n=e?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let o;if(this.closed)throw new yt.N;if(this.isStopped||this.hasError?o=_e.w.EMPTY:(this.observers.push(t),o=new n_.W(this,t)),r&&t.add(t=new Ai.ht(t,r)),e)for(let s=0;s<i&&!t.closed;s++)t.next(n[s]);else for(let s=0;s<i&&!t.closed;s++)t.next(n[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),o}_getNow(){return(this.scheduler||e_.c).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let o=0;for(;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r}}class i_{constructor(t,e){this.time=t,this.value=e}}function o_(t,e,n){let r;return r=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},t=>t.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,o,s=0,a=!1,u=!1;return function(c){let l;s++,!i||a?(a=!1,i=new r_(t,e,r),l=i.subscribe(this),o=c.subscribe({next(t){i.next(t)},error(t){a=!0,i.error(t)},complete(){u=!0,o=void 0,i.complete()}}),u&&(o=void 0)):l=i.subscribe(this),this.add(()=>{s--,l.unsubscribe(),l=void 0,o&&!u&&n&&0===s&&(o.unsubscribe(),o=void 0,i=void 0)})}}(r))}function s_(t,e){return e?jt(()=>t,e):jt(()=>t)}var a_=n(4187);const u_=new r.OlP("angularfire2.auth.use-emulator"),c_=new r.OlP("angularfire2.auth.settings"),l_=new r.OlP("angularfire2.auth.tenant-id"),h_=new r.OlP("angularfire2.auth.langugage-code"),d_=new r.OlP("angularfire2.auth.use-device-language"),f_=new r.OlP("angularfire.auth.persistence");let p_=(()=>{class t{constructor(t,e,r,i,o,s,a,u,c,l){const h=new xi.HU(i),d=(0,xi.ss)(h),f=new vt.xQ,p=(0,mt.of)(void 0).pipe((0,Ai.QV)(h.outsideAngular),jt(()=>i.runOutsideAngular(()=>n.e(781).then(n.bind(n,9781)))),(0,Ut.U)(()=>(0,xi.on)(t,i,e)),(0,Ut.U)(t=>i.runOutsideAngular(()=>{const e=o,n=s;return(0,xi.sI)(`${t.name}.auth`,"AngularFireAuth",t,()=>{const r=i.runOutsideAngular(()=>t.auth());return e&&r.useEmulator(`http://${e.join(":")}`),a&&(r.tenantId=a),r.languageCode=u,c&&r.useDeviceLanguage(),n&&(r.settings=n),l&&r.setPersistence(l),r},[e,a,u,c,n,l])})),o_({bufferSize:1,refCount:!1}));if(L(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,mt.of)(null);else{p.pipe(me()).subscribe();const t=p.pipe(jt(t=>t.getRedirectResult().then(t=>t,()=>null)),d,o_({bufferSize:1,refCount:!1})),e=t=>new St.y(e=>({unsubscribe:i.runOutsideAngular(()=>t(e))})),n=p.pipe(jt(t=>e(t.onAuthStateChanged.bind(t)))),r=p.pipe(jt(t=>e(t.onIdTokenChanged.bind(t))));this.authState=t.pipe(s_(n),(0,a_.R)(h.outsideAngular),(0,Ai.QV)(h.insideAngular)),this.user=t.pipe(s_(r),(0,a_.R)(h.outsideAngular),(0,Ai.QV)(h.insideAngular)),this.idToken=this.user.pipe(jt(t=>t?(0,gt.D)(t.getIdToken()):(0,mt.of)(null))),this.idTokenResult=this.user.pipe(jt(t=>t?(0,gt.D)(t.getIdTokenResult()):(0,mt.of)(null))),this.credential=(0,t_.T)(t,f,this.authState.pipe($t(t=>!t))).pipe((0,Ut.U)(t=>(null==t?void 0:t.user)?t:null),(0,a_.R)(h.outsideAngular),(0,Ai.QV)(h.insideAngular))}return(0,xi.pX)(this,p,i,{spy:{apply:(t,e,n)=>{(t.startsWith("signIn")||t.startsWith("createUser"))&&n.then(t=>f.next(t))}}})}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(xi.Dh),r.LFG(xi.xv,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(u_,8),r.LFG(c_,8),r.LFG(l_,8),r.LFG(h_,8),r.LFG(d_,8),r.LFG(f_,8))},t.\u0275prov=(0,r.Yz7)({factory:function(){return new t((0,r.LFG)(xi.Dh),(0,r.LFG)(xi.xv,8),(0,r.LFG)(r.Lbi),(0,r.LFG)(r.R0b),(0,r.LFG)(u_,8),(0,r.LFG)(c_,8),(0,r.LFG)(l_,8),(0,r.LFG)(h_,8),(0,r.LFG)(d_,8),(0,r.LFG)(f_,8))},token:t,providedIn:"any"}),t})();function g_(t,e){return function(t,e=bi.z){return new St.y(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(t,e)}function m_(t,e){return g_(t,e).pipe((0,Ut.U)(t=>({payload:t,type:"query"})))}function v_(t,e){return m_(t,e).pipe(Kt(void 0),Ti(),(0,Ut.U)(([t,e])=>{const n=e.payload.docChanges(),r=n.map(t=>({type:t.type,payload:t}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(e.payload.metadata)&&e.payload.docs.forEach((e,i)=>{const o=n.find(t=>t.doc.ref.isEqual(e.ref)),s=null==t?void 0:t.payload.docs.find(t=>t.ref.isEqual(e.ref));o&&JSON.stringify(o.doc.metadata)===JSON.stringify(e.metadata)||!o&&s&&JSON.stringify(s.metadata)===JSON.stringify(e.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:e}})}),r}))}function y_(t,e,n){return v_(t,n).pipe(Wt((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return __(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return __(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return __(t,e.oldIndex,1)}return t}(t,e))}),t}(t,n.map(t=>t.payload),e),[]),Ii(),(0,Ut.U)(t=>t.map(t=>({type:t.type,payload:t}))))}function __(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function w_(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}(0,xi.GT)(p_,[{app:null,applyActionCode:null,checkActionCode:null,confirmPasswordReset:null,createUserWithEmailAndPassword:null,currentUser:null,fetchSignInMethodsForEmail:null,isSignInWithEmailLink:null,getRedirectResult:null,languageCode:null,settings:null,onAuthStateChanged:null,onIdTokenChanged:null,sendSignInLinkToEmail:null,sendPasswordResetEmail:null,setPersistence:null,signInAndRetrieveDataWithCredential:null,signInAnonymously:null,signInWithCredential:null,signInWithCustomToken:null,signInWithEmailAndPassword:null,signInWithPhoneNumber:null,signInWithEmailLink:null,signInWithPopup:null,signInWithRedirect:null,signOut:null,tenantId:null,updateCurrentUser:null,useDeviceLanguage:null,useEmulator:null,verifyPasswordResetCode:null}]);class b_{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){let e=v_(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe((0,Ut.U)(e=>e.filter(e=>t.indexOf(e.type)>-1)))),e.pipe(Kt(void 0),Ti(),$t(([t,e])=>e.length>0||!t),(0,Ut.U)(([t,e])=>e),this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Wt((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=w_(t);return y_(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return m_(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ut.U)(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return(0,gt.D)(this.query.get(t)).pipe((0,Ai.QV)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new T_(this.ref.doc(t),this.afs)}}class T_{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=A_(n,e);return new b_(r,i,this.afs)}snapshotChanges(){return function(t,e){return g_(t,e).pipe(Kt(void 0),Ti(),(0,Ut.U)(([t,e])=>e.exists?(null==t?void 0:t.exists)?{payload:e,type:"modified"}:{payload:e,type:"added"}:{payload:e,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return this.snapshotChanges().pipe((0,Ut.U)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return(0,gt.D)(this.ref.get(t)).pipe((0,Ai.QV)(this.afs.schedulers.insideAngular))}}class C_{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?v_(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ut.U)(e=>e.filter(e=>t.indexOf(e.type)>-1)),$t(t=>t.length>0),this.afs.keepUnstableUntilFirst):v_(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Wt((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=w_(t);return y_(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return m_(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ut.U)(e=>e.payload.docs.map(e=>t.idField?Object.assign({[t.idField]:e.id},e.data()):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return(0,gt.D)(this.query.get(t)).pipe((0,Ai.QV)(this.afs.schedulers.insideAngular))}}const E_=new r.OlP("angularfire2.enableFirestorePersistence"),I_=new r.OlP("angularfire2.firestore.persistenceSettings"),S_=new r.OlP("angularfire2.firestore.settings"),k_=new r.OlP("angularfire2.firestore.use-emulator");function A_(t,e=(t=>t)){return{query:e(t),ref:t}}let x_=(()=>{class t{constructor(t,e,n,r,i,o,s,a,u){this.schedulers=new xi.HU(o),this.keepUnstableUntilFirst=(0,xi.ss)(this.schedulers);const c=(0,xi.on)(t,o,e);!Ni.Z.auth&&u&&(0,xi.yq)();const l=a;[this.firestore,this.persistenceEnabled$]=(0,xi.sI)(`${c.name}.firestore`,"AngularFirestore",c,()=>{const t=o.runOutsideAngular(()=>c.firestore());if(r&&t.settings(r),l&&t.useEmulator(...l),n&&!L(i)){const e=()=>{try{return(0,gt.D)(t.enablePersistence(s||void 0).then(()=>!0,()=>!1))}catch(Yy){return"undefined"!=typeof console&&console.warn(Yy),(0,mt.of)(!1)}};return[t,o.runOutsideAngular(e)]}return[t,(0,mt.of)(!1)]},[r,l,n])}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=A_(n,e),o=this.schedulers.ngZone.run(()=>r);return new b_(o,i,this)}collectionGroup(t,e){const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new C_(n(r),this)}doc(t){let e;e="string"==typeof t?this.firestore.doc(t):t;const n=this.schedulers.ngZone.run(()=>e);return new T_(n,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(xi.Dh),r.LFG(xi.xv,8),r.LFG(E_,8),r.LFG(S_,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(I_,8),r.LFG(k_,8),r.LFG(u_,8))},t.\u0275prov=(0,r.Yz7)({factory:function(){return new t((0,r.LFG)(xi.Dh),(0,r.LFG)(xi.xv,8),(0,r.LFG)(E_,8),(0,r.LFG)(S_,8),(0,r.LFG)(r.Lbi),(0,r.LFG)(r.R0b),(0,r.LFG)(I_,8),(0,r.LFG)(k_,8),(0,r.LFG)(u_,8))},token:t,providedIn:"any"}),t})();function N_(t,e,n,r,i,o,s){try{var a=t[o](s),u=a.value}catch(c){return void n(c)}a.done?e(u):Promise.resolve(u).then(r,i)}var P_=n(1055);class O_{constructor(t,e){this.observables=t,this.project=e}call(t,e){return e.subscribe(new R_(t,this.observables,this.project))}}class R_ extends Ct{constructor(t,e,n){super(t),this.observables=e,this.project=n,this.toRespond=[];const r=e.length;this.values=new Array(r);for(let i=0;i<r;i++)this.toRespond.push(i);for(let i=0;i<r;i++)this.add(kt(this,e[i],void 0,i))}notifyNext(t,e,n){this.values[n]=e;const r=this.toRespond;if(r.length>0){const t=r.indexOf(n);-1!==t&&r.splice(t,1)}}notifyComplete(){}_next(t){if(0===this.toRespond.length){const e=[t,...this.values];this.project?this._tryProject(e):this.destination.next(e)}}_tryProject(t){let e;try{e=this.project.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}class D_{constructor(t){this.predicate=t}call(t,e){return e.subscribe(new L_(t,this.predicate))}}class L_ extends Tt.L{constructor(t,e){super(t),this.predicate=e,this.skipping=!0,this.index=0}_next(t){const e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)}tryCallPredicate(t){try{const e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(e){this.destination.error(e)}}}function F_(t){return null==t}function M_(t){return"function"==typeof t.set}function U_(t,e){return M_(e)?e:t.ref(e)}function q_(t,e){if("string"==typeof t)return e.stringCase();if(M_(t))return e.firebaseCase();if("function"==typeof t.exportVal)return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof t)}function j_(t,e,n="on",r=bi.z){return new St.y(i=>{let o=null;return o=t[n](e,(t,e)=>{r.schedule(()=>{i.next({snapshot:t,prevKey:e})}),"once"===n&&r.schedule(()=>i.complete())},t=>{r.schedule(()=>i.error(t))}),"on"===n?{unsubscribe(){null!=o&&t.off(e,o)}}:{unsubscribe(){}}}).pipe((0,Ut.U)(t=>{const{snapshot:n,prevKey:r}=t;let i=null;return n.exists()&&(i=n.key),{type:e,payload:n,prevKey:r,key:i}}),(0,P_.B)())}function V_(t,e){const n=t.length;for(let r=0;r<n;r++)if(t[r].payload.key===e)return r;return-1}function B_(t,e){const{payload:n,prevKey:r,key:i}=e,o=V_(t,i),s=function(t,e){if(F_(e))return 0;{const n=V_(t,e);return-1===n?t.length:n+1}}(t,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let n=null;e.payload.forEach(e=>{const r={payload:e,type:"value",prevKey:n,key:e.key};return n=e.key,t=[...t,r],!1})}return t;case"child_added":if(o>-1){const i=t[o-1];(i&&i.key||null)!==r&&(t=t.filter(t=>t.payload.key!==n.key)).splice(s,0,e)}else{if(null==r)return[e,...t];(t=t.slice()).splice(s,0,e)}return t;case"child_removed":return t.filter(t=>t.payload.key!==n.key);case"child_changed":return t.map(t=>t.payload.key===i?e:t);case"child_moved":if(o>-1){const e=t.splice(o,1)[0];return(t=t.slice()).splice(s,0,e),t}return t;default:return t}}function H_(t){return(F_(t)||0===t.length)&&(t=["child_added","child_removed","child_changed","child_moved"]),t}function z_(t,e,n){return function(t,e,n){return j_(t,"value","once",n).pipe(jt(r=>{const i=[(0,mt.of)(r)];return e.forEach(e=>i.push(j_(t,e,"on",n))),(0,t_.T)(...i).pipe(Wt(B_,[]))}),Ii())}(t,e=H_(e),n)}function G_(t,e,n){const r=(e=H_(e)).map(e=>j_(t,e,"on",n));return(0,t_.T)(...r)}function Z_(t,e){return function(n,r){return q_(n,{stringCase:()=>t.child(n)[e](r),firebaseCase:()=>n[e](r),snapshotCase:()=>n.ref[e](r)})}}function K_(t){return function(e){return e?q_(e,{stringCase:()=>t.child(e).remove(),firebaseCase:()=>e.remove(),snapshotCase:()=>e.ref.remove()}):t.remove()}}function W_(t,e){return function(){return j_(t,"value","on",e)}}n(2107);const Y_=new r.OlP("angularfire2.realtimeDatabaseURL"),Q_=new r.OlP("angularfire2.database.use-emulator");let $_=(()=>{class t{constructor(t,e,n,r,i,o,s){this.schedulers=new xi.HU(i),this.keepUnstableUntilFirst=(0,xi.ss)(this.schedulers);const a=o,u=(0,xi.on)(t,i,e);!Ni.Z.auth&&s&&(0,xi.yq)(),this.database=(0,xi.sI)(`${u.name}.database.${n}`,"AngularFireDatabase",u,()=>{const t=i.runOutsideAngular(()=>u.database(n||void 0));return a&&t.useEmulator(...a),t},[a])}list(t,e){const n=this.schedulers.ngZone.runOutsideAngular(()=>U_(this.database,t));let r=n;return e&&(r=e(n)),function(t,e){const n=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>t.ref);return{query:t,update:Z_(r,"update"),set:Z_(r,"set"),push:t=>r.push(t),remove:K_(r),snapshotChanges:r=>z_(t,r,n).pipe(e.keepUnstableUntilFirst),stateChanges:r=>G_(t,r,n).pipe(e.keepUnstableUntilFirst),auditTrail:r=>function(t,e,n){return function(t,e,n){return function(t,e){return j_(t,"value","on",e).pipe((0,Ut.U)(t=>{let e;return t.payload.forEach(t=>(e=t.key,!1)),{data:t,lastKeyToLoad:e}}))}(t,n).pipe(function(...t){return e=>{let n;return"function"==typeof t[t.length-1]&&(n=t.pop()),e.lift(new O_(t,n))}}(e),(0,Ut.U)(([t,e])=>{const n=t.lastKeyToLoad,r=e.map(t=>t.key);return{actions:e,lastKeyToLoad:n,loadedKeys:r}}),(r=t=>-1===t.loadedKeys.indexOf(t.lastKeyToLoad),t=>t.lift(new D_(r))),(0,Ut.U)(t=>t.actions));var r}(t,G_(t,e).pipe(Wt((t,e)=>[...t,e],[])),n)}(t,r,n).pipe(e.keepUnstableUntilFirst),valueChanges:(r,i)=>z_(t,r,n).pipe((0,Ut.U)(t=>t.map(t=>i&&i.idField?Object.assign(Object.assign({},t.payload.val()),{[i.idField]:t.key}):t.payload.val())),e.keepUnstableUntilFirst)}}(r,this)}object(t){const e=this.schedulers.ngZone.runOutsideAngular(()=>U_(this.database,t));return r=this,{query:n=e,snapshotChanges:()=>W_(n,r.schedulers.outsideAngular)().pipe(r.keepUnstableUntilFirst),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>W_(n,r.schedulers.outsideAngular)().pipe(r.keepUnstableUntilFirst,(0,Ut.U)(t=>t.payload.exists()?t.payload.val():null))};var n,r}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(xi.Dh),r.LFG(xi.xv,8),r.LFG(Y_,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(Q_,8),r.LFG(u_,8))},t.\u0275prov=(0,r.Yz7)({factory:function(){return new t((0,r.LFG)(xi.Dh),(0,r.LFG)(xi.xv,8),(0,r.LFG)(Y_,8),(0,r.LFG)(r.Lbi),(0,r.LFG)(r.R0b),(0,r.LFG)(Q_,8),(0,r.LFG)(u_,8))},token:t,providedIn:"any"}),t})(),J_=(()=>{class t{constructor(t,e,n){this.afAuth=t,this.router=e,this.context=n,this.emailSent=!1,this.user=this.afAuth.authState.pipe((0,Ut.U)(t=>t?t.email:null))}Login(t,e){return new Promise((n,r)=>{this.afAuth.signInWithEmailAndPassword(t,e).then(e=>{localStorage.setItem("token",t),n(e)},t=>{switch(console.log(t),t.code){case"auth/user-not-found":r("El usuario no existe");break;case"auth/invalid-email":r("email invalido");break;case"auth/wrong-password":r("clave incorrecta");break;default:r("ERROR")}})})}Register(t,e){return new Promise((n,r)=>{this.afAuth.createUserWithEmailAndPassword(t,e).then(t=>{this.EnviarMailDeVerificacion(),n(t)},t=>{switch(t.code){case"auth/weak-password":r("clave muy corta,minimo 6 caracteres");break;case"auth/invalid-email":r("email invalido");break;case"auth/wrong-password":r("clave invalida");break;case"auth/email-already-in-use":r("El correo ya se encuentra tomado");break;default:r("ERROR")}})})}EnviarMailDeVerificacion(){var t=this;return function(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function s(t){N_(o,r,i,s,a,"next",t)}function a(t){N_(o,r,i,s,a,"throw",t)}s(void 0)})}}(function*(){return yield(yield t.afAuth.currentUser).sendEmailVerification()})()}GetCurrentUser(){return this.afAuth.currentUser}LogOutCurrentUser(){this.afAuth.signOut()}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(p_),r.LFG(Jr),r.LFG($_))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),X_=(()=>{class t{constructor(t,e,n){this.bd=t,this.authSvc=e,this.context=n,this.ruteDeLaColeccionUsuarios="/usuarios",this.rutaDeLaColeccionPaciente="/pacientes",this.rutaDeLaColeccionEspecialista="/especialistas",this.listaUsuarios=[],this.referenciaBd=t,this.referenciaAlaColeccionPaciente=t.collection(this.rutaDeLaColeccionPaciente),this.referenciaAlaColeccionEspecialista=t.collection(this.rutaDeLaColeccionEspecialista),this.referenciaAlaColeccionUsuario=t.collection(this.ruteDeLaColeccionUsuarios),this.usuarios=this.TraerTodosUsuarios().valueChanges(),this.usuarios.subscribe(t=>{this.listaUsuarios=t},t=>console.log(t))}setUsuarioActual(t){this.usuarioActual=t}BuscarUsuarioActual(){this.usuarioActual=this.listaUsuarios.filter(t=>t.email==localStorage.getItem("token")),this.usuarioActual=this.usuarioActual[0]}CrearPaciente(t){let e=this.bd.createId();return t.id=e,this.referenciaAlaColeccionUsuario.add(Object.assign({},t))}RegistrarEspecialista(t){this.authSvc.GetCurrentUser().then(e=>{t.id=e.uid;const n=this.bd.collection("usuarios").doc(e.uid);return console.log(t),n.set(Object.assign({},t)),!0})}RegistrarAdmin(t){this.authSvc.GetCurrentUser().then(e=>(t.id=e.uid,this.bd.collection("usuarios").doc(e.uid).set(Object.assign({},t)),!0))}RegistrarPaciente(t){this.authSvc.GetCurrentUser().then(e=>(t.id=e.uid,this.bd.collection("usuarios").doc(e.uid).set(Object.assign({},t)),!0))}ActualizarEstadoEspecialista(t){return console.log(t.id),this.referenciaAlaColeccionUsuario.doc(t.id).update({aprobado:!0})}CrearEspecialista(t){let e=this.bd.createId();return t.id=e,this.referenciaAlaColeccionEspecialista.add(Object.assign({},t))}TraerTodosPacientes(){return this.referenciaAlaColeccionPaciente}TraerTodosUsuarios(){return this.referenciaAlaColeccionUsuario}TraerTodosEspecialistas(){return this.referenciaAlaColeccionEspecialista}BuscarUsuarioEsp(t){return this.referenciaBd.collection(this.rutaDeLaColeccionEspecialista,e=>e.where("correo","==",t.correo).where("clave","==",t.clave))}BuscarUsuario(t,e){return this.referenciaBd.collection(this.rutaDeLaColeccionEspecialista,n=>n.where("correo","==",t).where("clave","==",e))}BuscarUsuarioPac(t){return this.referenciaBd.collection(this.rutaDeLaColeccionPaciente,e=>e.where("correo","==",t.correo).where("clave","==",t.clave))}Logout(){localStorage.clear(),this.authSvc.LogOutCurrentUser()}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(x_),r.LFG(J_),r.LFG($_))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),tw=(()=>{class t{constructor(t){this.userSvc=t}ngOnInit(){}mostrar(){console.log(this.userSvc.usuarioActual)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(X_))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-home"]],decls:4,vars:0,consts:[[3,"click"],["routerLink","/usuarios"]],template:function(t,e){1&t&&(r.TgZ(0,"p",0),r.NdJ("click",function(){return e.mostrar()}),r._uU(1,"home works!"),r.qZA(),r.TgZ(2,"a",1),r._uU(3,"Ir a usuarios"),r.qZA())},directives:[ti],styles:[""]}),t})();var ew=n(2056);function nw(t,e){return new St.y(n=>{const r=t.length;if(0===r)return void n.complete();const i=new Array(r);let o=0,s=0;for(let a=0;a<r;a++){const u=(0,gt.D)(t[a]);let c=!1;n.add(u.subscribe({next:t=>{c||(c=!0,s++),i[a]=t},error:t=>n.error(t),complete:()=>{o++,o!==r&&c||(s===r&&n.next(e?e.reduce((t,e,n)=>(t[e]=i[n],t),{}):i),n.complete())}}))}})}let rw=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}setProperty(t,e){this._renderer.setProperty(this._elementRef.nativeElement,t,e)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.Qsj),r.Y36(r.SBq))},t.\u0275dir=r.lG2({type:t}),t})(),iw=(()=>{class t extends rw{}return t.\u0275fac=function(){let e;return function(n){return(e||(e=r.n5z(t)))(n||t)}}(),t.\u0275dir=r.lG2({type:t,features:[r.qOj]}),t})();const ow=new r.OlP("NgValueAccessor"),sw={provide:ow,useExisting:(0,r.Gpc)(()=>uw),multi:!0},aw=new r.OlP("CompositionEventMode");let uw=(()=>{class t extends rw{constructor(t,e,n){super(t,e),this._compositionMode=n,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=o()?o().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.Qsj),r.Y36(r.SBq),r.Y36(aw,8))},t.\u0275dir=r.lG2({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&r.NdJ("input",function(t){return e._handleInput(t.target.value)})("blur",function(){return e.onTouched()})("compositionstart",function(){return e._compositionStart()})("compositionend",function(t){return e._compositionEnd(t.target.value)})},features:[r._Bn([sw]),r.qOj]}),t})();function cw(t){return null==t||0===t.length}function lw(t){return null!=t&&"number"==typeof t.length}const hw=new r.OlP("NgValidators"),dw=new r.OlP("NgAsyncValidators"),fw=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class pw{static min(t){return function(t){return e=>{if(cw(e.value)||cw(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}(t)}static max(t){return function(t){return e=>{if(cw(e.value)||cw(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}(t)}static required(t){return function(t){return cw(t.value)?{required:!0}:null}(t)}static requiredTrue(t){return function(t){return!0===t.value?null:{required:!0}}(t)}static email(t){return function(t){return cw(t.value)||fw.test(t.value)?null:{email:!0}}(t)}static minLength(t){return function(t){return e=>cw(e.value)||!lw(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}(t)}static maxLength(t){return function(t){return e=>lw(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}(t)}static pattern(t){return function(t){if(!t)return gw;let e,n;return"string"==typeof t?(n="","^"!==t.charAt(0)&&(n+="^"),n+=t,"$"!==t.charAt(t.length-1)&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),t=>{if(cw(t.value))return null;const r=t.value;return e.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}(t)}static nullValidator(t){return null}static compose(t){return bw(t)}static composeAsync(t){return Cw(t)}}function gw(t){return null}function mw(t){return null!=t}function vw(t){const e=(0,r.QGY)(t)?(0,gt.D)(t):t;return(0,r.CqO)(e),e}function yw(t){let e={};return t.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function _w(t,e){return e.map(e=>e(t))}function ww(t){return t.map(t=>function(t){return!t.validate}(t)?t:e=>t.validate(e))}function bw(t){if(!t)return null;const e=t.filter(mw);return 0==e.length?null:function(t){return yw(_w(t,e))}}function Tw(t){return null!=t?bw(ww(t)):null}function Cw(t){if(!t)return null;const e=t.filter(mw);return 0==e.length?null:function(t){return function(...t){if(1===t.length){const e=t[0];if((0,bt.k)(e))return nw(e,null);if((0,ew.K)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return nw(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return nw(t=1===t.length&&(0,bt.k)(t[0])?t[0]:t,null).pipe((0,Ut.U)(t=>e(...t)))}return nw(t,null)}(_w(t,e).map(vw)).pipe((0,Ut.U)(yw))}}function Ew(t){return null!=t?Cw(ww(t)):null}function Iw(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function Sw(t){return t._rawValidators}function kw(t){return t._rawAsyncValidators}let Aw=(()=>{class t{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=Tw(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Ew(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.lG2({type:t}),t})(),xw=(()=>{class t extends Aw{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(){let e;return function(n){return(e||(e=r.n5z(t)))(n||t)}}(),t.\u0275dir=r.lG2({type:t,features:[r.qOj]}),t})();class Nw extends Aw{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Pw{constructor(t){this._cd=t}is(t){var e,n;return!!(null===(n=null===(e=this._cd)||void 0===e?void 0:e.control)||void 0===n?void 0:n[t])}}let Ow=(()=>{class t extends Pw{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Nw,2))},t.\u0275dir=r.lG2({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.ekj("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))},features:[r.qOj]}),t})(),Rw=(()=>{class t extends Pw{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(xw,10))},t.\u0275dir=r.lG2({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.ekj("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))},features:[r.qOj]}),t})();function Dw(t,e){Mw(t,e,!0),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&qw(t,e)})}(t,e),function(t,e){const n=(t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&qw(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function(t,e){if(e.valueAccessor.setDisabledState){const n=t=>{e.valueAccessor.setDisabledState(t)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function Lw(t,e,n=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Uw(t,e,!0),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function Fw(t,e){t.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Mw(t,e,n){const r=Sw(t);null!==e.validator?t.setValidators(Iw(r,e.validator)):"function"==typeof r&&t.setValidators([r]);const i=kw(t);if(null!==e.asyncValidator?t.setAsyncValidators(Iw(i,e.asyncValidator)):"function"==typeof i&&t.setAsyncValidators([i]),n){const n=()=>t.updateValueAndValidity();Fw(e._rawValidators,n),Fw(e._rawAsyncValidators,n)}}function Uw(t,e,n){let r=!1;if(null!==t){if(null!==e.validator){const n=Sw(t);if(Array.isArray(n)&&n.length>0){const i=n.filter(t=>t!==e.validator);i.length!==n.length&&(r=!0,t.setValidators(i))}}if(null!==e.asyncValidator){const n=kw(t);if(Array.isArray(n)&&n.length>0){const i=n.filter(t=>t!==e.asyncValidator);i.length!==n.length&&(r=!0,t.setAsyncValidators(i))}}}if(n){const t=()=>{};Fw(e._rawValidators,t),Fw(e._rawAsyncValidators,t)}return r}function qw(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function jw(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Vw="VALID",Bw="INVALID",Hw="PENDING",zw="DISABLED";function Gw(t){return(Yw(t)?t.validators:t)||null}function Zw(t){return Array.isArray(t)?Tw(t):t||null}function Kw(t,e){return(Yw(e)?e.asyncValidators:t)||null}function Ww(t){return Array.isArray(t)?Ew(t):t||null}function Yw(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class Qw{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=Zw(this._rawValidators),this._composedAsyncValidatorFn=Ww(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===Vw}get invalid(){return this.status===Bw}get pending(){return this.status==Hw}get disabled(){return this.status===zw}get enabled(){return this.status!==zw}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=Zw(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=Ww(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=Hw,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=zw,this.errors=null,this._forEachChild(e=>{e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Vw,this._forEachChild(e=>{e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==Vw&&this.status!==Hw||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?zw:Vw}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=Hw,this._hasOwnPendingAsyncValidator=!0;const e=vw(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(e,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;let r=t;return e.forEach(t=>{r=r instanceof Jw?r.controls.hasOwnProperty(t)?r.controls[t]:null:r instanceof Xw&&r.at(t)||null}),r}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new r.vpe,this.statusChanges=new r.vpe}_calculateStatus(){return this._allControlsDisabled()?zw:this.errors?Bw:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Hw)?Hw:this._anyControlsHaveStatus(Bw)?Bw:Vw}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Yw(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class $w extends Qw{constructor(t=null,e,n){super(Gw(e),Kw(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){jw(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){jw(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class Jw extends Qw{constructor(t,e,n){super(Gw(e),Kw(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,n={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof $w?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const n=this.controls[e];n&&t(n,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&t(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,r)=>{n=e(n,t,r)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class Xw extends Qw{constructor(t,e,n){super(Gw(e),Kw(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}at(t){return this.controls[t]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,n={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent})}removeAt(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof $w?t.value:t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}let tb=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.lG2({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})();const eb={provide:ow,useExisting:(0,r.Gpc)(()=>nb),multi:!0};let nb=(()=>{class t extends iw{writeValue(t){this.setProperty("value",null==t?"":t)}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}}return t.\u0275fac=function(){let e;return function(n){return(e||(e=r.n5z(t)))(n||t)}}(),t.\u0275dir=r.lG2({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,e){1&t&&r.NdJ("input",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},features:[r._Bn([eb]),r.qOj]}),t})(),rb=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({}),t})();const ib=new r.OlP("NgModelWithFormControlWarning"),ob={provide:xw,useExisting:(0,r.Gpc)(()=>sb)};let sb=(()=>{class t extends xw{constructor(t,e){super(),this.validators=t,this.asyncValidators=e,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new r.vpe,this._setValidators(t),this._setAsyncValidators(e)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Uw(this.form,this,!1),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const e=this.form.get(t.path);return Dw(e,t),e.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),e}getControl(t){return this.form.get(t.path)}removeControl(t){Lw(t.control||null,t,!1),jw(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,e){this.form.get(t.path).setValue(e)}onSubmit(t){return this.submitted=!0,e=this.directives,this.form._syncPendingControls(),e.forEach(t=>{const e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)}),this.ngSubmit.emit(t),!1;var e}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const e=t.control,n=this.form.get(t.path);e!==n&&(Lw(e||null,t),n instanceof $w&&(Dw(n,t),t.control=n))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const e=this.form.get(t.path);(function(t,e){Mw(t,e,!1)})(e,t),e.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const e=this.form.get(t.path);e&&function(t,e){return Uw(t,e,!1)}(e,t)&&e.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Mw(this.form,this,!1),this._oldForm&&Uw(this._oldForm,this,!1)}_checkFormPresent(){}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(hw,10),r.Y36(dw,10))},t.\u0275dir=r.lG2({type:t,selectors:[["","formGroup",""]],hostBindings:function(t,e){1&t&&r.NdJ("submit",function(t){return e.onSubmit(t)})("reset",function(){return e.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[r._Bn([ob]),r.qOj,r.TTD]}),t})();const ab={provide:Nw,useExisting:(0,r.Gpc)(()=>ub)};let ub=(()=>{class t extends Nw{constructor(t,e,n,i,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.update=new r.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(e),this._setAsyncValidators(n),this.valueAccessor=function(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(t=>{t.constructor===uw?n=t:Object.getPrototypeOf(t.constructor)===iw?r=t:i=t}),i||r||n||null}(0,i)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return t=null==this.name?this.name:this.name.toString(),[...this._parent.path,t];var t}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(xw,13),r.Y36(hw,10),r.Y36(dw,10),r.Y36(ow,10),r.Y36(ib,8))},t.\u0275dir=r.lG2({type:t,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[r._Bn([ab]),r.qOj,r.TTD]}),t._ngModelWarningSentOnce=!1,t})(),cb=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[rb]]}),t})(),lb=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[cb]}),t})(),hb=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:ib,useValue:e.warnOnNgModelWithFormControl}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[cb]}),t})(),db=(()=>{class t{group(t,e=null){const n=this._reduceControls(t);let r,i=null,o=null;return null!=e&&(function(t){return void 0!==t.asyncValidators||void 0!==t.validators||void 0!==t.updateOn}(e)?(i=null!=e.validators?e.validators:null,o=null!=e.asyncValidators?e.asyncValidators:null,r=null!=e.updateOn?e.updateOn:void 0):(i=null!=e.validator?e.validator:null,o=null!=e.asyncValidator?e.asyncValidator:null)),new Jw(n,{asyncValidators:o,updateOn:r,validators:i})}control(t,e,n){return new $w(t,e,n)}array(t,e,n){const r=t.map(t=>this._createControl(t));return new Xw(r,e,n)}_reduceControls(t){const e={};return Object.keys(t).forEach(n=>{e[n]=this._createControl(t[n])}),e}_createControl(t){return t instanceof $w||t instanceof Jw||t instanceof Xw?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=(0,r.Yz7)({factory:function(){return new t},token:t,providedIn:hb}),t})();var fb=n(2501),pb=n.n(fb);let gb=(()=>{class t{constructor(t,e,n,r,i){this.fb=t,this.router=e,this.userSrvc=n,this.authSvc=r,this.db=i,this.listaUsuarios=[],this.flag=!0,this.isEmail=/\S+@\S+\.\S+/,this.authSvc.LogOutCurrentUser()}ngOnInit(){this.userSrvc.Logout(),this.initForm(),this.usuarios=this.userSrvc.TraerTodosUsuarios().valueChanges(),this.usuarios.subscribe(t=>{this.listaUsuarios=t},t=>console.log(t))}initForm(){this.form=this.fb.group({email:["",[pw.required,pw.pattern(this.isEmail)]],clave:["",pw.required]})}isValidField(t){const e=this.form.get(t);return!e.valid&&e.touched?"is-invalid":e.touched?"is-valid":""}ValidarUsuario(t){let e=this.listaUsuarios.filter(e=>e.id==t.user.uid);console.log(e),"Especialista"==e[0].rol?0==e[0].aprobado?(pb().fire({title:"Lo sentimos!",text:"Usted no podra ingresar hasta no ser aprobado por un administrador",icon:"warning"}),this.router.navigate(["/noHabilitado"])):(localStorage.setItem("rol",e[0].rol),console.log("habilitado"),this.router.navigate([""])):(localStorage.setItem("rol",e[0].rol),this.userSrvc.setUsuarioActual(e),this.router.navigate([""]))}onLogin(){this.authSvc.Login(this.form.value.email,this.form.value.clave).then(t=>{t.user.emailVerified?this.ValidarUsuario(t):pb().fire({title:"Lo sentimos!",text:"Usted no podra ingresar hasta no validar su correo electronico. Por favor revise su casilla de mail",icon:"warning"})}).catch(t=>{console.log("error",t)})}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(db),r.Y36(Jr),r.Y36(X_),r.Y36(J_),r.Y36($_))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-login"]],decls:18,vars:6,consts:[[1,"form-signin","text-center"],["novalidate","",3,"formGroup","ngSubmit"],["src","../../../assets/logo.png","alt","",1,"mb-4","logo"],[1,"h3","mb-3","fw-normal"],[1,"form-floating"],["type","email","id","email","placeholder","Correo electr\xf3nico","formControlName","email",1,"form-control"],["for","email"],["type","password","id","clave","placeholder","Password","formControlName","clave",1,"form-control"],["for","clave"],["type","submit",1,"w-100","btn","btn-lg","btn-primary",3,"disabled"],[1,"mt-5","mb-3","text-muted"]],template:function(t,e){1&t&&(r.TgZ(0,"main",0),r.TgZ(1,"form",1),r.NdJ("ngSubmit",function(){return e.onLogin()}),r.TgZ(2,"fieldset"),r._UZ(3,"img",2),r.TgZ(4,"h1",3),r._uU(5,"Por favor, inicie sesion"),r.qZA(),r.TgZ(6,"div",4),r._UZ(7,"input",5),r.TgZ(8,"label",6),r._uU(9,"Correo electr\xf3nico"),r.qZA(),r.qZA(),r.TgZ(10,"div",4),r._UZ(11,"input",7),r.TgZ(12,"label",8),r._uU(13,"Contrase\xf1a"),r.qZA(),r.qZA(),r.TgZ(14,"button",9),r._uU(15,"Iniciar Sesi\xf3n"),r.qZA(),r.TgZ(16,"p",10),r._uU(17,"\xa92021"),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&t&&(r.xp6(1),r.Q6J("formGroup",e.form),r.xp6(6),r.Tol(e.isValidField("email")),r.xp6(4),r.Tol(e.isValidField("clave")),r.xp6(3),r.Q6J("disabled",e.form.invalid))},directives:[tb,Rw,sb,uw,Ow,ub],styles:[".form-signin[_ngcontent-%COMP%]{width:100%;max-width:330px;padding:15px;margin:auto}.form-signin[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]{font-weight:400}.form-signin[_ngcontent-%COMP%]   .form-floating[_ngcontent-%COMP%]:focus-within{z-index:2}.form-signin[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]{margin-bottom:-1px;border-bottom-right-radius:0;border-bottom-left-radius:0}.form-signin[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{margin-bottom:10px;border-top-left-radius:0;border-top-right-radius:0}.logo[_ngcontent-%COMP%]{max-width:60px;max-height:60px}"]}),t})();class mb{constructor(t,e,n,r,i,o,s,a){this.id=a,this.correo=t,this.clave=e,this.nombre=n,this.apellido=r,this.edad=i,this.dni=o,this.rol=s}}class vb extends mb{constructor(t,e,n,r,i,o,s,a,u){super(n,r,t,e,i,o,"Especialista"),this.especialidad=s,this.imagen=a,this.aprobado=u||!1}}class yb extends mb{constructor(t,e,n,r,i,o,s,a,u){super(n,r,t,e,i,o,"Paciente"),this.imagen1=a,this.imagen2=u,this.obraSocial=s}}class _b extends mb{constructor(t,e,n,r,i,o,s,a){super(n,r,t,e,i,o,"Admin"),this.imagen1=a}}class wb{constructor(t,e){this.dueTime=t,this.scheduler=e}call(t,e){return e.subscribe(new bb(t,this.dueTime,this.scheduler))}}class bb extends Tt.L{constructor(t,e,n){super(t),this.dueTime=e,this.scheduler=n,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(Tb,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:t}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}}clearDebounce(){const t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)}}function Tb(t){t.debouncedNext()}var Cb="firebasestorage.googleapis.com",Eb=function(t){function e(n,r){var i=t.call(this,Ib(n),"Firebase Storage: "+r+" ("+Ib(n)+")")||this;return i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(i,e.prototype),i}return(0,Fu.__extends)(e,t),e.prototype._codeEquals=function(t){return Ib(t)===this.code},Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t,this.message=this.customData.serverResponse?this._baseMessage+"\n"+this.customData.serverResponse:this._baseMessage},enumerable:!1,configurable:!0}),e}(Oi.FirebaseError);function Ib(t){return"storage/"+t}function Sb(){return new Eb("unknown","An unknown error occurred, please check the error payload for server response.")}function kb(){return new Eb("canceled","User canceled the upload/download.")}function Ab(){return new Eb("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function xb(t){return new Eb("invalid-argument",t)}function Nb(){return new Eb("app-deleted","The Firebase app was deleted.")}function Pb(t){return new Eb("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Ob(t,e){return new Eb("invalid-format","String does not match format '"+t+"': "+e)}function Rb(t){throw new Eb("internal-error","Internal error: "+t)}var Db={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},Lb=function(){return function(t,e){this.data=t,this.contentType=e||null}}();function Fb(t,e){switch(t){case Db.RAW:return new Lb(Mb(e));case Db.BASE64:case Db.BASE64URL:return new Lb(Ub(t,e));case Db.DATA_URL:return new Lb((n=new qb(e)).base64?Ub(Db.BASE64,n.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(Yy){throw Ob(Db.DATA_URL,"Malformed data URL.")}return Mb(e)}(n.rest),new qb(e).contentType)}var n;throw Sb()}function Mb(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(n<t.length-1&&56320==(64512&t.charCodeAt(n+1))){var i=r,o=t.charCodeAt(++n);e.push(240|(r=65536|(1023&i)<<10|1023&o)>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else e.push(239,191,189);else 56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function Ub(t,e){switch(t){case Db.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw Ob(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case Db.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw Ob(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var s;try{s=atob(e)}catch(Yy){throw Ob(t,"Invalid character found")}for(var a=new Uint8Array(s.length),u=0;u<s.length;u++)a[u]=s.charCodeAt(u);return a}var qb=function(){return function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw Ob(Db.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r,i=e[1]||null;null!=i&&(this.base64=(n=i).length>=(r=";base64").length&&n.substring(n.length-r.length)===r,this.contentType=this.base64?i.substring(0,i.length-";base64".length):i),this.rest=t.substring(t.indexOf(",")+1)}}(),jb={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Vb(t){switch(t){case"running":case"pausing":case"canceling":return jb.RUNNING;case"paused":return jb.PAUSED;case"success":return jb.SUCCESS;case"canceled":return jb.CANCELED;case"error":default:return jb.ERROR}}var Bb=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}({}),Hb=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=Bb.NO_ERROR,this.sendPromise_=new Promise(function(e){t.xhr_.addEventListener("abort",function(){t.errorCode_=Bb.ABORT,e(t)}),t.xhr_.addEventListener("error",function(){t.errorCode_=Bb.NETWORK_ERROR,e(t)}),t.xhr_.addEventListener("load",function(){e(t)})})}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw Rb("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw Rb("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw Rb("cannot .getStatus() before sending");try{return this.xhr_.status}catch(Yy){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw Rb("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},t}(),zb=function(){function t(){}return t.prototype.createXhrIo=function(){return new Hb},t}(),Gb=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e,n){var r;try{r=t.makeFromUrl(e,n)}catch(Yy){return new t(e,"")}if(""===r.path)return r;throw new Eb("invalid-default-bucket","Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e,n){var r=null,i="([A-Za-z0-9.\\-_]+)",o=new RegExp("^gs://"+i+"(/(.*))?$","i");function s(t){t.path_=decodeURIComponent(t.path)}for(var a=n.replace(/[.]/g,"\\."),u=[{regex:o,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+a+"/v[A-Za-z0-9_]+/b/"+i+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp("^https?://"+(n===Cb?"(?:storage.googleapis.com|storage.cloud.google.com)":n)+"/"+i+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:s}],c=0;c<u.length;c++){var l=u[c],h=l.regex.exec(e);if(h){var d=h[l.indices.path];d||(d=""),r=new t(h[l.indices.bucket],d),l.postModify(r);break}}if(null==r)throw function(t){return new Eb("invalid-url","Invalid URL '"+t+"'.")}(e);return r},t}(),Zb=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}();function Kb(t){return"string"==typeof t||t instanceof String}function Wb(t){return Yb()&&t instanceof Blob}function Yb(){return"undefined"!=typeof Blob}function Qb(t,e,n,r){if(r<e)throw xb("Invalid value for '"+t+"'. Expected "+e+" or greater.");if(r>n)throw xb("Invalid value for '"+t+"'. Expected "+n+" or less.")}function $b(t,e){var n=e.match(/^(\w+):\/\/.+/),r=e;return null==(null==n?void 0:n[1])&&(r="https://"+e),r+"/v0"+t}function Jb(t){var e=encodeURIComponent,n="?";for(var r in t)t.hasOwnProperty(r)&&(n=n+(e(r)+"=")+e(t[r])+"&");return n.slice(0,-1)}var Xb=function(){function t(t,e,n,r,i,o,s,a,u,c,l){var h=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise(function(t,e){h.resolve_=t,h.reject_=e,h.start_()})}return t.prototype.start_=function(){var t=this;function e(e,n){var r,i=t.resolve_,o=t.reject_,s=n.xhr;if(n.wasSuccessCode)try{var a=t.callback_(s,s.getResponseText());!function(t){return void 0!==t}(a)?i():i(a)}catch(Yy){o(Yy)}else null!==s?((r=Sb()).serverResponse=s.getResponseText(),o(t.errorCallback_?t.errorCallback_(s,r):r)):o(r=n.canceled?t.appDelete_?Nb():kb():new Eb("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new tT(!1,null,!0)):this.backoffId_=function(e,n,r){var i=1,o=null,s=!1,a=0;function u(){return 2===a}var c=!1;function l(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];c||(c=!0,n.apply(null,t))}function h(e){o=setTimeout(function(){o=null,function(e,n){if(n)e(!1,new tT(!1,null,!0));else{var r=t.pool_.createXhrIo();t.pendingXhr_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then(function(n){null!==t.progressCallback_&&n.removeUploadProgressListener(i),t.pendingXhr_=null;var r=(n=n).getErrorCode()===Bb.NO_ERROR,o=n.getStatus();if(r&&!t.isRetryStatusCode_(o)){var s=-1!==t.successCodes_.indexOf(o);e(!0,new tT(s,n))}else{var a=n.getErrorCode()===Bb.ABORT;e(!1,new tT(!1,null,a))}})}function i(e){null!==t.progressCallback_&&t.progressCallback_(e.loaded,e.lengthComputable?e.total:-1)}}(d,u())},e)}function d(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!c)if(t)l.call.apply(l,(0,Fu.__spreadArray)([null,t],e));else{var r;u()||s?l.call.apply(l,(0,Fu.__spreadArray)([null,t],e)):(i<64&&(i*=2),1===a?(a=2,r=0):r=1e3*(i+Math.random()),h(r))}}var f=!1;function p(t){f||(f=!0,c||(null!==o?(t||(a=2),clearTimeout(o),h(0)):t||(a=1)))}return h(0),setTimeout(function(){s=!0,p(!0)},r),p}(0,e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&function(t){t(!1)}(this.backoffId_),null!==this.pendingXhr_&&this.pendingXhr_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},t}(),tT=function(){return function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n}}();function eT(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function nT(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=eT();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(Yb())return new Blob(t);throw new Eb("unsupported-environment","This browser doesn't seem to support creating Blobs")}var rT=function(){function t(t,e){var n=0,r="";Wb(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(Wb(this.data_)){var r=(o=e,s=n,(i=this.data_).webkitSlice?i.webkitSlice(o,s):i.mozSlice?i.mozSlice(o,s):i.slice?i.slice(o,s):null);return null===r?null:new t(r)}var i,o,s;return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(Yb()){var r=e.map(function(e){return e instanceof t?e.data_:e});return new t(nT.apply(null,r))}var i=e.map(function(t){return Kb(t)?Fb(Db.RAW,t).data:t.data_}),o=0;i.forEach(function(t){o+=t.byteLength});var s=new Uint8Array(o),a=0;return i.forEach(function(t){for(var e=0;e<t.length;e++)s[a++]=t[e]}),new t(s,!0)},t.prototype.uploadData=function(){return this.data_},t}();function iT(t){var e;try{e=JSON.parse(t)}catch(Yy){return null}return function(t){return"object"==typeof t&&!Array.isArray(t)}(e)?e:null}function oT(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function sT(t,e){return e}var aT=function(){return function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||sT}}(),uT=null;function cT(){if(uT)return uT;var t=[];t.push(new aT("bucket")),t.push(new aT("generation")),t.push(new aT("metageneration")),t.push(new aT("name","fullPath",!0));var e=new aT("name");e.xform=function(t,e){return function(t){return!Kb(t)||t.length<2?t:oT(t)}(e)},t.push(e);var n=new aT("size");return n.xform=function(t,e){return void 0!==e?Number(e):e},t.push(n),t.push(new aT("timeCreated")),t.push(new aT("updated")),t.push(new aT("md5Hash",null,!0)),t.push(new aT("cacheControl",null,!0)),t.push(new aT("contentDisposition",null,!0)),t.push(new aT("contentEncoding",null,!0)),t.push(new aT("contentLanguage",null,!0)),t.push(new aT("contentType",null,!0)),t.push(new aT("metadata","customMetadata",!0)),uT=t}function lT(t,e,n){var r=iT(e);return null===r?null:function(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var s=n[o];r[s.local]=s.xform(r,e[s.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=new Gb(t.bucket,t.fullPath);return e._makeStorageReference(n)}})}(r,t),r}(t,r,n)}function hT(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}var dT=function(){return function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}();function fT(t){if(!t)throw Sb()}function pT(t,e){return function(n,r){var i=lT(t,r,e);return fT(null!==i),i}}function gT(t){return function(e,n){var r;return(r=401===e.getStatus()?e.getResponseText().includes("Firebase App Check token is invalid")?new Eb("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new Eb("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?new Eb("quota-exceeded","Quota for bucket '"+t.bucket+"' exceeded, please view quota on https://firebase.google.com/pricing/."):403===e.getStatus()?new Eb("unauthorized","User does not have permission to access '"+t.path+"'."):n).serverResponse=n.serverResponse,r}}function mT(t){var e=gT(t);return function(n,r){var i=e(n,r);return 404===n.getStatus()&&(i=new Eb("object-not-found","Object '"+t.path+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function vT(t,e,n){var r=$b(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new dT(r,"GET",pT(t,n),i);return o.errorHandler=mT(e),o}function yT(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return e&&e.type()||"application/octet-stream"}(0,e)),r}var _T=function(){return function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null}}();function wT(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(Yy){fT(!1)}return fT(!!n&&-1!==(e||["active"]).indexOf(n)),n}var bT=262144,TT=function(){return function(t,e,n){if(function(t){return"function"==typeof t}(t)||null!=e||null!=n)this.next=t,this.error=e,this.complete=n;else{var r=t;this.next=r.next,this.error=r.error,this.complete=r.complete}}}();function CT(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then(function(){return t.apply(void 0,e)})}}var ET=function(){function t(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=cT(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition("error"))},this._metadataErrorHandler=function(t){r._request=void 0,t._codeEquals("canceled")?r.completeTransitions_():(r._error=t,r._transition("error"))},this._promise=new Promise(function(t,e){r._resolve=t,r._reject=e,r._start()}),this._promise.then(null,function(){})}return t.prototype._makeProgressCallback=function(){var t=this,e=this._transferred;return function(n){return t._updateProgress(e+n)}},t.prototype._shouldDoResumable=function(t){return t.size()>262144},t.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},t.prototype._resolveToken=function(t){var e=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(function(n){var r=n[0],i=n[1];switch(e._state){case"running":t(r,i);break;case"canceling":e._transition("canceled");break;case"pausing":e._transition("paused")}})},t.prototype._createResumable=function(){var t=this;this._resolveToken(function(e,n){var r=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s=yT(e,r,i),a={name:s.fullPath},u=$b(o,t.host),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},l=hT(s,n),h=new dT(u,"POST",function(t){var e;wT(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(Yy){fT(!1)}return fT(Kb(e)),e},t.maxUploadRetryTime);return h.urlParams=a,h.headers=c,h.body=l,h.errorHandler=gT(e),h}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then(function(e){t._request=void 0,t._uploadUrl=e,t._needToFetchStatus=!1,t.completeTransitions_()},t._errorHandler)})},t.prototype._fetchStatus=function(){var t=this,e=this._uploadUrl;this._resolveToken(function(n,r){var i=function(t,e,n,r){var i=new dT(n,"POST",function(t){var e=wT(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(Yy){fT(!1)}n||fT(!1);var i=Number(n);return fT(!isNaN(i)),new _T(i,r.size(),"final"===e)},t.maxUploadRetryTime);return i.headers={"X-Goog-Upload-Command":"query"},i.errorHandler=gT(e),i}(t._ref.storage,t._ref._location,e,t._blob),o=t._ref.storage._makeRequest(i,n,r);t._request=o,o.getPromise().then(function(e){e=e,t._request=void 0,t._updateProgress(e.current),t._needToFetchStatus=!1,e.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()},t._errorHandler)})},t.prototype._continueUpload=function(){var t=this,e=bT*this._chunkMultiplier,n=new _T(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken(function(i,o){var s;try{s=function(t,e,n,r,i,o,s,a){var u=new _T(0,0);if(s?(u.current=s.current,u.total=s.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new Eb("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;i>0&&(l=Math.min(l,i));var h=u.current,d={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":u.current},f=r.slice(h,h+l);if(null===f)throw Ab();var p=new dT(n,"POST",function(t,n){var i,s=wT(t,["active","final"]),a=u.current+l,c=r.size();return i="final"===s?pT(e,o)(t,n):null,new _T(a,c,"final"===s,i)},e.maxUploadRetryTime);return p.headers=d,p.body=f.uploadData(),p.progressCallback=a||null,p.errorHandler=gT(t),p}(t._ref._location,t._ref.storage,r,t._blob,e,t._mappings,n,t._makeProgressCallback())}catch(Yy){return t._error=Yy,void t._transition("error")}var a=t._ref.storage._makeRequest(s,i,o);t._request=a,a.getPromise().then(function(e){t._increaseMultiplier(),t._request=void 0,t._updateProgress(e.current),e.finalized?(t._metadata=e.metadata,t._transition("success")):t.completeTransitions_()},t._errorHandler)})},t.prototype._increaseMultiplier=function(){bT*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},t.prototype._fetchMetadata=function(){var t=this;this._resolveToken(function(e,n){var r=vT(t._ref.storage,t._ref._location,t._mappings),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then(function(e){t._request=void 0,t._metadata=e,t._transition("success")},t._metadataErrorHandler)})},t.prototype._oneShotUpload=function(){var t=this;this._resolveToken(function(e,n){var r=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"},a=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();s["Content-Type"]="multipart/related; boundary="+a;var u=yT(e,r,i),c=hT(u,n),l=rT.getBlob("--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+c+"\r\n--"+a+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",r,"\r\n--"+a+"--");if(null===l)throw Ab();var h={name:u.fullPath},d=$b(o,t.host),f=t.maxUploadRetryTime,p=new dT(d,"POST",pT(t,n),f);return p.urlParams=h,p.headers=s,p.body=l.uploadData(),p.errorHandler=gT(e),p}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then(function(e){t._request=void 0,t._metadata=e,t._updateProgress(t._blob.size()),t._transition("success")},t._errorHandler)})},t.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},t.prototype._transition=function(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":var e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=kb(),this._state=t,this._notifyObservers();break;case"error":case"success":this._state=t,this._notifyObservers()}},t.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=Vb(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),t.prototype.on=function(t,e,n,r){var i=this,o=new TT(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},t.prototype.then=function(t,e){return this._promise.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},t.prototype._removeObserver=function(t){var e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)},t.prototype._notifyObservers=function(){var t=this;this._finishPromise(),this._observers.slice().forEach(function(e){t._notifyObserver(e)})},t.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(Vb(this._state)){case jb.SUCCESS:CT(this._resolve.bind(null,this.snapshot))();break;case jb.CANCELED:case jb.ERROR:CT(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},t.prototype._notifyObserver=function(t){switch(Vb(this._state)){case jb.RUNNING:case jb.PAUSED:t.next&&CT(t.next.bind(t,this.snapshot))();break;case jb.SUCCESS:t.complete&&CT(t.complete.bind(t))();break;case jb.CANCELED:case jb.ERROR:t.error&&CT(t.error.bind(t,this._error))();break;default:t.error&&CT(t.error.bind(t,this._error))()}},t.prototype.resume=function(){var t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t},t.prototype.pause=function(){var t="running"===this._state;return t&&this._transition("pausing"),t},t.prototype.cancel=function(){var t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t},t}(),IT=function(){function t(t,e){this._service=t,this._location=e instanceof Gb?e:Gb.makeFromUrl(e,t.host)}return t.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},t.prototype._newRef=function(e,n){return new t(e,n)},Object.defineProperty(t.prototype,"root",{get:function(){var t=new Gb(this._location.bucket,"");return this._newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return oT(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===e)return null;var n=new Gb(this._location.bucket,e);return new t(this._service,n)},enumerable:!1,configurable:!0}),t.prototype._throwIfRoot=function(t){if(""===this._location.path)throw Pb(t)},t}();function ST(t){var e={prefixes:[],items:[]};return kT(t,e).then(function(){return e})}function kT(t,e,n){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var r,i,o;return(0,Fu.__generator)(this,function(s){switch(s.label){case 0:return[4,AT(t,{pageToken:n})];case 1:return r=s.sent(),(i=e.prefixes).push.apply(i,r.prefixes),(o=e.items).push.apply(o,r.items),null==r.nextPageToken?[3,3]:[4,kT(t,e,r.nextPageToken)];case 2:s.sent(),s.label=3;case 3:return[2]}})})}function AT(t,e){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var n,r;return(0,Fu.__generator)(this,function(i){switch(i.label){case 0:return null!=e&&"number"==typeof e.maxResults&&Qb("options.maxResults",1,1e3,e.maxResults),r=function(t,e,n,r,i){var o={};o.prefix=e.isRoot?"":e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var s=$b(e.bucketOnlyServerUrl(),t.host),a=t.maxOperationRetryTime,u=new dT(s,"GET",function(t,e){return function(n,r){var i=function(t,e,n){var r=iT(n);return null===r?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var i=0,o=n.prefixes;i<o.length;i++){var s=o[i].replace(/\/$/,""),a=t._makeStorageReference(new Gb(e,s));r.prefixes.push(a)}if(n.items)for(var u=0,c=n.items;u<c.length;u++)a=t._makeStorageReference(new Gb(e,c[u].name)),r.items.push(a);return r}(t,e,r)}(t,e,r);return fT(null!==i),i}}(t,e.bucket),a);return u.urlParams=o,u.errorHandler=gT(e),u}(t.storage,t._location,"/",(n=e||{}).pageToken,n.maxResults),[4,t.storage.makeRequestWithTokens(r)];case 1:return[2,i.sent().getPromise()]}})})}function xT(t,e){var n=function(t,e){var n=e.split("/").filter(function(t){return t.length>0}).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),r=new Gb(t._location.bucket,n);return new IT(t.storage,r)}function NT(t){return/^[A-Za-z]+:\/\//.test(t)}function PT(t,e){if(t instanceof DT){var n=t;if(null==n._bucket)throw new Eb("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new IT(n,n._bucket);return null!=e?PT(r,e):r}if(void 0!==e){if(e.includes(".."))throw xb('`path` param cannot contain ".."');return xT(t,e)}return t}function OT(t,e){if(e&&NT(e)){if(t instanceof DT)return new IT(t,e);throw xb("To use ref(service, url), the first argument must be a Storage instance.")}return PT(t,e)}function RT(t,e){var n=null==e?void 0:e.storageBucket;return null==n?null:Gb.makeFromBucketSpec(n,t)}var DT=function(){function t(t,e,n,r,i,o){this.app=t,this._authProvider=e,this._appCheckProvider=n,this._pool=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=Cb,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Gb.makeFromBucketSpec(i,this._host):RT(this._host,this.app.options)}return Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){this._host=t,this._bucket=null!=this._url?Gb.makeFromBucketSpec(this._url,t):RT(t,this.app.options)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){Qb("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){Qb("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),t.prototype._getAuthToken=function(){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var t,e;return(0,Fu.__generator)(this,function(n){switch(n.label){case 0:return(t=this._authProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:if(null!==(e=n.sent()))return[2,e.accessToken];n.label=2;case 2:return[2,null]}})})},t.prototype._getAppCheckToken=function(){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var t;return(0,Fu.__generator)(this,function(e){switch(e.label){case 0:return(t=this._appCheckProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:return[2,e.sent().token];case 2:return[2,null]}})})},t.prototype._delete=function(){return this._deleted=!0,this._requests.forEach(function(t){return t.cancel()}),this._requests.clear(),Promise.resolve()},t.prototype._makeStorageReference=function(t){return new IT(this,t)},t.prototype._makeRequest=function(t,e,n){var r=this;if(this._deleted)return new Zb(Nb());var i=function(t,e,n,r,i,o){var s=Jb(t.urlParams),a=t.url+s,u=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(u,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(u,n),function(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(u,o),function(t,e){null!==e&&(t["X-Firebase-AppCheck"]=e)}(u,r),new Xb(a,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i)}(t,this._appId,e,n,this._pool,this._firebaseVersion);return this._requests.add(i),i.getPromise().then(function(){return r._requests.delete(i)},function(){return r._requests.delete(i)}),i},t.prototype.makeRequestWithTokens=function(t){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var e;return(0,Fu.__generator)(this,function(n){switch(n.label){case 0:return[4,Promise.all([this._getAuthToken(),this._getAppCheckToken()])];case 1:return e=n.sent(),[2,this._makeRequest(t,e[0],e[1])]}})})},t}();function LT(t,e){return OT(t=(0,Oi.getModularInstance)(t),e)}var FT,MT,UT=function(){function t(t,e,n){this._delegate=t,this.task=e,this.ref=n}return Object.defineProperty(t.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),t}(),qT=function(){function t(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(t.prototype,"snapshot",{get:function(){return new UT(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),t.prototype.then=function(t,e){var n=this;return this._delegate.then(function(e){if(t)return t(new UT(e,n,n._ref))},e)},t.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"==typeof e?function(t){return e(new UT(t,i,i._ref))}:{next:e.next?function(t){return e.next(new UT(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},t}(),jT=function(){function t(t,e){this._delegate=t,this._service=e}return Object.defineProperty(t.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map(function(e){return new VT(e,t._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){var t=this;return this._delegate.items.map(function(e){return new VT(e,t._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),t}(),VT=function(){function t(t,e){this._delegate=t,this.storage=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this._delegate.toString()},t.prototype.child=function(e){return new t(function(t,e){return xT(t,e)}(this._delegate,e),this.storage)},Object.defineProperty(t.prototype,"root",{get:function(){return new t(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return null==e?null:new t(e,this.storage)},enumerable:!1,configurable:!0}),t.prototype.put=function(t,e){return this._throwIfRoot("put"),new qT(function(t,e,n){return function(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new ET(t,new rT(e),n)}(t=(0,Oi.getModularInstance)(t),e,n)}(this._delegate,t,e),this)},t.prototype.putString=function(t,e,n){void 0===e&&(e=Db.RAW),this._throwIfRoot("putString");var r=Fb(e,t),i=(0,Fu.__assign)({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new qT(new ET(this._delegate,new rT(r.data,!0),i),this)},t.prototype.listAll=function(){var t=this;return function(t){return ST(t=(0,Oi.getModularInstance)(t))}(this._delegate).then(function(e){return new jT(e,t.storage)})},t.prototype.list=function(t){var e=this;return function(t,e){return AT(t=(0,Oi.getModularInstance)(t),e)}(this._delegate,t||void 0).then(function(t){return new jT(t,e.storage)})},t.prototype.getMetadata=function(){return function(t){return function(t){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var e;return(0,Fu.__generator)(this,function(n){switch(n.label){case 0:return t._throwIfRoot("getMetadata"),e=vT(t.storage,t._location,cT()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}})})}(t=(0,Oi.getModularInstance)(t))}(this._delegate)},t.prototype.updateMetadata=function(t){return function(t,e){return function(t,e){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var n;return(0,Fu.__generator)(this,function(r){switch(r.label){case 0:return t._throwIfRoot("updateMetadata"),n=function(t,e,n,r){var i=$b(e.fullServerUrl(),t.host),o=hT(n,r),s=t.maxOperationRetryTime,a=new dT(i,"PATCH",pT(t,r),s);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=o,a.errorHandler=mT(e),a}(t.storage,t._location,e,cT()),[4,t.storage.makeRequestWithTokens(n)];case 1:return[2,r.sent().getPromise()]}})})}(t=(0,Oi.getModularInstance)(t),e)}(this._delegate,t)},t.prototype.getDownloadURL=function(){return function(t){return function(t){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var e;return(0,Fu.__generator)(this,function(n){switch(n.label){case 0:return t._throwIfRoot("getDownloadURL"),e=function(t,e,n){var r=$b(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new dT(r,"GET",function(t,e){return function(n,r){var i=lT(t,r,e);return fT(null!==i),function(t,e,n){var r=iT(e);if(null===r)return null;if(!Kb(r.downloadTokens))return null;var i=r.downloadTokens;if(0===i.length)return null;var o=encodeURIComponent;return i.split(",").map(function(e){var r=t.fullPath;return $b("/b/"+o(t.bucket)+"/o/"+o(r),n)+Jb({alt:"media",token:e})})[0]}(i,r,t.host)}}(t,n),i);return o.errorHandler=mT(e),o}(t.storage,t._location,cT()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise().then(function(t){if(null===t)throw new Eb("no-download-url","The given file does not have any download URLs.");return t})]}})})}(t=(0,Oi.getModularInstance)(t))}(this._delegate)},t.prototype.delete=function(){return this._throwIfRoot("delete"),function(t){return function(t){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var e;return(0,Fu.__generator)(this,function(n){switch(n.label){case 0:return t._throwIfRoot("deleteObject"),e=function(t,e){var n=$b(e.fullServerUrl(),t.host),r=new dT(n,"DELETE",function(t,e){},t.maxOperationRetryTime);return r.successCodes=[200,204],r.errorHandler=mT(e),r}(t.storage,t._location),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}})})}(t=(0,Oi.getModularInstance)(t))}(this._delegate)},t.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw Pb(t)},t}(),BT=function(){function t(t,e){var n=this;this.app=t,this._delegate=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),t.prototype.ref=function(t){if(NT(t))throw xb("ref() expected a child path but got a URL, use refFromURL instead.");return new VT(LT(this._delegate,t),this)},t.prototype.refFromURL=function(t){if(!NT(t))throw xb("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Gb.makeFromUrl(t,this._delegate.host)}catch(Yy){throw xb("refFromUrl() expected a valid full URL but got an invalid one.")}return new VT(LT(this._delegate,t),this)},t.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},t.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},t.prototype.useEmulator=function(t,e){!function(t,e,n){t.host="http://"+e+":"+n}(this._delegate,t,e)},t}();function HT(t){const e=function(t){return new St.y(e=>{const n=t=>e.next(t);n(t.snapshot);const r=t.on("state_changed",n);return t.then(t=>{n(t),e.complete()},r=>{n(t.snapshot),(t=>{e.error(t)})(r)}),function(){r()}}).pipe(function(t,e=bi.P){return n=>n.lift(new wb(t,e))}(0))}(t);return{task:t,then:t.then.bind(t),catch:t.catch.bind(t),pause:t.pause.bind(t),cancel:t.cancel.bind(t),resume:t.resume.bind(t),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,Ut.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function zT(t,e,n){return{getDownloadURL:()=>(0,mt.of)(void 0).pipe((0,Ai.QV)(e.outsideAngular),jt(()=>t.getDownloadURL()),n),getMetadata:()=>(0,mt.of)(void 0).pipe((0,Ai.QV)(e.outsideAngular),jt(()=>t.getMetadata()),n),delete:()=>(0,gt.D)(t.delete()),child:r=>zT(t.child(r),e,n),updateMetadata:e=>(0,gt.D)(t.updateMetadata(e)),put:(e,n)=>HT(t.put(e,n)),putString:(e,n,r)=>HT(t.putString(e,n,r)),listAll:()=>(0,gt.D)(t.listAll())}}MT={TaskState:jb,TaskEvent:{STATE_CHANGED:"state_changed"},StringFormat:Db,Storage:DT,Reference:VT},(FT=Pi.default).INTERNAL.registerComponent(new Jy.Component("storage",function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return new BT(r,new DT(r,i,o,new zb,n,Pi.default.SDK_VERSION))},"PUBLIC").setServiceProps(MT).setMultipleInstances(!0)),FT.registerVersion("@firebase/storage","0.5.2");const GT=new r.OlP("angularfire2.storageBucket"),ZT=new r.OlP("angularfire2.storage.maxUploadRetryTime"),KT=new r.OlP("angularfire2.storage.maxOperationRetryTime");let WT=(()=>{class t{constructor(t,e,n,r,i,o,s){this.schedulers=new xi.HU(i),this.keepUnstableUntilFirst=(0,xi.ss)(this.schedulers);const a=(0,xi.on)(t,i,e);this.storage=(0,xi.sI)(`${a.name}.storage.${n}`,"AngularFireStorage",a,()=>{const t=i.runOutsideAngular(()=>a.storage(n||void 0));return o&&t.setMaxUploadRetryTime(o),s&&t.setMaxOperationRetryTime(s),t},[o,s])}ref(t){return zT(this.storage.ref(t),this.schedulers,this.keepUnstableUntilFirst)}refFromURL(t){return zT(this.storage.refFromURL(t),this.schedulers,this.keepUnstableUntilFirst)}upload(t,e,n){return zT(this.storage.ref(t),this.schedulers,this.keepUnstableUntilFirst).put(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(xi.Dh),r.LFG(xi.xv,8),r.LFG(GT,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(ZT,8),r.LFG(KT,8))},t.\u0275prov=(0,r.Yz7)({factory:function(){return new t((0,r.LFG)(xi.Dh),(0,r.LFG)(xi.xv,8),(0,r.LFG)(GT,8),(0,r.LFG)(r.Lbi),(0,r.LFG)(r.R0b),(0,r.LFG)(ZT,8),(0,r.LFG)(KT,8))},token:t,providedIn:"any"}),t})(),YT=(()=>{class t{constructor(t){this.bd=t,this.listadoEspecialidades=[],this.rutaDeLaColeccion="especialidades",this.refenciaALaColeccion=t.collection(this.rutaDeLaColeccion),this.referenciaBd=t,this.especialidades=this.refenciaALaColeccion.valueChanges(),this.especialidades.subscribe(t=>{this.listadoEspecialidades=t},t=>console.log(t))}TraerEspecialidades(){return this.refenciaALaColeccion}AgregarEspecialidad(t){t.id=this.bd.createId(),this.refenciaALaColeccion.add(Object.assign({},t))}ValidarEspecialidad(t){let e=this.referenciaBd.collection(this.rutaDeLaColeccion,e=>e.where("descripcion","==",t.descripcion));this.refenciaALaColeccion.doc(e.uid).update({aprobada:!0})}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(x_))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function QT(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"div",4),r.TgZ(1,"div",5),r.TgZ(2,"h2"),r._uU(3,"\xbfQue tipo de usuario desea registrar?"),r.qZA(),r.TgZ(4,"div",6),r.TgZ(5,"div",7),r.TgZ(6,"button",8),r.NdJ("click",function(){return r.CHM(t),r.oxw().tipo="Paciente"}),r._uU(7,"Registrar Paciente"),r.qZA(),r.TgZ(8,"button",8),r.NdJ("click",function(){return r.CHM(t),r.oxw().tipo="Especialista"}),r._uU(9,"Registrar Especialista"),r.qZA(),r.TgZ(10,"button",8),r.NdJ("click",function(){return r.CHM(t),r.oxw().tipo="Admin"}),r._uU(11,"Registrar Admin"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA()}}function $T(t,e){1&t&&(r.TgZ(0,"h2"),r._uU(1,"Nuevo Paciente"),r.qZA())}function JT(t,e){1&t&&(r.TgZ(0,"h2"),r._uU(1,"Nuevo Especialista"),r.qZA())}function XT(t,e){1&t&&(r.TgZ(0,"h2"),r._uU(1,"Nuevo Administrador"),r.qZA())}function tC(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"button",8),r.NdJ("click",function(){return r.CHM(t),r.oxw(2).tipo="Paciente"}),r._uU(1,"Registrar Paciente"),r.qZA()}}function eC(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"button",8),r.NdJ("click",function(){return r.CHM(t),r.oxw(2).tipo="Especialista"}),r._uU(1,"Registrar Especialista"),r.qZA()}}function nC(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"button",8),r.NdJ("click",function(){return r.CHM(t),r.oxw(2).tipo="Admin"}),r._uU(1,"Registrar Admin"),r.qZA()}}function rC(t,e){if(1&t&&(r.TgZ(0,"div",6),r.TgZ(1,"div",9),r.YNc(2,$T,2,0,"h2",10),r.YNc(3,JT,2,0,"h2",10),r.YNc(4,XT,2,0,"h2",10),r.qZA(),r.TgZ(5,"div",11),r.YNc(6,tC,2,0,"button",12),r.YNc(7,eC,2,0,"button",12),r.YNc(8,nC,2,0,"button",12),r.qZA(),r.qZA()),2&t){const t=r.oxw();r.xp6(2),r.Q6J("ngIf","Paciente"==t.tipo),r.xp6(1),r.Q6J("ngIf","Especialista"==t.tipo),r.xp6(1),r.Q6J("ngIf","Admin"==t.tipo),r.xp6(2),r.Q6J("ngIf","Paciente"!=t.tipo),r.xp6(1),r.Q6J("ngIf","Especialista"!=t.tipo),r.xp6(1),r.Q6J("ngIf","Admin"!=t.tipo&&1==t.admin)}}function iC(t,e){1&t&&(r.TgZ(0,"span"),r._uU(1," Por favor ingrese su nombre "),r.qZA())}function oC(t,e){1&t&&(r.TgZ(0,"span",33),r._uU(1,"El apellido es requerido "),r.qZA())}function sC(t,e){1&t&&(r.TgZ(0,"span"),r._uU(1," Por favor ingrese su edad "),r.qZA())}function aC(t,e){1&t&&(r.TgZ(0,"span"),r._uU(1," Por favor ingrese su documento "),r.qZA())}function uC(t,e){1&t&&(r.TgZ(0,"span"),r._uU(1," Por favor ingrese su Obra Social "),r.qZA())}function cC(t,e){1&t&&(r.TgZ(0,"span"),r._uU(1," Por favor ingrese su correo "),r.qZA())}function lC(t,e){1&t&&(r.TgZ(0,"span"),r._uU(1," Debe ser una direccion valida "),r.qZA())}function hC(t,e){1&t&&(r.TgZ(0,"span"),r._uU(1," Por favor ingrese su clave "),r.qZA())}function dC(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"form",13),r.NdJ("ngSubmit",function(){return r.CHM(t),r.oxw().onRegisterPaciente()}),r.TgZ(1,"fieldset"),r.TgZ(2,"div",14),r.TgZ(3,"div",9),r.TgZ(4,"label"),r._uU(5,"Nombre"),r.qZA(),r._UZ(6,"input",15),r.TgZ(7,"div",16),r.YNc(8,iC,2,0,"span",10),r.qZA(),r.qZA(),r.TgZ(9,"div",9),r.TgZ(10,"label"),r._uU(11,"Apellido"),r.qZA(),r._UZ(12,"input",17),r.TgZ(13,"div",16),r.YNc(14,oC,2,0,"span",18),r.qZA(),r.qZA(),r.qZA(),r.TgZ(15,"div",14),r.TgZ(16,"div",19),r.TgZ(17,"label"),r._uU(18,"Edad"),r.qZA(),r._UZ(19,"input",20),r.TgZ(20,"div",16),r.YNc(21,sC,2,0,"span",10),r.qZA(),r.qZA(),r.TgZ(22,"div",21),r.TgZ(23,"label"),r._uU(24,"DNI"),r.qZA(),r._UZ(25,"input",22),r.TgZ(26,"div",16),r.YNc(27,aC,2,0,"span",10),r.qZA(),r.qZA(),r.TgZ(28,"div",21),r.TgZ(29,"label"),r._uU(30,"Obra Social"),r.qZA(),r._UZ(31,"input",23),r.TgZ(32,"div",16),r.YNc(33,uC,2,0,"span",10),r.qZA(),r.qZA(),r.qZA(),r.TgZ(34,"div",24),r.TgZ(35,"div",9),r.TgZ(36,"label"),r._uU(37,"Correo electr\xf3nico"),r.qZA(),r._UZ(38,"input",25),r.TgZ(39,"div",16),r.YNc(40,cC,2,0,"span",10),r.YNc(41,lC,2,0,"span",10),r.qZA(),r.qZA(),r.TgZ(42,"div",9),r.TgZ(43,"label"),r._uU(44,"Contrase\xf1a"),r.qZA(),r._UZ(45,"input",26),r.TgZ(46,"div",16),r.YNc(47,hC,2,0,"span",10),r.qZA(),r.qZA(),r.qZA(),r.TgZ(48,"div",14),r.TgZ(49,"div",9),r.TgZ(50,"label"),r._uU(51,"Imagen 1"),r.qZA(),r.TgZ(52,"div",27),r._UZ(53,"div",28),r.TgZ(54,"div",29),r.TgZ(55,"input",30),r.NdJ("change",function(e){return r.CHM(t),r.oxw().CambioFotos(e,1)}),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(56,"div",9),r.TgZ(57,"label"),r._uU(58,"Imagen 2"),r.qZA(),r.TgZ(59,"div",27),r._UZ(60,"div",28),r.TgZ(61,"div",29),r.TgZ(62,"input",31),r.NdJ("change",function(e){return r.CHM(t),r.oxw().CambioFotos(e,2)}),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(63,"button",32),r._uU(64," Registrarse "),r.qZA(),r._UZ(65,"br"),r.qZA(),r.qZA()}if(2&t){const t=r.oxw();r.Q6J("formGroup",t.pacienteRegForm),r.xp6(6),r.Tol(t.isValidPaciente("nombre")),r.xp6(2),r.Q6J("ngIf",(null==t.pacienteRegForm.controls.nombre.errors?null:t.pacienteRegForm.controls.nombre.errors.required)&&t.pacienteRegForm.controls.nombre.touched),r.xp6(4),r.Tol(t.isValidPaciente("apellido")),r.xp6(2),r.Q6J("ngIf",(null==t.pacienteRegForm.controls.apellido.errors?null:t.pacienteRegForm.controls.apellido.errors.required)&&t.pacienteRegForm.controls.apellido.touched),r.xp6(5),r.Tol(t.isValidPaciente("edad")),r.xp6(2),r.Q6J("ngIf",null==t.pacienteRegForm.get("edad").errors?null:t.pacienteRegForm.get("edad").errors.required),r.xp6(4),r.Tol(t.isValidPaciente("dni")),r.xp6(2),r.Q6J("ngIf",null==t.pacienteRegForm.get("dni").errors?null:t.pacienteRegForm.get("dni").errors.required),r.xp6(4),r.Tol(t.isValidPaciente("obraSocial")),r.xp6(2),r.Q6J("ngIf",null==t.pacienteRegForm.get("obraSocial").errors?null:t.pacienteRegForm.get("obraSocial").errors.required),r.xp6(5),r.Tol(t.isValidPaciente("correo")),r.xp6(2),r.Q6J("ngIf",null==t.pacienteRegForm.get("correo").errors?null:t.pacienteRegForm.get("correo").errors.required),r.xp6(1),r.Q6J("ngIf",null==t.pacienteRegForm.get("correo").errors?null:t.pacienteRegForm.get("correo").errors.pattern),r.xp6(4),r.Tol(t.isValidPaciente("clave")),r.xp6(2),r.Q6J("ngIf",null==t.pacienteRegForm.get("clave").errors?null:t.pacienteRegForm.get("clave").errors.required),r.xp6(16),r.Q6J("disabled",t.pacienteRegForm.invalid)}}function fC(t,e){1&t&&(r.TgZ(0,"span"),r._uU(1," Por favor ingrese su nombre "),r.qZA())}function pC(t,e){1&t&&(r.TgZ(0,"span",33),r._uU(1,"El apellido es requerido "),r.qZA())}function gC(t,e){1&t&&(r.TgZ(0,"span"),r._uU(1," Por favor ingrese su edad "),r.qZA())}function mC(t,e){1&t&&(r.TgZ(0,"span"),r._uU(1," Por favor ingrese su documento "),r.qZA())}function vC(t,e){1&t&&(r.TgZ(0,"span"),r._uU(1," Por favor ingrese su correo "),r.qZA())}function yC(t,e){1&t&&(r.TgZ(0,"span"),r._uU(1," Debe ser una direccion valida "),r.qZA())}function _C(t,e){1&t&&(r.TgZ(0,"span"),r._uU(1," Por favor ingrese su clave "),r.qZA())}function wC(t,e){1&t&&(r.TgZ(0,"span"),r._uU(1," Por favor ingrese su especialidad "),r.qZA())}function bC(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"form",13),r.NdJ("ngSubmit",function(){return r.CHM(t),r.oxw().onRegisterEspecialista()}),r.TgZ(1,"fieldset"),r.TgZ(2,"div",14),r.TgZ(3,"div",9),r._UZ(4,"input",15),r.TgZ(5,"div",16),r.YNc(6,fC,2,0,"span",10),r.qZA(),r.qZA(),r.TgZ(7,"div",9),r._UZ(8,"input",17),r.TgZ(9,"div",16),r.YNc(10,pC,2,0,"span",18),r.qZA(),r.qZA(),r.qZA(),r.TgZ(11,"div",14),r.TgZ(12,"div",9),r._UZ(13,"input",20),r.TgZ(14,"div",16),r.YNc(15,gC,2,0,"span",10),r.qZA(),r.qZA(),r.TgZ(16,"div",9),r._UZ(17,"input",22),r.TgZ(18,"div",16),r.YNc(19,mC,2,0,"span",10),r.qZA(),r.qZA(),r.qZA(),r.TgZ(20,"div",24),r.TgZ(21,"div",9),r._UZ(22,"input",34),r.TgZ(23,"div",16),r.YNc(24,vC,2,0,"span",10),r.YNc(25,yC,2,0,"span",10),r.qZA(),r.qZA(),r.TgZ(26,"div",9),r._UZ(27,"input",35),r.TgZ(28,"div",16),r.YNc(29,_C,2,0,"span",10),r.qZA(),r.qZA(),r.qZA(),r.TgZ(30,"div",24),r.TgZ(31,"div",9),r._UZ(32,"input",36),r.TgZ(33,"div",16),r.YNc(34,wC,2,0,"span",10),r.qZA(),r.qZA(),r.TgZ(35,"div",9),r.TgZ(36,"div",27),r._UZ(37,"div",28),r.TgZ(38,"div"),r.TgZ(39,"input",30),r.NdJ("change",function(e){return r.CHM(t),r.oxw().CambioFotos(e,1)}),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(40,"button",32),r._uU(41," Registrarse "),r.qZA(),r._UZ(42,"br"),r.qZA(),r.qZA()}if(2&t){const t=r.oxw();r.Q6J("formGroup",t.especialistaRegForm),r.xp6(4),r.Tol(t.isValidEspecialista("nombre")),r.xp6(2),r.Q6J("ngIf",(null==t.especialistaRegForm.controls.nombre.errors?null:t.especialistaRegForm.controls.nombre.errors.required)&&t.especialistaRegForm.controls.nombre.touched),r.xp6(2),r.Tol(t.isValidEspecialista("apellido")),r.xp6(2),r.Q6J("ngIf",(null==t.especialistaRegForm.controls.apellido.errors?null:t.especialistaRegForm.controls.apellido.errors.required)&&t.especialistaRegForm.controls.apellido.touched),r.xp6(3),r.Tol(t.isValidEspecialista("edad")),r.xp6(2),r.Q6J("ngIf",null==t.especialistaRegForm.get("edad").errors?null:t.especialistaRegForm.get("edad").errors.required),r.xp6(2),r.Tol(t.isValidEspecialista("dni")),r.xp6(2),r.Q6J("ngIf",null==t.especialistaRegForm.get("dni").errors?null:t.especialistaRegForm.get("dni").errors.required),r.xp6(3),r.Tol(t.isValidEspecialista("correo")),r.xp6(2),r.Q6J("ngIf",null==t.especialistaRegForm.get("correo").errors?null:t.especialistaRegForm.get("correo").errors.required),r.xp6(1),r.Q6J("ngIf",null==t.especialistaRegForm.get("correo").errors?null:t.especialistaRegForm.get("correo").errors.pattern),r.xp6(2),r.Tol(t.isValidEspecialista("clave")),r.xp6(2),r.Q6J("ngIf",null==t.especialistaRegForm.get("clave").errors?null:t.especialistaRegForm.get("clave").errors.required),r.xp6(3),r.Tol(t.isValidEspecialista("especialidades")),r.xp6(2),r.Q6J("ngIf",null==t.especialistaRegForm.get("especialidades").errors?null:t.especialistaRegForm.get("especialidades").errors.required),r.xp6(6),r.Q6J("disabled",t.especialistaRegForm.invalid)}}function TC(t,e){1&t&&(r.TgZ(0,"span"),r._uU(1," Por favor ingrese su nombre "),r.qZA())}function CC(t,e){1&t&&(r.TgZ(0,"span",33),r._uU(1,"El apellido es requerido "),r.qZA())}function EC(t,e){1&t&&(r.TgZ(0,"span"),r._uU(1," Por favor ingrese su edad "),r.qZA())}function IC(t,e){1&t&&(r.TgZ(0,"span"),r._uU(1," Por favor ingrese su documento "),r.qZA())}function SC(t,e){1&t&&(r.TgZ(0,"span"),r._uU(1," Por favor ingrese su correo "),r.qZA())}function kC(t,e){1&t&&(r.TgZ(0,"span"),r._uU(1," Debe ser una direccion valida "),r.qZA())}function AC(t,e){1&t&&(r.TgZ(0,"span"),r._uU(1," Por favor ingrese su clave "),r.qZA())}function xC(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"form",13),r.NdJ("ngSubmit",function(){return r.CHM(t),r.oxw().onRegisterAdmin()}),r.TgZ(1,"fieldset"),r.TgZ(2,"div",14),r.TgZ(3,"div",9),r.TgZ(4,"label"),r._uU(5,"Nombre"),r.qZA(),r._UZ(6,"input",15),r.TgZ(7,"div",16),r.YNc(8,TC,2,0,"span",10),r.qZA(),r.qZA(),r.TgZ(9,"div",9),r.TgZ(10,"label"),r._uU(11,"Apellido"),r.qZA(),r._UZ(12,"input",17),r.TgZ(13,"div",16),r.YNc(14,CC,2,0,"span",18),r.qZA(),r.qZA(),r.qZA(),r.TgZ(15,"div",14),r.TgZ(16,"div",19),r.TgZ(17,"label"),r._uU(18,"Edad"),r.qZA(),r._UZ(19,"input",20),r.TgZ(20,"div",16),r.YNc(21,EC,2,0,"span",10),r.qZA(),r.qZA(),r.TgZ(22,"div",21),r.TgZ(23,"label"),r._uU(24,"DNI"),r.qZA(),r._UZ(25,"input",22),r.TgZ(26,"div",16),r.YNc(27,IC,2,0,"span",10),r.qZA(),r.qZA(),r.qZA(),r.TgZ(28,"div",24),r.TgZ(29,"div",9),r.TgZ(30,"label"),r._uU(31,"Correo electr\xf3nico"),r.qZA(),r._UZ(32,"input",25),r.TgZ(33,"div",16),r.YNc(34,SC,2,0,"span",10),r.YNc(35,kC,2,0,"span",10),r.qZA(),r.qZA(),r.TgZ(36,"div",9),r.TgZ(37,"label"),r._uU(38,"Contrase\xf1a"),r.qZA(),r._UZ(39,"input",26),r.TgZ(40,"div",16),r.YNc(41,AC,2,0,"span",10),r.qZA(),r.qZA(),r.qZA(),r.TgZ(42,"div",14),r.TgZ(43,"div",9),r.TgZ(44,"label"),r._uU(45,"Imagen 1"),r.qZA(),r.TgZ(46,"div",27),r._UZ(47,"div",28),r.TgZ(48,"div",29),r.TgZ(49,"input",30),r.NdJ("change",function(e){return r.CHM(t),r.oxw().CambioFotos(e,1)}),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(50,"button",32),r._uU(51," Registrar "),r.qZA(),r._UZ(52,"br"),r.qZA(),r.qZA()}if(2&t){const t=r.oxw();r.Q6J("formGroup",t.adminRegForm),r.xp6(6),r.Tol(t.isValidAdmin("nombre")),r.xp6(2),r.Q6J("ngIf",(null==t.adminRegForm.controls.nombre.errors?null:t.adminRegForm.controls.nombre.errors.required)&&t.adminRegForm.controls.nombre.touched),r.xp6(4),r.Tol(t.isValidAdmin("apellido")),r.xp6(2),r.Q6J("ngIf",(null==t.adminRegForm.controls.apellido.errors?null:t.adminRegForm.controls.apellido.errors.required)&&t.adminRegForm.controls.apellido.touched),r.xp6(5),r.Tol(t.isValidAdmin("edad")),r.xp6(2),r.Q6J("ngIf",null==t.adminRegForm.get("edad").errors?null:t.adminRegForm.get("edad").errors.required),r.xp6(4),r.Tol(t.isValidAdmin("dni")),r.xp6(2),r.Q6J("ngIf",null==t.adminRegForm.get("dni").errors?null:t.adminRegForm.get("dni").errors.required),r.xp6(5),r.Tol(t.isValidAdmin("correo")),r.xp6(2),r.Q6J("ngIf",null==t.adminRegForm.get("correo").errors?null:t.adminRegForm.get("correo").errors.required),r.xp6(1),r.Q6J("ngIf",null==t.adminRegForm.get("correo").errors?null:t.adminRegForm.get("correo").errors.pattern),r.xp6(4),r.Tol(t.isValidAdmin("clave")),r.xp6(2),r.Q6J("ngIf",null==t.adminRegForm.get("clave").errors?null:t.adminRegForm.get("clave").errors.required),r.xp6(9),r.Q6J("disabled",t.adminRegForm.invalid)}}let NC=(()=>{class t{constructor(t,e,n,i,o,s){this.fb=t,this.router=e,this.usuarioSrv=n,this.storage=i,this.authSVC=o,this.especSvc=s,this.admin=!1,this.isEmail=/\S+@\S+\.\S+/,this.emitRegister=new r.vpe,this.tipo=""}ngOnInit(){"/usuarios"!=this.router.url&&this.usuarioSrv.Logout(),this.initForm(),this.especialidades$=this.especSvc.TraerEspecialidades().valueChanges(),this.especialidades$.subscribe(t=>{this.especialidades=t,console.log(this.especialidades)})}CambioFotos(t,e){1==e?(this.foto1=t.target.files[0],console.log(this.foto1)):(this.foto2=t.target.files[0],console.log(this.foto2))}SubirFotos(t){console.log("Subir Fotos: Foto1: ",this.foto1," Foto2: ",this.foto2),this.foto1&&(this.fotoCargada1=`/usuarios/${t}/1`,this.storage.upload(this.fotoCargada1,this.foto1)),this.foto2&&(this.fotoCargada2=`/usuarios/${t}/2`,this.storage.upload(this.fotoCargada2,this.foto2))}onRegisterPaciente(){this.pacienteRegForm.valid&&(this.nombre=this.pacienteRegForm.value.nombre,this.apellido=this.pacienteRegForm.value.apellido,this.correo=this.pacienteRegForm.value.correo,this.clave=this.pacienteRegForm.value.clave,this.dni=this.pacienteRegForm.value.dni,this.edad=this.pacienteRegForm.value.edad,this.obraSocial=this.pacienteRegForm.value.obraSocial,console.log(this.foto1,"y",this.foto2),this.registrarPaciente())}onRegisterAdmin(){this.adminRegForm.valid&&(this.nombre=this.adminRegForm.value.nombre,this.apellido=this.adminRegForm.value.apellido,this.correo=this.adminRegForm.value.correo,this.clave=this.adminRegForm.value.clave,this.dni=this.adminRegForm.value.dni,this.edad=this.adminRegForm.value.edad,console.log(this.foto1,"y",this.foto2),this.registrarAdmin())}onRegisterEspecialista(){this.especialistaRegForm.valid&&(this.nombre=this.especialistaRegForm.value.nombre,this.apellido=this.especialistaRegForm.value.apellido,this.correo=this.especialistaRegForm.value.correo,this.clave=this.especialistaRegForm.value.clave,this.edad=this.especialistaRegForm.value.edad,this.dni=this.especialistaRegForm.value.dni,this.especialidades=this.especialistaRegForm.value.especialidades,this.registrarEspecialista())}registrarPaciente(){this.authSVC.Register(this.correo,this.clave).then(t=>{this.SubirFotos(t.user.uid),this.id=t.user.uid;let e=new yb(this.nombre,this.apellido,this.correo,this.clave,this.edad,this.dni,this.obraSocial,this.fotoCargada1,this.fotoCargada2);this.usuarioSrv.RegistrarPaciente(e),pb().fire({title:"Registro exitoso!",text:"Se le ha enviado un mail de confirmacion, por favor, revise su casilla para poder ingresar",icon:"success",didDestroy:()=>{this.router.navigateByUrl("")}})}).catch(t=>{console.log(t)})}registrarAdmin(){this.authSVC.Register(this.correo,this.clave).then(t=>{this.SubirFotos(t.user.uid),this.id=t.user.uid;let e=new _b(this.nombre,this.apellido,this.correo,this.clave,this.edad,this.dni,this.obraSocial,this.fotoCargada1);this.usuarioSrv.RegistrarAdmin(e),pb().fire({title:"Registro exitoso!",text:"Se le ha enviado un mail de confirmacion, por favor, revise la casilla para poder ingresar",icon:"success",didDestroy:()=>{this.initForm()}})}).catch(t=>{console.log(t)})}registrarEspecialista(){this.authSVC.Register(this.correo,this.clave).then(t=>{this.SubirFotos(t.user.uid),this.id=t.user.uid;let e=new vb(this.nombre,this.apellido,this.correo,this.clave,this.edad,this.dni,this.especialidades,this.fotoCargada1);this.usuarioSrv.RegistrarEspecialista(e),pb().fire({title:"Registro exitoso!",text:"Se le ha enviado un mail de confirmacion, por favor, revise su casilla para poder ingresar. Ademas como especialista debe aguardar que un administrador lo valide.",icon:"success",didDestroy:()=>{this.router.navigateByUrl("")}})}).catch(t=>{console.log(t)})}isValidPaciente(t){const e=this.pacienteRegForm.get(t);return!e.valid&&e.touched?"is-invalid":e.touched?"is-valid":""}isValidAdmin(t){const e=this.adminRegForm.get(t);return!e.valid&&e.touched?"is-invalid":e.touched?"is-valid":""}isValidEspecialista(t){const e=this.especialistaRegForm.get(t);return!e.valid&&e.touched?"is-invalid":e.touched?"is-valid":""}initForm(){this.pacienteRegForm=this.fb.group({correo:["",[pw.required,pw.pattern(this.isEmail)]],clave:["",[pw.required,pw.minLength(8)]],nombre:["",[pw.required]],apellido:["",[pw.required]],obraSocial:["",[pw.required]],edad:["",[pw.required]],dni:["",[pw.required]]}),this.especialistaRegForm=this.fb.group({correo:["",[pw.required,pw.pattern(this.isEmail)]],clave:["",[pw.required,pw.minLength(8)]],nombre:["",[pw.required]],apellido:["",[pw.required]],edad:["",[pw.required]],dni:["",[pw.required]],especialidades:["",[pw.required]]}),this.adminRegForm=this.fb.group({correo:["",[pw.required,pw.pattern(this.isEmail)]],clave:["",[pw.required,pw.minLength(8)]],nombre:["",[pw.required]],apellido:["",[pw.required]],edad:["",[pw.required]],dni:["",[pw.required]]})}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(db),r.Y36(Jr),r.Y36(X_),r.Y36(WT),r.Y36(J_),r.Y36(YT))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-registro"]],inputs:{admin:"admin"},outputs:{emitRegister:"emitRegister"},decls:6,vars:5,consts:[[1,"container"],["class","padre text-center",4,"ngIf"],["class","row",4,"ngIf"],["class","animate__animated animate__backInDown","novalidate","",3,"formGroup","ngSubmit",4,"ngIf"],[1,"padre","text-center"],[1,"hijo"],[1,"row"],[1,"col"],[1,"btn","btn-primary",3,"click"],[1,"col-6"],[4,"ngIf"],[1,"col-6",2,"text-align","end"],["class","btn btn-primary",3,"click",4,"ngIf"],["novalidate","",1,"animate__animated","animate__backInDown",3,"formGroup","ngSubmit"],[1,"row","row-form","form-group"],["type","text","id","nombre","placeholder","Nombre","formControlName","nombre",1,"form-control"],[1,"invalid-feedback",2,"font-family","sans-serif"],["type","text","id","apellido","placeholder","Apellido","formControlName","apellido",1,"form-control"],["class","invalid",4,"ngIf"],[1,"col-2"],["type","number","id","edad","placeholder","Edad","formControlName","edad",1,"form-control"],[1,"col-5"],["type","number","id","dni","placeholder","DNI","formControlName","dni",1,"form-control"],["type","text","id","obraSocial","placeholder","Obra Social","formControlName","obraSocial",1,"form-control"],[1,"form-group","row","row-form"],["type","correo","id","correo","placeholder","Correo electr\xf3nico","formControlName","correo",1,"form-control"],["type","password","id","clave","placeholder","Contrase\xf1a","formControlName","clave",1,"form-control"],[1,"input-group","mb-3"],[1,"input-group-prepend"],[1,"custom-file"],["type","file","id","foto1",1,"sinError",3,"change"],["type","file","id","foto2",1,"sinError",3,"change"],["type","submit",1,"btn","btn-primary","botonesLanding","animate__animated","animate__backInLeft",3,"disabled"],[1,"invalid"],["type","correo","id","correo","placeholder","Correo","formControlName","correo",1,"form-control"],["type","password","id","clave","placeholder","Clave","formControlName","clave",1,"form-control"],["type","text","id","especialidades","placeholder","Especialidades","formControlName","especialidades",1,"form-control"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r.YNc(1,QT,12,0,"div",1),r.YNc(2,rC,9,6,"div",2),r.YNc(3,dC,66,24,"form",3),r.YNc(4,bC,43,24,"form",3),r.YNc(5,xC,53,21,"form",3),r.qZA()),2&t&&(r.xp6(1),r.Q6J("ngIf",""==e.tipo),r.xp6(1),r.Q6J("ngIf",""!=e.tipo),r.xp6(1),r.Q6J("ngIf","Paciente"==e.tipo),r.xp6(1),r.Q6J("ngIf","Especialista"==e.tipo),r.xp6(1),r.Q6J("ngIf","Admin"==e.tipo))},directives:[P,tb,Rw,sb,uw,Ow,ub,nb],styles:[".row-form[_ngcontent-%COMP%]{margin-top:20px}.btn[_ngcontent-%COMP%]{margin-left:10px;margin-right:10px}.centrado[_ngcontent-%COMP%], .padre[_ngcontent-%COMP%]{align-items:center;justify-content:center}.padre[_ngcontent-%COMP%]{display:flex}.hijo[_ngcontent-%COMP%]{width:auto}"]}),t})();var PC;n(9738),(PC=Ry).prototype.loadBundle=function(t){return function(t,e){var n=vv(t=nv(t,mv)),r=new gv;return function(t,e,n,r){var i=this,o=function(t,e){return function(t,e){return new Sm(t,e)}(function(t,e){if(t instanceof Uint8Array)return Em(t,e);if(t instanceof ArrayBuffer)return Em(new Uint8Array(t),e);if(t instanceof ReadableStream)return t.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof t?(new TextEncoder).encode(t):t),e)}(n,jp(e));t.asyncQueue.enqueueAndForget(function(){return(0,Fu.__awaiter)(i,void 0,void 0,function(){var e;return(0,Fu.__generator)(this,function(n){switch(n.label){case 0:return e=_m,[4,Mm(t)];case 1:return e.apply(void 0,[n.sent(),o,r]),[2]}})})})}(n,t._databaseId,e,r),r}(this._delegate,t)},PC.prototype.namedQuery=function(t){var e,n,r=this;return(e=this._delegate,n=t,function(t,e){var n=this;return t.asyncQueue.enqueue(function(){return(0,Fu.__awaiter)(n,void 0,void 0,function(){var n;return(0,Fu.__generator)(this,function(r){switch(r.label){case 0:return n=function(t,e){var n=Wu(t);return n.persistence.runTransaction("Get named query","readonly",function(t){return n.Qe.getNamedQuery(t,e)})},[4,Lm(t)];case 1:return[2,n.apply(void 0,[r.sent(),e])]}})})})}(vv(e=nv(e,mv)),n).then(function(t){return t?new av(e,null,t.query):null})).then(function(t){return t?new zy(r,t):null})};var OC={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},RC=function(t){function e(n,r,i){var o=t.call(this,r)||this;return Object.setPrototypeOf(o,e.prototype),o.code=n,o.details=i,o}return(0,Fu.__extends)(e,t),e}(Error),DC=function(){function t(t,e){var n=this;this.auth=null,this.messaging=null,this.auth=t.getImmediate({optional:!0}),this.messaging=e.getImmediate({optional:!0}),this.auth||t.get().then(function(t){return n.auth=t},function(){}),this.messaging||e.get().then(function(t){return n.messaging=t},function(){})}return t.prototype.getAuthToken=function(){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var t;return(0,Fu.__generator)(this,function(e){switch(e.label){case 0:if(!this.auth)return[2,void 0];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return(t=e.sent())?[2,t.accessToken]:[2,void 0];case 3:return e.sent(),[2,void 0];case 4:return[2]}})})},t.prototype.getInstanceIdToken=function(){return(0,Fu.__awaiter)(this,void 0,void 0,function(){return(0,Fu.__generator)(this,function(t){if(!this.messaging||!("Notification"in self)||"granted"!==Notification.permission)return[2,void 0];try{return[2,this.messaging.getToken()]}catch(Yy){return[2,void 0]}return[2]})})},t.prototype.getContext=function(){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var t,e;return(0,Fu.__generator)(this,function(n){switch(n.label){case 0:return[4,this.getAuthToken()];case 1:return t=n.sent(),[4,this.getInstanceIdToken()];case 2:return e=n.sent(),[2,{authToken:t,instanceIdToken:e}]}})})},t}();function LC(t,e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}var FC=function(){function t(){}return t.prototype.encode=function(t){var e=this;if(null==t)return null;if(t instanceof Number&&(t=t.valueOf()),"number"==typeof t&&isFinite(t))return t;if(!0===t||!1===t)return t;if("[object String]"===Object.prototype.toString.call(t))return t;if(Array.isArray(t))return t.map(function(t){return e.encode(t)});if("function"==typeof t||"object"==typeof t)return LC(t,function(t){return e.encode(t)});throw new Error("Data cannot be encoded in JSON: "+t)},t.prototype.decode=function(t){var e=this;if(null==t)return t;if(t["@type"])switch(t["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=Number(t.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+t);return n;default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(function(t){return e.decode(t)}):"function"==typeof t||"object"==typeof t?LC(t,function(t){return e.decode(t)}):t},t}(),MC=function(){function t(t,e,n,r,i,o){var s=this;void 0===i&&(i="us-central1"),this.app_=t,this.appCheckProvider=r,this.fetchImpl=o,this.serializer=new FC,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return Promise.resolve(s.deleteService())}},this.contextProvider=new DC(e,n),this.cancelAllRequests=new Promise(function(t){s.deleteService=function(){return t()}});try{var a=new URL(i);this.customDomain=a.origin,this.region="us-central1"}catch(Yy){this.customDomain=null,this.region=i}}return Object.defineProperty(t.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),t.prototype._url=function(t){var e=this.app_.options.projectId;return null!==this.emulatorOrigin?this.emulatorOrigin+"/"+e+"/"+this.region+"/"+t:null!==this.customDomain?this.customDomain+"/"+t:"https://"+this.region+"-"+e+".cloudfunctions.net/"+t},t.prototype.useEmulator=function(t,e){this.emulatorOrigin="http://"+t+":"+e},t.prototype.useFunctionsEmulator=function(t){this.emulatorOrigin=t},t.prototype.httpsCallable=function(t,e){var n=this;return function(r){return n.call(t,r,e||{})}},t.prototype.postJSON=function(t,e,n){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var r,i,o;return(0,Fu.__generator)(this,function(s){switch(s.label){case 0:return n["Content-Type"]="application/json",[4,this.getAppCheckToken()];case 1:null!==(r=s.sent())&&(n["X-Firebase-AppCheck"]=r),s.label=2;case 2:return s.trys.push([2,4,,5]),[4,this.fetchImpl(t,{method:"POST",body:JSON.stringify(e),headers:n})];case 3:return i=s.sent(),[3,5];case 4:return s.sent(),[2,{status:0,json:null}];case 5:o=null,s.label=6;case 6:return s.trys.push([6,8,,9]),[4,i.json()];case 7:return o=s.sent(),[3,9];case 8:return s.sent(),[3,9];case 9:return[2,{status:i.status,json:o}]}})})},t.prototype.getAppCheckToken=function(){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var t;return(0,Fu.__generator)(this,function(e){switch(e.label){case 0:return(t=this.appCheckProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:return[2,e.sent().token];case 2:return[2,null]}})})},t.prototype.call=function(t,e,n){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var r,i,o,s,a,u,c,l,h,d;return(0,Fu.__generator)(this,function(f){switch(f.label){case 0:return r=this._url(t),e=this.serializer.encode(e),i={data:e},o={},[4,this.contextProvider.getContext()];case 1:return(s=f.sent()).authToken&&(o.Authorization="Bearer "+s.authToken),s.instanceIdToken&&(o["Firebase-Instance-ID-Token"]=s.instanceIdToken),a=function(t){var e,n=new Promise(function(n,r){e=setTimeout(function(){r(new RC("deadline-exceeded","deadline-exceeded"))},t)});return{timer:e,promise:n}}(n.timeout||7e4),u=a.timer,c=a.promise,[4,Promise.race([UC(u,this.postJSON(r,i,o)),c,UC(u,this.cancelAllRequests)])];case 2:if(!(l=f.sent()))throw new RC("cancelled","Firebase Functions instance was deleted.");if(h=function(t,e,n){var r=function(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(t),i=r,o=void 0;try{var s=e&&e.error;if(s){var a=s.status;if("string"==typeof a){if(!OC[a])return new RC("internal","internal");r=OC[a],i=a}var u=s.message;"string"==typeof u&&(i=u),void 0!==(o=s.details)&&(o=n.decode(o))}}catch(Yy){}return"ok"===r?null:new RC(r,i,o)}(l.status,l.json,this.serializer))throw h;if(!l.json)throw new RC("internal","Response is not valid JSON object.");if(void 0===(d=l.json.data)&&(d=l.json.result),void 0===d)throw new RC("internal","Response is missing data field.");return[2,{data:this.serializer.decode(d)}]}})})},t}();function UC(t,e){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var n;return(0,Fu.__generator)(this,function(r){switch(r.label){case 0:return[4,e];case 1:return n=r.sent(),clearTimeout(t),[2,n]}})})}!function(t,e){var n={Functions:MC};t.INTERNAL.registerComponent(new Jy.Component("functions",function(t,n){var r=n.instanceIdentifier,i=t.getProvider("app").getImmediate(),o=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal"),a=t.getProvider("messaging");return new MC(i,o,a,s,r,e)},"PUBLIC").setServiceProps(n).setMultipleInstances(!0))}(Pi.default,fetch.bind(self)),Pi.default.registerVersion("@firebase/functions","0.6.8");var qC,jC=n(2087),VC="w:0.4.26",BC=((qC={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',qC["not-registered"]="Firebase Installation is not registered.",qC["installation-not-found"]="Firebase Installation not found.",qC["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',qC["app-offline"]="Could not process request. Application offline.",qC["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",qC),HC=new Oi.ErrorFactory("installations","Installations",BC);function zC(t){return t instanceof Oi.FirebaseError&&t.code.includes("request-failed")}function GC(t){return"https://firebaseinstallations.googleapis.com/v1/projects/"+t.projectId+"/installations"}function ZC(t){return{token:t.token,requestStatus:2,expiresIn:(e=t.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()};var e}function KC(t,e){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var n,r;return(0,Fu.__generator)(this,function(i){switch(i.label){case 0:return[4,e.json()];case 1:return n=i.sent(),[2,HC.create("request-failed",{requestName:t,serverCode:(r=n.error).code,serverMessage:r.message,serverStatus:r.status})]}})})}function WC(t){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey})}function YC(t,e){var n=e.refreshToken,r=WC(t);return r.append("Authorization",function(t){return"FIS_v2 "+t}(n)),r}function QC(t){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var e;return(0,Fu.__generator)(this,function(n){switch(n.label){case 0:return[4,t()];case 1:return(e=n.sent()).status>=500&&e.status<600?[2,t()]:[2,e]}})})}function $C(t,e){var n=e.fid;return(0,Fu.__awaiter)(this,void 0,void 0,function(){var e,r,i,o,s;return(0,Fu.__generator)(this,function(a){switch(a.label){case 0:return e=GC(t),r=WC(t),i={method:"POST",headers:r,body:JSON.stringify({fid:n,authVersion:"FIS_v2",appId:t.appId,sdkVersion:VC})},[4,QC(function(){return fetch(e,i)})];case 1:return(o=a.sent()).ok?[4,o.json()]:[3,3];case 2:return[2,{fid:(s=a.sent()).fid||n,registrationStatus:2,refreshToken:s.refreshToken,authToken:ZC(s.authToken)}];case 3:return[4,KC("Create Installation",o)];case 4:throw a.sent()}})})}function JC(t){return new Promise(function(e){setTimeout(e,t)})}var XC=/^[cdef][\w-]{21}$/;function tE(){try{var t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;var e=function(t){return(e=t,btoa(String.fromCharCode.apply(String,(0,Fu.__spreadArray)([],(0,Fu.__read)(e)))).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var e}(t);return XC.test(e)?e:""}catch(Fv){return""}}function eE(t){return t.appName+"!"+t.appId}var nE=new Map;function rE(t,e){var n=eE(t);iE(n,e),function(t,e){var n=sE();n&&n.postMessage({key:t,fid:e}),aE()}(n,e)}function iE(t,e){var n,r,i=nE.get(t);if(i)try{for(var o=(0,Fu.__values)(i),s=o.next();!s.done;s=o.next())(0,s.value)(e)}catch(a){n={error:a}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}var oE=null;function sE(){return!oE&&"BroadcastChannel"in self&&((oE=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(t){iE(t.data.key,t.data.fid)}),oE}function aE(){0===nE.size&&oE&&(oE.close(),oE=null)}var uE,cE="firebase-installations-store",lE=null;function hE(){return lE||(lE=(0,jC.openDb)("firebase-installations-database",1,function(t){switch(t.oldVersion){case 0:t.createObjectStore(cE)}})),lE}function dE(t,e){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s;return(0,Fu.__generator)(this,function(a){switch(a.label){case 0:return n=eE(t),[4,hE()];case 1:return r=a.sent(),i=r.transaction(cE,"readwrite"),[4,(o=i.objectStore(cE)).get(n)];case 2:return s=a.sent(),[4,o.put(e,n)];case 3:return a.sent(),[4,i.complete];case 4:return a.sent(),s&&s.fid===e.fid||rE(t,e.fid),[2,e]}})})}function fE(t){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var e,n,r;return(0,Fu.__generator)(this,function(i){switch(i.label){case 0:return e=eE(t),[4,hE()];case 1:return n=i.sent(),[4,(r=n.transaction(cE,"readwrite")).objectStore(cE).delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}})})}function pE(t,e){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s,a;return(0,Fu.__generator)(this,function(u){switch(u.label){case 0:return n=eE(t),[4,hE()];case 1:return r=u.sent(),i=r.transaction(cE,"readwrite"),[4,(o=i.objectStore(cE)).get(n)];case 2:return s=u.sent(),void 0!==(a=e(s))?[3,4]:[4,o.delete(n)];case 3:return u.sent(),[3,6];case 4:return[4,o.put(a,n)];case 5:u.sent(),u.label=6;case 6:return[4,i.complete];case 7:return u.sent(),!a||s&&s.fid===a.fid||rE(t,a.fid),[2,a]}})})}function gE(t){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var e,n,r;return(0,Fu.__generator)(this,function(i){switch(i.label){case 0:return[4,pE(t,function(n){var r=function(t){return yE(t||{fid:tE(),registrationStatus:0})}(n),i=function(t,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(HC.create("app-offline"))};var n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:n,registrationPromise:function(t,e){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var n,r;return(0,Fu.__generator)(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,$C(t,e)];case 1:return n=i.sent(),[2,dE(t,n)];case 2:return zC(r=i.sent())&&409===r.customData.serverCode?[4,fE(t)]:[3,4];case 3:return i.sent(),[3,6];case 4:return[4,dE(t,{fid:e.fid,registrationStatus:0})];case 5:i.sent(),i.label=6;case 6:throw r;case 7:return[2]}})})}(t,n)}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:mE(t)}:{installationEntry:e}}(t,r);return e=i.registrationPromise,i.installationEntry})];case 1:return""!==(n=i.sent()).fid?[3,3]:(r={},[4,e]);case 2:return[2,(r.installationEntry=i.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:e}]}})})}function mE(t){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var e,n,r,i;return(0,Fu.__generator)(this,function(o){switch(o.label){case 0:return[4,vE(t)];case 1:e=o.sent(),o.label=2;case 2:return 1!==e.registrationStatus?[3,5]:[4,JC(100)];case 3:return o.sent(),[4,vE(t)];case 4:return e=o.sent(),[3,2];case 5:return 0!==e.registrationStatus?[3,7]:[4,gE(t)];case 6:return n=o.sent(),r=n.installationEntry,(i=n.registrationPromise)?[2,i]:[2,r];case 7:return[2,e]}})})}function vE(t){return pE(t,function(t){if(!t)throw HC.create("installation-not-found");return yE(t)})}function yE(t){return 1===(e=t).registrationStatus&&e.registrationTime+1e4<Date.now()?{fid:t.fid,registrationStatus:0}:t;var e}function _E(t,e){var n=t.appConfig,r=t.platformLoggerProvider;return(0,Fu.__awaiter)(this,void 0,void 0,function(){var t,i,o,s,a;return(0,Fu.__generator)(this,function(u){switch(u.label){case 0:return t=function(t,e){var n=e.fid;return GC(t)+"/"+n+"/authTokens:generate"}(n,e),i=YC(n,e),(o=r.getImmediate({optional:!0}))&&i.append("x-firebase-client",o.getPlatformInfoString()),s={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:VC}})},[4,QC(function(){return fetch(t,s)})];case 1:return(a=u.sent()).ok?[4,a.json()]:[3,3];case 2:return[2,ZC(u.sent())];case 3:return[4,KC("Generate Auth Token",a)];case 4:throw u.sent()}})})}function wE(t,e){return void 0===e&&(e=!1),(0,Fu.__awaiter)(this,void 0,void 0,function(){var n,r,i;return(0,Fu.__generator)(this,function(o){switch(o.label){case 0:return[4,pE(t.appConfig,function(r){if(!TE(r))throw HC.create("not-registered");var i,o=r.authToken;if(!e&&2===(i=o).requestStatus&&!function(t){var e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+36e5}(i))return r;if(1===o.requestStatus)return n=function(t,e){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var n,r;return(0,Fu.__generator)(this,function(i){switch(i.label){case 0:return[4,bE(t.appConfig)];case 1:n=i.sent(),i.label=2;case 2:return 1!==n.authToken.requestStatus?[3,5]:[4,JC(100)];case 3:return i.sent(),[4,bE(t.appConfig)];case 4:return n=i.sent(),[3,2];case 5:return 0===(r=n.authToken).requestStatus?[2,wE(t,e)]:[2,r]}})})}(t,e),r;if(!navigator.onLine)throw HC.create("app-offline");var s=function(t){var e={requestStatus:1,requestTime:Date.now()};return(0,Fu.__assign)((0,Fu.__assign)({},t),{authToken:e})}(r);return n=function(t,e){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var n,r,i;return(0,Fu.__generator)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,8]),[4,_E(t,e)];case 1:return n=o.sent(),i=(0,Fu.__assign)((0,Fu.__assign)({},e),{authToken:n}),[4,dE(t.appConfig,i)];case 2:return o.sent(),[2,n];case 3:return!zC(r=o.sent())||401!==r.customData.serverCode&&404!==r.customData.serverCode?[3,5]:[4,fE(t.appConfig)];case 4:return o.sent(),[3,7];case 5:return i=(0,Fu.__assign)((0,Fu.__assign)({},e),{authToken:{requestStatus:0}}),[4,dE(t.appConfig,i)];case 6:o.sent(),o.label=7;case 7:throw r;case 8:return[2]}})})}(t,s),s})];case 1:return r=o.sent(),n?[4,n]:[3,3];case 2:return i=o.sent(),[3,4];case 3:i=r.authToken,o.label=4;case 4:return[2,i]}})})}function bE(t){return pE(t,function(t){if(!TE(t))throw HC.create("not-registered");var e;return 1===(e=t.authToken).requestStatus&&e.requestTime+1e4<Date.now()?(0,Fu.__assign)((0,Fu.__assign)({},t),{authToken:{requestStatus:0}}):t})}function TE(t){return void 0!==t&&2===t.registrationStatus}function CE(t){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var e;return(0,Fu.__generator)(this,function(n){switch(n.label){case 0:return[4,gE(t)];case 1:return(e=n.sent().registrationPromise)?[4,e]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}})})}function EE(t,e){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var n,r,i,o;return(0,Fu.__generator)(this,function(s){switch(s.label){case 0:return n=function(t,e){var n=e.fid;return GC(t)+"/"+n}(t,e),r=YC(t,e),i={method:"DELETE",headers:r},[4,QC(function(){return fetch(n,i)})];case 1:return(o=s.sent()).ok?[3,3]:[4,KC("Delete Installation",o)];case 2:throw s.sent();case 3:return[2]}})})}function IE(t){return HC.create("missing-app-config-values",{valueName:t})}!function(t){t.INTERNAL.registerComponent(new Jy.Component("installations",function(t){var e=t.getProvider("app").getImmediate(),n={appConfig:function(t){var e,n;if(!t||!t.options)throw IE("App Configuration");if(!t.name)throw IE("App Name");try{for(var r=(0,Fu.__values)(["projectId","apiKey","appId"]),i=r.next();!i.done;i=r.next()){var o=i.value;if(!t.options[o])throw IE(o)}}catch(s){e={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e),platformLoggerProvider:t.getProvider("platform-logger")};return{app:e,getId:function(){return function(t){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var e,n,r;return(0,Fu.__generator)(this,function(i){switch(i.label){case 0:return[4,gE(t.appConfig)];case 1:return e=i.sent(),n=e.installationEntry,(r=e.registrationPromise)?r.catch(console.error):wE(t).catch(console.error),[2,n.fid]}})})}(n)},getToken:function(t){return function(t,e){return void 0===e&&(e=!1),(0,Fu.__awaiter)(this,void 0,void 0,function(){return(0,Fu.__generator)(this,function(n){switch(n.label){case 0:return[4,CE(t.appConfig)];case 1:return n.sent(),[4,wE(t,e)];case 2:return[2,n.sent().token]}})})}(n,t)},delete:function(){return function(t){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var e,n;return(0,Fu.__generator)(this,function(r){switch(r.label){case 0:return[4,pE(e=t.appConfig,function(t){if(!t||0!==t.registrationStatus)return t})];case 1:if(!(n=r.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw HC.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw HC.create("app-offline");case 3:return[4,EE(e,n)];case 4:return r.sent(),[4,fE(e)];case 5:r.sent(),r.label=6;case 6:return[2]}})})}(n)},onIdChange:function(t){return function(t,e){var n=t.appConfig;return function(t,e){sE();var n=eE(t),r=nE.get(n);r||(r=new Set,nE.set(n,r)),r.add(e)}(n,e),function(){!function(t,e){var n=eE(t),r=nE.get(n);r&&(r.delete(e),0===r.size&&nE.delete(n),aE())}(n,e)}}(n,t)}}},"PUBLIC")),t.registerVersion("@firebase/installations","0.4.26")}(Pi.default);var SE=((uE={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',uE["only-available-in-window"]="This method is available in a Window context.",uE["only-available-in-sw"]="This method is available in a service worker context.",uE["permission-default"]="The notification permission was not granted and dismissed instead.",uE["permission-blocked"]="The notification permission was not granted and blocked instead.",uE["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",uE["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",uE["token-subscribe-failed"]="A problem occurred while subscribing the user to FCM: {$errorInfo}",uE["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",uE["token-unsubscribe-failed"]="A problem occurred while unsubscribing the user from FCM: {$errorInfo}",uE["token-update-failed"]="A problem occurred while updating the user from FCM: {$errorInfo}",uE["token-update-no-token"]="FCM returned no token when updating the user to push.",uE["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",uE["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",uE["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",uE["invalid-vapid-key"]="The public VAPID key must be a string.",uE["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",uE),kE=new Oi.ErrorFactory("messaging","Messaging",SE),AE="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",xE=function(t){return t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked",t}({});function NE(t){var e=new Uint8Array(t);return btoa(String.fromCharCode.apply(String,(0,Fu.__spreadArray)([],(0,Fu.__read)(e)))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function PE(t){for(var e=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(e),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}var OE="fcm_token_details_db",RE="fcm_token_object_Store";function DE(t){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var e,n=this;return(0,Fu.__generator)(this,function(r){switch(r.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(!r.sent().map(function(t){return t.name}).includes(OE))return[2,null];r.label=2;case 2:return e=null,[4,(0,jC.openDb)(OE,5,function(r){return(0,Fu.__awaiter)(n,void 0,void 0,function(){var n,i,o,s;return(0,Fu.__generator)(this,function(a){switch(a.label){case 0:return r.oldVersion<2?[2]:r.objectStoreNames.contains(RE)?[4,(n=r.transaction.objectStore(RE)).index("fcmSenderId").get(t)]:[2];case 1:return i=a.sent(),[4,n.clear()];case 2:if(a.sent(),!i)return[2];if(2===r.oldVersion){if(!(o=i).auth||!o.p256dh||!o.endpoint)return[2];e={token:o.fcmToken,createTime:null!==(s=o.createTime)&&void 0!==s?s:Date.now(),subscriptionOptions:{auth:o.auth,p256dh:o.p256dh,endpoint:o.endpoint,swScope:o.swScope,vapidKey:"string"==typeof o.vapidKey?o.vapidKey:NE(o.vapidKey)}}}else(3===r.oldVersion||4===r.oldVersion)&&(e={token:(o=i).fcmToken,createTime:o.createTime,subscriptionOptions:{auth:NE(o.auth),p256dh:NE(o.p256dh),endpoint:o.endpoint,swScope:o.swScope,vapidKey:NE(o.vapidKey)}});return[2]}})})})];case 3:return r.sent().close(),[4,(0,jC.deleteDb)(OE)];case 4:return r.sent(),[4,(0,jC.deleteDb)("fcm_vapid_details_db")];case 5:return r.sent(),[4,(0,jC.deleteDb)("undefined")];case 6:return r.sent(),[2,LE(e)?e:null]}})})}function LE(t){if(!t||!t.subscriptionOptions)return!1;var e=t.subscriptionOptions;return"number"==typeof t.createTime&&t.createTime>0&&"string"==typeof t.token&&t.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}var FE="firebase-messaging-store",ME=null;function UE(){return ME||(ME=(0,jC.openDb)("firebase-messaging-database",1,function(t){switch(t.oldVersion){case 0:t.createObjectStore(FE)}})),ME}function qE(t){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var e,n,r;return(0,Fu.__generator)(this,function(i){switch(i.label){case 0:return e=BE(t),[4,UE()];case 1:return[4,i.sent().transaction(FE).objectStore(FE).get(e)];case 2:return(n=i.sent())?[2,n]:[3,3];case 3:return[4,DE(t.appConfig.senderId)];case 4:return(r=i.sent())?[4,jE(t,r)]:[3,6];case 5:return i.sent(),[2,r];case 6:return[2]}})})}function jE(t,e){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var n,r,i;return(0,Fu.__generator)(this,function(o){switch(o.label){case 0:return n=BE(t),[4,UE()];case 1:return r=o.sent(),[4,(i=r.transaction(FE,"readwrite")).objectStore(FE).put(e,n)];case 2:return o.sent(),[4,i.complete];case 3:return o.sent(),[2,e]}})})}function VE(t){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var e,n,r;return(0,Fu.__generator)(this,function(i){switch(i.label){case 0:return e=BE(t),[4,UE()];case 1:return n=i.sent(),[4,(r=n.transaction(FE,"readwrite")).objectStore(FE).delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}})})}function BE(t){return t.appConfig.appId}function HE(t,e){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s;return(0,Fu.__generator)(this,function(a){switch(a.label){case 0:return[4,KE(t)];case 1:n=a.sent(),r=WE(e),i={method:"POST",headers:n,body:JSON.stringify(r)},a.label=2;case 2:return a.trys.push([2,5,,6]),[4,fetch(ZE(t.appConfig),i)];case 3:return[4,a.sent().json()];case 4:return o=a.sent(),[3,6];case 5:throw s=a.sent(),kE.create("token-subscribe-failed",{errorInfo:s});case 6:if(o.error)throw kE.create("token-subscribe-failed",{errorInfo:o.error.message});if(!o.token)throw kE.create("token-subscribe-no-token");return[2,o.token]}})})}function zE(t,e){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s;return(0,Fu.__generator)(this,function(a){switch(a.label){case 0:return[4,KE(t)];case 1:n=a.sent(),r=WE(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)},a.label=2;case 2:return a.trys.push([2,5,,6]),[4,fetch(ZE(t.appConfig)+"/"+e.token,i)];case 3:return[4,a.sent().json()];case 4:return o=a.sent(),[3,6];case 5:throw s=a.sent(),kE.create("token-update-failed",{errorInfo:s});case 6:if(o.error)throw kE.create("token-update-failed",{errorInfo:o.error.message});if(!o.token)throw kE.create("token-update-no-token");return[2,o.token]}})})}function GE(t,e){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var n,r,i,o;return(0,Fu.__generator)(this,function(s){switch(s.label){case 0:return[4,KE(t)];case 1:n=s.sent(),r={method:"DELETE",headers:n},s.label=2;case 2:return s.trys.push([2,5,,6]),[4,fetch(ZE(t.appConfig)+"/"+e,r)];case 3:return[4,s.sent().json()];case 4:if((i=s.sent()).error)throw kE.create("token-unsubscribe-failed",{errorInfo:i.error.message});return[3,6];case 5:throw o=s.sent(),kE.create("token-unsubscribe-failed",{errorInfo:o});case 6:return[2]}})})}function ZE(t){return"https://fcmregistrations.googleapis.com/v1/projects/"+t.projectId+"/registrations"}function KE(t){var e=t.appConfig,n=t.installations;return(0,Fu.__awaiter)(this,void 0,void 0,function(){var t;return(0,Fu.__generator)(this,function(r){switch(r.label){case 0:return[4,n.getToken()];case 1:return t=r.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":"FIS "+t})]}})})}function WE(t){var e=t.vapidKey,n={web:{endpoint:t.endpoint,auth:t.auth,p256dh:t.p256dh}};return e!==AE&&(n.web.applicationPubKey=e),n}function YE(t,e,n){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var r,i,o,s;return(0,Fu.__generator)(this,function(a){switch(a.label){case 0:if("granted"!==Notification.permission)throw kE.create("permission-blocked");return[4,XE(e,n)];case 1:return r=a.sent(),[4,qE(t)];case 2:return i=a.sent(),o={vapidKey:n,swScope:e.scope,endpoint:r.endpoint,auth:NE(r.getKey("auth")),p256dh:NE(r.getKey("p256dh"))},i?[3,3]:[2,JE(t,o)];case 3:if(l=(c=o).endpoint===(u=i.subscriptionOptions).endpoint,c.vapidKey===u.vapidKey&&l&&c.auth===u.auth&&c.p256dh===u.p256dh)return[3,8];a.label=4;case 4:return a.trys.push([4,6,,7]),[4,GE(t,i.token)];case 5:return a.sent(),[3,7];case 6:return s=a.sent(),console.warn(s),[3,7];case 7:return[2,JE(t,o)];case 8:return Date.now()>=i.createTime+6048e5?[2,$E({token:i.token,createTime:Date.now(),subscriptionOptions:o},t,e)]:[2,i.token];case 9:return[2]}var u,c,l})})}function QE(t,e){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var n,r;return(0,Fu.__generator)(this,function(i){switch(i.label){case 0:return[4,qE(t)];case 1:return(n=i.sent())?[4,GE(t,n.token)]:[3,4];case 2:return i.sent(),[4,VE(t)];case 3:i.sent(),i.label=4;case 4:return[4,e.pushManager.getSubscription()];case 5:return(r=i.sent())?[2,r.unsubscribe()]:[2,!0]}})})}function $E(t,e,n){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var r,i,o;return(0,Fu.__generator)(this,function(s){switch(s.label){case 0:return s.trys.push([0,3,,5]),[4,zE(e,t)];case 1:return r=s.sent(),i=(0,Fu.__assign)((0,Fu.__assign)({},t),{token:r,createTime:Date.now()}),[4,jE(e,i)];case 2:return s.sent(),[2,r];case 3:return o=s.sent(),[4,QE(e,n)];case 4:throw s.sent(),o;case 5:return[2]}})})}function JE(t,e){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var n,r;return(0,Fu.__generator)(this,function(i){switch(i.label){case 0:return[4,HE(t,e)];case 1:return n=i.sent(),r={token:n,createTime:Date.now(),subscriptionOptions:e},[4,jE(t,r)];case 2:return i.sent(),[2,r.token]}})})}function XE(t,e){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var n;return(0,Fu.__generator)(this,function(r){switch(r.label){case 0:return[4,t.pushManager.getSubscription()];case 1:return(n=r.sent())?[2,n]:[2,t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:PE(e)})]}})})}function tI(t){return"object"==typeof t&&!!t&&"google.c.a.c_id"in t}function eI(t){return new Promise(function(e){setTimeout(e,t)})}var nI=function(){function t(t){var e=this;this.firebaseDependencies=t,this.isOnBackgroundMessageUsed=null,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",function(t){t.waitUntil(e.onPush(t))}),self.addEventListener("pushsubscriptionchange",function(t){t.waitUntil(e.onSubChange(t))}),self.addEventListener("notificationclick",function(t){t.waitUntil(e.onNotificationClick(t))})}return Object.defineProperty(t.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),t.prototype.setBackgroundMessageHandler=function(t){if(this.isOnBackgroundMessageUsed=!1,!t||"function"!=typeof t)throw kE.create("invalid-bg-handler");this.bgMessageHandler=t},t.prototype.onBackgroundMessage=function(t){var e=this;return this.isOnBackgroundMessageUsed=!0,this.bgMessageHandler=t,function(){e.bgMessageHandler=null}},t.prototype.getToken=function(){var t,e;return(0,Fu.__awaiter)(this,void 0,void 0,function(){var n;return(0,Fu.__generator)(this,function(r){switch(r.label){case 0:return this.vapidKey?[3,2]:[4,qE(this.firebaseDependencies)];case 1:n=r.sent(),this.vapidKey=null!==(e=null===(t=null==n?void 0:n.subscriptionOptions)||void 0===t?void 0:t.vapidKey)&&void 0!==e?e:AE,r.label=2;case 2:return[2,YE(this.firebaseDependencies,self.registration,this.vapidKey)]}})})},t.prototype.deleteToken=function(){return QE(this.firebaseDependencies,self.registration)},t.prototype.requestPermission=function(){throw kE.create("only-available-in-window")},t.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw kE.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw kE.create("invalid-vapid-key");this.vapidKey=t},t.prototype.useServiceWorker=function(){throw kE.create("only-available-in-window")},t.prototype.onMessage=function(){throw kE.create("only-available-in-window")},t.prototype.onTokenRefresh=function(){throw kE.create("only-available-in-window")},t.prototype.onPush=function(t){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var e,n,r,i;return(0,Fu.__generator)(this,function(o){switch(o.label){case 0:return(e=function(t){var e=t.data;if(!e)return null;try{return e.json()}catch(n){return null}}(t))?[4,sI()]:(console.debug("FirebaseMessaging: failed to get parsed MessagePayload from the PushEvent. Skip handling the push."),[2]);case 1:return function(t){return t.some(function(t){return"visible"===t.visibilityState&&!t.url.startsWith("chrome-extension://")})}(n=o.sent())?[2,oI(n,e)]:(r=!1,e.notification?[4,aI(rI(e))]:[3,3]);case 2:o.sent(),r=!0,o.label=3;case 3:return!0===r&&!1===this.isOnBackgroundMessageUsed?[2]:(this.bgMessageHandler&&(i=function(t){var e={from:t.from,collapseKey:t.collapse_key};return function(t,e){if(e.notification){t.notification={};var n=e.notification.title;n&&(t.notification.title=n);var r=e.notification.body;r&&(t.notification.body=r);var i=e.notification.image;i&&(t.notification.image=i)}}(e,t),function(t,e){e.data&&(t.data=e.data)}(e,t),function(t,e){if(e.fcmOptions){t.fcmOptions={};var n=e.fcmOptions.link;n&&(t.fcmOptions.link=n);var r=e.fcmOptions.analytics_label;r&&(t.fcmOptions.analyticsLabel=r)}}(e,t),e}(e),"function"==typeof this.bgMessageHandler?this.bgMessageHandler(i):this.bgMessageHandler.next(i)),[4,eI(1e3)]);case 4:return o.sent(),[2]}})})},t.prototype.onSubChange=function(t){var e,n;return(0,Fu.__awaiter)(this,void 0,void 0,function(){var r;return(0,Fu.__generator)(this,function(i){switch(i.label){case 0:return t.newSubscription?[3,2]:[4,QE(this.firebaseDependencies,self.registration)];case 1:return i.sent(),[2];case 2:return[4,qE(this.firebaseDependencies)];case 3:return r=i.sent(),[4,QE(this.firebaseDependencies,self.registration)];case 4:return i.sent(),[4,YE(this.firebaseDependencies,self.registration,null!==(n=null===(e=null==r?void 0:r.subscriptionOptions)||void 0===e?void 0:e.vapidKey)&&void 0!==n?n:AE)];case 5:return i.sent(),[2]}})})},t.prototype.onNotificationClick=function(t){var e,n;return(0,Fu.__awaiter)(this,void 0,void 0,function(){var r,i,o,s,a;return(0,Fu.__generator)(this,function(u){switch(u.label){case 0:return(r=null===(n=null===(e=t.notification)||void 0===e?void 0:e.data)||void 0===n?void 0:n.FCM_MSG)?t.action?[2]:(t.stopImmediatePropagation(),t.notification.close(),(i=function(t){var e,n,r;return(null!==(n=null===(e=t.fcmOptions)||void 0===e?void 0:e.link)&&void 0!==n?n:null===(r=t.notification)||void 0===r?void 0:r.click_action)||(tI(t.data)?self.location.origin:null)}(r))?(o=new URL(i,self.location.href),s=new URL(self.location.origin),o.host!==s.host?[2]:[4,iI(o)]):[2]):[2];case 1:return(a=u.sent())?[3,4]:[4,self.clients.openWindow(i)];case 2:return a=u.sent(),[4,eI(3e3)];case 3:return u.sent(),[3,6];case 4:return[4,a.focus()];case 5:a=u.sent(),u.label=6;case 6:return a?(r.messageType=xE.NOTIFICATION_CLICKED,r.isFirebaseMessaging=!0,[2,a.postMessage(r)]):[2]}})})},t}();function rI(t){var e,n=(0,Fu.__assign)({},t.notification);return n.data=((e={}).FCM_MSG=t,e),n}function iI(t){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var e,n,r,i,o,s,a;return(0,Fu.__generator)(this,function(u){switch(u.label){case 0:return[4,sI()];case 1:e=u.sent();try{for(n=(0,Fu.__values)(e),r=n.next();!r.done;r=n.next())if(i=r.value,o=new URL(i.url,self.location.href),t.host===o.host)return[2,i]}catch(c){s={error:c}}finally{try{r&&!r.done&&(a=n.return)&&a.call(n)}finally{if(s)throw s.error}}return[2,null]}})})}function oI(t,e){var n,r;e.isFirebaseMessaging=!0,e.messageType=xE.PUSH_RECEIVED;try{for(var i=(0,Fu.__values)(t),o=i.next();!o.done;o=i.next())o.value.postMessage(e)}catch(s){n={error:s}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}function sI(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function aI(t){var e,n=t.actions,r=Notification.maxActions;return n&&r&&n.length>r&&console.warn("This browser only supports "+r+" actions. The remaining actions will not be displayed."),self.registration.showNotification(null!==(e=t.title)&&void 0!==e?e:"",t)}var uI=function(){function t(t){var e=this;this.firebaseDependencies=t,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",function(t){return e.messageEventListener(t)})}return Object.defineProperty(t.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),t.prototype.messageEventListener=function(t){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var e,n;return(0,Fu.__generator)(this,function(r){switch(r.label){case 0:return(e=t.data).isFirebaseMessaging?(this.onMessageCallback&&e.messageType===xE.PUSH_RECEIVED&&("function"==typeof this.onMessageCallback?this.onMessageCallback(function(t){return delete t.messageType,delete t.isFirebaseMessaging,t}(Object.assign({},e))):this.onMessageCallback.next(Object.assign({},e))),tI(n=e.data)&&"1"===n["google.c.a.e"]?[4,this.logEvent(e.messageType,n)]:[3,2]):[2];case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.getVapidKey=function(){return this.vapidKey},t.prototype.getSwReg=function(){return this.swRegistration},t.prototype.getToken=function(t){return(0,Fu.__awaiter)(this,void 0,void 0,function(){return(0,Fu.__generator)(this,function(e){switch(e.label){case 0:return"default"!==Notification.permission?[3,2]:[4,Notification.requestPermission()];case 1:e.sent(),e.label=2;case 2:if("granted"!==Notification.permission)throw kE.create("permission-blocked");return[4,this.updateVapidKey(null==t?void 0:t.vapidKey)];case 3:return e.sent(),[4,this.updateSwReg(null==t?void 0:t.serviceWorkerRegistration)];case 4:return e.sent(),[2,YE(this.firebaseDependencies,this.swRegistration,this.vapidKey)]}})})},t.prototype.updateVapidKey=function(t){return(0,Fu.__awaiter)(this,void 0,void 0,function(){return(0,Fu.__generator)(this,function(e){return t?this.vapidKey=t:this.vapidKey||(this.vapidKey=AE),[2]})})},t.prototype.updateSwReg=function(t){return(0,Fu.__awaiter)(this,void 0,void 0,function(){return(0,Fu.__generator)(this,function(e){switch(e.label){case 0:return t||this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:e.sent(),e.label=2;case 2:if(!t&&this.swRegistration)return[2];if(!(t instanceof ServiceWorkerRegistration))throw kE.create("invalid-sw-registration");return this.swRegistration=t,[2]}})})},t.prototype.registerDefaultSw=function(){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var t,e;return(0,Fu.__generator)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),t=this,[4,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"})];case 1:return t.swRegistration=n.sent(),this.swRegistration.update().catch(function(){}),[3,3];case 2:throw e=n.sent(),kE.create("failed-service-worker-registration",{browserErrorMessage:e.message});case 3:return[2]}})})},t.prototype.deleteToken=function(){return(0,Fu.__awaiter)(this,void 0,void 0,function(){return(0,Fu.__generator)(this,function(t){switch(t.label){case 0:return this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:return[2,QE(this.firebaseDependencies,this.swRegistration)]}})})},t.prototype.requestPermission=function(){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var t;return(0,Fu.__generator)(this,function(e){switch(e.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(t=e.sent()))return[2];throw kE.create("denied"===t?"permission-blocked":"permission-default")}})})},t.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw kE.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw kE.create("invalid-vapid-key");this.vapidKey=t},t.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw kE.create("invalid-sw-registration");if(this.swRegistration)throw kE.create("use-sw-after-get-token");this.swRegistration=t},t.prototype.onMessage=function(t){var e=this;return this.onMessageCallback=t,function(){e.onMessageCallback=null}},t.prototype.setBackgroundMessageHandler=function(){throw kE.create("only-available-in-sw")},t.prototype.onBackgroundMessage=function(){throw kE.create("only-available-in-sw")},t.prototype.onTokenRefresh=function(){return function(){}},t.prototype.logEvent=function(t,e){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var n;return(0,Fu.__generator)(this,function(r){switch(r.label){case 0:return n=function(t){switch(t){case xE.NOTIFICATION_CLICKED:return"notification_open";case xE.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(t),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return r.sent().logEvent(n,{message_id:e["google.c.a.c_id"],message_name:e["google.c.a.c_l"],message_time:e["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)}),[2]}})})},t}();function cI(t){return kE.create("missing-app-config-values",{valueName:t})}var lI={isSupported:hI};function hI(){return self&&"ServiceWorkerGlobalScope"in self?"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}Pi.default.INTERNAL.registerComponent(new Jy.Component("messaging",function(t){var e=t.getProvider("app").getImmediate(),n={app:e,appConfig:function(t){var e,n;if(!t||!t.options)throw cI("App Configuration Object");if(!t.name)throw cI("App Name");var r=t.options;try{for(var i=(0,Fu.__values)(["projectId","apiKey","appId","messagingSenderId"]),o=i.next();!o.done;o=i.next()){var s=o.value;if(!r[s])throw cI(s)}}catch(a){e={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return{appName:t.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}(e),installations:t.getProvider("installations").getImmediate(),analyticsProvider:t.getProvider("analytics-internal")};if(!hI())throw kE.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new nI(n):new uI(n)},"PUBLIC").setServiceProps(lI));var dI,fI,pI,gI="0.4.12",mI=gI,vI="FB-PERF-TRACE-MEASURE",yI="_wt_",_I="_fcp",wI="_fid",bI="@firebase/performance/config",TI="@firebase/performance/configexpire",CI="Performance",EI=((dI={})["trace started"]="Trace {$traceName} was started before.",dI["trace stopped"]="Trace {$traceName} is not running.",dI["nonpositive trace startTime"]="Trace {$traceName} startTime should be positive.",dI["nonpositive trace duration"]="Trace {$traceName} duration should be positive.",dI["no window"]="Window is not available.",dI["no app id"]="App id is not available.",dI["no project id"]="Project id is not available.",dI["no api key"]="Api key is not available.",dI["invalid cc log"]="Attempted to queue invalid cc event",dI["FB not default"]="Performance can only start when Firebase app instance is the default one.",dI["RC response not ok"]="RC response is not ok",dI["invalid attribute name"]="Attribute name {$attributeName} is invalid.",dI["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",dI["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",dI["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",dI),II=new Oi.ErrorFactory("performance",CI,EI),SI=new Ri.Logger(CI);SI.logLevel=Ri.LogLevel.INFO;var kI,AI=function(){function t(t){if(this.window=t,!t)throw II.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}return t.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},t.prototype.mark=function(t){this.performance&&this.performance.mark&&this.performance.mark(t)},t.prototype.measure=function(t,e,n){this.performance&&this.performance.measure&&this.performance.measure(t,e,n)},t.prototype.getEntriesByType=function(t){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(t):[]},t.prototype.getEntriesByName=function(t){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(t):[]},t.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},t.prototype.requiredApisAvailable=function(){return fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled?!!(0,Oi.isIndexedDBAvailable)()||(SI.info("IndexedDB is not supported by current browswer"),!1):(SI.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)},t.prototype.setupObserver=function(t,e){this.PerformanceObserver&&new this.PerformanceObserver(function(t){for(var n=0,r=t.getEntries();n<r.length;n++)e(r[n])}).observe({entryTypes:[t]})},t.getInstance=function(){return void 0===fI&&(fI=new t(pI)),fI},t}();function xI(t,e){var n=t.length-e.length;if(n<0||n>1)throw II.create("invalid String merger input");for(var r=[],i=0;i<t.length;i++)r.push(t.charAt(i)),e.length>i&&r.push(e.charAt(i));return r.join("")}var NI,PI=function(){function t(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=xI("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=xI("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}return t.prototype.getAppId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!t)throw II.create("no app id");return t},t.prototype.getProjectId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!t)throw II.create("no project id");return t},t.prototype.getApiKey=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!t)throw II.create("no api key");return t},t.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},t.getInstance=function(){return void 0===kI&&(kI=new t),kI},t}();function OI(){return NI}var RI=function(t){return t[t.UNKNOWN=0]="UNKNOWN",t[t.VISIBLE=1]="VISIBLE",t[t.HIDDEN=2]="HIDDEN",t}({}),DI=["firebase_","google_","ga_"],LI=new RegExp("^[a-zA-Z]\\w*$");function FI(){var t=AI.getInstance().navigator;return"serviceWorker"in t?t.serviceWorker.controller?2:3:1}function MI(){switch(AI.getInstance().document.visibilityState){case"visible":return RI.VISIBLE;case"hidden":return RI.HIDDEN;default:return RI.UNKNOWN}}function UI(){var t=AI.getInstance().navigator.connection;switch(t&&t.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function qI(t){if(!t)return t;var e=PI.getInstance(),n=t.entries||{};return e.loggingEnabled=void 0===n.fpr_enabled||"true"===String(n.fpr_enabled),n.fpr_log_source&&(e.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(e.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(e.transportKey=n.fpr_log_transport_key),void 0!==n.fpr_vc_network_request_sampling_rate&&(e.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(e.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),e.logTraceAfterSampling=jI(e.tracesSamplingRate),e.logNetworkAfterSampling=jI(e.networkRequestsSamplingRate),t}function jI(t){return Math.random()<=t}var VI,BI=1;function HI(){return BI=2,VI=VI||function(){var t=AI.getInstance().document;return new Promise(function(e){if(t&&"complete"!==t.readyState){var n=function(){"complete"===t.readyState&&(t.removeEventListener("readystatechange",n),e())};t.addEventListener("readystatechange",n)}else e()})}().then(function(){return(t=PI.getInstance().installationsService.getId()).then(function(t){NI=t}),t;var t}).then(function(t){return function(t){var e=function(){var t=AI.getInstance().localStorage;if(t){var e=t.getItem(TI);if(e&&Number(e)>Date.now()){var n=t.getItem(bI);if(n)try{return JSON.parse(n)}catch(Fv){return}}}}();return e?(qI(e),Promise.resolve()):function(t){return(e=PI.getInstance().installationsService.getToken(),e.then(function(t){}),e).then(function(e){var n="https://firebaseremoteconfig.googleapis.com/v1/projects/"+PI.getInstance().getProjectId()+"/namespaces/fireperf:fetch?key="+PI.getInstance().getApiKey(),r=new Request(n,{method:"POST",headers:{Authorization:"FIREBASE_INSTALLATIONS_AUTH "+e},body:JSON.stringify({app_instance_id:t,app_instance_id_token:e,app_id:PI.getInstance().getAppId(),app_version:mI,sdk_version:"0.0.1"})});return fetch(r).then(function(t){if(t.ok)return t.json();throw II.create("RC response not ok")})}).catch(function(){SI.info("Could not fetch config, will use default configs")});var e}(t).then(qI).then(function(t){return function(t){var e=AI.getInstance().localStorage;t&&e&&(e.setItem(bI,JSON.stringify(t)),e.setItem(TI,String(Date.now()+60*PI.getInstance().configTimeToLive*60*1e3)))}(t)},function(){})}(t)}).then(function(){return zI()},function(){return zI()})}function zI(){BI=3}var GI,ZI=1e4,KI=3,WI=[],YI=!1;function QI(t){setTimeout(function(){var t,e;if(0!==KI)return WI.length?(e=(t=WI.splice(0,1e3)).map(function(t){return{source_extension_json_proto3:t.message,event_time_ms:String(t.eventTime)}}),void function(t,e){return function(t){var e=PI.getInstance().getFlTransportFullUrl();return fetch(e,{method:"POST",body:JSON.stringify(t)})}(t).then(function(t){return t.ok||SI.info("Call to Firebase backend failed."),t.json()}).then(function(t){var n=Number(t.nextRequestWaitMillis),r=ZI;isNaN(n)||(r=Math.max(n,r));var i=t.logResponseDetails;Array.isArray(i)&&i.length>0&&"RETRY_REQUEST_LATER"===i[0].responseAction&&(WI=(0,Fu.__spreadArray)((0,Fu.__spreadArray)([],e),WI),SI.info("Retry transport request later.")),KI=3,QI(r)})}({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:PI.getInstance().logSource,log_event:e},t).catch(function(){WI=(0,Fu.__spreadArray)((0,Fu.__spreadArray)([],t),WI),KI--,SI.info("Tries left: "+KI+"."),QI(ZI)})):QI(ZI)},t)}function $I(t){if(!t.eventTime||!t.message)throw II.create("invalid cc log");WI=(0,Fu.__spreadArray)((0,Fu.__spreadArray)([],WI),[t])}function JI(t,e){GI||(GI=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];$I({message:t.apply(void 0,e),eventTime:Date.now()})}}(eS)),GI(t,e)}function XI(t){var e=PI.getInstance();!e.instrumentationEnabled&&t.isAuto||(e.dataCollectionEnabled||t.isAuto)&&AI.getInstance().requiredApisAvailable()&&(t.isAuto&&MI()!==RI.VISIBLE||(3===BI?tS(t):HI().then(function(){return tS(t)},function(){return tS(t)})))}function tS(t){if(OI()){var e=PI.getInstance();e.loggingEnabled&&e.logTraceAfterSampling&&setTimeout(function(){return JI(t,1)},0)}}function eS(t,e){return 0===e?(r={url:(n=t).url,http_method:n.httpMethod||0,http_response_code:200,response_payload_bytes:n.responsePayloadBytes,client_start_time_us:n.startTimeUs,time_to_response_initiated_us:n.timeToResponseInitiatedUs,time_to_response_completed_us:n.timeToResponseCompletedUs},i={application_info:nS(),network_request_metric:r},JSON.stringify(i)):function(t){var e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};0!==Object.keys(t.counters).length&&(e.counters=t.counters);var n=t.getAttributes();0!==Object.keys(n).length&&(e.custom_attributes=n);var r={application_info:nS(),trace_metric:e};return JSON.stringify(r)}(t);var n,r,i}function nS(){return{google_app_id:PI.getInstance().getAppId(),app_instance_id:OI(),web_app_info:{sdk_version:mI,page_url:AI.getInstance().getUrl(),service_worker_status:FI(),visibility_state:MI(),effective_connection_type:UI()},application_process_state:0}}var rS=["_fp",_I,wI],iS=function(){function t(t,e,n){void 0===e&&(e=!1),this.name=t,this.isAuto=e,this.state=1,this.customAttributes={},this.counters={},this.api=AI.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="FB-PERF-TRACE-START-"+this.randomId+"-"+this.name,this.traceStopMark="FB-PERF-TRACE-STOP-"+this.randomId+"-"+this.name,this.traceMeasure=n||"FB-PERF-TRACE-MEASURE-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}return t.prototype.start=function(){if(1!==this.state)throw II.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},t.prototype.stop=function(){if(2!==this.state)throw II.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),XI(this)},t.prototype.record=function(t,e,n){if(t<=0)throw II.create("nonpositive trace startTime",{traceName:this.name});if(e<=0)throw II.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*e),this.startTimeUs=Math.floor(1e3*t),n&&n.attributes&&(this.customAttributes=(0,Fu.__assign)({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var o=i[r];isNaN(Number(n.metrics[o]))||(this.counters[o]=Number(Math.floor(n.metrics[o])))}XI(this)},t.prototype.incrementMetric=function(t,e){void 0===e&&(e=1),this.putMetric(t,void 0===this.counters[t]?e:this.counters[t]+e)},t.prototype.putMetric=function(t,e){if(o=this.name,0===(i=t).length||i.length>100||!(o&&o.startsWith(yI)&&rS.indexOf(i)>-1)&&i.startsWith("_"))throw II.create("invalid custom metric name",{customMetricName:t});var n,r,i,o;this.counters[t]=(n=e,(r=Math.floor(n))<n&&SI.info("Metric value should be an Integer, setting the value as : "+r+"."),r)},t.prototype.getMetric=function(t){return this.counters[t]||0},t.prototype.putAttribute=function(t,e){var n,r=!(0===(n=t).length||n.length>40||DI.some(function(t){return n.startsWith(t)})||!n.match(LI)),i=function(t){return 0!==t.length&&t.length<=100}(e);if(r&&i)this.customAttributes[t]=e;else{if(!r)throw II.create("invalid attribute name",{attributeName:t});if(!i)throw II.create("invalid attribute value",{attributeValue:e})}},t.prototype.getAttribute=function(t){return this.customAttributes[t]},t.prototype.removeAttribute=function(t){void 0!==this.customAttributes[t]&&delete this.customAttributes[t]},t.prototype.getAttributes=function(){return(0,Fu.__assign)({},this.customAttributes)},t.prototype.setStartTime=function(t){this.startTimeUs=t},t.prototype.setDuration=function(t){this.durationUs=t},t.prototype.calculateTraceMetrics=function(){var t=this.api.getEntriesByName(this.traceMeasure),e=t&&t[0];e&&(this.durationUs=Math.floor(1e3*e.duration),this.startTimeUs=Math.floor(1e3*(e.startTime+this.api.getTimeOrigin())))},t.createOobTrace=function(e,n,r){var i=AI.getInstance().getUrl();if(i){var o=new t(yI+i,!0),s=Math.floor(1e3*AI.getInstance().getTimeOrigin());if(o.setStartTime(s),e&&e[0]&&(o.setDuration(Math.floor(1e3*e[0].duration)),o.putMetric("domInteractive",Math.floor(1e3*e[0].domInteractive)),o.putMetric("domContentLoadedEventEnd",Math.floor(1e3*e[0].domContentLoadedEventEnd)),o.putMetric("loadEventEnd",Math.floor(1e3*e[0].loadEventEnd))),n){var a=n.find(function(t){return"first-paint"===t.name});a&&a.startTime&&o.putMetric("_fp",Math.floor(1e3*a.startTime));var u=n.find(function(t){return"first-contentful-paint"===t.name});u&&u.startTime&&o.putMetric(_I,Math.floor(1e3*u.startTime)),r&&o.putMetric(wI,Math.floor(1e3*r))}XI(o)}},t.createUserTimingTrace=function(e){XI(new t(e,!1,e))},t}();function oS(t){var e=t;if(e&&void 0!==e.responseStart){var n=AI.getInstance().getTimeOrigin(),r=Math.floor(1e3*(e.startTime+n)),i=e.responseStart?Math.floor(1e3*(e.responseStart-e.startTime)):void 0,o=Math.floor(1e3*(e.responseEnd-e.startTime));!function(t){var e=PI.getInstance();if(e.instrumentationEnabled){var n=t.url,r=e.logEndPointUrl.split("?")[0],i=e.flTransportEndpointUrl.split("?")[0];n!==r&&n!==i&&e.loggingEnabled&&e.logNetworkAfterSampling&&setTimeout(function(){return JI(t,0)},0)}}({url:e.name&&e.name.split("?")[0],responsePayloadBytes:e.transferSize,startTimeUs:r,timeToResponseInitiatedUs:i,timeToResponseCompletedUs:o})}}function sS(){OI()&&(setTimeout(function(){return function(){var t=AI.getInstance(),e=t.getEntriesByType("navigation"),n=t.getEntriesByType("paint");if(t.onFirstInputDelay){var r=setTimeout(function(){iS.createOobTrace(e,n),r=void 0},5e3);t.onFirstInputDelay(function(t){r&&(clearTimeout(r),iS.createOobTrace(e,n,t))})}else iS.createOobTrace(e,n)}()},0),setTimeout(function(){return function(){for(var t=AI.getInstance(),e=0,n=t.getEntriesByType("resource");e<n.length;e++)oS(n[e]);t.setupObserver("resource",oS)}()},0),setTimeout(function(){return function(){for(var t=AI.getInstance(),e=0,n=t.getEntriesByType("measure");e<n.length;e++)aS(n[e]);t.setupObserver("measure",aS)}()},0))}function aS(t){var e=t.name;e.substring(0,vI.length)!==vI&&iS.createUserTimingTrace(e)}var uS=function(){function t(t){this.app=t,AI.getInstance().requiredApisAvailable()&&(0,Oi.validateIndexedDBOpenable)().then(function(t){t&&(YI||(QI(5500),YI=!0),HI().then(sS,sS))}).catch(function(t){SI.info("Environment doesn't support IndexedDB: "+t)})}return t.prototype.trace=function(t){return new iS(t)},Object.defineProperty(t.prototype,"instrumentationEnabled",{get:function(){return PI.getInstance().instrumentationEnabled},set:function(t){PI.getInstance().instrumentationEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataCollectionEnabled",{get:function(){return PI.getInstance().dataCollectionEnabled},set:function(t){PI.getInstance().dataCollectionEnabled=t},enumerable:!1,configurable:!0}),t}();!function(t){t.INTERNAL.registerComponent(new Jy.Component("performance",function(t){return function(t,e){if("[DEFAULT]"!==t.name)throw II.create("FB not default");if("undefined"==typeof window)throw II.create("no window");return function(t){pI=t}(window),PI.getInstance().firebaseAppInstance=t,PI.getInstance().installationsService=e,new uS(t)}(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())},"PUBLIC")),t.registerVersion("@firebase/performance",gI)}(Pi.default);var cS,lS="https://www.googletagmanager.com/gtag/js",hS=function(t){return t.EVENT="event",t.SET="set",t.CONFIG="config",t}({}),dS=function(t){return t.ADD_SHIPPING_INFO="add_shipping_info",t.ADD_PAYMENT_INFO="add_payment_info",t.ADD_TO_CART="add_to_cart",t.ADD_TO_WISHLIST="add_to_wishlist",t.BEGIN_CHECKOUT="begin_checkout",t.CHECKOUT_PROGRESS="checkout_progress",t.EXCEPTION="exception",t.GENERATE_LEAD="generate_lead",t.LOGIN="login",t.PAGE_VIEW="page_view",t.PURCHASE="purchase",t.REFUND="refund",t.REMOVE_FROM_CART="remove_from_cart",t.SCREEN_VIEW="screen_view",t.SEARCH="search",t.SELECT_CONTENT="select_content",t.SELECT_ITEM="select_item",t.SELECT_PROMOTION="select_promotion",t.SET_CHECKOUT_OPTION="set_checkout_option",t.SHARE="share",t.SIGN_UP="sign_up",t.TIMING_COMPLETE="timing_complete",t.VIEW_CART="view_cart",t.VIEW_ITEM="view_item",t.VIEW_ITEM_LIST="view_item_list",t.VIEW_PROMOTION="view_promotion",t.VIEW_SEARCH_RESULTS="view_search_results",t}({}),fS=new Ri.Logger("@firebase/analytics");function pS(t,e,n,r,i,o){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var s,a,u,c;return(0,Fu.__generator)(this,function(l){switch(l.label){case 0:s=r[i],l.label=1;case 1:return l.trys.push([1,7,,8]),s?[4,e[s]]:[3,3];case 2:return l.sent(),[3,6];case 3:return[4,Promise.all(n)];case 4:return a=l.sent(),(u=a.find(function(t){return t.measurementId===i}))?[4,e[u.appId]]:[3,6];case 5:l.sent(),l.label=6;case 6:return[3,8];case 7:return c=l.sent(),fS.error(c),[3,8];case 8:return t(hS.CONFIG,i,o),[2]}})})}function gS(t,e,n,r,i){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var o,s,a,u,c,l,h;return(0,Fu.__generator)(this,function(d){switch(d.label){case 0:return d.trys.push([0,4,,5]),o=[],i&&i.send_to?(s=i.send_to,Array.isArray(s)||(s=[s]),[4,Promise.all(n)]):[3,2];case 1:for(a=d.sent(),u=function(t){var n=a.find(function(e){return e.measurementId===t}),r=n&&e[n.appId];if(!r)return o=[],"break";o.push(r)},c=0,l=s;c<l.length&&"break"!==u(l[c]);c++);d.label=2;case 2:return 0===o.length&&(o=Object.values(e)),[4,Promise.all(o)];case 3:return d.sent(),t(hS.EVENT,r,i||{}),[3,5];case 4:return h=d.sent(),fS.error(h),[3,5];case 5:return[2]}})})}var mS=((cS={})["already-exists"]="A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",cS["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",cS["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate: {$reason}",cS["invalid-analytics-context"]="Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",cS["indexeddb-unavailable"]="IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",cS["fetch-throttle"]="The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",cS["config-fetch-failed"]="Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",cS["no-api-key"]='The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',cS["no-app-id"]='The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',cS),vS=new Oi.ErrorFactory("analytics","Analytics",mS),yS=new(function(){function t(t,e){void 0===t&&(t={}),void 0===e&&(e=1e3),this.throttleMetadata=t,this.intervalMillis=e}return t.prototype.getThrottleMetadata=function(t){return this.throttleMetadata[t]},t.prototype.setThrottleMetadata=function(t,e){this.throttleMetadata[t]=e},t.prototype.deleteThrottleMetadata=function(t){delete this.throttleMetadata[t]},t}());function _S(t){var e;return(0,Fu.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s,a;return(0,Fu.__generator)(this,function(u){switch(u.label){case 0:return n=t.appId,r={method:"GET",headers:(c=t.apiKey,new Headers({Accept:"application/json","x-goog-api-key":c}))},i="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),[4,fetch(i,r)];case 1:if(200===(o=u.sent()).status||304===o.status)return[3,6];s="",u.label=2;case 2:return u.trys.push([2,4,,5]),[4,o.json()];case 3:return a=u.sent(),(null===(e=a.error)||void 0===e?void 0:e.message)&&(s=a.error.message),[3,5];case 4:return u.sent(),[3,5];case 5:throw vS.create("config-fetch-failed",{httpStatus:o.status,responseMessage:s});case 6:return[2,o.json()]}var c})})}function wS(t,e,n,r){var i=e.throttleEndTimeMillis,o=e.backoffCount;return void 0===r&&(r=yS),(0,Fu.__awaiter)(this,void 0,void 0,function(){var e,s,a,u,c,l,h;return(0,Fu.__generator)(this,function(d){switch(d.label){case 0:e=t.appId,s=t.measurementId,d.label=1;case 1:return d.trys.push([1,3,,4]),[4,bS(n,i)];case 2:return d.sent(),[3,4];case 3:if(a=d.sent(),s)return fS.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID "+s+' provided in the "measurementId" field in the local Firebase config. ['+a.message+"]"),[2,{appId:e,measurementId:s}];throw a;case 4:return d.trys.push([4,6,,7]),[4,_S(t)];case 5:return u=d.sent(),r.deleteThrottleMetadata(e),[2,u];case 6:if(!function(t){if(!(t instanceof Oi.FirebaseError&&t.customData))return!1;var e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(c=d.sent())){if(r.deleteThrottleMetadata(e),s)return fS.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID "+s+' provided in the "measurementId" field in the local Firebase config. ['+c.message+"]"),[2,{appId:e,measurementId:s}];throw c}return l=503===Number(c.customData.httpStatus)?(0,Oi.calculateBackoffMillis)(o,r.intervalMillis,30):(0,Oi.calculateBackoffMillis)(o,r.intervalMillis),h={throttleEndTimeMillis:Date.now()+l,backoffCount:o+1},r.setThrottleMetadata(e,h),fS.debug("Calling attemptFetch again in "+l+" millis"),[2,wS(t,h,n,r)];case 7:return[2]}})})}function bS(t,e){return new Promise(function(n,r){var i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener(function(){clearTimeout(o),r(vS.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}var TS,CS,ES=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(t){this.listeners.push(t)},t.prototype.abort=function(){this.listeners.forEach(function(t){return t()})},t}(),IS={},SS=[],kS={},AS="dataLayer",xS="gtag",NS=!1;function PS(t){if(NS)throw vS.create("already-initialized");t.dataLayerName&&(AS=t.dataLayerName),t.gtagName&&(xS=t.gtagName)}var OS="analytics";function RS(){return(0,Fu.__awaiter)(this,void 0,void 0,function(){return(0,Fu.__generator)(this,function(t){switch(t.label){case 0:if((0,Oi.isBrowserExtension)())return[2,!1];if(!(0,Oi.areCookiesEnabled)())return[2,!1];if(!(0,Oi.isIndexedDBAvailable)())return[2,!1];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,(0,Oi.validateIndexedDBOpenable)()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,!1];case 4:return[2]}})})}!function(t){t.INTERNAL.registerComponent(new Jy.Component(OS,function(t){return function(t,e){!function(){var t=[];if((0,Oi.isBrowserExtension)()&&t.push("This is a browser extension environment."),(0,Oi.areCookiesEnabled)()||t.push("Cookies are not available."),t.length>0){var e=t.map(function(t,e){return"("+(e+1)+") "+t}).join(" "),n=vS.create("invalid-analytics-context",{errorInfo:e});fS.warn(n.message)}}();var n=t.options.appId;if(!n)throw vS.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw vS.create("no-api-key");fS.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '+t.options.measurementId+' provided in the "measurementId" field in the local Firebase config.')}if(null!=IS[n])throw vS.create("already-exists",{id:n});if(!NS){!function(t){var e=[];Array.isArray(window[t])?e=window[t]:window[t]=e}(AS);var r=function(t,e,n,r,i){var o=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(o=window[i]),window[i]=function(t,e,n,r){return function(i,o,s){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var a;return(0,Fu.__generator)(this,function(u){switch(u.label){case 0:return u.trys.push([0,6,,7]),i!==hS.EVENT?[3,2]:[4,gS(t,e,n,o,s)];case 1:return u.sent(),[3,5];case 2:return i!==hS.CONFIG?[3,4]:[4,pS(t,e,n,r,o,s)];case 3:return u.sent(),[3,5];case 4:t(hS.SET,o),u.label=5;case 5:return[3,7];case 6:return a=u.sent(),fS.error(a),[3,7];case 7:return[2]}})})}}(o,t,e,n),{gtagCore:o,wrappedGtag:window[i]}}(IS,SS,kS,AS,xS);CS=r.wrappedGtag,TS=r.gtagCore,NS=!0}return IS[n]=function(t,e,n,r,i,o){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var s,a,u,c,l,h,d;return(0,Fu.__generator)(this,function(f){switch(f.label){case 0:return(s=function(t,e,n){return void 0===e&&(e=yS),(0,Fu.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s,a,u=this;return(0,Fu.__generator)(this,function(c){if(i=(n=t.options).apiKey,o=n.measurementId,!(r=n.appId))throw vS.create("no-app-id");if(!i){if(o)return[2,{measurementId:o,appId:r}];throw vS.create("no-api-key")}return s=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new ES,setTimeout(function(){return(0,Fu.__awaiter)(u,void 0,void 0,function(){return(0,Fu.__generator)(this,function(t){return a.abort(),[2]})})},6e4),[2,wS({appId:r,apiKey:i,measurementId:o},s,a,e)]})})}(t)).then(function(e){n[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&fS.warn("The measurement ID in the local Firebase config ("+t.options.measurementId+") does not match the measurement ID fetched from the server ("+e.measurementId+"). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")}).catch(function(t){return fS.error(t)}),e.push(s),a=function(){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var t;return(0,Fu.__generator)(this,function(e){switch(e.label){case 0:return(0,Oi.isIndexedDBAvailable)()?[3,1]:(fS.warn(vS.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),[2,!1]);case 1:return e.trys.push([1,3,,4]),[4,(0,Oi.validateIndexedDBOpenable)()];case 2:return e.sent(),[3,4];case 3:return t=e.sent(),fS.warn(vS.create("indexeddb-unavailable",{errorInfo:t}).message),[2,!1];case 4:return[2,!0]}})})}().then(function(t){return t?r.getId():void 0}),[4,Promise.all([s,a])];case 1:return u=f.sent(),c=u[0],l=u[1],function(){for(var t=window.document.getElementsByTagName("script"),e=0,n=Object.values(t);e<n.length;e++){var r=n[e];if(r.src&&r.src.includes(lS))return r}return null}()||function(t,e){var n=document.createElement("script");n.src=lS+"?l="+t+"&id="+e,n.async=!0,document.head.appendChild(n)}(o,c.measurementId),i("js",new Date),(d={}).origin="firebase",d.update=!0,h=d,null!=l&&(h.firebase_id=l),i(hS.CONFIG,c.measurementId,h),[2,c.measurementId]}})})}(t,SS,kS,e,TS,AS),{app:t,logEvent:function(t,e,r){(function(t,e,n,r,i){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var o,s;return(0,Fu.__generator)(this,function(a){switch(a.label){case 0:return i&&i.global?(t(hS.EVENT,n,r),[2]):[3,1];case 1:return[4,e];case 2:o=a.sent(),s=(0,Fu.__assign)((0,Fu.__assign)({},r),{send_to:o}),t(hS.EVENT,n,s),a.label=3;case 3:return[2]}})})})(CS,IS[n],t,e,r).catch(function(t){return fS.error(t)})},setCurrentScreen:function(t,e){(function(t,e,n,r){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var i;return(0,Fu.__generator)(this,function(o){switch(o.label){case 0:return r&&r.global?(t(hS.SET,{screen_name:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:i=o.sent(),t(hS.CONFIG,i,{update:!0,screen_name:n}),o.label=3;case 3:return[2]}})})})(CS,IS[n],t,e).catch(function(t){return fS.error(t)})},setUserId:function(t,e){(function(t,e,n,r){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var i;return(0,Fu.__generator)(this,function(o){switch(o.label){case 0:return r&&r.global?(t(hS.SET,{user_id:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:i=o.sent(),t(hS.CONFIG,i,{update:!0,user_id:n}),o.label=3;case 3:return[2]}})})})(CS,IS[n],t,e).catch(function(t){return fS.error(t)})},setUserProperties:function(t,e){(function(t,e,n,r){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var i,o,s,a,u;return(0,Fu.__generator)(this,function(c){switch(c.label){case 0:if(!r||!r.global)return[3,1];for(i={},o=0,s=Object.keys(n);o<s.length;o++)i["user_properties."+(a=s[o])]=n[a];return t(hS.SET,i),[2,Promise.resolve()];case 1:return[4,e];case 2:u=c.sent(),t(hS.CONFIG,u,{update:!0,user_properties:n}),c.label=3;case 3:return[2]}})})})(CS,IS[n],t,e).catch(function(t){return fS.error(t)})},setAnalyticsCollectionEnabled:function(t){(function(t,e){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var n;return(0,Fu.__generator)(this,function(r){switch(r.label){case 0:return[4,t];case 1:return n=r.sent(),window["ga-disable-"+n]=!e,[2]}})})})(IS[n],t).catch(function(t){return fS.error(t)})},INTERNAL:{delete:function(){return delete IS[n],Promise.resolve()}}}}(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())},"PUBLIC").setServiceProps({settings:PS,EventName:dS,isSupported:RS})),t.INTERNAL.registerComponent(new Jy.Component("analytics-internal",function(t){try{return{logEvent:t.getProvider(OS).getImmediate().logEvent}}catch(Yy){throw vS.create("interop-component-reg-failed",{reason:Yy})}},"PRIVATE")),t.registerVersion("@firebase/analytics","0.6.10")}(Pi.default);var DS,LS=function(){function t(t,e,n,r){this.client=t,this.storage=e,this.storageCache=n,this.logger=r}return t.prototype.isCachedDataFresh=function(t,e){if(!e)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-e,r=n<=t;return this.logger.debug("Config fetch cache check. Cache age millis: "+n+". Cache max age millis (minimumFetchIntervalMillis setting): "+t+". Is cache hit: "+r+"."),r},t.prototype.fetch=function(t){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var e,n,r,i,o;return(0,Fu.__generator)(this,function(s){switch(s.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return e=s.sent(),n=e[0],(r=e[1])&&this.isCachedDataFresh(t.cacheMaxAgeMillis,n)?[2,r]:(t.eTag=r&&r.eTag,[4,this.client.fetch(t)]);case 2:return i=s.sent(),o=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===i.status&&o.push(this.storage.setLastSuccessfulFetchResponse(i)),[4,Promise.all(o)];case 3:return s.sent(),[2,i]}})})},t}(),FS=((DS={})["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",DS["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",DS["registration-api-key"]="Undefined API key. Check Firebase app initialization.",DS["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",DS["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",DS["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",DS["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",DS["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",DS["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",DS["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',DS["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',DS["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",DS["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",DS),MS=new Oi.ErrorFactory("remoteconfig","Remote Config",FS),US=function(){function t(t,e,n,r,i,o){this.firebaseInstallations=t,this.sdkVersion=e,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=o}return t.prototype.fetch=function(t){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var e,n,r,i,o,s,a,u,c,l,h,d,f,p,g,m;return(0,Fu.__generator)(this,function(v){switch(v.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:e=v.sent(),n=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",r=n+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,i={sdk_version:this.sdkVersion,app_instance_id:e[0],app_instance_id_token:e[1],app_id:this.appId,language_code:(void 0===y&&(y=navigator),y.languages&&y.languages[0]||y.language)},o={method:"POST",headers:{"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":t.eTag||"*"},body:JSON.stringify(i)},s=fetch(r,o),a=new Promise(function(e,n){t.signal.addEventListener(function(){var t=new Error("The operation was aborted.");t.name="AbortError",n(t)})}),v.label=2;case 2:return v.trys.push([2,5,,6]),[4,Promise.race([s,a])];case 3:return v.sent(),[4,s];case 4:return u=v.sent(),[3,6];case 5:throw c=v.sent(),l="fetch-client-network","AbortError"===c.name&&(l="fetch-timeout"),MS.create(l,{originalErrorMessage:c.message});case 6:if(h=u.status,d=u.headers.get("ETag")||void 0,200!==u.status)return[3,11];g=void 0,v.label=7;case 7:return v.trys.push([7,9,,10]),[4,u.json()];case 8:return g=v.sent(),[3,10];case 9:throw m=v.sent(),MS.create("fetch-client-parse",{originalErrorMessage:m.message});case 10:f=g.entries,p=g.state,v.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===p?h=500:"NO_CHANGE"===p?h=304:"NO_TEMPLATE"!==p&&"EMPTY_CONFIG"!==p||(f={}),304!==h&&200!==h)throw MS.create("fetch-status",{httpStatus:h});return[2,{status:h,eTag:d,config:f}]}var y})})},t}(),qS=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(t){this.listeners.push(t)},t.prototype.abort=function(){this.listeners.forEach(function(t){return t()})},t}(),jS=["1","true","t","yes","y","on"],VS=function(){function t(t,e){void 0===e&&(e=""),this._source=t,this._value=e}return t.prototype.asString=function(){return this._value},t.prototype.asBoolean=function(){return"static"!==this._source&&jS.indexOf(this._value.toLowerCase())>=0},t.prototype.asNumber=function(){if("static"===this._source)return 0;var t=Number(this._value);return isNaN(t)&&(t=0),t},t.prototype.getSource=function(){return this._source},t}(),BS=function(){function t(t,e,n,r,i){this.app=t,this._client=e,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}return t.prototype.setLogLevel=function(t){switch(t){case"debug":this._logger.logLevel=Ri.LogLevel.DEBUG;break;case"silent":this._logger.logLevel=Ri.LogLevel.SILENT;break;default:this._logger.logLevel=Ri.LogLevel.ERROR}},Object.defineProperty(t.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!1,configurable:!0}),t.prototype.activate=function(){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var t,e,n;return(0,Fu.__generator)(this,function(r){switch(r.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return t=r.sent(),n=t[1],(e=t[0])&&e.config&&e.eTag&&e.eTag!==n?[4,Promise.all([this._storageCache.setActiveConfig(e.config),this._storage.setActiveConfigEtag(e.eTag)])]:[2,!1];case 2:return r.sent(),[2,!0]}})})},t.prototype.ensureInitialized=function(){var t=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then(function(){t._isInitializationComplete=!0})),this._initializePromise},t.prototype.fetch=function(){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var t,e,n,r=this;return(0,Fu.__generator)(this,function(i){switch(i.label){case 0:t=new qS,setTimeout(function(){return(0,Fu.__awaiter)(r,void 0,void 0,function(){return(0,Fu.__generator)(this,function(e){return t.abort(),[2]})})},this.settings.fetchTimeoutMillis),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:t})];case 2:return i.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return i.sent(),[3,6];case 4:return e=i.sent(),n=function(t,e){return t instanceof Oi.FirebaseError&&-1!==t.code.indexOf("fetch-throttle")}(e)?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(n)];case 5:throw i.sent(),e;case 6:return[2]}})})},t.prototype.fetchAndActivate=function(){return(0,Fu.__awaiter)(this,void 0,void 0,function(){return(0,Fu.__generator)(this,function(t){switch(t.label){case 0:return[4,this.fetch()];case 1:return t.sent(),[2,this.activate()]}})})},t.prototype.getAll=function(){var t,e,n=this;return(t=this._storageCache.getActiveConfig(),e=this.defaultConfig,void 0===t&&(t={}),void 0===e&&(e={}),Object.keys((0,Fu.__assign)((0,Fu.__assign)({},t),e))).reduce(function(t,e){return t[e]=n.getValue(e),t},{})},t.prototype.getBoolean=function(t){return this.getValue(t).asBoolean()},t.prototype.getNumber=function(t){return this.getValue(t).asNumber()},t.prototype.getString=function(t){return this.getValue(t).asString()},t.prototype.getValue=function(t){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+t+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var e=this._storageCache.getActiveConfig();return e&&void 0!==e[t]?new VS("remote",e[t]):this.defaultConfig&&void 0!==this.defaultConfig[t]?new VS("default",String(this.defaultConfig[t])):(this._logger.debug('Returning static value for key "'+t+'". Define a default or remote value if this is unintentional.'),new VS("static"))},t}();function HS(t,e){var n=t.target.error||void 0;return MS.create(e,{originalErrorMessage:n&&n.message})}var zS="app_namespace_store",GS=function(){function t(t,e,n,r){void 0===r&&(r=new Promise(function(t,e){var n=indexedDB.open("firebase_remote_config",1);n.onerror=function(t){e(HS(t,"storage-open"))},n.onsuccess=function(e){t(e.target.result)},n.onupgradeneeded=function(t){var e=t.target.result;switch(t.oldVersion){case 0:e.createObjectStore(zS,{keyPath:"compositeKey"})}}})),this.appId=t,this.appName=e,this.namespace=n,this.openDbPromise=r}return t.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},t.prototype.setLastFetchStatus=function(t){return this.set("last_fetch_status",t)},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},t.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.set("last_successful_fetch_timestamp_millis",t)},t.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},t.prototype.setLastSuccessfulFetchResponse=function(t){return this.set("last_successful_fetch_response",t)},t.prototype.getActiveConfig=function(){return this.get("active_config")},t.prototype.setActiveConfig=function(t){return this.set("active_config",t)},t.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},t.prototype.setActiveConfigEtag=function(t){return this.set("active_config_etag",t)},t.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},t.prototype.setThrottleMetadata=function(t){return this.set("throttle_metadata",t)},t.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},t.prototype.get=function(t){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var e,n=this;return(0,Fu.__generator)(this,function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return e=r.sent(),[2,new Promise(function(r,i){var o=e.transaction([zS],"readonly").objectStore(zS),s=n.createCompositeKey(t);try{var a=o.get(s);a.onerror=function(t){i(HS(t,"storage-get"))},a.onsuccess=function(t){var e=t.target.result;r(e?e.value:void 0)}}catch(Yy){i(MS.create("storage-get",{originalErrorMessage:Yy&&Yy.message}))}})]}})})},t.prototype.set=function(t,e){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var n,r=this;return(0,Fu.__generator)(this,function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return n=i.sent(),[2,new Promise(function(i,o){var s=n.transaction([zS],"readwrite").objectStore(zS),a=r.createCompositeKey(t);try{var u=s.put({compositeKey:a,value:e});u.onerror=function(t){o(HS(t,"storage-set"))},u.onsuccess=function(){i()}}catch(Yy){o(MS.create("storage-set",{originalErrorMessage:Yy&&Yy.message}))}})]}})})},t.prototype.delete=function(t){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var e,n=this;return(0,Fu.__generator)(this,function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return e=r.sent(),[2,new Promise(function(r,i){var o=e.transaction([zS],"readwrite").objectStore(zS),s=n.createCompositeKey(t);try{var a=o.delete(s);a.onerror=function(t){i(HS(t,"storage-delete"))},a.onsuccess=function(){r()}}catch(Yy){i(MS.create("storage-delete",{originalErrorMessage:Yy&&Yy.message}))}})]}})})},t.prototype.createCompositeKey=function(t){return[this.appId,this.appName,this.namespace,t].join()},t}(),ZS=function(){function t(t){this.storage=t}return t.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},t.prototype.getActiveConfig=function(){return this.activeConfig},t.prototype.loadFromStorage=function(){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var t,e,n,r,i,o;return(0,Fu.__generator)(this,function(s){switch(s.label){case 0:return t=this.storage.getLastFetchStatus(),e=this.storage.getLastSuccessfulFetchTimestampMillis(),n=this.storage.getActiveConfig(),[4,t];case 1:return(r=s.sent())&&(this.lastFetchStatus=r),[4,e];case 2:return(i=s.sent())&&(this.lastSuccessfulFetchTimestampMillis=i),[4,n];case 3:return(o=s.sent())&&(this.activeConfig=o),[2]}})})},t.prototype.setLastFetchStatus=function(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)},t.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)},t.prototype.setActiveConfig=function(t){return this.activeConfig=t,this.storage.setActiveConfig(t)},t}();function KS(t,e){return new Promise(function(n,r){var i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener(function(){clearTimeout(o),r(MS.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}var WS,YS=function(){function t(t,e){this.client=t,this.storage=e}return t.prototype.fetch=function(t){return(0,Fu.__awaiter)(this,void 0,void 0,function(){var e;return(0,Fu.__generator)(this,function(n){switch(n.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return e=n.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(t,e)]}})})},t.prototype.attemptFetch=function(t,e){var n=e.throttleEndTimeMillis,r=e.backoffCount;return(0,Fu.__awaiter)(this,void 0,void 0,function(){var e,i,o;return(0,Fu.__generator)(this,function(s){switch(s.label){case 0:return[4,KS(t.signal,n)];case 1:s.sent(),s.label=2;case 2:return s.trys.push([2,5,,7]),[4,this.client.fetch(t)];case 3:return e=s.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return s.sent(),[2,e];case 5:if(!function(t){if(!(t instanceof Oi.FirebaseError&&t.customData))return!1;var e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(i=s.sent()))throw i;return o={throttleEndTimeMillis:Date.now()+(0,Oi.calculateBackoffMillis)(r),backoffCount:r+1},[4,this.storage.setThrottleMetadata(o)];case 6:return s.sent(),[2,this.attemptFetch(t,o)];case 7:return[2]}})})},t}(),QS="@firebase/remote-config";(WS=Pi.default).INTERNAL.registerComponent(new Jy.Component("remoteConfig",function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("installations").getImmediate();if("undefined"==typeof window)throw MS.create("registration-window");var o=r.options,s=o.projectId,a=o.apiKey,u=o.appId;if(!s)throw MS.create("registration-project-id");if(!a)throw MS.create("registration-api-key");if(!u)throw MS.create("registration-app-id");var c=new GS(u,r.name,n=n||"firebase"),l=new ZS(c),h=new Ri.Logger(QS);h.logLevel=Ri.LogLevel.ERROR;var d=new US(i,WS.SDK_VERSION,n,s,a,u),f=new YS(d,c),p=new LS(f,c,l,h),g=new BS(r,p,l,c,h);return g.ensureInitialized(),g},"PUBLIC").setMultipleInstances(!0)),WS.registerVersion(QS,"0.1.37"),n(6934),Pi.default.registerVersion("firebase","8.6.1","app"),console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the module builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nCommonJS Modules:\nconst firebase = require('firebase/app');\nrequire('firebase/<PACKAGE>');\n\nES Modules:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n\nTypescript:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n"),Pi.default.registerVersion("firebase","8.6.1");const $S=["app-fila-especialista",""];function JS(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"button",2),r.NdJ("click",function(){r.CHM(t);const e=r.oxw();return e.validarEspecialista(e.unEspecialista)}),r._uU(1,"Validar"),r.qZA()}}let XS=(()=>{class t{constructor(t,e){this.userSvc=t,this.storage=e}validarEspecialista(t){this.userSvc.ActualizarEstadoEspecialista(t)}ngOnInit(){console.log("path al principio",this.unEspecialista.imagen),Pi.default.storage().ref().child(this.unEspecialista.imagen).getDownloadURL().then(t=>(console.log(t),this.path=t,t))}verificarAprobado(){return"Especialista"==this.unEspecialista.rol&&0==this.unEspecialista.aprobado}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(X_),r.Y36(WT))},t.\u0275cmp=r.Xpm({type:t,selectors:[["","app-fila-especialista",""]],inputs:{unEspecialista:"unEspecialista"},attrs:$S,decls:14,vars:7,consts:[[1,"imagen-tabla",3,"src"],["type","button","class","btn btn-info btn-circle",3,"click",4,"ngIf"],["type","button",1,"btn","btn-info","btn-circle",3,"click"]],template:function(t,e){1&t&&(r.TgZ(0,"td"),r._UZ(1,"img",0),r.qZA(),r.TgZ(2,"td"),r._uU(3),r.qZA(),r.TgZ(4,"td"),r._uU(5),r.qZA(),r.TgZ(6,"td"),r._uU(7),r.qZA(),r.TgZ(8,"td"),r._uU(9),r.qZA(),r.TgZ(10,"td"),r._uU(11),r.qZA(),r.TgZ(12,"td"),r.YNc(13,JS,2,0,"button",1),r.qZA()),2&t&&(r.xp6(1),r.Q6J("src",e.path,r.LSH),r.xp6(2),r.Oqu(e.unEspecialista.nombre),r.xp6(2),r.Oqu(e.unEspecialista.apellido),r.xp6(2),r.Oqu(e.unEspecialista.edad),r.xp6(2),r.Oqu(e.unEspecialista.dni),r.xp6(2),r.Oqu(e.unEspecialista.especialidad),r.xp6(2),r.Q6J("ngIf",e.verificarAprobado()))},directives:[P],styles:[".imagen-tabla[_ngcontent-%COMP%]{max-height:60px;max-width:60px}"]}),t})();function tk(t,e){1&t&&r._UZ(0,"tr",2),2&t&&r.Q6J("unEspecialista",e.$implicit)}let ek=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-tabla-especialistas"]],inputs:{listaEspecialistas:"listaEspecialistas"},decls:18,vars:1,consts:[[1,"table","text-center"],["app-fila-especialista","",3,"unEspecialista",4,"ngFor","ngForOf"],["app-fila-especialista","",3,"unEspecialista"]],template:function(t,e){1&t&&(r.TgZ(0,"table",0),r.TgZ(1,"thead"),r.TgZ(2,"th"),r._uU(3,"Imagen"),r.qZA(),r.TgZ(4,"th"),r._uU(5,"Nombre"),r.qZA(),r.TgZ(6,"th"),r._uU(7,"Apellido"),r.qZA(),r.TgZ(8,"th"),r._uU(9,"Edad"),r.qZA(),r.TgZ(10,"th"),r._uU(11,"Dni"),r.qZA(),r.TgZ(12,"th"),r._uU(13,"Especialidad/es"),r.qZA(),r.TgZ(14,"th"),r._uU(15,"Validar"),r.qZA(),r.qZA(),r.TgZ(16,"tbody"),r.YNc(17,tk,1,1,"tr",1),r.qZA(),r.qZA()),2&t&&(r.xp6(17),r.Q6J("ngForOf",e.listaEspecialistas))},directives:[x,XS],styles:[""]}),t})();const nk=["app-fila-paciente",""];let rk=(()=>{class t{constructor(t,e){this.userSvc=t,this.storage=e}ngOnInit(){let t=Pi.default.storage().ref(),e=t.child(this.unPaciente.imagen1);e.getDownloadURL().then(t=>(console.log(t),this.path1=t,t)),e=t.child(this.unPaciente.imagen2),e.getDownloadURL().then(t=>(console.log(t),this.path2=t,t))}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(X_),r.Y36(WT))},t.\u0275cmp=r.Xpm({type:t,selectors:[["","app-fila-paciente",""]],inputs:{unPaciente:"unPaciente"},attrs:nk,decls:14,vars:7,consts:[[1,"imagen-tabla",3,"src"]],template:function(t,e){1&t&&(r.TgZ(0,"td"),r._UZ(1,"img",0),r.qZA(),r.TgZ(2,"td"),r._UZ(3,"img",0),r.qZA(),r.TgZ(4,"td"),r._uU(5),r.qZA(),r.TgZ(6,"td"),r._uU(7),r.qZA(),r.TgZ(8,"td"),r._uU(9),r.qZA(),r.TgZ(10,"td"),r._uU(11),r.qZA(),r.TgZ(12,"td"),r._uU(13),r.qZA()),2&t&&(r.xp6(1),r.Q6J("src",e.path1,r.LSH),r.xp6(2),r.Q6J("src",e.path2,r.LSH),r.xp6(2),r.Oqu(e.unPaciente.nombre),r.xp6(2),r.Oqu(e.unPaciente.apellido),r.xp6(2),r.Oqu(e.unPaciente.edad),r.xp6(2),r.Oqu(e.unPaciente.dni),r.xp6(2),r.Oqu(e.unPaciente.obraSocial))},styles:[".imagen-tabla[_ngcontent-%COMP%]{max-height:60px;max-width:60px}"]}),t})();function ik(t,e){1&t&&r._UZ(0,"tr",2),2&t&&r.Q6J("unPaciente",e.$implicit)}let ok=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-tabla-pacientes"]],inputs:{listaPacientes:"listaPacientes"},decls:18,vars:1,consts:[[1,"table","text-center"],["app-fila-paciente","",3,"unPaciente",4,"ngFor","ngForOf"],["app-fila-paciente","",3,"unPaciente"]],template:function(t,e){1&t&&(r.TgZ(0,"table",0),r.TgZ(1,"thead"),r.TgZ(2,"th"),r._uU(3,"Imagen1"),r.qZA(),r.TgZ(4,"th"),r._uU(5,"Imagen2"),r.qZA(),r.TgZ(6,"th"),r._uU(7,"Nombre"),r.qZA(),r.TgZ(8,"th"),r._uU(9,"Apellido"),r.qZA(),r.TgZ(10,"th"),r._uU(11,"Edad"),r.qZA(),r.TgZ(12,"th"),r._uU(13,"Dni"),r.qZA(),r.TgZ(14,"th"),r._uU(15,"Obra Social"),r.qZA(),r.qZA(),r.TgZ(16,"tbody"),r.YNc(17,ik,1,1,"tr",1),r.qZA(),r.qZA()),2&t&&(r.xp6(17),r.Q6J("ngForOf",e.listaPacientes))},directives:[x,rk],styles:[""]}),t})();function sk(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"div",6),r.TgZ(1,"div",7),r.TgZ(2,"h2"),r._uU(3,"\xbfQue desea realizar?"),r.qZA(),r.TgZ(4,"div",8),r.TgZ(5,"div",9),r.TgZ(6,"button",10),r.NdJ("click",function(){return r.CHM(t),r.oxw().accion="especialistas"}),r._uU(7,"Ver Especialistas"),r.qZA(),r.TgZ(8,"button",10),r.NdJ("click",function(){return r.CHM(t),r.oxw().accion="pacientes"}),r._uU(9,"Ver Pacientes"),r.qZA(),r.TgZ(10,"button",10),r.NdJ("click",function(){return r.CHM(t),r.oxw().accion="registro"}),r._uU(11,"Nuevo Usuario"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA()}}function ak(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"button",10),r.NdJ("click",function(){return r.CHM(t),r.oxw(2).accion="especialistas"}),r._uU(1,"Especialistas"),r.qZA()}}function uk(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"button",10),r.NdJ("click",function(){return r.CHM(t),r.oxw(2).accion="pacientes"}),r._uU(1,"Pacientes"),r.qZA()}}function ck(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"button",10),r.NdJ("click",function(){return r.CHM(t),r.oxw(2).accion="registro"}),r._uU(1,"Nuevo Usuario"),r.qZA()}}function lk(t,e){if(1&t&&(r.TgZ(0,"div",11),r.YNc(1,ak,2,0,"button",12),r.YNc(2,uk,2,0,"button",12),r.YNc(3,ck,2,0,"button",12),r.qZA()),2&t){const t=r.oxw();r.xp6(1),r.Q6J("ngIf","especialistas"!=t.accion),r.xp6(1),r.Q6J("ngIf","pacientes"!=t.accion),r.xp6(1),r.Q6J("ngIf","registro"!=t.accion)}}function hk(t,e){if(1&t&&(r.TgZ(0,"div",13),r.TgZ(1,"h1"),r._uU(2,"Especialistas"),r.qZA(),r._UZ(3,"app-tabla-especialistas",14),r.qZA()),2&t){const t=r.oxw();r.xp6(3),r.Q6J("listaEspecialistas",t.listaEspecialistas)}}function dk(t,e){if(1&t&&(r.TgZ(0,"div",13),r.TgZ(1,"h1"),r._uU(2,"Pacientes"),r.qZA(),r._UZ(3,"app-tabla-pacientes",15),r.qZA()),2&t){const t=r.oxw();r.xp6(3),r.Q6J("listaPacientes",t.listaPacientes)}}function fk(t,e){1&t&&(r.TgZ(0,"div",13),r._UZ(1,"app-registro",16),r.qZA()),2&t&&(r.xp6(1),r.Q6J("admin",!0))}const pk=[{path:"login",component:gb},{path:"",component:tw},{path:"registro",component:NC},{path:"usuarios",component:(()=>{class t{constructor(t){this.userSvc=t,this.listaUsuarios=[],this.listaEspecialistas=[],this.listaPacientes=[],this.accion=""}ngOnInit(){this.usuarios=this.userSvc.TraerTodosUsuarios().valueChanges(),this.usuarios.subscribe(t=>{this.listaUsuarios=t,this.listaPacientes=this.listaUsuarios.filter(t=>"Paciente"==t.rol),this.listaEspecialistas=this.listaUsuarios.filter(t=>"Especialista"==t.rol)},t=>console.log(t))}tomarEspecialistaParaValidar(t){}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(X_))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-usuarios"]],decls:7,vars:5,consts:[[1,"container"],[1,"row","margen"],["class","padre text-center",4,"ngIf"],["class","col-6","style","text-align: left;",4,"ngIf"],["class","col-12",4,"ngIf"],["class","col-12 ",4,"ngIf"],[1,"padre","text-center"],[1,"hijo"],[1,"row",2,"margin-top","20px"],[1,"col"],[1,"btn","btn-primary",3,"click"],[1,"col-6",2,"text-align","left"],["class","btn btn-primary",3,"click",4,"ngIf"],[1,"col-12"],[3,"listaEspecialistas"],[3,"listaPacientes"],[3,"admin"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r.TgZ(1,"div",1),r.YNc(2,sk,12,0,"div",2),r.YNc(3,lk,4,3,"div",3),r.YNc(4,hk,4,1,"div",4),r.YNc(5,dk,4,1,"div",4),r.YNc(6,fk,2,1,"div",5),r.qZA(),r.qZA()),2&t&&(r.xp6(2),r.Q6J("ngIf",""==e.accion),r.xp6(1),r.Q6J("ngIf",""!=e.accion),r.xp6(1),r.Q6J("ngIf","especialistas"==e.accion),r.xp6(1),r.Q6J("ngIf","pacientes"==e.accion),r.xp6(1),r.Q6J("ngIf","registro"==e.accion))},directives:[P,ek,ok,NC],styles:[".btn[_ngcontent-%COMP%]{margin-left:10px;margin-right:10px}.margen[_ngcontent-%COMP%]{margin-top:20px}.padre[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.hijo[_ngcontent-%COMP%]{width:auto}"]}),t})(),canActivate:[(()=>{class t{constructor(t,e){this.authSvc=t,this.userSvc=e}canActivate(t,e){return!(t.url[0].path="usuarios")||this.checkAdmin()}canActivateChild(t,e){return!0}canDeactivate(t,e,n,r){return!0}canLoad(t,e){return!0}checkAdmin(){return"Admin"==localStorage.getItem("rol")}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(J_),r.LFG(X_))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()]}];let gk=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[di.forRoot(pk)],di]}),t})();function mk(t,e){1&t&&(r.TgZ(0,"div",9),r.TgZ(1,"button",10),r._uU(2,"Iniciar Sesion"),r.qZA(),r.TgZ(3,"button",11),r._uU(4,"Registro"),r.qZA(),r.qZA())}function vk(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"div",9),r.TgZ(1,"button",12),r.NdJ("click",function(){return r.CHM(t),r.oxw().Logout()}),r._uU(2,"Cerrar Sesion"),r.qZA(),r.qZA()}}let yk=(()=>{class t{constructor(t,e){this.userSvc=t,this.router=e,this.title="TPClinica"}verificarLogin(){return console.log(localStorage.getItem("token")),!!localStorage.getItem("token")}Logout(){this.userSvc.Logout(),pb().fire({title:"Sesion cerrada exitosamente",icon:"success"})}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(X_),r.Y36(Jr))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-root"]],decls:24,vars:2,consts:[[1,"container"],[1,"d-flex","flex-wrap","align-items-center","justify-content-center","justify-content-md-between","py-3","mb-4","border-bottom"],["href","/",1,"d-flex","align-items-center","col-md-3","mb-2","mb-md-0","text-dark","text-decoration-none"],["src","../assets/logo.png",1,"logo"],[1,"nav","col-12","col-md-auto","mb-2","justify-content-center","mb-md-0"],["routerLink","",1,"nav-link","px-2","link-dark"],["routerLink","Usuarios",1,"nav-link","px-2","link-dark"],["href","#",1,"nav-link","px-2","link-dark"],["class","col-md-3 text-end",4,"ngIf"],[1,"col-md-3","text-end"],["routerLink","login","type","button",1,"btn","btn-outline-primary","me-2"],["routerLink","registro","type","button",1,"btn","btn-primary"],["type","button",1,"btn","btn-outline-primary","me-2",3,"click"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r.TgZ(1,"header",1),r.TgZ(2,"a",2),r._UZ(3,"img",3),r.qZA(),r.TgZ(4,"ul",4),r.TgZ(5,"li"),r.TgZ(6,"a",5),r._uU(7,"Home"),r.qZA(),r.qZA(),r.TgZ(8,"li"),r.TgZ(9,"a",6),r._uU(10,"Usuarios"),r.qZA(),r.qZA(),r.TgZ(11,"li"),r.TgZ(12,"a",7),r._uU(13,"Pricing"),r.qZA(),r.qZA(),r.TgZ(14,"li"),r.TgZ(15,"a",7),r._uU(16,"FAQs"),r.qZA(),r.qZA(),r.TgZ(17,"li"),r.TgZ(18,"a",7),r._uU(19,"About"),r.qZA(),r.qZA(),r.qZA(),r.YNc(20,mk,5,0,"div",8),r.YNc(21,vk,3,0,"div",8),r.qZA(),r.qZA(),r.TgZ(22,"div"),r._UZ(23,"router-outlet"),r.qZA()),2&t&&(r.xp6(20),r.Q6J("ngIf",!e.verificarLogin()),r.xp6(1),r.Q6J("ngIf",e.verificarLogin()))},directives:[ti,P,ni,Xr],styles:[".b-example-divider[_ngcontent-%COMP%]{height:3rem;background-color:rgba(0,0,0,.1);border:solid rgba(0,0,0,.15);border-width:1px 0;box-shadow:inset 0 .5em 1.5em rgba(0,0,0,.1),inset 0 .125em .5em rgba(0,0,0,.15)}.form-control-dark[_ngcontent-%COMP%]{color:#fff;background-color:var(--bs-dark);border-color:var(--bs-gray)}.form-control-dark[_ngcontent-%COMP%]:focus{color:#fff;background-color:var(--bs-dark);border-color:#fff;box-shadow:0 0 0 .25rem hsla(0,0%,100%,.25)}.bi[_ngcontent-%COMP%]{vertical-align:-.125em;fill:currentColor}.text-small[_ngcontent-%COMP%]{font-size:85%}.dropdown-toggle[_ngcontent-%COMP%]{outline:0}.logo[_ngcontent-%COMP%]{max-width:60px;max-height:60px}"]}),t})();const _k={apiKey:"AIzaSyBsv5h3PczvIxinvKDo65IsjEIhDFDUU9I",authDomain:"tpclinica-6668b.firebaseapp.com",projectId:"tpclinica-6668b",storageBucket:"tpclinica-6668b.appspot.com",messagingSenderId:"891648176626",appId:"1:891648176626:web:2b94a52fd8ffde3a013b6b"};let wk=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t,bootstrap:[yk]}),t.\u0275inj=r.cJS({providers:[],imports:[[pt,gk,xi.hO.initializeApp(_k),hb,lb]]}),t})();(0,r.G48)(),dt().bootstrapModule(wk).catch(t=>console.error(t))},4762:(t,e,n)=>{"use strict";n.r(e),n.d(e,{__extends:()=>i,__assign:()=>o,__rest:()=>s,__decorate:()=>a,__param:()=>u,__metadata:()=>c,__awaiter:()=>l,__generator:()=>h,__createBinding:()=>d,__exportStar:()=>f,__values:()=>p,__read:()=>g,__spread:()=>m,__spreadArrays:()=>v,__spreadArray:()=>y,__await:()=>_,__asyncGenerator:()=>w,__asyncDelegator:()=>b,__asyncValues:()=>T,__makeTemplateObject:()=>C,__importStar:()=>I,__importDefault:()=>S,__classPrivateFieldGet:()=>k,__classPrivateFieldSet:()=>A});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function a(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}function u(t,e){return function(n,r){e(n,r,t)}}function c(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function l(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((r=r.apply(t,e||[])).next())})}function h(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}var d=Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]};function f(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||d(e,t,n)}function p(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function g(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function m(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(g(arguments[e]));return t}function v(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function y(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}function _(t){return this instanceof _?(this.v=t,this):new _(t)}function w(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(t){i[t]&&(r[t]=function(e){return new Promise(function(n,r){o.push([t,e,n,r])>1||a(t,e)})})}function a(t,e){try{(n=i[t](e)).value instanceof _?Promise.resolve(n.value.v).then(u,c):l(o[0][2],n)}catch(r){l(o[0][3],r)}var n}function u(t){a("next",t)}function c(t){a("throw",t)}function l(t,e){t(e),o.shift(),o.length&&a(o[0][0],o[0][1])}}function b(t){var e,n;return e={},r("next"),r("throw",function(t){throw t}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(r,i){e[r]=t[r]?function(e){return(n=!n)?{value:_(t[r](e)),done:"return"===r}:i?i(e):e}:i}}function T(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=p(t),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(n){e[n]=t[n]&&function(e){return new Promise(function(r,i){!function(t,e,n,r){Promise.resolve(r).then(function(e){t({value:e,done:n})},e)}(r,i,(e=t[n](e)).done,e.value)})}}}function C(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var E=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e};function I(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&d(e,t,n);return E(e,t),e}function S(t){return t&&t.__esModule?t:{default:t}}function k(t,e,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(t):r?r.value:e.get(t)}function A(t,e,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(t,n):i?i.value=n:e.set(t,n),n}}},t=>{"use strict";t(t.s=9992)}]);